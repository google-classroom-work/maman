(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[950],{735:function(w,v,I){"use strict";I.d(v,{b:function(){return u},c:function(){return P}});var P=!1;function u(w){P=w}},97950:function(w,v,I){"use strict";I.r(v),I.d(v,{InGameUi:function(){return oP},leaveGameNonRoot:function(){return Iu},play:function(){return ZP}});var P=I(15861),u=I(64687),Q=I.n(u),K=I(18114),a=I(87128),U=I(85774),p=I(31172),r=I(70193),Y=I.n(r),g=I(30701),J=I(15671),l=I(43144),R=I(19088),x=function(){function w(v){var I=this;(0,J.e)(this,w),this.noa=void 0,this.pointerUnlockRequests=[],this.pointerUnlockCounter=0,this.lastRemovePointerLock=0,this.noa=v,this.noa.container.addListener("lostPointerLock",(function(){Date.now()-I.lastRemovePointerLock>200&&!(0,R.i)()&&U.hc.publish("ToggleOptions")}))}return(0,l.c)(w,[{key:"requestPointerUnlock",value:function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w?-1===this.pointerUnlockRequests.indexOf(w)&&this.pointerUnlockRequests.push(w):this.pointerUnlockCounter++,this.noa.container.setPointerLock(!1),U.hc.publish("pointerLockUpdate",!1),this.lastRemovePointerLock=Date.now()}},{key:"removePointerUnlockRequest",value:function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w?(0,U.pc)(this.pointerUnlockRequests,w):this.pointerUnlockCounter=Math.max(this.pointerUnlockCounter-1,0),this.pointerUnlockRequests.length+this.pointerUnlockCounter===0&&(this.noa.container.setPointerLock(!0),U.hc.publish("pointerLockUpdate",!0))}},{key:"reset",value:function(){this.pointerUnlockRequests=[],this.pointerUnlockCounter=0}}]),w}(),j=I(21021),s=I(69113),B=I.n(s),t=I(37762),i=I(1413),z=I(70937),E=I(65847),o=I(87683),h=I(9488),n=I(52014),W=I(16708),V=I(92643),F=I(64400),O=I(80105),N=I(89117),q=I(74654),m=I.n(q),c=I(49620),M=(I(14313),I(92366)),S=I(54588),e=I(67269),H=I(38017),G=I(40689),L=I(88996),d=I(38017).default;function D(){return D=(0,P.e)(Q().mark((function w(v){var I,P,u,K,a,p,r,Y;return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:I=new window.FontFace("Jetbrains Mono","url(".concat(L,")")).load().then((function(w){document.fonts.add(w)})),(0,N.l)(),P=H.blockTextureAtlas,""!==U.Lc.clientEscMenuOptions.texturePackUrl&&(0!==(u=U.Lc.clientEscMenuOptions.texturePackUrl).indexOf("https://")&&0!==u.indexOf("http://")&&(u="https://".concat(u)),P=u,fetch(P,{redirect:"error"}).then((function(w){w.ok||(console.log("Check atlas Resp not ok, refreshing",w.status,w),U.l.setItem("texturePackUrl",""),window.location.reload())})).catch((function(w){console.log("Check atlas Resp caught, refreshing",w),U.l.setItem("texturePackUrl",""),window.location.reload()}))),K=[I],a=function(w){var I=d[w];if(I.model){if("meta"===(null===w||void 0===w?void 0:w.split("|")[1]))return"continue";var u=T(v,I).then((function(P){var u,Q=P.mesh,K=P.onMeshCreate,a={blockMesh:Q,opaque:!1,solid:null===(u=I.solid)||void 0===u||u,onCustomMeshCreate:K};v.registry.registerBlock(I.id,a),null!==I.meta.metaStr&&f(v,w,a)}));K.push(u)}else{var Q,a=!1;if(Array.isArray(I.texture))if("number"===typeof I.texture[0])I.texture.length>3&&(a=!0),v.registry.registerMaterial(w,{textureURL:null,color:m()(I.texture),texHasAlpha:a});else{var p=I.texture;Q=[];for(var r=0;r<p.length;r++){var Y="".concat(w).concat(r);v.rendering._engine.webGLVersion>=2&&!U.Lc.clientEscMenuOptions.disableTexAtlas&&void 0!==I.atlasIdx[r]?v.registry.registerMaterial(Y,{textureURL:P,atlasIndex:I.atlasIdx[r],texHasAlpha:a}):v.registry.registerMaterial(Y,{textureURL:p[r],texHasAlpha:a}),I.texturePerSide||Q.push(Y)}if(I.texturePerSide){var g,J=(0,t.b)(I.texturePerSide);try{for(J.s();!(g=J.n()).done;){var l=g.value,R="".concat(w).concat(l);Q.push(R)}}catch(w){J.e(w)}finally{J.f()}}}else I.transTex&&(a=!0),v.rendering._engine.webGLVersion>=2&&!U.Lc.clientEscMenuOptions.disableTexAtlas&&void 0!==I.atlasIdx?v.registry.registerMaterial(w,{textureURL:P,atlasIndex:I.atlasIdx,texHasAlpha:a}):v.registry.registerMaterial(w,{textureURL:I.texture,texHasAlpha:a});v.registry.registerBlock(I.id,{material:void 0===Q?w:Q,fluid:I.fluid,opaque:!a})}(0,N.s)(w,I.id,v.rendering.getScene(),void 0)},w.t0=Q().keys((0,U.Ub)(d));case 7:if((w.t1=w.t0()).done){w.next=14;break}if(p=w.t1.value,"continue"!==a(p)){w.next=12;break}return w.abrupt("continue",7);case 12:w.next=7;break;case 14:w.t2=Q().keys(V.I);case 15:if((w.t3=w.t2()).done){w.next=23;break}if(r=w.t3.value,isNaN(Number(r))){w.next=19;break}return w.abrupt("continue",15);case 19:Y=V.I[r],(0,N.s)(r,Y.id,v.rendering.getScene(),Y.type),w.next=15;break;case 23:return b(v),k(v),C(v),y(v),U.hc.publish("loadingScreenState","Loading Game"),w.next=30,Promise.all(K);case 30:case"end":return w.stop()}}),w)}))),D.apply(this,arguments)}function f(w,v,I){for(var P in d){var u=P.split("|");if(u[0]===v&&"meta"===u[1]){var Q,K=d[P];w.registry.registerBlock(d[P].id,(0,i.b)((0,i.b)({},I),{},{solid:null===(Q=K.solid)||void 0===Q||Q})),(0,N.s)(P,d[P].id,w.rendering.getScene(),void 0)}}}function b(w){var v;U.hc.subscribe("serverOption|skyBox",(function(I){!function(I){var P,u,Q,K,a,U,p,r=w.rendering.getScene(),Y="string"===typeof I?I:I.type;v&&w.ents.deleteEntity(v),"lightblue"!==Y&&("sky"===Y?(P=E.b.CreateBox("SkyBox",1e4,w.rendering.getScene(),!1,E.b.BACKSIDE),(u=new n.e("sky",w.rendering.getScene())).inclination=null!==(Q=I.inclination)&&void 0!==Q?Q:-.2,u.turbidity=null!==(K=I.turbidity)&&void 0!==K?K:10,P.infiniteDistance=null===(a=I.infiniteDistance)||void 0===a||a,u.luminance=null!==(U=I.luminance)&&void 0!==U?U:.1,u.cameraOffset.y=null!==(p=I.yCameraOffset)&&void 0!==p?p:50,u.freeze()):(P=F.BoxBuilder.CreateBox("skyBox",{size:1e3},r),(u=new o.b("skyBox",r)).reflectionTexture=new W.c("textures/skyBoxes/".concat(Y,"/"),r),u.reflectionTexture.coordinatesMode=z.e.SKYBOX_MODE,u.diffuseColor=new h.b(0,0,0),u.specularColor=new h.b(0,0,0)),u.backFaceCulling=!1,P.material=u,u.disableLighting=!0,u.freeze(),P.applyFog=!1,v=w.ents.add([0,0,0],null,null,P),w.ents.addComponent(v,w.ents.names.followsEntity,{entity:w.playerEntity}))}(I)}))}function k(w){U.hc.subscribe("serverOption|fogEnabled",(function(w){}))}function C(w){for(var v=w.rendering.getScene(),P=0;P<10;P++){var u=new o.b("breakingBoxTexture".concat(P),v);u.diffuseTexture=new z.e("".concat(I(26927)("./destroy_stage_".concat(P,".png"))),v,null,null,z.e.NEAREST_SAMPLINGMODE),u.diffuseTexture.wrapU=z.e.CLAMP_ADDRESSMODE,u.diffuseTexture.wrapV=z.e.CLAMP_ADDRESSMODE,u.useAlphaFromDiffuseTexture=!0,u.diffuseTexture.hasAlpha=!0,u.alpha=.7,u.diffuseTexture.anisotropicFilteringLevel=1,u.specularColor=new h.b(0,0,0),u.freeze();var Q=E.b.CreateBox("breakingBox".concat(P),1.01,v);Q.material=u,w.rendering.addMeshToScene(Q),Q.setEnabled(!1)}}function y(w){var v=S.c.CreateBox("highlight",{size:1.005},w.rendering._scene),I=w.rendering.makeStandardMaterial("highlightMat");I.backFaceCulling=!1,I.emissiveColor=new h.b(1,1,1),I.alpha=.2,v.material=I,I.freeze(),v.isPickable=!1,w.rendering.addMeshToScene(v),v.setEnabled(!1),w.rendering._highlightMesh=v,v.alwaysSelectAsActiveMesh=!0,v.doNotSyncBoundingInfo=!0}function T(w,v){return Z.apply(this,arguments)}function Z(){return Z=(0,P.e)(Q().mark((function w(v,I){var P,u,K;return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:if(P=I.model.split("|")[0],u=I.model.split("|").includes("rotatable"),K=v.rendering.getScene(),"CentreCross"!==P){w.next=7;break}return w.abrupt("return",{mesh:X(K,I),onMeshCreate:u?rw:null});case 7:if("SquareSided"!==P){w.next=11;break}return w.abrupt("return",{mesh:Iw(K,I),onMeshCreate:u?rw:null});case 11:if("CustomPlanes"!==P){w.next=15;break}return w.abrupt("return",{mesh:ww(K,I.name,I.customPlanesInfo,I.texture),onMeshCreate:u?rw:null});case 15:if("CustomModel"!==P){w.next=23;break}return w.next=18,uw(K,I);case 18:return w.t0=w.sent,w.t1=vw,w.abrupt("return",{mesh:w.t0,onMeshCreate:w.t1});case 23:if("Slab"!==P){w.next=27;break}return w.abrupt("return",{mesh:Pw(K,I),onMeshCreate:pw});case 27:if("door"!==P){w.next=35;break}return w.next=30,uw(K,I);case 30:return w.t2=w.sent,w.t3=Kw,w.abrupt("return",{mesh:w.t2,onMeshCreate:w.t3});case 35:if("trapdoor"!==P){w.next=43;break}return w.next=38,uw(K,I);case 38:return w.t4=w.sent,w.t5=aw,w.abrupt("return",{mesh:w.t4,onMeshCreate:w.t5});case 43:if("rotatableOffset"!==P){w.next=51;break}return w.next=46,uw(K,I);case 46:return w.t6=w.sent,w.t7=Uw,w.abrupt("return",{mesh:w.t6,onMeshCreate:w.t7});case 51:if("rotatable"!==P){w.next=59;break}return w.next=54,uw(K,I);case 54:return w.t8=w.sent,w.t9=rw,w.abrupt("return",{mesh:w.t8,onMeshCreate:w.t9});case 59:console.error("Unknown block mesh type",I.model);case 60:case"end":return w.stop()}}),w)}))),Z.apply(this,arguments)}function A(w,v,I){var P=new M.d("".concat(v,"BlockModelMeshMat"),w),u=new z.e(I,w,null,null,z.e.NEAREST_SAMPLINGMODE);return u.wrapU=z.e.CLAMP_ADDRESSMODE,u.wrapV=z.e.CLAMP_ADDRESSMODE,P.unlit=!0,u.hasAlpha=!0,P.albedoTexture=u,P.freeze(),P}function X(w,v){return ww(w,v.name,[{textureIdx:0,yRot:0},{textureIdx:0,yRot:Math.PI/2}],[v.texture])}function ww(w,v,I,P){var u,Q=[],K={},a=(0,t.b)(I);try{for(a.s();!(u=a.n()).done;){var U=u.value,p=U.textureIdx,r=U.yRot,Y=c.g.CreatePlane("".concat(v,"BlkMdl1"),{size:1,sideOrientation:E.b.DOUBLESIDE},w);Y.isPickable=!1,Y.rotation.y=r,Y.rotation.x=Math.PI,Y.bakeCurrentTransformIntoVertices();var g=P[p];K[g]||(K[g]=A(w,"".concat(v,"TexIdx").concat(p),g)),Y.material=K[g],Q.push(Y)}}catch(w){a.e(w)}finally{a.f()}var J=E.b.MergeMeshes(Q,!0,!1,null,!1,Object.keys(K).length>1);J.isPickable=!1;for(var l=0,R=Q;l<R.length;l++){R[l].dispose()}return J}function vw(w,v,I,P,u){var Q=d[u];w.position.y+=Q.customModelInfo.yOffset}function Iw(w,v){var I=c.g.CreatePlane("".concat(v.name,"BlkMdl1"),{size:1,sideOrientation:E.b.DOUBLESIDE},w);I.isPickable=!1,I.rotation.x=Math.PI,I.position.z=.49,I.bakeCurrentTransformIntoVertices();var P=c.g.CreatePlane("".concat(v.name,"BlkMdl1"),{size:1,sideOrientation:E.b.DOUBLESIDE},w);P.isPickable=!1,P.rotation.x=Math.PI,P.rotation.y=Math.PI,P.position.z=-.49,P.bakeCurrentTransformIntoVertices();var u=c.g.CreatePlane("".concat(v.name,"BlkMdl2"),{size:1,sideOrientation:E.b.DOUBLESIDE},w);u.isPickable=!1,u.rotation.y=Math.PI/2,u.rotation.z=Math.PI,u.position.x=.49,u.bakeCurrentTransformIntoVertices();var Q=c.g.CreatePlane("".concat(v.name,"BlkMdl2"),{size:1,sideOrientation:E.b.DOUBLESIDE},w);Q.isPickable=!1,Q.rotation.y=3*Math.PI/2,Q.rotation.z=Math.PI,Q.position.x=-.49,Q.bakeCurrentTransformIntoVertices();var K=A(w,v.name,v.texture);I.material=K,P.material=K,u.material=K,Q.material=K;var a=E.b.MergeMeshes([I,P,u,Q],!0,!1,null,!1,!1);return a.isPickable=!1,I.dispose(),P.dispose(),u.dispose(),Q.dispose(),a}function Pw(w,v){var I=new N.e(v.name,w)._makeSourceMesh();return I.material.unfreeze(),I.setEnabled(!0),I.material=I.material.clone("BlockModelSlab".concat(v.name)),I.material.disableLighting=!0,I.material.emissiveColor=new h.b(1,1,1),I.material.freeze(),I}function uw(w,v){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,P.e)(Q().mark((function w(v,I){var P,u,K,a,U,p;return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return u=I.blockModel,w.next=3,e.e.ImportMeshAsync("",u,null,v);case 3:return K=w.sent,a=(a=K.meshes).filter((function(w){return w.subMeshes&&w.subMeshes.length>0})),(U=a[0]).name="".concat(I.name,"blockGlbMesh"),p=null!==(P=I.modelScale)&&void 0!==P?P:1,U.scaling=new O.l(1/8*p,1/8*p,1/8*p),U.bakeCurrentTransformIntoVertices(!1),U.material.unlit=!0,U.material.freeze(),U.isPickable=!1,w.abrupt("return",U);case 15:case"end":return w.stop()}}),w)}))),Qw.apply(this,arguments)}function Kw(w,v,I,P,u){var Q,K,a=.4375,U=d[u].name,p=null!==(Q=U.split("|")[2])&&void 0!==Q?Q:"rot1",r="open"===(null!==(K=U.split("|")[3])&&void 0!==K?K:"closed");"rot1"===p&&r?(w.position.x+=a,w.rotation.y+=3*Math.PI/2):"rot1"!==p||r?"rot2"===p&&r?w.position.z-=a:"rot2"!==p||r?"rot3"===p&&r?(w.position.x-=a,w.rotation.y+=Math.PI/2):"rot3"!==p||r?"rot4"===p&&r?(w.position.z+=a,w.rotation.y+=Math.PI):"rot4"!==p||r||(w.position.x-=a,w.rotation.y+=3*Math.PI/2):(w.position.z-=a,w.rotation.y+=Math.PI):(w.position.x+=a,w.rotation.y+=Math.PI/2):w.position.z+=a}function aw(w,v,I,P,u){var Q,K=d[u].name,a=.4375;if("open"===(null!==(Q=K.split("|")[3])&&void 0!==Q?Q:"closed")){var U,p=null!==(U=K.split("|")[2])&&void 0!==U?U:"rot1";"rot4"===p?(w.position.x+=a,w.rotation.y+=3*Math.PI/2):"rot1"===p?w.position.z-=a:"rot2"===p?(w.position.x-=a,w.rotation.y+=Math.PI/2):"rot3"===p&&(w.position.z+=a,w.rotation.y+=Math.PI)}else w.position.y+=a,w.rotation.x+=Math.PI/2}function Uw(w,v,I,P,u){var Q,K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.4375;rw(w,v,I,P,u),void 0!==d[u].rotatableOffsetAmt&&(K=d[u].rotatableOffsetAmt);var a=d[u].name,U=null!==(Q=a.split("|")[2])&&void 0!==Q?Q:"rot1";"rot1"===U?w.position.z-=K:"rot2"===U?w.position.x-=K:"rot3"===U?w.position.z+=K:"rot4"===U&&(w.position.x+=K)}function pw(w,v,I,P,u){var Q=(0,U.N)().getMetaInfo(u).metaStr;"side"===Q.split("|")[2]?(Uw(w,v,I,P,u,.25),w.rotation.x=Math.PI/2):"top"===Q.split("|")[2]?w.position.y+=.25:w.position.y-=.25}function rw(w,v,I,P,u){var Q,K=null!==(Q=d[u].name.split("|")[2])&&void 0!==Q?Q:"rot1";"rot2"===K?w.rotation.y+=Math.PI/2:"rot3"===K?w.rotation.y+=Math.PI:"rot4"===K&&(w.rotation.y+=3*Math.PI/2)}G.e.Configuration={decoder:{wasmUrl:"/static/draco_wasm_wrapper_gltf.js",wasmBinaryUrl:"/static/draco_decoder_gltf.wasm"}};var Yw=I(29439),gw=I(85882),Jw=I(52126),lw=I(47786),Rw=function(){function w(v,I){var P=this;(0,J.e)(this,w),this.worker=void 0,this.waitingChunkCallbacks={},this.seedInitReqCounts={},this.worker=I(),this.worker.onmessage=function(w){var v=w.data,I=v.id,u=v.array,Q=v.metadata;if(u=lw(new Uint16Array(u.data.buffer),[Jw.g.chunkSize,Jw.g.chunkSize,Jw.g.chunkSize]),P.waitingChunkCallbacks[I]){var K,a=(0,t.b)(P.waitingChunkCallbacks[I]);try{for(a.s();!(K=a.n()).done;){(0,K.value)(u,Q)}}catch(w){a.e(w)}finally{a.f()}}delete P.waitingChunkCallbacks[I]},this.worker.onerror=function(w){console.error("error from webworker\n",w)},this.worker.postMessage({type:"workerInit",chunkSize:Jw.g.chunkSize,blockMetadata:v})}return(0,l.c)(w,[{key:"initialiseSeed",value:function(w){var v;this.worker.postMessage({type:"createSeed",seed:w}),this.seedInitReqCounts[w]=(null!==(v=this.seedInitReqCounts[w])&&void 0!==v?v:0)+1}},{key:"destroySeed",value:function(w){void 0!==this.seedInitReqCounts[w]&&this.seedInitReqCounts[w]>0&&(this.seedInitReqCounts[w]=this.seedInitReqCounts[w]-1),this.seedInitReqCounts[w]||this.worker.postMessage({type:"deleteSeed",seed:w}),this.seedInitReqCounts[w]<=0&&delete this.seedInitReqCounts[w]}},{key:"threadedGetChunk",value:function(w,v,I,P,u,Q){var K,a="".concat(I,"|").concat(P,"|").concat(u,"|").concat(w),U=null!==(K=this.waitingChunkCallbacks[a])&&void 0!==K?K:[];U.push(Q),this.waitingChunkCallbacks[a]=U;var p=[v.data.buffer];this.worker.postMessage({type:"chunk",id:a,array:v},p)}}]),w}(),xw=I(23257),jw=I(20477),sw=I.n(jw);function Bw(){return sw()('/*! For license information please see procGen.worker.e05027c3.worker.js.LICENSE.txt */\n!function(){var w={189:function(w,v,I){var P=I(4687),u=I(7424).default,Q=I(4704).default,K=I(861).default,a=I(6690).default,U=I(9728).default,p=function(w){try{return Object(function(){var w=new Error("Cannot find module \'perf_hooks\'");throw w.code="MODULE_NOT_FOUND",w}())}catch(v){return w}}(Date).now,r=function(w){return w&&w===Math.floor(w)&&w>0&&isFinite(w)},Y=function(w){"use strict";function v(w){var I=w.max,P=void 0===I?1/0:I,u=w.ttl,Q=w.updateAgeOnGet,K=void 0!==Q&&Q,U=w.noUpdateTTL,p=void 0!==U&&U,Y=w.dispose;if(a(this,v),this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,void 0!==u&&!r(u))throw new TypeError("ttl must be positive integer if set");if(!r(P)&&P!==1/0)throw new TypeError("max must be positive integer or Infinity");if(this.ttl=u,this.max=P,this.updateAgeOnGet=K,this.noUpdateTTL=p,void 0!==Y){if("function"!==typeof Y)throw new TypeError("dispose must be function if set");this.dispose=Y}}return U(v,[{key:"clear",value:function(){var w=this.dispose!==v.prototype.dispose?K(this):[];this.data.clear(),this.expirationMap.clear(),this.expirations=Object.create(null);var I,P=Q(w);try{for(P.s();!(I=P.n()).done;){var a=u(I.value,2),U=a[0],p=a[1];this.dispose(p,U,"delete")}}catch(w){P.e(w)}finally{P.f()}}},{key:"set",value:function(w,v){var I=this,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=P.ttl,Q=void 0===u?this.ttl:u,K=P.noUpdateTTL,a=void 0===K?this.noUpdateTTL:K,U=P.noDisposeOnSet,Y=void 0===U?this.noDisposeOnSet:U;if(!r(Q))throw new TypeError("ttl must be positive integer");var g=this.expirationMap.get(w),J=p(),l=void 0===g?void 0:this.data.get(w);if(void 0!==g){if(a&&g>J)return l!==v&&(this.data.set(w,v),Y||this.dispose(l,w,"set")),this;var R=this.expirations[g];!R||R.length<=1?delete this.expirations[g]:this.expirations[g]=R.filter((function(v){return v!==w}))}var x=Math.ceil(J+Q);if(this.expirationMap.set(w,x),this.data.set(w,v),!this.expirations[x]){var j=setTimeout((function(){return I.purgeStale()}),Q);j.unref&&j.unref(),this.expirations[x]=[]}for(this.expirations[x].push(w);this.size>this.max;)this.purgeToCapacity();return!Y&&g&&l!==v&&this.dispose(l,w,"set"),this}},{key:"has",value:function(w){return this.data.has(w)}},{key:"getRemainingTTL",value:function(w){var v=this.expirationMap.get(w);return void 0!==v?Math.max(0,v-p()):0}},{key:"get",value:function(w){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=v.updateAgeOnGet,P=void 0===I?this.updateAgeOnGet:I,u=v.ttl,Q=void 0===u?this.ttl:u,K=this.data.get(w);return P&&this.set(w,K,{noUpdateTTL:!1,noDisposeOnSet:!0,ttl:Q}),K}},{key:"dispose",value:function(w,v){}},{key:"delete",value:function(w){var v=this.expirationMap.get(w);if(void 0!==v){var I=this.data.get(w);this.data.delete(w),this.expirationMap.delete(w);var P=this.expirations[v];return P&&P.length<=1?delete this.expirations[v]:this.expirations[v]=P.filter((function(v){return v!==w})),this.dispose(I,w,"delete"),!0}return!1}},{key:"purgeToCapacity",value:function(){for(var w in this.expirations){var v=this.expirations[w];if(this.size-v.length>=this.max){var I,P=Q(v);try{for(P.s();!(I=P.n()).done;){var u=I.value,K=this.data.get(u);this.data.delete(u),this.expirationMap.delete(u),this.dispose(K,u,"evict")}}catch(w){P.e(w)}finally{P.f()}delete this.expirations[w]}else{var a,U=this.size-this.max,p=Q(v.splice(0,U));try{for(p.s();!(a=p.n()).done;){var r=a.value,Y=this.data.get(r);this.data.delete(r),this.expirationMap.delete(r),this.dispose(Y,r,"evict")}}catch(w){p.e(w)}finally{p.f()}}return}}},{key:"size",get:function(){return this.data.size}},{key:"purgeStale",value:function(){var w=p();for(var v in this.expirations){if(v>w)return;var I,P=Q(this.expirations[v]);try{for(P.s();!(I=P.n()).done;){var u=I.value,K=this.data.get(u);this.data.delete(u),this.expirationMap.delete(u),this.dispose(K,u,"stale")}}catch(w){P.e(w)}finally{P.f()}delete this.expirations[v]}}},{key:"entries",value:P.mark((function w(){var v,I,u,K;return P.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:w.t0=P.keys(this.expirations);case 1:if((w.t1=w.t0()).done){w.next=22;break}v=w.t1.value,I=Q(this.expirations[v]),w.prev=4,I.s();case 6:if((u=I.n()).done){w.next=12;break}return K=u.value,w.next=10,[K,this.data.get(K)];case 10:w.next=6;break;case 12:w.next=17;break;case 14:w.prev=14,w.t2=w.catch(4),I.e(w.t2);case 17:return w.prev=17,I.f(),w.finish(17);case 20:w.next=1;break;case 22:case"end":return w.stop()}}),w,this,[[4,14,17,20]])}))},{key:"keys",value:P.mark((function w(){var v,I,u,K;return P.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:w.t0=P.keys(this.expirations);case 1:if((w.t1=w.t0()).done){w.next=22;break}v=w.t1.value,I=Q(this.expirations[v]),w.prev=4,I.s();case 6:if((u=I.n()).done){w.next=12;break}return K=u.value,w.next=10,K;case 10:w.next=6;break;case 12:w.next=17;break;case 14:w.prev=14,w.t2=w.catch(4),I.e(w.t2);case 17:return w.prev=17,I.f(),w.finish(17);case 20:w.next=1;break;case 22:case"end":return w.stop()}}),w,this,[[4,14,17,20]])}))},{key:"values",value:P.mark((function w(){var v,I,u,K;return P.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:w.t0=P.keys(this.expirations);case 1:if((w.t1=w.t0()).done){w.next=22;break}v=w.t1.value,I=Q(this.expirations[v]),w.prev=4,I.s();case 6:if((u=I.n()).done){w.next=12;break}return K=u.value,w.next=10,this.data.get(K);case 10:w.next=6;break;case 12:w.next=17;break;case 14:w.prev=14,w.t2=w.catch(4),I.e(w.t2);case 17:return w.prev=17,I.f(),w.finish(17);case 20:w.next=1;break;case 22:case"end":return w.stop()}}),w,this,[[4,14,17,20]])}))},{key:w,value:function(){return this.entries()}}]),v}(Symbol.iterator);w.exports=Y},2470:function(w,v){"use strict";v.byteLength=function(w){var v=U(w),I=v[0],P=v[1];return 3*(I+P)/4-P},v.toByteArray=function(w){var v,I,Q=U(w),K=Q[0],a=Q[1],p=new u(function(w,v,I){return 3*(v+I)/4-I}(0,K,a)),r=0,Y=a>0?K-4:K;for(I=0;I<Y;I+=4)v=P[w.charCodeAt(I)]<<18|P[w.charCodeAt(I+1)]<<12|P[w.charCodeAt(I+2)]<<6|P[w.charCodeAt(I+3)],p[r++]=v>>16&255,p[r++]=v>>8&255,p[r++]=255&v;2===a&&(v=P[w.charCodeAt(I)]<<2|P[w.charCodeAt(I+1)]>>4,p[r++]=255&v);1===a&&(v=P[w.charCodeAt(I)]<<10|P[w.charCodeAt(I+1)]<<4|P[w.charCodeAt(I+2)]>>2,p[r++]=v>>8&255,p[r++]=255&v);return p},v.fromByteArray=function(w){for(var v,P=w.length,u=P%3,Q=[],K=16383,a=0,U=P-u;a<U;a+=K)Q.push(p(w,a,a+K>U?U:a+K));1===u?(v=w[P-1],Q.push(I[v>>2]+I[v<<4&63]+"==")):2===u&&(v=(w[P-2]<<8)+w[P-1],Q.push(I[v>>10]+I[v>>4&63]+I[v<<2&63]+"="));return Q.join("")};for(var I=[],P=[],u="undefined"!==typeof Uint8Array?Uint8Array:Array,Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=0,a=Q.length;K<a;++K)I[K]=Q[K],P[Q.charCodeAt(K)]=K;function U(w){var v=w.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=w.indexOf("=");return-1===I&&(I=v),[I,I===v?0:4-I%4]}function p(w,v,P){for(var u,Q,K=[],a=v;a<P;a+=3)u=(w[a]<<16&16711680)+(w[a+1]<<8&65280)+(255&w[a+2]),K.push(I[(Q=u)>>18&63]+I[Q>>12&63]+I[Q>>6&63]+I[63&Q]);return K.join("")}P["-".charCodeAt(0)]=62,P["_".charCodeAt(0)]=63},918:function(w,v,I){"use strict";var P=I(2470),u=I(545),Q=I(7146);function K(){return U.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(w,v){if(K()<v)throw new RangeError("Invalid typed array length");return U.TYPED_ARRAY_SUPPORT?(w=new Uint8Array(v)).__proto__=U.prototype:(null===w&&(w=new U(v)),w.length=v),w}function U(w,v,I){if(!U.TYPED_ARRAY_SUPPORT&&!(this instanceof U))return new U(w,v,I);if("number"===typeof w){if("string"===typeof v)throw new Error("If encoding is specified then the first argument must be a string");return Y(this,w)}return p(this,w,v,I)}function p(w,v,I,P){if("number"===typeof v)throw new TypeError(\'"value" argument must not be a number\');return"undefined"!==typeof ArrayBuffer&&v instanceof ArrayBuffer?function(w,v,I,P){if(v.byteLength,I<0||v.byteLength<I)throw new RangeError("\'offset\' is out of bounds");if(v.byteLength<I+(P||0))throw new RangeError("\'length\' is out of bounds");v=void 0===I&&void 0===P?new Uint8Array(v):void 0===P?new Uint8Array(v,I):new Uint8Array(v,I,P);U.TYPED_ARRAY_SUPPORT?(w=v).__proto__=U.prototype:w=g(w,v);return w}(w,v,I,P):"string"===typeof v?function(w,v,I){"string"===typeof I&&""!==I||(I="utf8");if(!U.isEncoding(I))throw new TypeError(\'"encoding" must be a valid string encoding\');var P=0|l(v,I),u=(w=a(w,P)).write(v,I);u!==P&&(w=w.slice(0,u));return w}(w,v,I):function(w,v){if(U.isBuffer(v)){var I=0|J(v.length);return 0===(w=a(w,I)).length||v.copy(w,0,0,I),w}if(v){if("undefined"!==typeof ArrayBuffer&&v.buffer instanceof ArrayBuffer||"length"in v)return"number"!==typeof v.length||(P=v.length)!==P?a(w,0):g(w,v);if("Buffer"===v.type&&Q(v.data))return g(w,v.data)}var P;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(w,v)}function r(w){if("number"!==typeof w)throw new TypeError(\'"size" argument must be a number\');if(w<0)throw new RangeError(\'"size" argument must not be negative\')}function Y(w,v){if(r(v),w=a(w,v<0?0:0|J(v)),!U.TYPED_ARRAY_SUPPORT)for(var I=0;I<v;++I)w[I]=0;return w}function g(w,v){var I=v.length<0?0:0|J(v.length);w=a(w,I);for(var P=0;P<I;P+=1)w[P]=255&v[P];return w}function J(w){if(w>=K())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K().toString(16)+" bytes");return 0|w}function l(w,v){if(U.isBuffer(w))return w.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(w)||w instanceof ArrayBuffer))return w.byteLength;"string"!==typeof w&&(w=""+w);var I=w.length;if(0===I)return 0;for(var P=!1;;)switch(v){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":case void 0:return d(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*I;case"hex":return I>>>1;case"base64":return D(w).length;default:if(P)return d(w).length;v=(""+v).toLowerCase(),P=!0}}function R(w,v,I){var P=!1;if((void 0===v||v<0)&&(v=0),v>this.length)return"";if((void 0===I||I>this.length)&&(I=this.length),I<=0)return"";if((I>>>=0)<=(v>>>=0))return"";for(w||(w="utf8");;)switch(w){case"hex":return O(this,v,I);case"utf8":case"utf-8":return n(this,v,I);case"ascii":return V(this,v,I);case"latin1":case"binary":return F(this,v,I);case"base64":return h(this,v,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,v,I);default:if(P)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),P=!0}}function x(w,v,I){var P=w[v];w[v]=w[I],w[I]=P}function j(w,v,I,P,u){if(0===w.length)return-1;if("string"===typeof I?(P=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,isNaN(I)&&(I=u?0:w.length-1),I<0&&(I=w.length+I),I>=w.length){if(u)return-1;I=w.length-1}else if(I<0){if(!u)return-1;I=0}if("string"===typeof v&&(v=U.from(v,P)),U.isBuffer(v))return 0===v.length?-1:s(w,v,I,P,u);if("number"===typeof v)return v&=255,U.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?u?Uint8Array.prototype.indexOf.call(w,v,I):Uint8Array.prototype.lastIndexOf.call(w,v,I):s(w,[v],I,P,u);throw new TypeError("val must be string, number or Buffer")}function s(w,v,I,P,u){var Q,K=1,a=w.length,U=v.length;if(void 0!==P&&("ucs2"===(P=String(P).toLowerCase())||"ucs-2"===P||"utf16le"===P||"utf-16le"===P)){if(w.length<2||v.length<2)return-1;K=2,a/=2,U/=2,I/=2}function p(w,v){return 1===K?w[v]:w.readUInt16BE(v*K)}if(u){var r=-1;for(Q=I;Q<a;Q++)if(p(w,Q)===p(v,-1===r?0:Q-r)){if(-1===r&&(r=Q),Q-r+1===U)return r*K}else-1!==r&&(Q-=Q-r),r=-1}else for(I+U>a&&(I=a-U),Q=I;Q>=0;Q--){for(var Y=!0,g=0;g<U;g++)if(p(w,Q+g)!==p(v,g)){Y=!1;break}if(Y)return Q}return-1}function B(w,v,I,P){I=Number(I)||0;var u=w.length-I;P?(P=Number(P))>u&&(P=u):P=u;var Q=v.length;if(Q%2!==0)throw new TypeError("Invalid hex string");P>Q/2&&(P=Q/2);for(var K=0;K<P;++K){var a=parseInt(v.substr(2*K,2),16);if(isNaN(a))return K;w[I+K]=a}return K}function t(w,v,I,P){return f(d(v,w.length-I),w,I,P)}function i(w,v,I,P){return f(function(w){for(var v=[],I=0;I<w.length;++I)v.push(255&w.charCodeAt(I));return v}(v),w,I,P)}function z(w,v,I,P){return i(w,v,I,P)}function E(w,v,I,P){return f(D(v),w,I,P)}function o(w,v,I,P){return f(function(w,v){for(var I,P,u,Q=[],K=0;K<w.length&&!((v-=2)<0);++K)P=(I=w.charCodeAt(K))>>8,u=I%256,Q.push(u),Q.push(P);return Q}(v,w.length-I),w,I,P)}function h(w,v,I){return 0===v&&I===w.length?P.fromByteArray(w):P.fromByteArray(w.slice(v,I))}function n(w,v,I){I=Math.min(w.length,I);for(var P=[],u=v;u<I;){var Q,K,a,U,p=w[u],r=null,Y=p>239?4:p>223?3:p>191?2:1;if(u+Y<=I)switch(Y){case 1:p<128&&(r=p);break;case 2:128===(192&(Q=w[u+1]))&&(U=(31&p)<<6|63&Q)>127&&(r=U);break;case 3:Q=w[u+1],K=w[u+2],128===(192&Q)&&128===(192&K)&&(U=(15&p)<<12|(63&Q)<<6|63&K)>2047&&(U<55296||U>57343)&&(r=U);break;case 4:Q=w[u+1],K=w[u+2],a=w[u+3],128===(192&Q)&&128===(192&K)&&128===(192&a)&&(U=(15&p)<<18|(63&Q)<<12|(63&K)<<6|63&a)>65535&&U<1114112&&(r=U)}null===r?(r=65533,Y=1):r>65535&&(r-=65536,P.push(r>>>10&1023|55296),r=56320|1023&r),P.push(r),u+=Y}return function(w){var v=w.length;if(v<=W)return String.fromCharCode.apply(String,w);var I="",P=0;for(;P<v;)I+=String.fromCharCode.apply(String,w.slice(P,P+=W));return I}(P)}v.Buffer=U,v.SlowBuffer=function(w){+w!=w&&(w=0);return U.alloc(+w)},v.INSPECT_MAX_BYTES=50,U.TYPED_ARRAY_SUPPORT=void 0!==I.g.TYPED_ARRAY_SUPPORT?I.g.TYPED_ARRAY_SUPPORT:function(){try{var w=new Uint8Array(1);return w.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===w.foo()&&"function"===typeof w.subarray&&0===w.subarray(1,1).byteLength}catch(w){return!1}}(),v.kMaxLength=K(),U.poolSize=8192,U._augment=function(w){return w.__proto__=U.prototype,w},U.from=function(w,v,I){return p(null,w,v,I)},U.TYPED_ARRAY_SUPPORT&&(U.prototype.__proto__=Uint8Array.prototype,U.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&U[Symbol.species]===U&&Object.defineProperty(U,Symbol.species,{value:null,configurable:!0})),U.alloc=function(w,v,I){return function(w,v,I,P){return r(v),v<=0?a(w,v):void 0!==I?"string"===typeof P?a(w,v).fill(I,P):a(w,v).fill(I):a(w,v)}(null,w,v,I)},U.allocUnsafe=function(w){return Y(null,w)},U.allocUnsafeSlow=function(w){return Y(null,w)},U.isBuffer=function(w){return!(null==w||!w._isBuffer)},U.compare=function(w,v){if(!U.isBuffer(w)||!U.isBuffer(v))throw new TypeError("Arguments must be Buffers");if(w===v)return 0;for(var I=w.length,P=v.length,u=0,Q=Math.min(I,P);u<Q;++u)if(w[u]!==v[u]){I=w[u],P=v[u];break}return I<P?-1:P<I?1:0},U.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},U.concat=function(w,v){if(!Q(w))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===w.length)return U.alloc(0);var I;if(void 0===v)for(v=0,I=0;I<w.length;++I)v+=w[I].length;var P=U.allocUnsafe(v),u=0;for(I=0;I<w.length;++I){var K=w[I];if(!U.isBuffer(K))throw new TypeError(\'"list" argument must be an Array of Buffers\');K.copy(P,u),u+=K.length}return P},U.byteLength=l,U.prototype._isBuffer=!0,U.prototype.swap16=function(){var w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var v=0;v<w;v+=2)x(this,v,v+1);return this},U.prototype.swap32=function(){var w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var v=0;v<w;v+=4)x(this,v,v+3),x(this,v+1,v+2);return this},U.prototype.swap64=function(){var w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var v=0;v<w;v+=8)x(this,v,v+7),x(this,v+1,v+6),x(this,v+2,v+5),x(this,v+3,v+4);return this},U.prototype.toString=function(){var w=0|this.length;return 0===w?"":0===arguments.length?n(this,0,w):R.apply(this,arguments)},U.prototype.equals=function(w){if(!U.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===U.compare(this,w)},U.prototype.inspect=function(){var w="",I=v.INSPECT_MAX_BYTES;return this.length>0&&(w=this.toString("hex",0,I).match(/.{2}/g).join(" "),this.length>I&&(w+=" ... ")),"<Buffer "+w+">"},U.prototype.compare=function(w,v,I,P,u){if(!U.isBuffer(w))throw new TypeError("Argument must be a Buffer");if(void 0===v&&(v=0),void 0===I&&(I=w?w.length:0),void 0===P&&(P=0),void 0===u&&(u=this.length),v<0||I>w.length||P<0||u>this.length)throw new RangeError("out of range index");if(P>=u&&v>=I)return 0;if(P>=u)return-1;if(v>=I)return 1;if(this===w)return 0;for(var Q=(u>>>=0)-(P>>>=0),K=(I>>>=0)-(v>>>=0),a=Math.min(Q,K),p=this.slice(P,u),r=w.slice(v,I),Y=0;Y<a;++Y)if(p[Y]!==r[Y]){Q=p[Y],K=r[Y];break}return Q<K?-1:K<Q?1:0},U.prototype.includes=function(w,v,I){return-1!==this.indexOf(w,v,I)},U.prototype.indexOf=function(w,v,I){return j(this,w,v,I,!0)},U.prototype.lastIndexOf=function(w,v,I){return j(this,w,v,I,!1)},U.prototype.write=function(w,v,I,P){if(void 0===v)P="utf8",I=this.length,v=0;else if(void 0===I&&"string"===typeof v)P=v,I=this.length,v=0;else{if(!isFinite(v))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");v|=0,isFinite(I)?(I|=0,void 0===P&&(P="utf8")):(P=I,I=void 0)}var u=this.length-v;if((void 0===I||I>u)&&(I=u),w.length>0&&(I<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var Q=!1;;)switch(P){case"hex":return B(this,w,v,I);case"utf8":case"utf-8":return t(this,w,v,I);case"ascii":return i(this,w,v,I);case"latin1":case"binary":return z(this,w,v,I);case"base64":return E(this,w,v,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o(this,w,v,I);default:if(Q)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),Q=!0}},U.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;function V(w,v,I){var P="";I=Math.min(w.length,I);for(var u=v;u<I;++u)P+=String.fromCharCode(127&w[u]);return P}function F(w,v,I){var P="";I=Math.min(w.length,I);for(var u=v;u<I;++u)P+=String.fromCharCode(w[u]);return P}function O(w,v,I){var P=w.length;(!v||v<0)&&(v=0),(!I||I<0||I>P)&&(I=P);for(var u="",Q=v;Q<I;++Q)u+=L(w[Q]);return u}function N(w,v,I){for(var P=w.slice(v,I),u="",Q=0;Q<P.length;Q+=2)u+=String.fromCharCode(P[Q]+256*P[Q+1]);return u}function q(w,v,I){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+v>I)throw new RangeError("Trying to access beyond buffer length")}function m(w,v,I,P,u,Q){if(!U.isBuffer(w))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(v>u||v<Q)throw new RangeError(\'"value" argument is out of bounds\');if(I+P>w.length)throw new RangeError("Index out of range")}function c(w,v,I,P){v<0&&(v=65535+v+1);for(var u=0,Q=Math.min(w.length-I,2);u<Q;++u)w[I+u]=(v&255<<8*(P?u:1-u))>>>8*(P?u:1-u)}function M(w,v,I,P){v<0&&(v=4294967295+v+1);for(var u=0,Q=Math.min(w.length-I,4);u<Q;++u)w[I+u]=v>>>8*(P?u:3-u)&255}function S(w,v,I,P,u,Q){if(I+P>w.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function e(w,v,I,P,Q){return Q||S(w,0,I,4),u.write(w,v,I,P,23,4),I+4}function H(w,v,I,P,Q){return Q||S(w,0,I,8),u.write(w,v,I,P,52,8),I+8}U.prototype.slice=function(w,v){var I,P=this.length;if((w=~~w)<0?(w+=P)<0&&(w=0):w>P&&(w=P),(v=void 0===v?P:~~v)<0?(v+=P)<0&&(v=0):v>P&&(v=P),v<w&&(v=w),U.TYPED_ARRAY_SUPPORT)(I=this.subarray(w,v)).__proto__=U.prototype;else{var u=v-w;I=new U(u,void 0);for(var Q=0;Q<u;++Q)I[Q]=this[Q+w]}return I},U.prototype.readUIntLE=function(w,v,I){w|=0,v|=0,I||q(w,v,this.length);for(var P=this[w],u=1,Q=0;++Q<v&&(u*=256);)P+=this[w+Q]*u;return P},U.prototype.readUIntBE=function(w,v,I){w|=0,v|=0,I||q(w,v,this.length);for(var P=this[w+--v],u=1;v>0&&(u*=256);)P+=this[w+--v]*u;return P},U.prototype.readUInt8=function(w,v){return v||q(w,1,this.length),this[w]},U.prototype.readUInt16LE=function(w,v){return v||q(w,2,this.length),this[w]|this[w+1]<<8},U.prototype.readUInt16BE=function(w,v){return v||q(w,2,this.length),this[w]<<8|this[w+1]},U.prototype.readUInt32LE=function(w,v){return v||q(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},U.prototype.readUInt32BE=function(w,v){return v||q(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},U.prototype.readIntLE=function(w,v,I){w|=0,v|=0,I||q(w,v,this.length);for(var P=this[w],u=1,Q=0;++Q<v&&(u*=256);)P+=this[w+Q]*u;return P>=(u*=128)&&(P-=Math.pow(2,8*v)),P},U.prototype.readIntBE=function(w,v,I){w|=0,v|=0,I||q(w,v,this.length);for(var P=v,u=1,Q=this[w+--P];P>0&&(u*=256);)Q+=this[w+--P]*u;return Q>=(u*=128)&&(Q-=Math.pow(2,8*v)),Q},U.prototype.readInt8=function(w,v){return v||q(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},U.prototype.readInt16LE=function(w,v){v||q(w,2,this.length);var I=this[w]|this[w+1]<<8;return 32768&I?4294901760|I:I},U.prototype.readInt16BE=function(w,v){v||q(w,2,this.length);var I=this[w+1]|this[w]<<8;return 32768&I?4294901760|I:I},U.prototype.readInt32LE=function(w,v){return v||q(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},U.prototype.readInt32BE=function(w,v){return v||q(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},U.prototype.readFloatLE=function(w,v){return v||q(w,4,this.length),u.read(this,w,!0,23,4)},U.prototype.readFloatBE=function(w,v){return v||q(w,4,this.length),u.read(this,w,!1,23,4)},U.prototype.readDoubleLE=function(w,v){return v||q(w,8,this.length),u.read(this,w,!0,52,8)},U.prototype.readDoubleBE=function(w,v){return v||q(w,8,this.length),u.read(this,w,!1,52,8)},U.prototype.writeUIntLE=function(w,v,I,P){(w=+w,v|=0,I|=0,P)||m(this,w,v,I,Math.pow(2,8*I)-1,0);var u=1,Q=0;for(this[v]=255&w;++Q<I&&(u*=256);)this[v+Q]=w/u&255;return v+I},U.prototype.writeUIntBE=function(w,v,I,P){(w=+w,v|=0,I|=0,P)||m(this,w,v,I,Math.pow(2,8*I)-1,0);var u=I-1,Q=1;for(this[v+u]=255&w;--u>=0&&(Q*=256);)this[v+u]=w/Q&255;return v+I},U.prototype.writeUInt8=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,1,255,0),U.TYPED_ARRAY_SUPPORT||(w=Math.floor(w)),this[v]=255&w,v+1},U.prototype.writeUInt16LE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,2,65535,0),U.TYPED_ARRAY_SUPPORT?(this[v]=255&w,this[v+1]=w>>>8):c(this,w,v,!0),v+2},U.prototype.writeUInt16BE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,2,65535,0),U.TYPED_ARRAY_SUPPORT?(this[v]=w>>>8,this[v+1]=255&w):c(this,w,v,!1),v+2},U.prototype.writeUInt32LE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,4,4294967295,0),U.TYPED_ARRAY_SUPPORT?(this[v+3]=w>>>24,this[v+2]=w>>>16,this[v+1]=w>>>8,this[v]=255&w):M(this,w,v,!0),v+4},U.prototype.writeUInt32BE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,4,4294967295,0),U.TYPED_ARRAY_SUPPORT?(this[v]=w>>>24,this[v+1]=w>>>16,this[v+2]=w>>>8,this[v+3]=255&w):M(this,w,v,!1),v+4},U.prototype.writeIntLE=function(w,v,I,P){if(w=+w,v|=0,!P){var u=Math.pow(2,8*I-1);m(this,w,v,I,u-1,-u)}var Q=0,K=1,a=0;for(this[v]=255&w;++Q<I&&(K*=256);)w<0&&0===a&&0!==this[v+Q-1]&&(a=1),this[v+Q]=(w/K>>0)-a&255;return v+I},U.prototype.writeIntBE=function(w,v,I,P){if(w=+w,v|=0,!P){var u=Math.pow(2,8*I-1);m(this,w,v,I,u-1,-u)}var Q=I-1,K=1,a=0;for(this[v+Q]=255&w;--Q>=0&&(K*=256);)w<0&&0===a&&0!==this[v+Q+1]&&(a=1),this[v+Q]=(w/K>>0)-a&255;return v+I},U.prototype.writeInt8=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,1,127,-128),U.TYPED_ARRAY_SUPPORT||(w=Math.floor(w)),w<0&&(w=255+w+1),this[v]=255&w,v+1},U.prototype.writeInt16LE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,2,32767,-32768),U.TYPED_ARRAY_SUPPORT?(this[v]=255&w,this[v+1]=w>>>8):c(this,w,v,!0),v+2},U.prototype.writeInt16BE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,2,32767,-32768),U.TYPED_ARRAY_SUPPORT?(this[v]=w>>>8,this[v+1]=255&w):c(this,w,v,!1),v+2},U.prototype.writeInt32LE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,4,2147483647,-2147483648),U.TYPED_ARRAY_SUPPORT?(this[v]=255&w,this[v+1]=w>>>8,this[v+2]=w>>>16,this[v+3]=w>>>24):M(this,w,v,!0),v+4},U.prototype.writeInt32BE=function(w,v,I){return w=+w,v|=0,I||m(this,w,v,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),U.TYPED_ARRAY_SUPPORT?(this[v]=w>>>24,this[v+1]=w>>>16,this[v+2]=w>>>8,this[v+3]=255&w):M(this,w,v,!1),v+4},U.prototype.writeFloatLE=function(w,v,I){return e(this,w,v,!0,I)},U.prototype.writeFloatBE=function(w,v,I){return e(this,w,v,!1,I)},U.prototype.writeDoubleLE=function(w,v,I){return H(this,w,v,!0,I)},U.prototype.writeDoubleBE=function(w,v,I){return H(this,w,v,!1,I)},U.prototype.copy=function(w,v,I,P){if(I||(I=0),P||0===P||(P=this.length),v>=w.length&&(v=w.length),v||(v=0),P>0&&P<I&&(P=I),P===I)return 0;if(0===w.length||0===this.length)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("sourceStart out of bounds");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),w.length-v<P-I&&(P=w.length-v+I);var u,Q=P-I;if(this===w&&I<v&&v<P)for(u=Q-1;u>=0;--u)w[u+v]=this[u+I];else if(Q<1e3||!U.TYPED_ARRAY_SUPPORT)for(u=0;u<Q;++u)w[u+v]=this[u+I];else Uint8Array.prototype.set.call(w,this.subarray(I,I+Q),v);return Q},U.prototype.fill=function(w,v,I,P){if("string"===typeof w){if("string"===typeof v?(P=v,v=0,I=this.length):"string"===typeof I&&(P=I,I=this.length),1===w.length){var u=w.charCodeAt(0);u<256&&(w=u)}if(void 0!==P&&"string"!==typeof P)throw new TypeError("encoding must be a string");if("string"===typeof P&&!U.isEncoding(P))throw new TypeError("Unknown encoding: "+P)}else"number"===typeof w&&(w&=255);if(v<0||this.length<v||this.length<I)throw new RangeError("Out of range index");if(I<=v)return this;var Q;if(v>>>=0,I=void 0===I?this.length:I>>>0,w||(w=0),"number"===typeof w)for(Q=v;Q<I;++Q)this[Q]=w;else{var K=U.isBuffer(w)?w:d(new U(w,P).toString()),a=K.length;for(Q=0;Q<I-v;++Q)this[Q+v]=K[Q%a]}return this};var G=/[^+\\/0-9A-Za-z-_]/g;function L(w){return w<16?"0"+w.toString(16):w.toString(16)}function d(w,v){var I;v=v||1/0;for(var P=w.length,u=null,Q=[],K=0;K<P;++K){if((I=w.charCodeAt(K))>55295&&I<57344){if(!u){if(I>56319){(v-=3)>-1&&Q.push(239,191,189);continue}if(K+1===P){(v-=3)>-1&&Q.push(239,191,189);continue}u=I;continue}if(I<56320){(v-=3)>-1&&Q.push(239,191,189),u=I;continue}I=65536+(u-55296<<10|I-56320)}else u&&(v-=3)>-1&&Q.push(239,191,189);if(u=null,I<128){if((v-=1)<0)break;Q.push(I)}else if(I<2048){if((v-=2)<0)break;Q.push(I>>6|192,63&I|128)}else if(I<65536){if((v-=3)<0)break;Q.push(I>>12|224,I>>6&63|128,63&I|128)}else{if(!(I<1114112))throw new Error("Invalid code point");if((v-=4)<0)break;Q.push(I>>18|240,I>>12&63|128,I>>6&63|128,63&I|128)}}return Q}function D(w){return P.toByteArray(function(w){if((w=function(w){return w.trim?w.trim():w.replace(/^\\s+|\\s+$/g,"")}(w).replace(G,"")).length<2)return"";for(;w.length%4!==0;)w+="=";return w}(w))}function f(w,v,I,P){for(var u=0;u<P&&!(u+I>=v.length||u>=w.length);++u)v[u+I]=w[u];return u}},8041:function(w){"use strict";var v,I="object"===typeof Reflect?Reflect:null,P=I&&"function"===typeof I.apply?I.apply:function(w,v,I){return Function.prototype.apply.call(w,v,I)};v=I&&"function"===typeof I.ownKeys?I.ownKeys:Object.getOwnPropertySymbols?function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:function(w){return Object.getOwnPropertyNames(w)};var u=Number.isNaN||function(w){return w!==w};function Q(){Q.init.call(this)}w.exports=Q,w.exports.once=function(w,v){return new Promise((function(I,P){function u(I){w.removeListener(v,Q),P(I)}function Q(){"function"===typeof w.removeListener&&w.removeListener("error",u),I([].slice.call(arguments))}R(w,v,Q,{once:!0}),"error"!==v&&function(w,v,I){"function"===typeof w.on&&R(w,"error",v,I)}(w,u,{once:!0})}))},Q.EventEmitter=Q,Q.prototype._events=void 0,Q.prototype._eventsCount=0,Q.prototype._maxListeners=void 0;var K=10;function a(w){if("function"!==typeof w)throw new TypeError(\'The "listener" argument must be of type Function. Received type \'+typeof w)}function U(w){return void 0===w._maxListeners?Q.defaultMaxListeners:w._maxListeners}function p(w,v,I,P){var u,Q,K,p;if(a(I),void 0===(Q=w._events)?(Q=w._events=Object.create(null),w._eventsCount=0):(void 0!==Q.newListener&&(w.emit("newListener",v,I.listener?I.listener:I),Q=w._events),K=Q[v]),void 0===K)K=Q[v]=I,++w._eventsCount;else if("function"===typeof K?K=Q[v]=P?[I,K]:[K,I]:P?K.unshift(I):K.push(I),(u=U(w))>0&&K.length>u&&!K.warned){K.warned=!0;var r=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");r.name="MaxListenersExceededWarning",r.emitter=w,r.type=v,r.count=K.length,p=r,console&&console.warn&&console.warn(p)}return w}function r(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Y(w,v,I){var P={fired:!1,wrapFn:void 0,target:w,type:v,listener:I},u=r.bind(P);return u.listener=I,P.wrapFn=u,u}function g(w,v,I){var P=w._events;if(void 0===P)return[];var u=P[v];return void 0===u?[]:"function"===typeof u?I?[u.listener||u]:[u]:I?function(w){for(var v=new Array(w.length),I=0;I<v.length;++I)v[I]=w[I].listener||w[I];return v}(u):l(u,u.length)}function J(w){var v=this._events;if(void 0!==v){var I=v[w];if("function"===typeof I)return 1;if(void 0!==I)return I.length}return 0}function l(w,v){for(var I=new Array(v),P=0;P<v;++P)I[P]=w[P];return I}function R(w,v,I,P){if("function"===typeof w.on)P.once?w.once(v,I):w.on(v,I);else{if("function"!==typeof w.addEventListener)throw new TypeError(\'The "emitter" argument must be of type EventEmitter. Received type \'+typeof w);w.addEventListener(v,(function u(Q){P.once&&w.removeEventListener(v,u),I(Q)}))}}Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return K},set:function(w){if("number"!==typeof w||w<0||u(w))throw new RangeError(\'The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received \'+w+".");K=w}}),Q.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Q.prototype.setMaxListeners=function(w){if("number"!==typeof w||w<0||u(w))throw new RangeError(\'The value of "n" is out of range. It must be a non-negative number. Received \'+w+".");return this._maxListeners=w,this},Q.prototype.getMaxListeners=function(){return U(this)},Q.prototype.emit=function(w){for(var v=[],I=1;I<arguments.length;I++)v.push(arguments[I]);var u="error"===w,Q=this._events;if(void 0!==Q)u=u&&void 0===Q.error;else if(!u)return!1;if(u){var K;if(v.length>0&&(K=v[0]),K instanceof Error)throw K;var a=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw a.context=K,a}var U=Q[w];if(void 0===U)return!1;if("function"===typeof U)P(U,this,v);else{var p=U.length,r=l(U,p);for(I=0;I<p;++I)P(r[I],this,v)}return!0},Q.prototype.addListener=function(w,v){return p(this,w,v,!1)},Q.prototype.on=Q.prototype.addListener,Q.prototype.prependListener=function(w,v){return p(this,w,v,!0)},Q.prototype.once=function(w,v){return a(v),this.on(w,Y(this,w,v)),this},Q.prototype.prependOnceListener=function(w,v){return a(v),this.prependListener(w,Y(this,w,v)),this},Q.prototype.removeListener=function(w,v){var I,P,u,Q,K;if(a(v),void 0===(P=this._events))return this;if(void 0===(I=P[w]))return this;if(I===v||I.listener===v)0===--this._eventsCount?this._events=Object.create(null):(delete P[w],P.removeListener&&this.emit("removeListener",w,I.listener||v));else if("function"!==typeof I){for(u=-1,Q=I.length-1;Q>=0;Q--)if(I[Q]===v||I[Q].listener===v){K=I[Q].listener,u=Q;break}if(u<0)return this;0===u?I.shift():function(w,v){for(;v+1<w.length;v++)w[v]=w[v+1];w.pop()}(I,u),1===I.length&&(P[w]=I[0]),void 0!==P.removeListener&&this.emit("removeListener",w,K||v)}return this},Q.prototype.off=Q.prototype.removeListener,Q.prototype.removeAllListeners=function(w){var v,I,P;if(void 0===(I=this._events))return this;if(void 0===I.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==I[w]&&(0===--this._eventsCount?this._events=Object.create(null):delete I[w]),this;if(0===arguments.length){var u,Q=Object.keys(I);for(P=0;P<Q.length;++P)"removeListener"!==(u=Q[P])&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(v=I[w]))this.removeListener(w,v);else if(void 0!==v)for(P=v.length-1;P>=0;P--)this.removeListener(w,v[P]);return this},Q.prototype.listeners=function(w){return g(this,w,!0)},Q.prototype.rawListeners=function(w){return g(this,w,!1)},Q.listenerCount=function(w,v){return"function"===typeof w.listenerCount?w.listenerCount(v):J.call(w,v)},Q.prototype.listenerCount=J,Q.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},9834:function(w,v,I){"use strict";var P=I(2582).Buffer,u=I(1881).Transform;function Q(w){u.call(this),this._block=P.allocUnsafe(w),this._blockSize=w,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}I(273)(Q,u),Q.prototype._transform=function(w,v,I){var P=null;try{this.update(w,v)}catch(w){P=w}I(P)},Q.prototype._flush=function(w){var v=null;try{this.push(this.digest())}catch(w){v=w}w(v)},Q.prototype.update=function(w,v){if(function(w,v){if(!P.isBuffer(w)&&"string"!==typeof w)throw new TypeError(v+" must be a string or a buffer")}(w,"Data"),this._finalized)throw new Error("Digest already called");P.isBuffer(w)||(w=P.from(w,v));for(var I=this._block,u=0;this._blockOffset+w.length-u>=this._blockSize;){for(var Q=this._blockOffset;Q<this._blockSize;)I[Q++]=w[u++];this._update(),this._blockOffset=0}for(;u<w.length;)I[this._blockOffset++]=w[u++];for(var K=0,a=8*w.length;a>0;++K)this._length[K]+=a,(a=this._length[K]/4294967296|0)>0&&(this._length[K]-=4294967296*a);return this},Q.prototype._update=function(){throw new Error("_update is not implemented")},Q.prototype.digest=function(w){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var v=this._digest();void 0!==w&&(v=v.toString(w)),this._block.fill(0),this._blockOffset=0;for(var I=0;I<4;++I)this._length[I]=0;return v},Q.prototype._digest=function(){throw new Error("_digest is not implemented")},w.exports=Q},2582:function(w,v,I){var P=I(918),u=P.Buffer;function Q(w,v){for(var I in w)v[I]=w[I]}function K(w,v,I){return u(w,v,I)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?w.exports=P:(Q(P,v),v.Buffer=K),K.prototype=Object.create(u.prototype),Q(u,K),K.from=function(w,v,I){if("number"===typeof w)throw new TypeError("Argument must not be a number");return u(w,v,I)},K.alloc=function(w,v,I){if("number"!==typeof w)throw new TypeError("Argument must be a number");var P=u(w);return void 0!==v?"string"===typeof I?P.fill(v,I):P.fill(v):P.fill(0),P},K.allocUnsafe=function(w){if("number"!==typeof w)throw new TypeError("Argument must be a number");return u(w)},K.allocUnsafeSlow=function(w){if("number"!==typeof w)throw new TypeError("Argument must be a number");return P.SlowBuffer(w)}},545:function(w,v){v.read=function(w,v,I,P,u){var Q,K,a=8*u-P-1,U=(1<<a)-1,p=U>>1,r=-7,Y=I?u-1:0,g=I?-1:1,J=w[v+Y];for(Y+=g,Q=J&(1<<-r)-1,J>>=-r,r+=a;r>0;Q=256*Q+w[v+Y],Y+=g,r-=8);for(K=Q&(1<<-r)-1,Q>>=-r,r+=P;r>0;K=256*K+w[v+Y],Y+=g,r-=8);if(0===Q)Q=1-p;else{if(Q===U)return K?NaN:1/0*(J?-1:1);K+=Math.pow(2,P),Q-=p}return(J?-1:1)*K*Math.pow(2,Q-P)},v.write=function(w,v,I,P,u,Q){var K,a,U,p=8*Q-u-1,r=(1<<p)-1,Y=r>>1,g=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,J=P?0:Q-1,l=P?1:-1,R=v<0||0===v&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(a=isNaN(v)?1:0,K=r):(K=Math.floor(Math.log(v)/Math.LN2),v*(U=Math.pow(2,-K))<1&&(K--,U*=2),(v+=K+Y>=1?g/U:g*Math.pow(2,1-Y))*U>=2&&(K++,U/=2),K+Y>=r?(a=0,K=r):K+Y>=1?(a=(v*U-1)*Math.pow(2,u),K+=Y):(a=v*Math.pow(2,Y-1)*Math.pow(2,u),K=0));u>=8;w[I+J]=255&a,J+=l,a/=256,u-=8);for(K=K<<u|a,p+=u;p>0;w[I+J]=255&K,J+=l,K/=256,p-=8);w[I+J-l]|=128*R}},273:function(w){"function"===typeof Object.create?w.exports=function(w,v){v&&(w.super_=v,w.prototype=Object.create(v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}))}:w.exports=function(w,v){if(v){w.super_=v;var I=function(){};I.prototype=v.prototype,w.prototype=new I,w.prototype.constructor=w}}},379:function(w){"use strict";w.exports=function(w){for(var v=new Array(w),I=0;I<w;++I)v[I]=I;return v}},3110:function(w){function v(w){return!!w.constructor&&"function"===typeof w.constructor.isBuffer&&w.constructor.isBuffer(w)}w.exports=function(w){return null!=w&&(v(w)||function(w){return"function"===typeof w.readFloatLE&&"function"===typeof w.slice&&v(w.slice(0,0))}(w)||!!w._isBuffer)}},7146:function(w){var v={}.toString;w.exports=Array.isArray||function(w){return"[object Array]"==v.call(w)}},1075:function(w,v,I){"use strict";var P=I(273),u=I(9834),Q=I(5734).Buffer,K=new Array(16);function a(){u.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function U(w,v){return w<<v|w>>>32-v}function p(w,v,I,P,u,Q,K){return U(w+(v&I|~v&P)+u+Q|0,K)+v|0}function r(w,v,I,P,u,Q,K){return U(w+(v&P|I&~P)+u+Q|0,K)+v|0}function Y(w,v,I,P,u,Q,K){return U(w+(v^I^P)+u+Q|0,K)+v|0}function g(w,v,I,P,u,Q,K){return U(w+(I^(v|~P))+u+Q|0,K)+v|0}P(a,u),a.prototype._update=function(){for(var w=K,v=0;v<16;++v)w[v]=this._block.readInt32LE(4*v);var I=this._a,P=this._b,u=this._c,Q=this._d;I=p(I,P,u,Q,w[0],3614090360,7),Q=p(Q,I,P,u,w[1],3905402710,12),u=p(u,Q,I,P,w[2],606105819,17),P=p(P,u,Q,I,w[3],3250441966,22),I=p(I,P,u,Q,w[4],4118548399,7),Q=p(Q,I,P,u,w[5],1200080426,12),u=p(u,Q,I,P,w[6],2821735955,17),P=p(P,u,Q,I,w[7],4249261313,22),I=p(I,P,u,Q,w[8],1770035416,7),Q=p(Q,I,P,u,w[9],2336552879,12),u=p(u,Q,I,P,w[10],4294925233,17),P=p(P,u,Q,I,w[11],2304563134,22),I=p(I,P,u,Q,w[12],1804603682,7),Q=p(Q,I,P,u,w[13],4254626195,12),u=p(u,Q,I,P,w[14],2792965006,17),I=r(I,P=p(P,u,Q,I,w[15],1236535329,22),u,Q,w[1],4129170786,5),Q=r(Q,I,P,u,w[6],3225465664,9),u=r(u,Q,I,P,w[11],643717713,14),P=r(P,u,Q,I,w[0],3921069994,20),I=r(I,P,u,Q,w[5],3593408605,5),Q=r(Q,I,P,u,w[10],38016083,9),u=r(u,Q,I,P,w[15],3634488961,14),P=r(P,u,Q,I,w[4],3889429448,20),I=r(I,P,u,Q,w[9],568446438,5),Q=r(Q,I,P,u,w[14],3275163606,9),u=r(u,Q,I,P,w[3],4107603335,14),P=r(P,u,Q,I,w[8],1163531501,20),I=r(I,P,u,Q,w[13],2850285829,5),Q=r(Q,I,P,u,w[2],4243563512,9),u=r(u,Q,I,P,w[7],1735328473,14),I=Y(I,P=r(P,u,Q,I,w[12],2368359562,20),u,Q,w[5],4294588738,4),Q=Y(Q,I,P,u,w[8],2272392833,11),u=Y(u,Q,I,P,w[11],1839030562,16),P=Y(P,u,Q,I,w[14],4259657740,23),I=Y(I,P,u,Q,w[1],2763975236,4),Q=Y(Q,I,P,u,w[4],1272893353,11),u=Y(u,Q,I,P,w[7],4139469664,16),P=Y(P,u,Q,I,w[10],3200236656,23),I=Y(I,P,u,Q,w[13],681279174,4),Q=Y(Q,I,P,u,w[0],3936430074,11),u=Y(u,Q,I,P,w[3],3572445317,16),P=Y(P,u,Q,I,w[6],76029189,23),I=Y(I,P,u,Q,w[9],3654602809,4),Q=Y(Q,I,P,u,w[12],3873151461,11),u=Y(u,Q,I,P,w[15],530742520,16),I=g(I,P=Y(P,u,Q,I,w[2],3299628645,23),u,Q,w[0],4096336452,6),Q=g(Q,I,P,u,w[7],1126891415,10),u=g(u,Q,I,P,w[14],2878612391,15),P=g(P,u,Q,I,w[5],4237533241,21),I=g(I,P,u,Q,w[12],1700485571,6),Q=g(Q,I,P,u,w[3],2399980690,10),u=g(u,Q,I,P,w[10],4293915773,15),P=g(P,u,Q,I,w[1],2240044497,21),I=g(I,P,u,Q,w[8],1873313359,6),Q=g(Q,I,P,u,w[15],4264355552,10),u=g(u,Q,I,P,w[6],2734768916,15),P=g(P,u,Q,I,w[13],1309151649,21),I=g(I,P,u,Q,w[4],4149444226,6),Q=g(Q,I,P,u,w[11],3174756917,10),u=g(u,Q,I,P,w[2],718787259,15),P=g(P,u,Q,I,w[9],3951481745,21),this._a=this._a+I|0,this._b=this._b+P|0,this._c=this._c+u|0,this._d=this._d+Q|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var w=Q.allocUnsafe(16);return w.writeInt32LE(this._a,0),w.writeInt32LE(this._b,4),w.writeInt32LE(this._c,8),w.writeInt32LE(this._d,12),w},w.exports=a},3357:function(w){w.exports=function(w,v){v=v||2;for(var I=2*(w=w||1)+1,P=Math.pow(I,v)-1,u=new Array(P),Q=0;Q<P;Q++)for(var K=u[Q]=new Array(v),a=Q<P/2?Q:Q+1,U=1;U<=v;U++){var p=a%Math.pow(I,U);K[U-1]=p/Math.pow(I,U-1)-w,a-=p}return u}},7786:function(w,v,I){var P=I(379),u=I(3110),Q="undefined"!==typeof Float64Array;function K(w,v){return w[0]-v[0]}function a(){var w,v=this.stride,I=new Array(v.length);for(w=0;w<I.length;++w)I[w]=[Math.abs(v[w]),w];I.sort(K);var P=new Array(I.length);for(w=0;w<P.length;++w)P[w]=I[w][1];return P}function U(w,v){var I=["View",v,"d",w].join("");v<0&&(I="View_Nil"+w);var u="generic"===w;if(-1===v){var Q="function "+I+"(a){this.data=a;};var proto="+I+".prototype;proto.dtype=\'"+w+"\';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+I+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+I+"(a){return new "+I+"(a);}";return new Function(Q)()}if(0===v){Q="function "+I+"(a,d) {this.data = a;this.offset = d};var proto="+I+".prototype;proto.dtype=\'"+w+"\';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+I+"_copy() {return new "+I+"(this.data,this.offset)};proto.pick=function "+I+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+I+"_get(){return "+(u?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+I+"_set(v){return "+(u?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+I+"(a,b,c,d){return new "+I+"(a,d)}";return new Function("TrivialArray",Q)(p[w][0])}Q=["\'use strict\'"];var K=P(v),U=K.map((function(w){return"i"+w})),r="this.offset+"+K.map((function(w){return"this.stride["+w+"]*i"+w})).join("+"),Y=K.map((function(w){return"b"+w})).join(","),g=K.map((function(w){return"c"+w})).join(",");Q.push("function "+I+"(a,"+Y+","+g+",d){this.data=a","this.shape=["+Y+"]","this.stride=["+g+"]","this.offset=d|0}","var proto="+I+".prototype","proto.dtype=\'"+w+"\'","proto.dimension="+v),Q.push("Object.defineProperty(proto,\'size\',{get:function "+I+"_size(){return "+K.map((function(w){return"this.shape["+w+"]"})).join("*"),"}})"),1===v?Q.push("proto.order=[0]"):(Q.push("Object.defineProperty(proto,\'order\',{get:"),v<4?(Q.push("function "+I+"_order(){"),2===v?Q.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===v&&Q.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):Q.push("ORDER})")),Q.push("proto.set=function "+I+"_set("+U.join(",")+",v){"),u?Q.push("return this.data.set("+r+",v)}"):Q.push("return this.data["+r+"]=v}"),Q.push("proto.get=function "+I+"_get("+U.join(",")+"){"),u?Q.push("return this.data.get("+r+")}"):Q.push("return this.data["+r+"]}"),Q.push("proto.index=function "+I+"_index(",U.join(),"){return "+r+"}"),Q.push("proto.hi=function "+I+"_hi("+U.join(",")+"){return new "+I+"(this.data,"+K.map((function(w){return["(typeof i",w,"!==\'number\'||i",w,"<0)?this.shape[",w,"]:i",w,"|0"].join("")})).join(",")+","+K.map((function(w){return"this.stride["+w+"]"})).join(",")+",this.offset)}");var J=K.map((function(w){return"a"+w+"=this.shape["+w+"]"})),l=K.map((function(w){return"c"+w+"=this.stride["+w+"]"}));Q.push("proto.lo=function "+I+"_lo("+U.join(",")+"){var b=this.offset,d=0,"+J.join(",")+","+l.join(","));for(var R=0;R<v;++R)Q.push("if(typeof i"+R+"===\'number\'&&i"+R+">=0){d=i"+R+"|0;b+=c"+R+"*d;a"+R+"-=d}");Q.push("return new "+I+"(this.data,"+K.map((function(w){return"a"+w})).join(",")+","+K.map((function(w){return"c"+w})).join(",")+",b)}"),Q.push("proto.step=function "+I+"_step("+U.join(",")+"){var "+K.map((function(w){return"a"+w+"=this.shape["+w+"]"})).join(",")+","+K.map((function(w){return"b"+w+"=this.stride["+w+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(R=0;R<v;++R)Q.push("if(typeof i"+R+"===\'number\'){d=i"+R+"|0;if(d<0){c+=b"+R+"*(a"+R+"-1);a"+R+"=ceil(-a"+R+"/d)}else{a"+R+"=ceil(a"+R+"/d)}b"+R+"*=d}");Q.push("return new "+I+"(this.data,"+K.map((function(w){return"a"+w})).join(",")+","+K.map((function(w){return"b"+w})).join(",")+",c)}");var x=new Array(v),j=new Array(v);for(R=0;R<v;++R)x[R]="a[i"+R+"]",j[R]="b[i"+R+"]";Q.push("proto.transpose=function "+I+"_transpose("+U+"){"+U.map((function(w,v){return w+"=("+w+"===undefined?"+v+":"+w+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+I+"(this.data,"+x.join(",")+","+j.join(",")+",this.offset)}"),Q.push("proto.pick=function "+I+"_pick("+U+"){var a=[],b=[],c=this.offset");for(R=0;R<v;++R)Q.push("if(typeof i"+R+"===\'number\'&&i"+R+">=0){c=(c+this.stride["+R+"]*i"+R+")|0}else{a.push(this.shape["+R+"]);b.push(this.stride["+R+"])}");return Q.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),Q.push("return function construct_"+I+"(data,shape,stride,offset){return new "+I+"(data,"+K.map((function(w){return"shape["+w+"]"})).join(",")+","+K.map((function(w){return"stride["+w+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",Q.join("\\n"))(p[w],a)}var p={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};w.exports=function(w,v,I,P){if(void 0===w)return(0,p.array[0])([]);"number"===typeof w&&(w=[w]),void 0===v&&(v=[w.length]);var K=v.length;if(void 0===I){I=new Array(K);for(var a=K-1,r=1;a>=0;--a)I[a]=r,r*=v[a]}if(void 0===P){P=0;for(a=0;a<K;++a)I[a]<0&&(P-=(v[a]-1)*I[a])}for(var Y=function(w){if(u(w))return"buffer";if(Q)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(w),g=p[Y];g.length<=K+1;)g.push(U(Y,g.length-1));return(0,g[K+1])(w,v,I,P)}},3555:function(w,v,I){"use strict";var P=I(1159).integer,u=I(1677),Q=I(9847);function K(w,v){for(var I=0,P=0;P<w.length;P++)I+=Math.pow(w[P]-v[P],2);return I}function a(w,v){if("function"===typeof w.distanceFunction)throw new Error("PoissonDiskSampling: Tried to instantiate the fixed density implementation with a distanceFunction");this.shape=w.shape,this.minDistance=w.minDistance,this.maxDistance=w.maxDistance||2*w.minDistance,this.maxTries=Math.ceil(Math.max(1,w.tries||30)),this.rng=v||Math.random,this.dimension=this.shape.length,this.squaredMinDistance=this.minDistance*this.minDistance,this.minDistancePlusEpsilon=this.minDistance+2e-14,this.deltaDistance=Math.max(0,this.maxDistance-this.minDistancePlusEpsilon),this.cellSize=this.minDistance/Math.sqrt(this.dimension),this.neighbourhood=Q(this.dimension),this.currentPoint=null,this.processList=[],this.samplePoints=[],this.gridShape=[];for(var I=0;I<this.dimension;I++)this.gridShape.push(Math.ceil(this.shape[I]/this.cellSize));this.grid=P(this.gridShape)}a.prototype.shape=null,a.prototype.dimension=null,a.prototype.minDistance=null,a.prototype.maxDistance=null,a.prototype.minDistancePlusEpsilon=null,a.prototype.squaredMinDistance=null,a.prototype.deltaDistance=null,a.prototype.cellSize=null,a.prototype.maxTries=null,a.prototype.rng=null,a.prototype.neighbourhood=null,a.prototype.currentPoint=null,a.prototype.processList=null,a.prototype.samplePoints=null,a.prototype.gridShape=null,a.prototype.grid=null,a.prototype.addRandomPoint=function(){for(var w=new Array(this.dimension),v=0;v<this.dimension;v++)w[v]=this.rng()*this.shape[v];return this.directAddPoint(w)},a.prototype.addPoint=function(w){var v,I=!0;if(w.length===this.dimension)for(v=0;v<this.dimension&&I;v++)I=w[v]>=0&&w[v]<=this.shape[v];else I=!1;return I?this.directAddPoint(w):null},a.prototype.directAddPoint=function(w){var v,I=0,P=this.grid.stride;for(this.processList.push(w),this.samplePoints.push(w),v=0;v<this.dimension;v++)I+=(w[v]/this.cellSize|0)*P[v];return this.grid.data[I]=this.samplePoints.length,w},a.prototype.inNeighbourhood=function(w){var v,I,P,u,Q=this.dimension,a=this.grid.stride;for(v=0;v<this.neighbourhood.length;v++){for(I=0,P=0;P<Q;P++){if((u=(w[P]/this.cellSize|0)+this.neighbourhood[v][P])<0||u>=this.gridShape[P]){I=-1;break}I+=u*a[P]}if(-1!==I&&0!==this.grid.data[I]&&K(w,this.samplePoints[this.grid.data[I]-1])<this.squaredMinDistance)return!0}return!1},a.prototype.next=function(){for(var w,v,I,P,Q,K,a;this.processList.length>0;){for(null===this.currentPoint&&(this.currentPoint=this.processList.shift()),P=this.currentPoint,w=0;w<this.maxTries;w++){for(K=!0,I=this.minDistancePlusEpsilon+this.deltaDistance*this.rng(),2===this.dimension?(v=this.rng()*Math.PI*2,Q=[Math.cos(v),Math.sin(v)]):Q=u(this.dimension,this.rng),a=0;K&&a<this.dimension;a++)Q[a]=P[a]+Q[a]*I,K=Q[a]>=0&&Q[a]<this.shape[a];if(K&&!this.inNeighbourhood(Q))return this.directAddPoint(Q)}w===this.maxTries&&(this.currentPoint=null)}return null},a.prototype.fill=function(){for(0===this.samplePoints.length&&this.addRandomPoint();this.next(););return this.samplePoints},a.prototype.getAllPoints=function(){return this.samplePoints},a.prototype.getAllPointsWithDistance=function(){throw new Error("PoissonDiskSampling: getAllPointsWithDistance() is not available in fixed-density implementation")},a.prototype.reset=function(){var w=this.grid.data,v=0;for(v=0;v<w.length;v++)w[v]=0;this.samplePoints=[],this.currentPoint=null,this.processList.length=0},w.exports=a},8966:function(w,v,I){"use strict";var P=I(1159).array,u=I(1677),Q=I(9847);function K(w,v){for(var I=0,P=0;P<w.length;P++)I+=Math.pow(w[P]-v[P],2);return Math.sqrt(I)}function a(w,v){if("function"!==typeof w.distanceFunction)throw new Error("PoissonDiskSampling: Tried to instantiate the variable density implementation without a distanceFunction");this.shape=w.shape,this.minDistance=w.minDistance,this.maxDistance=w.maxDistance||2*w.minDistance,this.maxTries=Math.ceil(Math.max(1,w.tries||30)),this.distanceFunction=w.distanceFunction,this.bias=Math.max(0,Math.min(1,w.bias||0)),this.rng=v||Math.random,this.dimension=this.shape.length,this.minDistancePlusEpsilon=this.minDistance+2e-14,this.deltaDistance=Math.max(0,this.maxDistance-this.minDistancePlusEpsilon),this.cellSize=this.maxDistance/Math.sqrt(this.dimension),this.neighbourhood=Q(this.dimension),this.currentPoint=null,this.currentDistance=0,this.processList=[],this.samplePoints=[],this.sampleDistance=[],this.gridShape=[];for(var I=0;I<this.dimension;I++)this.gridShape.push(Math.ceil(this.shape[I]/this.cellSize));this.grid=P(this.gridShape)}a.prototype.shape=null,a.prototype.dimension=null,a.prototype.minDistance=null,a.prototype.maxDistance=null,a.prototype.minDistancePlusEpsilon=null,a.prototype.deltaDistance=null,a.prototype.cellSize=null,a.prototype.maxTries=null,a.prototype.distanceFunction=null,a.prototype.bias=null,a.prototype.rng=null,a.prototype.neighbourhood=null,a.prototype.currentPoint=null,a.prototype.currentDistance=null,a.prototype.processList=null,a.prototype.samplePoints=null,a.prototype.sampleDistance=null,a.prototype.gridShape=null,a.prototype.grid=null,a.prototype.addRandomPoint=function(){for(var w=new Array(this.dimension),v=0;v<this.dimension;v++)w[v]=this.rng()*this.shape[v];return this.directAddPoint(w)},a.prototype.addPoint=function(w){var v,I=!0;if(w.length===this.dimension)for(v=0;v<this.dimension&&I;v++)I=w[v]>=0&&w[v]<=this.shape[v];else I=!1;return I?this.directAddPoint(w):null},a.prototype.directAddPoint=function(w){var v,I=0,P=this.grid.stride,u=this.samplePoints.length;for(this.processList.push(u),this.samplePoints.push(w),this.sampleDistance.push(this.distanceFunction(w)),v=0;v<this.dimension;v++)I+=(w[v]/this.cellSize|0)*P[v];return this.grid.data[I].push(u),w},a.prototype.inNeighbourhood=function(w){var v,I,P,u,Q,a,U=this.dimension,p=this.grid.stride,r=this.distanceFunction(w);for(v=0;v<this.neighbourhood.length;v++){for(I=0,P=0;P<U;P++){if((u=(w[P]/this.cellSize|0)+this.neighbourhood[v][P])<0||u>=this.gridShape[P]){I=-1;break}I+=u*p[P]}if(-1!==I&&this.grid.data[I].length>0)for(var Y=0;Y<this.grid.data[I].length;Y++){Q=this.samplePoints[this.grid.data[I][Y]],a=this.sampleDistance[this.grid.data[I][Y]];var g=Math.min(a,r),J=g+(Math.max(a,r)-g)*this.bias;if(K(w,Q)<this.minDistance+this.deltaDistance*J)return!0}}return!1},a.prototype.next=function(){for(var w,v,I,P,Q,K,a,U;this.processList.length>0;){if(null===this.currentPoint){var p=this.processList.shift();this.currentPoint=this.samplePoints[p],this.currentDistance=this.sampleDistance[p]}for(P=this.currentPoint,Q=this.currentDistance,w=0;w<this.maxTries;w++){for(a=!0,I=this.minDistancePlusEpsilon+this.deltaDistance*(Q+(1-Q)*this.bias),2===this.dimension?(v=this.rng()*Math.PI*2,K=[Math.cos(v),Math.sin(v)]):K=u(this.dimension,this.rng),U=0;a&&U<this.dimension;U++)K[U]=P[U]+K[U]*I,a=K[U]>=0&&K[U]<this.shape[U];if(a&&!this.inNeighbourhood(K))return this.directAddPoint(K)}w===this.maxTries&&(this.currentPoint=null)}return null},a.prototype.fill=function(){for(0===this.samplePoints.length&&this.addRandomPoint();this.next(););return this.samplePoints},a.prototype.getAllPoints=function(){return this.samplePoints},a.prototype.getAllPointsWithDistance=function(){var w,v=new Array(this.samplePoints.length),I=0,P=0;for(I=0;I<this.samplePoints.length;I++){for(w=new Array(this.dimension+1),P=0;P<this.dimension;P++)w[P]=this.samplePoints[I][P];w[this.dimension]=this.sampleDistance[I],v[I]=w}return v},a.prototype.reset=function(){var w=this.grid.data,v=0;for(v=0;v<w.length;v++)w[v]=[];this.samplePoints=[],this.currentPoint=null,this.processList.length=0},w.exports=a},9847:function(w,v,I){"use strict";var P=I(3357);var u={};w.exports=function(w){return u[w]||(u[w]=function(w){var v,I=P(2,w),u=[];for(I=I.filter((function(v){for(var I=0,P=0;P<w;P++)I+=Math.pow(Math.max(0,Math.abs(v[P])-1),2);return I<w})),v=0;v<w;v++)u.push(0);return I.push(u),I.sort((function(v,I){var P,u=0,Q=0;for(P=0;P<w;P++)u+=Math.pow(v[P],2),Q+=Math.pow(I[P],2);return u<Q?-1:u>Q?1:0})),I}(w)),u[w]}},8915:function(w,v,I){"use strict";var P=I(3555),u=I(8966);function Q(w,v){this.shape=w.shape,"function"===typeof w.distanceFunction?this.implementation=new u(w,v):this.implementation=new P(w,v)}Q.prototype.implementation=null,Q.prototype.addRandomPoint=function(){return this.implementation.addRandomPoint()},Q.prototype.addPoint=function(w){return this.implementation.addPoint(w)},Q.prototype.next=function(){return this.implementation.next()},Q.prototype.fill=function(){return this.implementation.fill()},Q.prototype.getAllPoints=function(){return this.implementation.getAllPoints()},Q.prototype.getAllPointsWithDistance=function(){return this.implementation.getAllPointsWithDistance()},Q.prototype.reset=function(){this.implementation.reset()},w.exports=Q},1677:function(w){"use strict";w.exports=function(w,v){var I,P,u,Q,K,a=new Array(w),U=Math.floor(w/2)<<1,p=0;for(K=0;K<U;K+=2)I=-2*Math.log(v()),P=Math.sqrt(I),u=2*Math.PI*v(),p+=I,a[K]=P*Math.cos(u),a[K+1]=P*Math.sin(u);if(w%2){var r=Math.sqrt(-2*Math.log(v()))*Math.cos(2*Math.PI*v());a[w-1]=r,p+=Math.pow(r,2)}for(Q=1/Math.sqrt(p),K=0;K<w;++K)a[K]*=Q;return a}},1159:function(w){"use strict";w.exports={integer:function(w){var v,I=w.length,P=1,u=new Array(I);for(v=I;v>0;v--)u[v-1]=P,P*=w[v-1];return{stride:u,data:new Uint32Array(P)}},array:function(w){var v,I,P=w.length,u=1,Q=new Array(P),K=[];for(v=P;v>0;v--)Q[v-1]=u,u*=w[v-1];for(I=0;I<u;I++)K.push([]);return{stride:Q,data:K}}}},1092:function(w){"use strict";var v={};function I(w,I,P){P||(P=Error);var u=function(w){var v,P;function u(v,P,u){return w.call(this,function(w,v,P){return"string"===typeof I?I:I(w,v,P)}(v,P,u))||this}return P=w,(v=u).prototype=Object.create(P.prototype),v.prototype.constructor=v,v.__proto__=P,u}(P);u.prototype.name=P.name,u.prototype.code=w,v[w]=u}function P(w,v){if(Array.isArray(w)){var I=w.length;return w=w.map((function(w){return String(w)})),I>2?"one of ".concat(v," ").concat(w.slice(0,I-1).join(", "),", or ")+w[I-1]:2===I?"one of ".concat(v," ").concat(w[0]," or ").concat(w[1]):"of ".concat(v," ").concat(w[0])}return"of ".concat(v," ").concat(String(w))}I("ERR_INVALID_OPT_VALUE",(function(w,v){return\'The value "\'+v+\'" is invalid for option "\'+w+\'"\'}),TypeError),I("ERR_INVALID_ARG_TYPE",(function(w,v,I){var u,Q,K,a;if("string"===typeof v&&(Q="not ",v.substr(!K||K<0?0:+K,Q.length)===Q)?(u="must not be",v=v.replace(/^not /,"")):u="must be",function(w,v,I){return(void 0===I||I>w.length)&&(I=w.length),w.substring(I-v.length,I)===v}(w," argument"))a="The ".concat(w," ").concat(u," ").concat(P(v,"type"));else{var U=function(w,v,I){return"number"!==typeof I&&(I=0),!(I+v.length>w.length)&&-1!==w.indexOf(v,I)}(w,".")?"property":"argument";a=\'The "\'.concat(w,\'" \').concat(U," ").concat(u," ").concat(P(v,"type"))}return a+=". Received type ".concat(typeof I)}),TypeError),I("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),I("ERR_METHOD_NOT_IMPLEMENTED",(function(w){return"The "+w+" method is not implemented"})),I("ERR_STREAM_PREMATURE_CLOSE","Premature close"),I("ERR_STREAM_DESTROYED",(function(w){return"Cannot call "+w+" after a stream was destroyed"})),I("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),I("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),I("ERR_STREAM_WRITE_AFTER_END","write after end"),I("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),I("ERR_UNKNOWN_ENCODING",(function(w){return"Unknown encoding: "+w}),TypeError),I("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),w.exports.b=v},6085:function(w,v,I){"use strict";var P=Object.keys||function(w){var v=[];for(var I in w)v.push(I);return v};w.exports=p;var u=I(6405),Q=I(7423);I(273)(p,u);for(var K=P(Q.prototype),a=0;a<K.length;a++){var U=K[a];p.prototype[U]||(p.prototype[U]=Q.prototype[U])}function p(w){if(!(this instanceof p))return new p(w);u.call(this,w),Q.call(this,w),this.allowHalfOpen=!0,w&&(!1===w.readable&&(this.readable=!1),!1===w.writable&&(this.writable=!1),!1===w.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||process.nextTick(Y,this)}function Y(w){w.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(w){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=w,this._writableState.destroyed=w)}})},9543:function(w,v,I){"use strict";w.exports=u;var P=I(4917);function u(w){if(!(this instanceof u))return new u(w);P.call(this,w)}I(273)(u,P),u.prototype._transform=function(w,v,I){I(null,w)}},6405:function(w,v,I){"use strict";var P;w.exports=o,o.ReadableState=E;I(8041).EventEmitter;var u=function(w,v){return w.listeners(v).length},Q=I(8747),K=I(918).Buffer,a=I.g.Uint8Array||function(){};var U,p=I(4616);U=p&&p.debuglog?p.debuglog("stream"):function(){};var r,Y,g,J=I(5489),l=I(6617),R=I(5999).getHighWaterMark,x=I(1092).b,j=x.ERR_INVALID_ARG_TYPE,s=x.ERR_STREAM_PUSH_AFTER_EOF,B=x.ERR_METHOD_NOT_IMPLEMENTED,t=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;I(273)(o,Q);var i=l.errorOrDestroy,z=["error","close","destroy","pause","resume"];function E(w,v,u){P=P||I(6085),w=w||{},"boolean"!==typeof u&&(u=v instanceof P),this.objectMode=!!w.objectMode,u&&(this.objectMode=this.objectMode||!!w.readableObjectMode),this.highWaterMark=R(this,w,"readableHighWaterMark",u),this.buffer=new J,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==w.emitClose,this.autoDestroy=!!w.autoDestroy,this.destroyed=!1,this.defaultEncoding=w.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,w.encoding&&(r||(r=I(8570).d),this.decoder=new r(w.encoding),this.encoding=w.encoding)}function o(w){if(P=P||I(6085),!(this instanceof o))return new o(w);var v=this instanceof P;this._readableState=new E(w,this,v),this.readable=!0,w&&("function"===typeof w.read&&(this._read=w.read),"function"===typeof w.destroy&&(this._destroy=w.destroy)),Q.call(this)}function h(w,v,I,P,u){U("readableAddChunk",v);var Q,p=w._readableState;if(null===v)p.reading=!1,function(w,v){if(U("onEofChunk"),v.ended)return;if(v.decoder){var I=v.decoder.end();I&&I.length&&(v.buffer.push(I),v.length+=v.objectMode?1:I.length)}v.ended=!0,v.sync?F(w):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,O(w)))}(w,p);else if(u||(Q=function(w,v){var I;P=v,K.isBuffer(P)||P instanceof a||"string"===typeof v||void 0===v||w.objectMode||(I=new j("chunk",["string","Buffer","Uint8Array"],v));var P;return I}(p,v)),Q)i(w,Q);else if(p.objectMode||v&&v.length>0)if("string"===typeof v||p.objectMode||Object.getPrototypeOf(v)===K.prototype||(v=function(w){return K.from(w)}(v)),P)p.endEmitted?i(w,new t):n(w,p,v,!0);else if(p.ended)i(w,new s);else{if(p.destroyed)return!1;p.reading=!1,p.decoder&&!I?(v=p.decoder.write(v),p.objectMode||0!==v.length?n(w,p,v,!1):N(w,p)):n(w,p,v,!1)}else P||(p.reading=!1,N(w,p));return!p.ended&&(p.length<p.highWaterMark||0===p.length)}function n(w,v,I,P){v.flowing&&0===v.length&&!v.sync?(v.awaitDrain=0,w.emit("data",I)):(v.length+=v.objectMode?1:I.length,P?v.buffer.unshift(I):v.buffer.push(I),v.needReadable&&F(w)),N(w,v)}Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(w){this._readableState&&(this._readableState.destroyed=w)}}),o.prototype.destroy=l.destroy,o.prototype._undestroy=l.undestroy,o.prototype._destroy=function(w,v){v(w)},o.prototype.push=function(w,v){var I,P=this._readableState;return P.objectMode?I=!0:"string"===typeof w&&((v=v||P.defaultEncoding)!==P.encoding&&(w=K.from(w,v),v=""),I=!0),h(this,w,v,!1,I)},o.prototype.unshift=function(w){return h(this,w,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(w){r||(r=I(8570).d);var v=new r(w);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var P=this._readableState.buffer.head,u="";null!==P;)u+=v.write(P.data),P=P.next;return this._readableState.buffer.clear(),""!==u&&this._readableState.buffer.push(u),this._readableState.length=u.length,this};var W=1073741824;function V(w,v){return w<=0||0===v.length&&v.ended?0:v.objectMode?1:w!==w?v.flowing&&v.length?v.buffer.head.data.length:v.length:(w>v.highWaterMark&&(v.highWaterMark=function(w){return w>=W?w=W:(w--,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w++),w}(w)),w<=v.length?w:v.ended?v.length:(v.needReadable=!0,0))}function F(w){var v=w._readableState;U("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(U("emitReadable",v.flowing),v.emittedReadable=!0,process.nextTick(O,w))}function O(w){var v=w._readableState;U("emitReadable_",v.destroyed,v.length,v.ended),v.destroyed||!v.length&&!v.ended||(w.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,S(w)}function N(w,v){v.readingMore||(v.readingMore=!0,process.nextTick(q,w,v))}function q(w,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&0===v.length);){var I=v.length;if(U("maybeReadMore read 0"),w.read(0),I===v.length)break}v.readingMore=!1}function m(w){var v=w._readableState;v.readableListening=w.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:w.listenerCount("data")>0&&w.resume()}function c(w){U("readable nexttick read 0"),w.read(0)}function M(w,v){U("resume",v.reading),v.reading||w.read(0),v.resumeScheduled=!1,w.emit("resume"),S(w),v.flowing&&!v.reading&&w.read(0)}function S(w){var v=w._readableState;for(U("flow",v.flowing);v.flowing&&null!==w.read(););}function e(w,v){return 0===v.length?null:(v.objectMode?I=v.buffer.shift():!w||w>=v.length?(I=v.decoder?v.buffer.join(""):1===v.buffer.length?v.buffer.first():v.buffer.concat(v.length),v.buffer.clear()):I=v.buffer.consume(w,v.decoder),I);var I}function H(w){var v=w._readableState;U("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,process.nextTick(G,v,w))}function G(w,v){if(U("endReadableNT",w.endEmitted,w.length),!w.endEmitted&&0===w.length&&(w.endEmitted=!0,v.readable=!1,v.emit("end"),w.autoDestroy)){var I=v._writableState;(!I||I.autoDestroy&&I.finished)&&v.destroy()}}function L(w,v){for(var I=0,P=w.length;I<P;I++)if(w[I]===v)return I;return-1}o.prototype.read=function(w){U("read",w),w=parseInt(w,10);var v=this._readableState,I=w;if(0!==w&&(v.emittedReadable=!1),0===w&&v.needReadable&&((0!==v.highWaterMark?v.length>=v.highWaterMark:v.length>0)||v.ended))return U("read: emitReadable",v.length,v.ended),0===v.length&&v.ended?H(this):F(this),null;if(0===(w=V(w,v))&&v.ended)return 0===v.length&&H(this),null;var P,u=v.needReadable;return U("need readable",u),(0===v.length||v.length-w<v.highWaterMark)&&U("length less than watermark",u=!0),v.ended||v.reading?U("reading or ended",u=!1):u&&(U("do read"),v.reading=!0,v.sync=!0,0===v.length&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(w=V(I,v))),null===(P=w>0?e(w,v):null)?(v.needReadable=v.length<=v.highWaterMark,w=0):(v.length-=w,v.awaitDrain=0),0===v.length&&(v.ended||(v.needReadable=!0),I!==w&&v.ended&&H(this)),null!==P&&this.emit("data",P),P},o.prototype._read=function(w){i(this,new B("_read()"))},o.prototype.pipe=function(w,v){var I=this,P=this._readableState;switch(P.pipesCount){case 0:P.pipes=w;break;case 1:P.pipes=[P.pipes,w];break;default:P.pipes.push(w)}P.pipesCount+=1,U("pipe count=%d opts=%j",P.pipesCount,v);var Q=(!v||!1!==v.end)&&w!==process.stdout&&w!==process.stderr?a:R;function K(v,u){U("onunpipe"),v===I&&u&&!1===u.hasUnpiped&&(u.hasUnpiped=!0,U("cleanup"),w.removeListener("close",J),w.removeListener("finish",l),w.removeListener("drain",p),w.removeListener("error",g),w.removeListener("unpipe",K),I.removeListener("end",a),I.removeListener("end",R),I.removeListener("data",Y),r=!0,!P.awaitDrain||w._writableState&&!w._writableState.needDrain||p())}function a(){U("onend"),w.end()}P.endEmitted?process.nextTick(Q):I.once("end",Q),w.on("unpipe",K);var p=function(w){return function(){var v=w._readableState;U("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,0===v.awaitDrain&&u(w,"data")&&(v.flowing=!0,S(w))}}(I);w.on("drain",p);var r=!1;function Y(v){U("ondata");var u=w.write(v);U("dest.write",u),!1===u&&((1===P.pipesCount&&P.pipes===w||P.pipesCount>1&&-1!==L(P.pipes,w))&&!r&&(U("false write response, pause",P.awaitDrain),P.awaitDrain++),I.pause())}function g(v){U("onerror",v),R(),w.removeListener("error",g),0===u(w,"error")&&i(w,v)}function J(){w.removeListener("finish",l),R()}function l(){U("onfinish"),w.removeListener("close",J),R()}function R(){U("unpipe"),I.unpipe(w)}return I.on("data",Y),function(w,v,I){if("function"===typeof w.prependListener)return w.prependListener(v,I);w._events&&w._events[v]?Array.isArray(w._events[v])?w._events[v].unshift(I):w._events[v]=[I,w._events[v]]:w.on(v,I)}(w,"error",g),w.once("close",J),w.once("finish",l),w.emit("pipe",I),P.flowing||(U("pipe resume"),I.resume()),w},o.prototype.unpipe=function(w){var v=this._readableState,I={hasUnpiped:!1};if(0===v.pipesCount)return this;if(1===v.pipesCount)return w&&w!==v.pipes||(w||(w=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,w&&w.emit("unpipe",this,I)),this;if(!w){var P=v.pipes,u=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var Q=0;Q<u;Q++)P[Q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=L(v.pipes,w);return-1===K||(v.pipes.splice(K,1),v.pipesCount-=1,1===v.pipesCount&&(v.pipes=v.pipes[0]),w.emit("unpipe",this,I)),this},o.prototype.on=function(w,v){var I=Q.prototype.on.call(this,w,v),P=this._readableState;return"data"===w?(P.readableListening=this.listenerCount("readable")>0,!1!==P.flowing&&this.resume()):"readable"===w&&(P.endEmitted||P.readableListening||(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,U("on readable",P.length,P.reading),P.length?F(this):P.reading||process.nextTick(c,this))),I},o.prototype.addListener=o.prototype.on,o.prototype.removeListener=function(w,v){var I=Q.prototype.removeListener.call(this,w,v);return"readable"===w&&process.nextTick(m,this),I},o.prototype.removeAllListeners=function(w){var v=Q.prototype.removeAllListeners.apply(this,arguments);return"readable"!==w&&void 0!==w||process.nextTick(m,this),v},o.prototype.resume=function(){var w=this._readableState;return w.flowing||(U("resume"),w.flowing=!w.readableListening,function(w,v){v.resumeScheduled||(v.resumeScheduled=!0,process.nextTick(M,w,v))}(this,w)),w.paused=!1,this},o.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},o.prototype.wrap=function(w){var v=this,I=this._readableState,P=!1;for(var u in w.on("end",(function(){if(U("wrapped end"),I.decoder&&!I.ended){var w=I.decoder.end();w&&w.length&&v.push(w)}v.push(null)})),w.on("data",(function(u){(U("wrapped data"),I.decoder&&(u=I.decoder.write(u)),!I.objectMode||null!==u&&void 0!==u)&&((I.objectMode||u&&u.length)&&(v.push(u)||(P=!0,w.pause())))})),w)void 0===this[u]&&"function"===typeof w[u]&&(this[u]=function(v){return function(){return w[v].apply(w,arguments)}}(u));for(var Q=0;Q<z.length;Q++)w.on(z[Q],this.emit.bind(this,z[Q]));return this._read=function(v){U("wrapped _read",v),P&&(P=!1,w.resume())},this},"function"===typeof Symbol&&(o.prototype[Symbol.asyncIterator]=function(){return void 0===Y&&(Y=I(1218)),Y(this)}),Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(o.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(o.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(w){this._readableState&&(this._readableState.flowing=w)}}),o._fromList=e,Object.defineProperty(o.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(o.from=function(w,v){return void 0===g&&(g=I(7670)),g(o,w,v)})},4917:function(w,v,I){"use strict";w.exports=r;var P=I(1092).b,u=P.ERR_METHOD_NOT_IMPLEMENTED,Q=P.ERR_MULTIPLE_CALLBACK,K=P.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=P.ERR_TRANSFORM_WITH_LENGTH_0,U=I(6085);function p(w,v){var I=this._transformState;I.transforming=!1;var P=I.writecb;if(null===P)return this.emit("error",new Q);I.writechunk=null,I.writecb=null,null!=v&&this.push(v),P(w);var u=this._readableState;u.reading=!1,(u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}function r(w){if(!(this instanceof r))return new r(w);U.call(this,w),this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,w&&("function"===typeof w.transform&&(this._transform=w.transform),"function"===typeof w.flush&&(this._flush=w.flush)),this.on("prefinish",Y)}function Y(){var w=this;"function"!==typeof this._flush||this._readableState.destroyed?g(this,null,null):this._flush((function(v,I){g(w,v,I)}))}function g(w,v,I){if(v)return w.emit("error",v);if(null!=I&&w.push(I),w._writableState.length)throw new a;if(w._transformState.transforming)throw new K;return w.push(null)}I(273)(r,U),r.prototype.push=function(w,v){return this._transformState.needTransform=!1,U.prototype.push.call(this,w,v)},r.prototype._transform=function(w,v,I){I(new u("_transform()"))},r.prototype._write=function(w,v,I){var P=this._transformState;if(P.writecb=I,P.writechunk=w,P.writeencoding=v,!P.transforming){var u=this._readableState;(P.needTransform||u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}},r.prototype._read=function(w){var v=this._transformState;null===v.writechunk||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},r.prototype._destroy=function(w,v){U.prototype._destroy.call(this,w,(function(w){v(w)}))}},7423:function(w,v,I){"use strict";function P(w){var v=this;this.next=null,this.entry=null,this.finish=function(){!function(w,v,I){var P=w.entry;w.entry=null;for(;P;){var u=P.callback;v.pendingcb--,u(I),P=P.next}v.corkedRequestsFree.next=w}(v,w)}}var u;w.exports=o,o.WritableState=E;var Q={deprecate:I(9043)},K=I(8747),a=I(918).Buffer,U=I.g.Uint8Array||function(){};var p,r=I(6617),Y=I(5999).getHighWaterMark,g=I(1092).b,J=g.ERR_INVALID_ARG_TYPE,l=g.ERR_METHOD_NOT_IMPLEMENTED,R=g.ERR_MULTIPLE_CALLBACK,x=g.ERR_STREAM_CANNOT_PIPE,j=g.ERR_STREAM_DESTROYED,s=g.ERR_STREAM_NULL_VALUES,B=g.ERR_STREAM_WRITE_AFTER_END,t=g.ERR_UNKNOWN_ENCODING,i=r.errorOrDestroy;function z(){}function E(w,v,Q){u=u||I(6085),w=w||{},"boolean"!==typeof Q&&(Q=v instanceof u),this.objectMode=!!w.objectMode,Q&&(this.objectMode=this.objectMode||!!w.writableObjectMode),this.highWaterMark=Y(this,w,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var K=!1===w.decodeStrings;this.decodeStrings=!K,this.defaultEncoding=w.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(w){!function(w,v){var I=w._writableState,P=I.sync,u=I.writecb;if("function"!==typeof u)throw new R;if(function(w){w.writing=!1,w.writecb=null,w.length-=w.writelen,w.writelen=0}(I),v)!function(w,v,I,P,u){--v.pendingcb,I?(process.nextTick(u,P),process.nextTick(O,w,v),w._writableState.errorEmitted=!0,i(w,P)):(u(P),w._writableState.errorEmitted=!0,i(w,P),O(w,v))}(w,I,P,v,u);else{var Q=V(I)||w.destroyed;Q||I.corked||I.bufferProcessing||!I.bufferedRequest||W(w,I),P?process.nextTick(n,w,I,Q,u):n(w,I,Q,u)}}(v,w)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==w.emitClose,this.autoDestroy=!!w.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new P(this)}function o(w){var v=this instanceof(u=u||I(6085));if(!v&&!p.call(o,this))return new o(w);this._writableState=new E(w,this,v),this.writable=!0,w&&("function"===typeof w.write&&(this._write=w.write),"function"===typeof w.writev&&(this._writev=w.writev),"function"===typeof w.destroy&&(this._destroy=w.destroy),"function"===typeof w.final&&(this._final=w.final)),K.call(this)}function h(w,v,I,P,u,Q,K){v.writelen=P,v.writecb=K,v.writing=!0,v.sync=!0,v.destroyed?v.onwrite(new j("write")):I?w._writev(u,v.onwrite):w._write(u,Q,v.onwrite),v.sync=!1}function n(w,v,I,P){I||function(w,v){0===v.length&&v.needDrain&&(v.needDrain=!1,w.emit("drain"))}(w,v),v.pendingcb--,P(),O(w,v)}function W(w,v){v.bufferProcessing=!0;var I=v.bufferedRequest;if(w._writev&&I&&I.next){var u=v.bufferedRequestCount,Q=new Array(u),K=v.corkedRequestsFree;K.entry=I;for(var a=0,U=!0;I;)Q[a]=I,I.isBuf||(U=!1),I=I.next,a+=1;Q.allBuffers=U,h(w,v,!0,v.length,Q,"",K.finish),v.pendingcb++,v.lastBufferedRequest=null,K.next?(v.corkedRequestsFree=K.next,K.next=null):v.corkedRequestsFree=new P(v),v.bufferedRequestCount=0}else{for(;I;){var p=I.chunk,r=I.encoding,Y=I.callback;if(h(w,v,!1,v.objectMode?1:p.length,p,r,Y),I=I.next,v.bufferedRequestCount--,v.writing)break}null===I&&(v.lastBufferedRequest=null)}v.bufferedRequest=I,v.bufferProcessing=!1}function V(w){return w.ending&&0===w.length&&null===w.bufferedRequest&&!w.finished&&!w.writing}function F(w,v){w._final((function(I){v.pendingcb--,I&&i(w,I),v.prefinished=!0,w.emit("prefinish"),O(w,v)}))}function O(w,v){var I=V(v);if(I&&(function(w,v){v.prefinished||v.finalCalled||("function"!==typeof w._final||v.destroyed?(v.prefinished=!0,w.emit("prefinish")):(v.pendingcb++,v.finalCalled=!0,process.nextTick(F,w,v)))}(w,v),0===v.pendingcb&&(v.finished=!0,w.emit("finish"),v.autoDestroy))){var P=w._readableState;(!P||P.autoDestroy&&P.endEmitted)&&w.destroy()}return I}I(273)(o,K),E.prototype.getBuffer=function(){for(var w=this.bufferedRequest,v=[];w;)v.push(w),w=w.next;return v},function(){try{Object.defineProperty(E.prototype,"buffer",{get:Q.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(w){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(o,Symbol.hasInstance,{value:function(w){return!!p.call(this,w)||this===o&&(w&&w._writableState instanceof E)}})):p=function(w){return w instanceof this},o.prototype.pipe=function(){i(this,new x)},o.prototype.write=function(w,v,I){var P,u=this._writableState,Q=!1,K=!u.objectMode&&(P=w,a.isBuffer(P)||P instanceof U);return K&&!a.isBuffer(w)&&(w=function(w){return a.from(w)}(w)),"function"===typeof v&&(I=v,v=null),K?v="buffer":v||(v=u.defaultEncoding),"function"!==typeof I&&(I=z),u.ending?function(w,v){var I=new B;i(w,I),process.nextTick(v,I)}(this,I):(K||function(w,v,I,P){var u;return null===I?u=new s:"string"===typeof I||v.objectMode||(u=new J("chunk",["string","Buffer"],I)),!u||(i(w,u),process.nextTick(P,u),!1)}(this,u,w,I))&&(u.pendingcb++,Q=function(w,v,I,P,u,Q){if(!I){var K=function(w,v,I){w.objectMode||!1===w.decodeStrings||"string"!==typeof v||(v=a.from(v,I));return v}(v,P,u);P!==K&&(I=!0,u="buffer",P=K)}var U=v.objectMode?1:P.length;v.length+=U;var p=v.length<v.highWaterMark;p||(v.needDrain=!0);if(v.writing||v.corked){var r=v.lastBufferedRequest;v.lastBufferedRequest={chunk:P,encoding:u,isBuf:I,callback:Q,next:null},r?r.next=v.lastBufferedRequest:v.bufferedRequest=v.lastBufferedRequest,v.bufferedRequestCount+=1}else h(w,v,!1,U,P,u,Q);return p}(this,u,K,w,v,I)),Q},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var w=this._writableState;w.corked&&(w.corked--,w.writing||w.corked||w.bufferProcessing||!w.bufferedRequest||W(this,w))},o.prototype.setDefaultEncoding=function(w){if("string"===typeof w&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new t(w);return this._writableState.defaultEncoding=w,this},Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),o.prototype._write=function(w,v,I){I(new l("_write()"))},o.prototype._writev=null,o.prototype.end=function(w,v,I){var P=this._writableState;return"function"===typeof w?(I=w,w=null,v=null):"function"===typeof v&&(I=v,v=null),null!==w&&void 0!==w&&this.write(w,v),P.corked&&(P.corked=1,this.uncork()),P.ending||function(w,v,I){v.ending=!0,O(w,v),I&&(v.finished?process.nextTick(I):w.once("finish",I));v.ended=!0,w.writable=!1}(this,P,I),this},Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(w){this._writableState&&(this._writableState.destroyed=w)}}),o.prototype.destroy=r.destroy,o.prototype._undestroy=r.undestroy,o.prototype._destroy=function(w,v){v(w)}},1218:function(w,v,I){"use strict";var P;function u(w,v,I){return v in w?Object.defineProperty(w,v,{value:I,enumerable:!0,configurable:!0,writable:!0}):w[v]=I,w}var Q=I(4297),K=Symbol("lastResolve"),a=Symbol("lastReject"),U=Symbol("error"),p=Symbol("ended"),r=Symbol("lastPromise"),Y=Symbol("handlePromise"),g=Symbol("stream");function J(w,v){return{value:w,done:v}}function l(w){var v=w[K];if(null!==v){var I=w[g].read();null!==I&&(w[r]=null,w[K]=null,w[a]=null,v(J(I,!1)))}}function R(w){process.nextTick(l,w)}var x=Object.getPrototypeOf((function(){})),j=Object.setPrototypeOf((u(P={get stream(){return this[g]},next:function(){var w=this,v=this[U];if(null!==v)return Promise.reject(v);if(this[p])return Promise.resolve(J(void 0,!0));if(this[g].destroyed)return new Promise((function(v,I){process.nextTick((function(){w[U]?I(w[U]):v(J(void 0,!0))}))}));var I,P=this[r];if(P)I=new Promise(function(w,v){return function(I,P){w.then((function(){v[p]?I(J(void 0,!0)):v[Y](I,P)}),P)}}(P,this));else{var u=this[g].read();if(null!==u)return Promise.resolve(J(u,!1));I=new Promise(this[Y])}return this[r]=I,I}},Symbol.asyncIterator,(function(){return this})),u(P,"return",(function(){var w=this;return new Promise((function(v,I){w[g].destroy(null,(function(w){w?I(w):v(J(void 0,!0))}))}))})),P),x);w.exports=function(w){var v,I=Object.create(j,(u(v={},g,{value:w,writable:!0}),u(v,K,{value:null,writable:!0}),u(v,a,{value:null,writable:!0}),u(v,U,{value:null,writable:!0}),u(v,p,{value:w._readableState.endEmitted,writable:!0}),u(v,Y,{value:function(w,v){var P=I[g].read();P?(I[r]=null,I[K]=null,I[a]=null,w(J(P,!1))):(I[K]=w,I[a]=v)},writable:!0}),v));return I[r]=null,Q(w,(function(w){if(w&&"ERR_STREAM_PREMATURE_CLOSE"!==w.code){var v=I[a];return null!==v&&(I[r]=null,I[K]=null,I[a]=null,v(w)),void(I[U]=w)}var P=I[K];null!==P&&(I[r]=null,I[K]=null,I[a]=null,P(J(void 0,!0))),I[p]=!0})),w.on("readable",R.bind(null,I)),I}},5489:function(w,v,I){"use strict";function P(w,v){var I=Object.keys(w);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);v&&(P=P.filter((function(v){return Object.getOwnPropertyDescriptor(w,v).enumerable}))),I.push.apply(I,P)}return I}function u(w,v,I){return v in w?Object.defineProperty(w,v,{value:I,enumerable:!0,configurable:!0,writable:!0}):w[v]=I,w}function Q(w,v){for(var I=0;I<v.length;I++){var P=v[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}var K=I(918).Buffer,a=I(2361).inspect,U=a&&a.custom||"inspect";w.exports=function(){function w(){!function(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}(this,w),this.head=null,this.tail=null,this.length=0}var v,I,p;return v=w,I=[{key:"push",value:function(w){var v={data:w,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(w){var v={data:w,next:this.head};0===this.length&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(0!==this.length){var w=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(0===this.length)return"";for(var v=this.head,I=""+v.data;v=v.next;)I+=w+v.data;return I}},{key:"concat",value:function(w){if(0===this.length)return K.alloc(0);for(var v,I,P,u=K.allocUnsafe(w>>>0),Q=this.head,a=0;Q;)v=Q.data,I=u,P=a,K.prototype.copy.call(v,I,P),a+=Q.data.length,Q=Q.next;return u}},{key:"consume",value:function(w,v){var I;return w<this.head.data.length?(I=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):I=w===this.head.data.length?this.shift():v?this._getString(w):this._getBuffer(w),I}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var v=this.head,I=1,P=v.data;for(w-=P.length;v=v.next;){var u=v.data,Q=w>u.length?u.length:w;if(Q===u.length?P+=u:P+=u.slice(0,w),0===(w-=Q)){Q===u.length?(++I,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=u.slice(Q));break}++I}return this.length-=I,P}},{key:"_getBuffer",value:function(w){var v=K.allocUnsafe(w),I=this.head,P=1;for(I.data.copy(v),w-=I.data.length;I=I.next;){var u=I.data,Q=w>u.length?u.length:w;if(u.copy(v,v.length-w,0,Q),0===(w-=Q)){Q===u.length?(++P,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=u.slice(Q));break}++P}return this.length-=P,v}},{key:U,value:function(w,v){return a(this,function(w){for(var v=1;v<arguments.length;v++){var I=null!=arguments[v]?arguments[v]:{};v%2?P(Object(I),!0).forEach((function(v){u(w,v,I[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(I)):P(Object(I)).forEach((function(v){Object.defineProperty(w,v,Object.getOwnPropertyDescriptor(I,v))}))}return w}({},v,{depth:0,customInspect:!1}))}}],I&&Q(v.prototype,I),p&&Q(v,p),w}()},6617:function(w){"use strict";function v(w,v){P(w,v),I(w)}function I(w){w._writableState&&!w._writableState.emitClose||w._readableState&&!w._readableState.emitClose||w.emit("close")}function P(w,v){w.emit("error",v)}w.exports={destroy:function(w,u){var Q=this,K=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return K||a?(u?u(w):w&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(P,this,w)):process.nextTick(P,this,w)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(w||null,(function(w){!u&&w?Q._writableState?Q._writableState.errorEmitted?process.nextTick(I,Q):(Q._writableState.errorEmitted=!0,process.nextTick(v,Q,w)):process.nextTick(v,Q,w):u?(process.nextTick(I,Q),u(w)):process.nextTick(I,Q)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(w,v){var I=w._readableState,P=w._writableState;I&&I.autoDestroy||P&&P.autoDestroy?w.destroy(v):w.emit("error",v)}}},4297:function(w,v,I){"use strict";var P=I(1092).b.ERR_STREAM_PREMATURE_CLOSE;function u(){}w.exports=function w(v,I,Q){if("function"===typeof I)return w(v,null,I);I||(I={}),Q=function(w){var v=!1;return function(){if(!v){v=!0;for(var I=arguments.length,P=new Array(I),u=0;u<I;u++)P[u]=arguments[u];w.apply(this,P)}}}(Q||u);var K=I.readable||!1!==I.readable&&v.readable,a=I.writable||!1!==I.writable&&v.writable,U=function(){v.writable||r()},p=v._writableState&&v._writableState.finished,r=function(){a=!1,p=!0,K||Q.call(v)},Y=v._readableState&&v._readableState.endEmitted,g=function(){K=!1,Y=!0,a||Q.call(v)},J=function(w){Q.call(v,w)},l=function(){var w;return K&&!Y?(v._readableState&&v._readableState.ended||(w=new P),Q.call(v,w)):a&&!p?(v._writableState&&v._writableState.ended||(w=new P),Q.call(v,w)):void 0},R=function(){v.req.on("finish",r)};return!function(w){return w.setHeader&&"function"===typeof w.abort}(v)?a&&!v._writableState&&(v.on("end",U),v.on("close",U)):(v.on("complete",r),v.on("abort",l),v.req?R():v.on("request",R)),v.on("end",g),v.on("finish",r),!1!==I.error&&v.on("error",J),v.on("close",l),function(){v.removeListener("complete",r),v.removeListener("abort",l),v.removeListener("request",R),v.req&&v.req.removeListener("finish",r),v.removeListener("end",U),v.removeListener("close",U),v.removeListener("finish",r),v.removeListener("end",g),v.removeListener("error",J),v.removeListener("close",l)}}},7670:function(w){w.exports=function(){throw new Error("Readable.from is not available in the browser")}},6545:function(w,v,I){"use strict";var P;var u=I(1092).b,Q=u.ERR_MISSING_ARGS,K=u.ERR_STREAM_DESTROYED;function a(w){if(w)throw w}function U(w,v,u,Q){Q=function(w){var v=!1;return function(){v||(v=!0,w.apply(void 0,arguments))}}(Q);var a=!1;w.on("close",(function(){a=!0})),void 0===P&&(P=I(4297)),P(w,{readable:v,writable:u},(function(w){if(w)return Q(w);a=!0,Q()}));var U=!1;return function(v){if(!a&&!U)return U=!0,function(w){return w.setHeader&&"function"===typeof w.abort}(w)?w.abort():"function"===typeof w.destroy?w.destroy():void Q(v||new K("pipe"))}}function p(w){w()}function r(w,v){return w.pipe(v)}function Y(w){return w.length?"function"!==typeof w[w.length-1]?a:w.pop():a}w.exports=function(){for(var w=arguments.length,v=new Array(w),I=0;I<w;I++)v[I]=arguments[I];var P,u=Y(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new Q("streams");var K=v.map((function(w,I){var Q=I<v.length-1;return U(w,Q,I>0,(function(w){P||(P=w),w&&K.forEach(p),Q||(K.forEach(p),u(P))}))}));return v.reduce(r)}},5999:function(w,v,I){"use strict";var P=I(1092).b.ERR_INVALID_OPT_VALUE;w.exports={getHighWaterMark:function(w,v,I,u){var Q=function(w,v,I){return null!=w.highWaterMark?w.highWaterMark:v?w[I]:null}(v,u,I);if(null!=Q){if(!isFinite(Q)||Math.floor(Q)!==Q||Q<0)throw new P(u?I:"highWaterMark",Q);return Math.floor(Q)}return w.objectMode?16:16384}}},8747:function(w,v,I){w.exports=I(8041).EventEmitter},1881:function(w,v,I){(v=w.exports=I(6405)).Stream=v,v.Readable=v,v.Writable=I(7423),v.Duplex=I(6085),v.Transform=I(4917),v.PassThrough=I(9543),v.finished=I(4297),v.pipeline=I(6545)},5734:function(w,v,I){var P=I(918),u=P.Buffer;function Q(w,v){for(var I in w)v[I]=w[I]}function K(w,v,I){return u(w,v,I)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?w.exports=P:(Q(P,v),v.Buffer=K),Q(u,K),K.from=function(w,v,I){if("number"===typeof w)throw new TypeError("Argument must not be a number");return u(w,v,I)},K.alloc=function(w,v,I){if("number"!==typeof w)throw new TypeError("Argument must be a number");var P=u(w);return void 0!==v?"string"===typeof I?P.fill(v,I):P.fill(v):P.fill(0),P},K.allocUnsafe=function(w){if("number"!==typeof w)throw new TypeError("Argument must be a number");return u(w)},K.allocUnsafeSlow=function(w){if("number"!==typeof w)throw new TypeError("Argument must be a number");return P.SlowBuffer(w)}},8570:function(w,v,I){"use strict";var P=I(9857).Buffer,u=P.isEncoding||function(w){switch((w=""+w)&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Q(w){var v;switch(this.encoding=function(w){var v=function(w){if(!w)return"utf8";for(var v;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(v)return;w=(""+w).toLowerCase(),v=!0}}(w);if("string"!==typeof v&&(P.isEncoding===u||!u(w)))throw new Error("Unknown encoding: "+w);return v||w}(w),this.encoding){case"utf16le":this.text=U,this.end=p,v=4;break;case"utf8":this.fillLast=a,v=4;break;case"base64":this.text=r,this.end=Y,v=3;break;default:return this.write=g,void(this.end=J)}this.lastNeed=0,this.lastTotal=0,this.lastChar=P.allocUnsafe(v)}function K(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function a(w){var v=this.lastTotal-this.lastNeed,I=function(w,v,I){if(128!==(192&v[0]))return w.lastNeed=0,"\\ufffd";if(w.lastNeed>1&&v.length>1){if(128!==(192&v[1]))return w.lastNeed=1,"\\ufffd";if(w.lastNeed>2&&v.length>2&&128!==(192&v[2]))return w.lastNeed=2,"\\ufffd"}}(this,w);return void 0!==I?I:this.lastNeed<=w.length?(w.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(w.copy(this.lastChar,v,0,w.length),void(this.lastNeed-=w.length))}function U(w,v){if((w.length-v)%2===0){var I=w.toString("utf16le",v);if(I){var P=I.charCodeAt(I.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",v,w.length-1)}function p(w){var v=w&&w.length?this.write(w):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,I)}return v}function r(w,v){var I=(w.length-v)%3;return 0===I?w.toString("base64",v):(this.lastNeed=3-I,this.lastTotal=3,1===I?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",v,w.length-I))}function Y(w){var v=w&&w.length?this.write(w):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function g(w){return w.toString(this.encoding)}function J(w){return w&&w.length?this.write(w):""}v.d=Q,Q.prototype.write=function(w){if(0===w.length)return"";var v,I;if(this.lastNeed){if(void 0===(v=this.fillLast(w)))return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<w.length?v?v+this.text(w,I):this.text(w,I):v||""},Q.prototype.end=function(w){var v=w&&w.length?this.write(w):"";return this.lastNeed?v+"\\ufffd":v},Q.prototype.text=function(w,v){var I=function(w,v,I){var P=v.length-1;if(P<I)return 0;var u=K(v[P]);if(u>=0)return u>0&&(w.lastNeed=u-1),u;if(--P<I||-2===u)return 0;if((u=K(v[P]))>=0)return u>0&&(w.lastNeed=u-2),u;if(--P<I||-2===u)return 0;if((u=K(v[P]))>=0)return u>0&&(2===u?u=0:w.lastNeed=u-3),u;return 0}(this,w,v);if(!this.lastNeed)return w.toString("utf8",v);this.lastTotal=I;var P=w.length-(I-this.lastNeed);return w.copy(this.lastChar,0,P),w.toString("utf8",v,P)},Q.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length}},9857:function(w,v,I){var P=I(918),u=P.Buffer;function Q(w,v){for(var I in w)v[I]=w[I]}function K(w,v,I){return u(w,v,I)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?w.exports=P:(Q(P,v),v.Buffer=K),K.prototype=Object.create(u.prototype),Q(u,K),K.from=function(w,v,I){if("number"===typeof w)throw new TypeError("Argument must not be a number");return u(w,v,I)},K.alloc=function(w,v,I){if("number"!==typeof w)throw new TypeError("Argument must be a number");var P=u(w);return void 0!==v?"string"===typeof I?P.fill(v,I):P.fill(v):P.fill(0),P},K.allocUnsafe=function(w){if("number"!==typeof w)throw new TypeError("Argument must be a number");return u(w)},K.allocUnsafeSlow=function(w){if("number"!==typeof w)throw new TypeError("Argument must be a number");return P.SlowBuffer(w)}},9043:function(w,v,I){function P(w){try{if(!I.g.localStorage)return!1}catch(w){return!1}var v=I.g.localStorage[w];return null!=v&&"true"===String(v).toLowerCase()}w.exports=function(w,v){if(P("noDeprecation"))return w;var I=!1;return function(){if(!I){if(P("throwDeprecation"))throw new Error(v);P("traceDeprecation")?console.trace(v):console.warn(v),I=!0}return w.apply(this,arguments)}}},5882:function(w,v,I){var P=I(3895);function u(w){for(var v,I,u=0,Q=w.length,K=0;K<w.length;){for(v=w[K],I=0;K<Q&&w[K]===v;)++K,++I;u+=P.log2(I)/7|0,u+=P.log2(v>>>0)/7|0,u+=2}return u}v.size=u,v.encode=function(w,v){v||(v=new Uint8Array(u(w)));for(var I,P,Q=0,K=v.length,a=0;a<w.length;){for(I=w[a],P=0;a<w.length&&w[a]===I;)++a,++P;for(;Q<K&&P>=128;)v[Q++]=128+(127&P),P>>>=7;if(Q>=K)throw new Error("RLE buffer overflow");for(v[Q++]=P,I>>>=0;Q<K&&I>=128;)v[Q++]=128+(127&I),I>>>=7;if(Q>=K)throw new Error("RLE buffer overflow");v[Q++]=I}return v},v.decode=function(w,v){for(var I,P,u,Q,K=v.length,a=w.length,U=0,p=0;p<a;){for(I=0,P=0;p<a&&w[p]>=128;)I+=(127&w[p++])<<P,P+=7;if(I+=w[p++]<<P,p>=a)throw new Error("RLE buffer underrun");if(U+I>K)throw new Error("Chunk buffer overflow");for(u=0,P=0;p<a&&w[p]>=128;)u+=(127&w[p++])<<P,P+=7;if(p>=a)throw new Error("RLE buffer underrun");for(u+=w[p++]<<P,Q=0;Q<I;++Q)v[U++]=u}return v}},3895:function(w,v){"use strict";function I(w){var v=32;return(w&=-w)&&v--,65535&w&&(v-=16),16711935&w&&(v-=8),252645135&w&&(v-=4),858993459&w&&(v-=2),1431655765&w&&(v-=1),v}v.INT_BITS=32,v.INT_MAX=2147483647,v.INT_MIN=-1<<31,v.sign=function(w){return(w>0)-(w<0)},v.abs=function(w){var v=w>>31;return(w^v)-v},v.min=function(w,v){return v^(w^v)&-(w<v)},v.max=function(w,v){return w^(w^v)&-(w<v)},v.isPow2=function(w){return!(w&w-1)&&!!w},v.log2=function(w){var v,I;return v=(w>65535)<<4,v|=I=((w>>>=v)>255)<<3,v|=I=((w>>>=I)>15)<<2,(v|=I=((w>>>=I)>3)<<1)|(w>>>=I)>>1},v.log10=function(w){return w>=1e9?9:w>=1e8?8:w>=1e7?7:w>=1e6?6:w>=1e5?5:w>=1e4?4:w>=1e3?3:w>=100?2:w>=10?1:0},v.popCount=function(w){return 16843009*((w=(858993459&(w-=w>>>1&1431655765))+(w>>>2&858993459))+(w>>>4)&252645135)>>>24},v.countTrailingZeros=I,v.nextPow2=function(w){return w+=0===w,--w,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,(w|=w>>>16)+1},v.prevPow2=function(w){return w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,(w|=w>>>16)-(w>>>1)},v.parity=function(w){return w^=w>>>16,w^=w>>>8,w^=w>>>4,27030>>>(w&=15)&1};var P=new Array(256);!function(w){for(var v=0;v<256;++v){var I=v,P=v,u=7;for(I>>>=1;I;I>>>=1)P<<=1,P|=1&I,--u;w[v]=P<<u&255}}(P),v.reverse=function(w){return P[255&w]<<24|P[w>>>8&255]<<16|P[w>>>16&255]<<8|P[w>>>24&255]},v.interleave2=function(w,v){return(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w&=65535)|w<<8))|w<<4))|w<<2))|w<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v&=65535)|v<<8))|v<<4))|v<<2))|v<<1))<<1},v.deinterleave2=function(w,v){return(w=65535&((w=16711935&((w=252645135&((w=858993459&((w=w>>>v&1431655765)|w>>>1))|w>>>2))|w>>>4))|w>>>16))<<16>>16},v.interleave3=function(w,v,I){return w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2),(w|=(v=1227133513&((v=3272356035&((v=251719695&((v=4278190335&((v&=1023)|v<<16))|v<<8))|v<<4))|v<<2))<<1)|(I=1227133513&((I=3272356035&((I=251719695&((I=4278190335&((I&=1023)|I<<16))|I<<8))|I<<4))|I<<2))<<2},v.deinterleave3=function(w,v){return(w=1023&((w=4278190335&((w=251719695&((w=3272356035&((w=w>>>v&1227133513)|w>>>2))|w>>>4))|w>>>8))|w>>>16))<<22>>22},v.nextCombination=function(w){var v=w|w-1;return v+1|(~v&-~v)-1>>>I(w)+1}},2361:function(){},4616:function(){},3897:function(w){w.exports=function(w,v){(null==v||v>w.length)&&(v=w.length);for(var I=0,P=new Array(v);I<v;I++)P[I]=w[I];return P},w.exports.__esModule=!0,w.exports.default=w.exports},5372:function(w){w.exports=function(w){if(Array.isArray(w))return w},w.exports.__esModule=!0,w.exports.default=w.exports},3405:function(w,v,I){var P=I(3897);w.exports=function(w){if(Array.isArray(w))return P(w)},w.exports.__esModule=!0,w.exports.default=w.exports},6690:function(w){w.exports=function(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")},w.exports.__esModule=!0,w.exports.default=w.exports},9728:function(w){function v(w,v){for(var I=0;I<v.length;I++){var P=v[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}w.exports=function(w,I,P){return I&&v(w.prototype,I),P&&v(w,P),Object.defineProperty(w,"prototype",{writable:!1}),w},w.exports.__esModule=!0,w.exports.default=w.exports},4704:function(w,v,I){var P=I(6116);w.exports=function(w,v){var I="undefined"!==typeof Symbol&&w[Symbol.iterator]||w["@@iterator"];if(!I){if(Array.isArray(w)||(I=P(w))||v&&w&&"number"===typeof w.length){I&&(w=I);var u=0,Q=function(){};return{s:Q,n:function(){return u>=w.length?{done:!0}:{done:!1,value:w[u++]}},e:function(w){throw w},f:Q}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,a=!0,U=!1;return{s:function(){I=I.call(w)},n:function(){var w=I.next();return a=w.done,w},e:function(w){U=!0,K=w},f:function(){try{a||null==I.return||I.return()}finally{if(U)throw K}}}},w.exports.__esModule=!0,w.exports.default=w.exports},9498:function(w){w.exports=function(w){if("undefined"!==typeof Symbol&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)},w.exports.__esModule=!0,w.exports.default=w.exports},8872:function(w){w.exports=function(w,v){var I=null==w?null:"undefined"!==typeof Symbol&&w[Symbol.iterator]||w["@@iterator"];if(null!=I){var P,u,Q=[],K=!0,a=!1;try{for(I=I.call(w);!(K=(P=I.next()).done)&&(Q.push(P.value),!v||Q.length!==v);K=!0);}catch(w){a=!0,u=w}finally{try{K||null==I.return||I.return()}finally{if(a)throw u}}return Q}},w.exports.__esModule=!0,w.exports.default=w.exports},2218:function(w){w.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},w.exports.__esModule=!0,w.exports.default=w.exports},2281:function(w){w.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},w.exports.__esModule=!0,w.exports.default=w.exports},7061:function(w,v,I){var P=I(8698).default;function u(){"use strict";w.exports=u=function(){return v},w.exports.__esModule=!0,w.exports.default=w.exports;var v={},I=Object.prototype,Q=I.hasOwnProperty,K="function"==typeof Symbol?Symbol:{},a=K.iterator||"@@iterator",U=K.asyncIterator||"@@asyncIterator",p=K.toStringTag||"@@toStringTag";function r(w,v,I){return Object.defineProperty(w,v,{value:I,enumerable:!0,configurable:!0,writable:!0}),w[v]}try{r({},"")}catch(w){r=function(w,v,I){return w[v]=I}}function Y(w,v,I,P){var u=v&&v.prototype instanceof l?v:l,Q=Object.create(u.prototype),K=new n(P||[]);return Q._invoke=function(w,v,I){var P="suspendedStart";return function(u,Q){if("executing"===P)throw new Error("Generator is already running");if("completed"===P){if("throw"===u)throw Q;return V()}for(I.method=u,I.arg=Q;;){var K=I.delegate;if(K){var a=E(K,I);if(a){if(a===J)continue;return a}}if("next"===I.method)I.sent=I._sent=I.arg;else if("throw"===I.method){if("suspendedStart"===P)throw P="completed",I.arg;I.dispatchException(I.arg)}else"return"===I.method&&I.abrupt("return",I.arg);P="executing";var U=g(w,v,I);if("normal"===U.type){if(P=I.done?"completed":"suspendedYield",U.arg===J)continue;return{value:U.arg,done:I.done}}"throw"===U.type&&(P="completed",I.method="throw",I.arg=U.arg)}}}(w,I,K),Q}function g(w,v,I){try{return{type:"normal",arg:w.call(v,I)}}catch(w){return{type:"throw",arg:w}}}v.wrap=Y;var J={};function l(){}function R(){}function x(){}var j={};r(j,a,(function(){return this}));var s=Object.getPrototypeOf,B=s&&s(s(W([])));B&&B!==I&&Q.call(B,a)&&(j=B);var t=x.prototype=l.prototype=Object.create(j);function i(w){["next","throw","return"].forEach((function(v){r(w,v,(function(w){return this._invoke(v,w)}))}))}function z(w,v){function I(u,K,a,U){var p=g(w[u],w,K);if("throw"!==p.type){var r=p.arg,Y=r.value;return Y&&"object"==P(Y)&&Q.call(Y,"__await")?v.resolve(Y.__await).then((function(w){I("next",w,a,U)}),(function(w){I("throw",w,a,U)})):v.resolve(Y).then((function(w){r.value=w,a(r)}),(function(w){return I("throw",w,a,U)}))}U(p.arg)}var u;this._invoke=function(w,P){function Q(){return new v((function(v,u){I(w,P,v,u)}))}return u=u?u.then(Q,Q):Q()}}function E(w,v){var I=w.iterator[v.method];if(void 0===I){if(v.delegate=null,"throw"===v.method){if(w.iterator.return&&(v.method="return",v.arg=void 0,E(w,v),"throw"===v.method))return J;v.method="throw",v.arg=new TypeError("The iterator does not provide a \'throw\' method")}return J}var P=g(I,w.iterator,v.arg);if("throw"===P.type)return v.method="throw",v.arg=P.arg,v.delegate=null,J;var u=P.arg;return u?u.done?(v[w.resultName]=u.value,v.next=w.nextLoc,"return"!==v.method&&(v.method="next",v.arg=void 0),v.delegate=null,J):u:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,J)}function o(w){var v={tryLoc:w[0]};1 in w&&(v.catchLoc=w[1]),2 in w&&(v.finallyLoc=w[2],v.afterLoc=w[3]),this.tryEntries.push(v)}function h(w){var v=w.completion||{};v.type="normal",delete v.arg,w.completion=v}function n(w){this.tryEntries=[{tryLoc:"root"}],w.forEach(o,this),this.reset(!0)}function W(w){if(w){var v=w[a];if(v)return v.call(w);if("function"==typeof w.next)return w;if(!isNaN(w.length)){var I=-1,P=function v(){for(;++I<w.length;)if(Q.call(w,I))return v.value=w[I],v.done=!1,v;return v.value=void 0,v.done=!0,v};return P.next=P}}return{next:V}}function V(){return{value:void 0,done:!0}}return R.prototype=x,r(t,"constructor",x),r(x,"constructor",R),R.displayName=r(x,p,"GeneratorFunction"),v.isGeneratorFunction=function(w){var v="function"==typeof w&&w.constructor;return!!v&&(v===R||"GeneratorFunction"===(v.displayName||v.name))},v.mark=function(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,x):(w.__proto__=x,r(w,p,"GeneratorFunction")),w.prototype=Object.create(t),w},v.awrap=function(w){return{__await:w}},i(z.prototype),r(z.prototype,U,(function(){return this})),v.AsyncIterator=z,v.async=function(w,I,P,u,Q){void 0===Q&&(Q=Promise);var K=new z(Y(w,I,P,u),Q);return v.isGeneratorFunction(I)?K:K.next().then((function(w){return w.done?w.value:K.next()}))},i(t),r(t,p,"Generator"),r(t,a,(function(){return this})),r(t,"toString",(function(){return"[object Generator]"})),v.keys=function(w){var v=[];for(var I in w)v.push(I);return v.reverse(),function I(){for(;v.length;){var P=v.pop();if(P in w)return I.value=P,I.done=!1,I}return I.done=!0,I}},v.values=W,n.prototype={constructor:n,reset:function(w){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!w)for(var v in this)"t"===v.charAt(0)&&Q.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var w=this.tryEntries[0].completion;if("throw"===w.type)throw w.arg;return this.rval},dispatchException:function(w){if(this.done)throw w;var v=this;function I(I,P){return K.type="throw",K.arg=w,v.next=I,P&&(v.method="next",v.arg=void 0),!!P}for(var P=this.tryEntries.length-1;P>=0;--P){var u=this.tryEntries[P],K=u.completion;if("root"===u.tryLoc)return I("end");if(u.tryLoc<=this.prev){var a=Q.call(u,"catchLoc"),U=Q.call(u,"finallyLoc");if(a&&U){if(this.prev<u.catchLoc)return I(u.catchLoc,!0);if(this.prev<u.finallyLoc)return I(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return I(u.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return I(u.finallyLoc)}}}},abrupt:function(w,v){for(var I=this.tryEntries.length-1;I>=0;--I){var P=this.tryEntries[I];if(P.tryLoc<=this.prev&&Q.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var u=P;break}}u&&("break"===w||"continue"===w)&&u.tryLoc<=v&&v<=u.finallyLoc&&(u=null);var K=u?u.completion:{};return K.type=w,K.arg=v,u?(this.method="next",this.next=u.finallyLoc,J):this.complete(K)},complete:function(w,v){if("throw"===w.type)throw w.arg;return"break"===w.type||"continue"===w.type?this.next=w.arg:"return"===w.type?(this.rval=this.arg=w.arg,this.method="return",this.next="end"):"normal"===w.type&&v&&(this.next=v),J},finish:function(w){for(var v=this.tryEntries.length-1;v>=0;--v){var I=this.tryEntries[v];if(I.finallyLoc===w)return this.complete(I.completion,I.afterLoc),h(I),J}},catch:function(w){for(var v=this.tryEntries.length-1;v>=0;--v){var I=this.tryEntries[v];if(I.tryLoc===w){var P=I.completion;if("throw"===P.type){var u=P.arg;h(I)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(w,v,I){return this.delegate={iterator:W(w),resultName:v,nextLoc:I},"next"===this.method&&(this.arg=void 0),J}},v}w.exports=u,w.exports.__esModule=!0,w.exports.default=w.exports},7424:function(w,v,I){var P=I(5372),u=I(8872),Q=I(6116),K=I(2218);w.exports=function(w,v){return P(w)||u(w,v)||Q(w,v)||K()},w.exports.__esModule=!0,w.exports.default=w.exports},861:function(w,v,I){var P=I(3405),u=I(9498),Q=I(6116),K=I(2281);w.exports=function(w){return P(w)||u(w)||Q(w)||K()},w.exports.__esModule=!0,w.exports.default=w.exports},8698:function(w){function v(I){return w.exports=v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"==typeof Symbol&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},w.exports.__esModule=!0,w.exports.default=w.exports,v(I)}w.exports=v,w.exports.__esModule=!0,w.exports.default=w.exports},6116:function(w,v,I){var P=I(3897);w.exports=function(w,v){if(w){if("string"===typeof w)return P(w,v);var I=Object.prototype.toString.call(w).slice(8,-1);return"Object"===I&&w.constructor&&(I=w.constructor.name),"Map"===I||"Set"===I?Array.from(w):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?P(w,v):void 0}},w.exports.__esModule=!0,w.exports.default=w.exports},4687:function(w,v,I){var P=I(7061)();w.exports=P;try{regeneratorRuntime=P}catch(w){"object"===typeof globalThis?globalThis.regeneratorRuntime=P:Function("r","regeneratorRuntime = r")(P)}}},v={};function I(P){var u=v[P];if(void 0!==u)return u.exports;var Q=v[P]={exports:{}};return w[P](Q,Q.exports,I),Q.exports}I.n=function(w){var v=w&&w.__esModule?function(){return w.default}:function(){return w};return I.d(v,{a:v}),v},I.d=function(w,v){for(var P in v)I.o(v,P)&&!I.o(w,P)&&Object.defineProperty(w,P,{enumerable:!0,get:v[P]})},I.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(w){if("object"===typeof window)return window}}(),I.o=function(w,v){return Object.prototype.hasOwnProperty.call(w,v)},function(){"use strict";function w(w,v){(null==v||v>w.length)&&(v=w.length);for(var I=0,P=new Array(v);I<v;I++)P[I]=w[I];return P}function v(v,I){if(v){if("string"===typeof v)return w(v,I);var P=Object.prototype.toString.call(v).slice(8,-1);return"Object"===P&&v.constructor&&(P=v.constructor.name),"Map"===P||"Set"===P?Array.from(v):"Arguments"===P||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?w(v,I):void 0}}function P(w,I){return function(w){if(Array.isArray(w))return w}(w)||function(w,v){var I=null==w?null:"undefined"!==typeof Symbol&&w[Symbol.iterator]||w["@@iterator"];if(null!=I){var P,u,Q=[],K=!0,a=!1;try{for(I=I.call(w);!(K=(P=I.next()).done)&&(Q.push(P.value),!v||Q.length!==v);K=!0);}catch(w){a=!0,u=w}finally{try{K||null==I.return||I.return()}finally{if(a)throw u}}return Q}}(w,I)||v(w,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(w,I){var P="undefined"!==typeof Symbol&&w[Symbol.iterator]||w["@@iterator"];if(!P){if(Array.isArray(w)||(P=v(w))||I&&w&&"number"===typeof w.length){P&&(w=P);var u=0,Q=function(){};return{s:Q,n:function(){return u>=w.length?{done:!0}:{done:!1,value:w[u++]}},e:function(w){throw w},f:Q}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,a=!0,U=!1;return{s:function(){P=P.call(w)},n:function(){var w=P.next();return a=w.done,w},e:function(w){U=!0,K=w},f:function(){try{a||null==P.return||P.return()}finally{if(U)throw K}}}}function Q(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function K(w,v){for(var I=0;I<v.length;I++){var P=v[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function a(w,v,I){return v&&K(w.prototype,v),I&&K(w,I),Object.defineProperty(w,"prototype",{writable:!1}),w}function U(I){return function(v){if(Array.isArray(v))return w(v)}(I)||function(w){if("undefined"!==typeof Symbol&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)}(I)||v(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,Y=1/6,g=(Math.sqrt(5)-1)/4,J=(5-Math.sqrt(5))/20,l=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),R=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),x=function(){function w(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;Q(this,w);var I="function"==typeof v?v:B(v);this.p=s(I),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var P=0;P<512;P++)this.perm[P]=this.p[255&P],this.permMod12[P]=this.perm[P]%12}return a(w,[{key:"noise2D",value:function(w,v){var I,P,u=this.permMod12,Q=this.perm,K=0,a=0,U=0,Y=(w+v)*p,g=Math.floor(w+Y),J=Math.floor(v+Y),R=(g+J)*r,x=w-(g-R),j=v-(J-R);x>j?(I=1,P=0):(I=0,P=1);var s=x-I+r,B=j-P+r,t=x-1+2*r,i=j-1+2*r,z=255&g,E=255&J,o=.5-x*x-j*j;if(o>=0){var h=3*u[z+Q[E]];K=(o*=o)*o*(l[h]*x+l[h+1]*j)}var n=.5-s*s-B*B;if(n>=0){var W=3*u[z+I+Q[E+P]];a=(n*=n)*n*(l[W]*s+l[W+1]*B)}var V=.5-t*t-i*i;if(V>=0){var F=3*u[z+1+Q[E+1]];U=(V*=V)*V*(l[F]*t+l[F+1]*i)}return 70*(K+a+U)}},{key:"noise3D",value:function(w,v,I){var P,u,Q,K,a,U,p,r,g,J,R=this.permMod12,x=this.perm,j=.3333333333333333*(w+v+I),s=Math.floor(w+j),B=Math.floor(v+j),t=Math.floor(I+j),i=(s+B+t)*Y,z=w-(s-i),E=v-(B-i),o=I-(t-i);z>=E?E>=o?(a=1,U=0,p=0,r=1,g=1,J=0):z>=o?(a=1,U=0,p=0,r=1,g=0,J=1):(a=0,U=0,p=1,r=1,g=0,J=1):E<o?(a=0,U=0,p=1,r=0,g=1,J=1):z<o?(a=0,U=1,p=0,r=0,g=1,J=1):(a=0,U=1,p=0,r=1,g=1,J=0);var h=z-a+Y,n=E-U+Y,W=o-p+Y,V=z-r+2*Y,F=E-g+2*Y,O=o-J+2*Y,N=z-1+.5,q=E-1+.5,m=o-1+.5,c=255&s,M=255&B,S=255&t,e=.6-z*z-E*E-o*o;if(e<0)P=0;else{var H=3*R[c+x[M+x[S]]];P=(e*=e)*e*(l[H]*z+l[H+1]*E+l[H+2]*o)}var G=.6-h*h-n*n-W*W;if(G<0)u=0;else{var L=3*R[c+a+x[M+U+x[S+p]]];u=(G*=G)*G*(l[L]*h+l[L+1]*n+l[L+2]*W)}var d=.6-V*V-F*F-O*O;if(d<0)Q=0;else{var D=3*R[c+r+x[M+g+x[S+J]]];Q=(d*=d)*d*(l[D]*V+l[D+1]*F+l[D+2]*O)}var f=.6-N*N-q*q-m*m;if(f<0)K=0;else{var b=3*R[c+1+x[M+1+x[S+1]]];K=(f*=f)*f*(l[b]*N+l[b+1]*q+l[b+2]*m)}return 32*(P+u+Q+K)}},{key:"noise4D",value:function(w,v,I,P){var u,Q,K,a,U,p=this.perm,r=(w+v+I+P)*g,Y=Math.floor(w+r),l=Math.floor(v+r),x=Math.floor(I+r),j=Math.floor(P+r),s=(Y+l+x+j)*J,B=w-(Y-s),t=v-(l-s),i=I-(x-s),z=P-(j-s),E=0,o=0,h=0,n=0;B>t?E++:o++,B>i?E++:h++,B>z?E++:n++,t>i?o++:h++,t>z?o++:n++,i>z?h++:n++;var W=E>=3?1:0,V=o>=3?1:0,F=h>=3?1:0,O=n>=3?1:0,N=E>=2?1:0,q=o>=2?1:0,m=h>=2?1:0,c=n>=2?1:0,M=E>=1?1:0,S=o>=1?1:0,e=h>=1?1:0,H=n>=1?1:0,G=B-W+J,L=t-V+J,d=i-F+J,D=z-O+J,f=B-N+2*J,b=t-q+2*J,k=i-m+2*J,C=z-c+2*J,y=B-M+3*J,T=t-S+3*J,Z=i-e+3*J,A=z-H+3*J,X=B-1+4*J,ww=t-1+4*J,vw=i-1+4*J,Iw=z-1+4*J,Pw=255&Y,uw=255&l,Qw=255&x,Kw=255&j,aw=.6-B*B-t*t-i*i-z*z;if(aw<0)u=0;else{var Uw=p[Pw+p[uw+p[Qw+p[Kw]]]]%32*4;u=(aw*=aw)*aw*(R[Uw]*B+R[Uw+1]*t+R[Uw+2]*i+R[Uw+3]*z)}var pw=.6-G*G-L*L-d*d-D*D;if(pw<0)Q=0;else{var rw=p[Pw+W+p[uw+V+p[Qw+F+p[Kw+O]]]]%32*4;Q=(pw*=pw)*pw*(R[rw]*G+R[rw+1]*L+R[rw+2]*d+R[rw+3]*D)}var Yw=.6-f*f-b*b-k*k-C*C;if(Yw<0)K=0;else{var gw=p[Pw+N+p[uw+q+p[Qw+m+p[Kw+c]]]]%32*4;K=(Yw*=Yw)*Yw*(R[gw]*f+R[gw+1]*b+R[gw+2]*k+R[gw+3]*C)}var Jw=.6-y*y-T*T-Z*Z-A*A;if(Jw<0)a=0;else{var lw=p[Pw+M+p[uw+S+p[Qw+e+p[Kw+H]]]]%32*4;a=(Jw*=Jw)*Jw*(R[lw]*y+R[lw+1]*T+R[lw+2]*Z+R[lw+3]*A)}var Rw=.6-X*X-ww*ww-vw*vw-Iw*Iw;if(Rw<0)U=0;else{var xw=p[Pw+1+p[uw+1+p[Qw+1+p[Kw+1]]]]%32*4;U=(Rw*=Rw)*Rw*(R[xw]*X+R[xw+1]*ww+R[xw+2]*vw+R[xw+3]*Iw)}return 27*(u+Q+K+a+U)}}]),w}(),j=x;function s(w){for(var v=new Uint8Array(256),I=0;I<256;I++)v[I]=I;for(var P=0;P<255;P++){var u=P+~~(w()*(256-P)),Q=v[P];v[P]=v[u],v[u]=Q}return v}function B(w){var v=0,I=0,P=0,u=1,Q=function(){var w=4022871197;return function(v){v=v.toString();for(var I=0;I<v.length;I++){var P=.02519603282416938*(w+=v.charCodeAt(I));P-=w=P>>>0,w=(P*=w)>>>0,w+=4294967296*(P-=w)}return 2.3283064365386963e-10*(w>>>0)}}();return v=Q(" "),I=Q(" "),P=Q(" "),(v-=Q(w))<0&&(v+=1),(I-=Q(w))<0&&(I+=1),(P-=Q(w))<0&&(P+=1),function(){var w=2091639*v+2.3283064365386963e-10*u;return v=I,I=P,P=w-(u=0|w)}}var t={seaLevel:0,bedrockLevel:-100},i=-1e4,z=-1e4,E=-1e4,o=I(7786);function h(w,v,I){return Math.abs(w[0]-v)+Math.abs(w[1]-I)}function n(w,v){var I=w[0]-v[0],P=w[1]-v[1];return I*I+P*P}function W(w,v,I){var P=w[0]-v,u=w[1]-I;return P*P+u*u}function V(w,v,I){var P=w[0]-v,u=w[1]-I;return Math.sqrt(P*P+u*u)}function F(w,v,I){var P,u,Q,K=n(v,I),a=((w[0]-v[0])*(I[0]-v[0])+(w[1]-v[1])*(I[1]-v[1]))/K;return a<0?(P=v[0],u=v[1],Q=0):a>1?(P=I[0],u=I[1],Q=1):(P=v[0]+a*(I[0]-v[0]),u=v[1]+a*(I[1]-v[1]),Q=a),{dist:V(w,P,u),fracAlong:Q,lineSegmentLength:Math.sqrt(K)}}function O(w,v,I){var P=n(v,I),u=((w[0]-v[0])*(I[0]-v[0])+(w[1]-v[1])*(I[1]-v[1]))/P;return V(w,v[0]+u*(I[0]-v[0]),v[1]+u*(I[1]-v[1]))}function N(w,v,I,P,u){for(var Q=[],K=w-u;K<w+P+u;++K)for(var a=v-u;a<v+P+u;++a)Q.push([I.getOctaves(K,a),I.getOctaves(K+430,a-330)]);return Q}function q(w,v,I,P,u){return I[(w+u)*(P+2*u)+(v+u)]}function m(w){if(Math.abs(w[0])<1e-4)w[0]=0,w[1]=1;else{var v=Math.sqrt(w[0]*w[0]+w[1]*w[1]);w[0]=w[0]/v,w[1]=w[1]/v}}function c(w){var v,I=0,P=u(w.customOctaves);try{for(P.s();!(v=P.n()).done;){I+=v.value.amplitude}}catch(w){P.e(w)}finally{P.f()}return I}var M=function(){function w(v,I){Q(this,w),this.customOctaves=void 0,this._simplexes=[],console.assert(void 0!==I,"Seed must be defined"),this.customOctaves=v;for(var P=0;P<v.length;P++)this._simplexes.push(new j("".concat(I).concat(P)))}return a(w,[{key:"getOctaves",value:function(w,v){for(var I=0,P=0;P<this.customOctaves.length;P++){var u=this.customOctaves[P],Q=u.amplitude,K=u.frequency;I+=this._simplexes[P].noise2D(w*K,v*K)*Q}return I}}]),w}(),S=function(){function w(v,I,P){Q(this,w),this.customOctaves=void 0,this._simplexes=[],this.remainingAmplitudes=void 0,this.threshold=void 0,console.assert(void 0!==P,"Seed must be defined"),this.customOctaves=v,this.threshold=I;for(var u=0;u<v.length;u++)this._simplexes.push(new j("".concat(P).concat(u)));this.remainingAmplitudes=new Array(v.length);for(var K=0,a=this.remainingAmplitudes.length-1;a>=0;a--)K+=this.customOctaves[a].amplitude,this.remainingAmplitudes[a]=K}return a(w,[{key:"getOctaves",value:function(w,v){for(var I=0,P=0;P<this.customOctaves.length;P++){if(I-this.remainingAmplitudes[P]>this.threshold.high||I+this.remainingAmplitudes[P]<this.threshold.low)return E;var u=this.customOctaves[P],Q=u.amplitude,K=u.frequency;I+=this._simplexes[P].noise2D(w*K,v*K)*Q}return I}}]),w}(),e=function(){function w(v){Q(this,w),this.a=void 0;for(var I=2166136261,P=0;P<v.length;P++)I=Math.imul(I^v.charCodeAt(P),16777619);this.a=I}return a(w,[{key:"next",value:function(){var w=this.a+=1831565813;return w=Math.imul(w^w>>>15,1|w),(((w^=w+Math.imul(w^w>>>7,61|w))^w>>>14)>>>0)/4294967296}}]),w}(),H=function(){function w(v,I){var P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Q(this,w),this.array=void 0,this.chunkBottomLeft=void 0,this.needOutsideChunkDist=void 0,this.chunkBottomLeft=I,this.needOutsideChunkDist=P;var u=v+2*P;this.array=o(new Int16Array(u*u),[u,u])}return a(w,[{key:"set",value:function(w,v,I){this.array.set(w-this.chunkBottomLeft[0]+this.needOutsideChunkDist,v-this.chunkBottomLeft[1]+this.needOutsideChunkDist,I)}},{key:"get",value:function(w,v){return this.array.get(w-this.chunkBottomLeft[0]+this.needOutsideChunkDist,v-this.chunkBottomLeft[1]+this.needOutsideChunkDist)}}]),w}(),G=function(){function w(v,I,P,u){var K=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Q(this,w),this.array=void 0,this.chunkBottomLeft=void 0,this.needOutsideChunkDist=void 0,this.chunkBottomLeft=I,this.needOutsideChunkDist=K;var a=v+2*K;this.array=o(new Int16Array(a*a*P*u),[a,a,P,u])}return a(w,[{key:"set",value:function(w,v,I,P,u){this.array.set(w-this.chunkBottomLeft[0]+this.needOutsideChunkDist,v-this.chunkBottomLeft[1]+this.needOutsideChunkDist,I,P,u)}},{key:"get",value:function(w,v,I,P){return this.array.get(w-this.chunkBottomLeft[0]+this.needOutsideChunkDist,v-this.chunkBottomLeft[1]+this.needOutsideChunkDist,I,P)}},{key:"fill",value:function(w){for(var v=0;v<this.array.shape[0];v++)for(var I=0;I<this.array.shape[1];I++)for(var P=0;P<this.array.shape[2];P++)for(var u=0;u<this.array.shape[3];u++)this.array.set(v,I,P,u,w)}}]),w}(),L=function(){function w(v,I){var P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Q(this,w),this.array=void 0,this.chunkBottomLeft=void 0,this.needOutsideChunkDist=void 0,this.chunkBottomLeft=I,this.needOutsideChunkDist=P;var u=v+2*P,K=new Array(u*u);this.array=o(K,[u,u])}return a(w,[{key:"set",value:function(w,v,I){this.array.set(w-this.chunkBottomLeft[0]+this.needOutsideChunkDist,v-this.chunkBottomLeft[1]+this.needOutsideChunkDist,I)}},{key:"get",value:function(w,v){return this.array.get(w-this.chunkBottomLeft[0]+this.needOutsideChunkDist,v-this.chunkBottomLeft[1]+this.needOutsideChunkDist)}}]),w}(),d=I(8915),D=I.n(d),f=I(189),b=I.n(f),k=function(){function w(v,I,P,u,K,a){var U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:void 0;if(Q(this,w),this.minDist=void 0,this.variableDensitySettings=void 0,this.gridSize=void 0,this.cachedCells=void 0,this._tempCellCoord=[0,0],this.useIsPoint=void 0,this.useKthClosestPoint=void 0,this.seed=void 0,this.useJitteredGrid=void 0,this.customCellGap=void 0,this.mostRecentlyAccessedCell=null,console.assert(Number.isInteger(v)),this.cachedCells=new(b())({max:qw()?100:50,ttl:6e4,updateAgeOnGet:!0}),this.minDist=v,this.variableDensitySettings=U,this.customCellGap=r,this.useJitteredGrid=p,this.gridSize=Math.floor(Math.sqrt(K*Math.pow(v,2))),p){var Y=this.gridSize%v;0!==Y&&(this.gridSize+=v-Y)}else{var g=this.gridSize%a;0!==g&&(this.gridSize+=a-g)}this.useIsPoint=I,this.useKthClosestPoint=P,this.seed=u}return a(w,[{key:"isPoint",value:function(w,v){var I=this.getCellCoordFromGlobalCoord(w,v);return!!this.getCell(I[0],I[1]).pointsSet.has("".concat(w,"|").concat(v))}},{key:"getClosestPoint",value:function(w,v){var I,P=this.getCellCoordFromGlobalCoord(w,v),Q=this.getCell(P[0],P[1]),K=[0,0],a=1e4,U=u(this._getPointsSurroundingCell(P,Q));try{for(U.s();!(I=U.n()).done;){var p=I.value,r=V(p,w,v);r<a&&(K=p,a=r)}}catch(w){U.e(w)}finally{U.f()}return K}},{key:"getKClosestPointsWithWeights",value:function(w,v,I){var P=this.getCellCoordFromGlobalCoord(w,v),u=this.getCell(P[0],P[1]);return this._getPointsSurroundingCell(P,u),this._getClosestPointsForGeneratedCell(u,w,v,I)}},{key:"getPointsAroundPoint",value:function(w,v){var I=this.getCellCoordFromGlobalCoord(w,v),P=this.getCell(I[0],I[1]);return this._getPointsSurroundingCell(I,P)}},{key:"_getPointsSurroundingCell",value:function(w,v){if(!v.surroundingPoints){for(var I=U(v.points),P=w[0]-1;P<=w[0]+1;P++)for(var u=w[1]-1;u<=w[1]+1;u++)K=P,a=u,((Q=w)[0]!==K||Q[1]!==a)&&I.push.apply(I,U(this.getCell(P,u).points));v.surroundingPoints=I}var Q,K,a;return v.surroundingPoints}},{key:"_getClosestPointsForGeneratedCell",value:function(w,v,I,P){var Q,K=[0,0],a=1e5,U=u(w.surroundingPoints);try{for(U.s();!(Q=U.n()).done;){var p=Q.value,r=V(p,v,I);r<a&&(K=p,a=r)}}catch(w){U.e(w)}finally{U.f()}for(var Y=[{pt:K,distDiffFromFirstPt:0,weight:0}],g=P,J=0;J<w.surroundingPoints.length;J++){var l=w.surroundingPoints[J];if(l[0]!==K[0]||l[1]!==K[1]){var R=V(l,v,I)-a;R<P&&(Y.push({pt:l,distDiffFromFirstPt:R,weight:0}),g+=P-R)}}for(var x=0,j=Y;x<j.length;x++){var s=j[x];s.weight=(P-s.distDiffFromFirstPt)/g}return Y}},{key:"getCellCoordFromGlobalCoord",value:function(w,v){return this._tempCellCoord[0]=Math.floor(w/this.gridSize),this._tempCellCoord[1]=Math.floor(v/this.gridSize),this._tempCellCoord}},{key:"getCell",value:function(w,v){if(this.mostRecentlyAccessedCell&&this.mostRecentlyAccessedCell.coord[0]===w&&this.mostRecentlyAccessedCell.coord[1]===v)return this.mostRecentlyAccessedCell;var I="".concat(w,"|").concat(v),P=this.cachedCells.get(I);if(P)return this.mostRecentlyAccessedCell=P,P;var u=this.generateRandomPointsForCell(w,v),Q={coord:[w,v],points:u.points,pointsSet:u.pointsSet,surroundingPoints:null};return this.cachedCells.set(I,Q),this.mostRecentlyAccessedCell=Q,Q}},{key:"generateRandomPointsForCell",value:function(w,v){var I,P,Q=w*this.gridSize,K=v*this.gridSize;if(this.useJitteredGrid){var a=new e("".concat(w).concat(v).concat(this.seed,"jitter"));I=[];for(var U=Q+this.gridSize,p=K+this.gridSize,r=Q;r<U;r+=this.minDist)for(var Y=K;Y<p;Y+=this.minDist){var g=r+Math.floor(a.next()*this.minDist),J=Y+Math.floor(a.next()*this.minDist);I.push([g,J])}}else{var l,R=new e("".concat(w).concat(v).concat(this.seed,"pts")),x=function(){return R.next()},j=this.gridSize-(this.customCellGap||this.minDist);if(null===this.variableDensitySettings)l=new(D())({shape:[j,j],minDistance:this.minDist,maxDistance:this.minDist,tries:40},x);else{var s=this.variableDensitySettings.min,B=this.variableDensitySettings.max,t=B-s,i=this.variableDensitySettings.func;l=new(D())({shape:[j,j],minDistance:s,maxDistance:B,tries:10,distanceFunction:function(w){return(i([w[0]+Q,w[1]+K])-s)/t}},x)}I=l.fill().map((function(w){return[Math.floor(Q+w[0]),Math.floor(K+w[1])]}))}if(this.useIsPoint){P=new Set;var z,E=u(I);try{for(E.s();!(z=E.n()).done;){var o=z.value;P.add("".concat(o[0],"|").concat(o[1]))}}catch(w){E.e(w)}finally{E.f()}}return{pointsSet:P,points:this.useKthClosestPoint?I:null}}}]),w}();function C(w,v,I){return v in w?Object.defineProperty(w,v,{value:I,enumerable:!0,configurable:!0,writable:!0}):w[v]=I,w}function y(w,v){var I=Object.keys(w);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);v&&(P=P.filter((function(v){return Object.getOwnPropertyDescriptor(w,v).enumerable}))),I.push.apply(I,P)}return I}function T(w){for(var v=1;v<arguments.length;v++){var I=null!=arguments[v]?arguments[v]:{};v%2?y(Object(I),!0).forEach((function(v){C(w,v,I[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(I)):y(Object(I)).forEach((function(v){Object.defineProperty(w,v,Object.getOwnPropertyDescriptor(I,v))}))}return w}var Z,A=function(){function w(v,I,P,u){Q(this,w),this.chunkSize=void 0,this.pointsGenerator=void 0,this._tempChunkCoord=[0,0],this.maxRadiusChunk=void 0,this.seed=void 0,this.chunkSize=v,this.pointsGenerator=I,this.maxRadiusChunk=Math.floor(.5*P/this.chunkSize)+1,this.seed=u}return a(w,[{key:"getChunkCoordFromGlobalCoord",value:function(w,v){return this._tempChunkCoord[0]=Math.floor(w/this.chunkSize),this._tempChunkCoord[1]=Math.floor(v/this.chunkSize),this._tempChunkCoord}},{key:"getSurroundingFeatures",value:function(w,v){for(var I=this.getChunkCoordFromGlobalCoord(w,v),P=[],u=I[0]-this.maxRadiusChunk;u<=I[0]+this.maxRadiusChunk;u++)for(var Q=I[1]-this.maxRadiusChunk;Q<=I[1]+this.maxRadiusChunk;Q++)this.pointsGenerator.isPoint(u,Q)&&P.push(this._getRandomPointInChunk(u,Q));return P}},{key:"_getRandomPointInChunk",value:function(w,v){var I=w*this.chunkSize,P=v*this.chunkSize,u=new e("".concat(w,"|").concat(v,"|").concat(this.seed));return[I+Math.floor(u.next()*this.chunkSize),P+Math.floor(u.next()*this.chunkSize)]}}]),w}(),X=function(){function w(v,I,P){Q(this,w),this.spaghettCaves=void 0,this.chunkSize=void 0,this.pitCaves={count:1,maxWidth:40,minWidth:15,distApartInChunks:5,distPerturbNoiseSetup:[{amplitude:1,frequency:1/8},{amplitude:3,frequency:.05},{amplitude:10,frequency:.01},{amplitude:29,frequency:.002}],yPerturbNoiseSetup:[{amplitude:1,frequency:.1},{amplitude:3,frequency:.02}],heightPerturbNoiseSetup:[{amplitude:3,frequency:.1},{amplitude:10,frequency:.02}],edgesTargetMidpointNoiseSetup:[{amplitude:1,frequency:1/3},{amplitude:2,frequency:1/7},{amplitude:2,frequency:1/15}],minHeight:25,maxHeight:45,minBottomPit:-99,maxBottomPit:-25,generators:[],distPerturbNoises:[],yPerturbNoises:[],heightPerturbNoises:[],edgesTargetMidpointNoise:[]},this.ravineCaves={count:2,maxWidth:15,minWidth:10,maxLength:90,minLength:50,distApartInChunks:7,distPerturbNoiseSetup:[{amplitude:1,frequency:1/8},{amplitude:3,frequency:.05},{amplitude:10,frequency:.01},{amplitude:30,frequency:.002}],yPerturbNoiseSetup:[{amplitude:1,frequency:.1},{amplitude:3,frequency:.02}],minHeight:25,maxHeight:45,maxBottomRavine:-99,minBottomRavine:-5,generators:[],distPerturbNoises:[],yPerturbNoises:[],edgesTargetMidpointNoise:[]},this.sphereCaves={count:1,maxRadius:6,minRadius:20,distApartInChunks:4,distPerturbNoiseSetup:[{amplitude:1,frequency:1/8},{amplitude:3,frequency:.05}],minCentreSphere:-79,maxCentreSphere:10,generators:[],distPerturbNoises:[]},this.seed=void 0,this.lookOutsideChunkDist=void 0,this.numCaves=void 0,this.numSpaghettiCaves=void 0,this.chunkSize=I,this.seed=v,this.lookOutsideChunkDist=P;var K={count:1,thresholdNoiseSetup:[{amplitude:1.5,frequency:1/300},{amplitude:.5,frequency:1/150},{amplitude:.35,frequency:1/70},{amplitude:.04,frequency:.2}],heightNoiseSetup:[{amplitude:25,frequency:.005},{amplitude:12,frequency:1/150}],heightPerturbSetup:[{amplitude:1,frequency:1/4},{amplitude:5,frequency:.1}],cutoffNoiseSetup:[{amplitude:1,frequency:1/300}],caveOffset:null,threshold:{low:-.1,high:.1},height:9,heightPercentCap:.5,thresholdNoises:[],heightNoises:[],heightPerturbNoises:[],cutoffNoises:[],caveBot:0};this.spaghettCaves=[];for(var a=0,U=[{caveBot:-15,amt:1},{caveBot:-35,amt:1},{caveBot:-55,amt:2},{caveBot:-75,amt:1},{caveBot:-99,amt:1}];a<U.length;a++){var p=U[a],r=p.caveBot,Y=p.amt;this.spaghettCaves.push(T(T({},JSON.parse(JSON.stringify(K))),{},{caveBot:r,count:Y}))}this.spaghettCaves.push({count:2,thresholdNoiseSetup:[{amplitude:1.5,frequency:1/300},{amplitude:.5,frequency:1/150},{amplitude:.35,frequency:1/70},{amplitude:.04,frequency:.2}],heightNoiseSetup:[{amplitude:18,frequency:.01},{amplitude:6,frequency:1/75}],heightPerturbSetup:[{amplitude:1,frequency:1/4},{amplitude:5,frequency:.1}],cutoffNoiseSetup:[{amplitude:1,frequency:1/300}],caveOffset:null,threshold:{low:-.1,high:.1},height:9,heightPercentCap:.5,thresholdNoises:[],heightNoises:[],heightPerturbNoises:[],cutoffNoises:[],caveBot:-98});this.spaghettCaves.push({count:1,thresholdNoiseSetup:[{amplitude:.35,frequency:1/70},{amplitude:.04,frequency:.2}],heightNoiseSetup:[{amplitude:40,frequency:1/120},{amplitude:15,frequency:1/85}],heightPerturbSetup:[{amplitude:2,frequency:.1}],cutoffNoiseSetup:[{amplitude:1,frequency:1/400}],caveOffset:null,threshold:{low:-.06,high:.06},height:12,heightPercentCap:.5,thresholdNoises:[],heightNoises:[],heightPerturbNoises:[],cutoffNoises:[],caveBot:-98});var g,J=u(this.spaghettCaves);try{for(J.s();!(g=J.n()).done;){var l,R=g.value,x=0,j=u(R.heightNoiseSetup);try{for(j.s();!(l=j.n()).done;){x+=l.value.amplitude}}catch(w){j.e(w)}finally{j.f()}R.caveOffset=R.caveBot+x}}catch(w){J.e(w)}finally{J.f()}this.numSpaghettiCaves=0,this.numCaves=0;for(var s=0;s<this.spaghettCaves.length;s++)for(var B=this.spaghettCaves[s],t=0;t<B.count;t++)B.thresholdNoises.push(new S(B.thresholdNoiseSetup,B.threshold,"".concat(v,"Cave").concat(s).concat(t))),B.heightNoises.push(new M(B.heightNoiseSetup,"".concat(v,"CaveHeightNoise").concat(s).concat(t))),B.heightPerturbNoises.push(new M(B.heightPerturbSetup,"".concat(v,"CaveHeightPerturb").concat(s).concat(t))),B.cutoffNoises.push(new M(B.cutoffNoiseSetup,"".concat(v,"CaveCutoff").concat(s).concat(t))),this.numCaves++,this.numSpaghettiCaves++;for(var i=0;i<this.pitCaves.count;i++){this.pitCaves.distPerturbNoises.push(new M(this.pitCaves.distPerturbNoiseSetup,"".concat(v,"DistPitPerturb").concat(i)));var z,E=0,o=u(this.pitCaves.distPerturbNoiseSetup);try{for(o.s();!(z=o.n()).done;){E+=z.value.amplitude}}catch(w){o.e(w)}finally{o.f()}this.pitCaves.yPerturbNoises.push(new M(this.pitCaves.yPerturbNoiseSetup,"".concat(v,"yPitPerturb").concat(i))),this.pitCaves.heightPerturbNoises.push(new M(this.pitCaves.heightPerturbNoiseSetup,"".concat(v,"heightPitPerturb").concat(i))),this.pitCaves.edgesTargetMidpointNoise.push(new M(this.pitCaves.edgesTargetMidpointNoiseSetup,"".concat(v,"edgesPitPerturb").concat(i)));var h=new k(this.pitCaves.distApartInChunks,!0,!1,"".concat(v,"PitGen").concat(i),100,I),n=new A(I,h,this.pitCaves.maxWidth+2*E,"".concat(v,"PitGen").concat(i));this.pitCaves.generators.push(n),console.assert(n.maxRadiusChunk<=this.pitCaves.distApartInChunks/2,"cannot have overlapping cave features, ".concat(n.maxRadiusChunk," ").concat(this.pitCaves.distApartInChunks/2)),this.numCaves++}for(var W=0;W<this.ravineCaves.count;W++){this.ravineCaves.distPerturbNoises.push(new M(this.ravineCaves.distPerturbNoiseSetup,"".concat(v,"DistRavPerturb").concat(W)));var V,F=0,O=u(this.ravineCaves.distPerturbNoiseSetup);try{for(O.s();!(V=O.n()).done;){F+=V.value.amplitude}}catch(w){O.e(w)}finally{O.f()}this.ravineCaves.yPerturbNoises.push(new M(this.ravineCaves.yPerturbNoiseSetup,"".concat(v,"yRavinePerturb").concat(W)));var N=new k(this.ravineCaves.distApartInChunks,!0,!1,"".concat(v,"RavineGen").concat(W),100,I),q=new A(I,N,Math.max(this.ravineCaves.maxLength,this.ravineCaves.maxWidth)+2*F,"".concat(v,"RavineGen").concat(W));this.ravineCaves.generators.push(q),console.assert(q.maxRadiusChunk<=this.ravineCaves.distApartInChunks/2,"cannot have overlapping cave features, ".concat(q.maxRadiusChunk," ").concat(this.ravineCaves.distApartInChunks/2)),this.numCaves++}for(var m=0;m<this.sphereCaves.count;m++){this.sphereCaves.distPerturbNoises.push(new M(this.sphereCaves.distPerturbNoiseSetup,"".concat(v,"DistSpherePerturb").concat(m)));var c,e=0,H=u(this.sphereCaves.distPerturbNoiseSetup);try{for(H.s();!(c=H.n()).done;){e+=c.value.amplitude}}catch(w){H.e(w)}finally{H.f()}var G=new k(this.sphereCaves.distApartInChunks,!0,!1,"".concat(v,"SphereGen").concat(m),100,I),L=new A(I,G,2*this.sphereCaves.maxRadius+2*e,"".concat(v,"SphereGen").concat(m));this.sphereCaves.generators.push(L),console.assert(L.maxRadiusChunk<=this.sphereCaves.distApartInChunks/2,"cannot have overlapping cave features, ".concat(L.maxRadiusChunk," ").concat(this.sphereCaves.distApartInChunks/2)),this.numCaves++}}return a(w,[{key:"getCaveInfoForChunk",value:function(w,v,I){var P=new G(this.chunkSize,[w,v],this.numCaves,2,this.lookOutsideChunkDist);P.fill(z);for(var u=w-this.lookOutsideChunkDist;u<w+this.chunkSize+this.lookOutsideChunkDist;++u)for(var Q=v-this.lookOutsideChunkDist;Q<v+this.chunkSize+this.lookOutsideChunkDist;++Q)this._addSpaghettCavesForColumn(u,Q,P,I.groundHeights,0);var K=this.numSpaghettiCaves;return this._addPitCaves(w,v,P,I.groundHeights,K),K+=this.pitCaves.count,this._addSphereCaves(w,v,P,I.groundHeights,K),K+=this.sphereCaves.count,this._addRavineCaves(w,v,P,I.groundHeights,K),this.removeCavesNearWater(w,v,P,I),P}},{key:"_addSpaghettCavesForColumn",value:function(w,v,I,P,Q){var K,a=u(this.spaghettCaves);try{for(a.s();!(K=a.n()).done;)for(var U=K.value,p=0;p<U.count;p++){Q++;var r=U.cutoffNoises[p].getOctaves(w,v),Y=.08;if(!(r>=Y)){var g=U.thresholdNoises[p].getOctaves(w,v);if(g!==E)if(g>U.threshold.low&&g<U.threshold.high){var J=U.threshold.high-U.threshold.low,l=U.threshold.low+J/2,R=Math.min(U.heightPercentCap,1-Math.abs(g-l)/(J/2)),x=U.height*R;r>0&&(x*=(Y-r)/Y);var j=U.heightPerturbNoises[p].getOctaves(w,v),s=U.heightPerturbNoises[p].getOctaves(w+980,v-370),B=U.heightNoises[p].getOctaves(w+j,v+s),t=Math.floor(B-x+U.caveOffset),i=Math.floor(B+x+U.caveOffset);i+1===P.get(w,v)&&i++,I.set(w,v,Q-1,0,t),I.set(w,v,Q-1,1,i)}}}}catch(w){a.e(w)}finally{a.f()}}},{key:"_addPitCaves",value:function(w,v,I,Q,K){for(var a=0;a<this.pitCaves.generators.length;a++){K++;var U,p=this.pitCaves.generators[a],r=N(w,v,this.pitCaves.distPerturbNoises[a],this.chunkSize,this.lookOutsideChunkDist),Y=u(p.getSurroundingFeatures(w,v));try{for(Y.s();!(U=Y.n()).done;)for(var g=P(U.value,2),J=g[0],l=g[1],R=new e("pit".concat(J,"|").concat(l,"|").concat(a).concat(this.seed)),x=Math.floor(R.next()*(this.pitCaves.maxWidth-this.pitCaves.minWidth))+this.pitCaves.minWidth,j=Math.floor(R.next()*(this.pitCaves.maxWidth-this.pitCaves.minWidth))+this.pitCaves.minWidth,s=J+x/2,B=J-x/2,t=l+j/2,i=l-j/2,z=Math.floor(R.next()*(this.pitCaves.maxBottomPit-this.pitCaves.minBottomPit))+this.pitCaves.minBottomPit,E=Math.floor(R.next()*(this.pitCaves.maxHeight-this.pitCaves.minHeight))+this.pitCaves.minHeight,o=-this.lookOutsideChunkDist;o<this.chunkSize+this.lookOutsideChunkDist;++o)for(var h=-this.lookOutsideChunkDist;h<this.chunkSize+this.lookOutsideChunkDist;++h){var n=w+o,W=v+h,V=q(o,h,r,this.chunkSize,this.lookOutsideChunkDist),F=n+V[0],O=W+V[1];if(!(F>s||F<B||O>t||O<i)){var m=this.pitCaves.yPerturbNoises[a].getOctaves(n,W),c=this.pitCaves.heightPerturbNoises[a].getOctaves(n,W),M=z+m,S=z+E+c,H=Math.min(s-F,F-B),G=Math.min(t-O,O-i),L=Math.min(H,G);if(L<4){var d=5+this.pitCaves.edgesTargetMidpointNoise[a].getOctaves(n,W),D=1-L/4;S-=(S-(M+=d*D))*D}M=Math.floor(M),(S=Math.floor(S))+1===Q.get(n,W)&&S++,I.set(n,W,K-1,0,M),I.set(n,W,K-1,1,S)}}}catch(w){Y.e(w)}finally{Y.f()}}}},{key:"_addRavineCaves",value:function(w,v,I,Q,K){for(var a=0;a<this.ravineCaves.generators.length;a++){K++;var U,p=this.ravineCaves.generators[a],r=N(w,v,this.ravineCaves.distPerturbNoises[a],this.chunkSize,this.lookOutsideChunkDist),Y=u(p.getSurroundingFeatures(w,v));try{for(Y.s();!(U=Y.n()).done;){var g=U.value,J=P(g,2),l=J[0],R=J[1],x=new e("rav".concat(l,"|").concat(R,"|").concat(a).concat(this.seed)),j=Math.floor(x.next()*(this.ravineCaves.maxWidth-this.ravineCaves.minWidth))+this.ravineCaves.minWidth,s=Math.floor(x.next()*(this.ravineCaves.maxLength-this.ravineCaves.minLength))+this.ravineCaves.minLength,B=Math.floor(x.next()*(this.ravineCaves.maxBottomRavine-this.ravineCaves.minBottomRavine))+this.ravineCaves.minBottomRavine,t=Math.floor(x.next()*(this.ravineCaves.maxHeight-this.ravineCaves.minHeight))+this.ravineCaves.minHeight,i=[2*x.next()-1,2*x.next()-1];m(i);for(var z=-this.lookOutsideChunkDist;z<this.chunkSize+this.lookOutsideChunkDist;++z)for(var E=-this.lookOutsideChunkDist;E<this.chunkSize+this.lookOutsideChunkDist;++E){var o=w+z,h=v+E,n=q(z,E,r,this.chunkSize,this.lookOutsideChunkDist),W=o+n[0],F=h+n[1],c=[W,F];m([W-l,F-R]);var M=V(g,W,F);if(!(M>s)){var S=O(c,g,[g[0]+i[0],g[1]+i[1]]),H=j*(1-M/s);if(!(S>H)){var G=this.ravineCaves.yPerturbNoises[a].getOctaves(o,h),L=B+G,d=B+t+G,D=H-S;if(D<3)L+=t*(1-D/3);L=Math.floor(L),(d=Math.floor(d))+1===Q.get(o,h)&&d++,I.set(o,h,K-1,0,L),I.set(o,h,K-1,1,d)}}}}}catch(w){Y.e(w)}finally{Y.f()}}}},{key:"_addSphereCaves",value:function(w,v,I,Q,K){for(var a=0;a<this.sphereCaves.generators.length;a++){K++;var U,p=this.sphereCaves.generators[a],r=N(w,v,this.sphereCaves.distPerturbNoises[a],this.chunkSize,this.lookOutsideChunkDist),Y=u(p.getSurroundingFeatures(w,v));try{for(Y.s();!(U=Y.n()).done;)for(var g=P(U.value,2),J=g[0],l=g[1],R=new e("sph".concat(J,"|").concat(l,"|").concat(a).concat(this.seed)),x=Math.floor(R.next()*(this.sphereCaves.maxRadius-this.sphereCaves.minRadius))+this.sphereCaves.minRadius,j=x*x,s=Math.floor(R.next()*(this.sphereCaves.maxCentreSphere-this.sphereCaves.minCentreSphere))+this.sphereCaves.minCentreSphere,B=-this.lookOutsideChunkDist;B<this.chunkSize+this.lookOutsideChunkDist;++B)for(var t=-this.lookOutsideChunkDist;t<this.chunkSize+this.lookOutsideChunkDist;++t){var i=w+B,z=v+t,E=q(B,t,r,this.chunkSize,this.lookOutsideChunkDist),o=i+E[0],h=z+E[1],n=J-o,W=l-h,V=n*n+W*W;if(!(V>j)){var F=Math.sqrt(j-V),O=Math.floor(s-F),m=Math.floor(s+F);m+1===Q.get(i,z)&&m++,I.set(i,z,K-1,0,O),I.set(i,z,K-1,1,m)}}}catch(w){Y.e(w)}finally{Y.f()}}}},{key:"isCave",value:function(w,v,I,P){for(var u=0;u<this.numCaves;u++){var Q=P.get(w,I,u,0),K=P.get(w,I,u,1);if(v>=Q&&v<=K)return!0}return!1}},{key:"addCavesToChunk",value:function(w,v,I,P,u){for(var Q=v;Q<v+this.chunkSize;Q++)for(var K=P;K<P+this.chunkSize;K++)for(var a=0;a<this.numCaves;a++){var U=u.get(Q,K,a,0),p=u.get(Q,K,a,1);if(U!==z)for(var r=Math.min(p+1,I+this.chunkSize),Y=Math.max(U,I);Y<r;Y++)w.set(Q-v,Y-I,K-P,0)}}},{key:"removeCavesNearWater",value:function(w,v,I,P){for(var u=w-this.lookOutsideChunkDist;u<w+this.chunkSize+this.lookOutsideChunkDist;++u)for(var Q=v-this.lookOutsideChunkDist;Q<v+this.chunkSize+this.lookOutsideChunkDist;++Q){var K=P.cavesAllowedBelowY.get(u,Q);if(1e4!==K)for(var a=0;a<this.numCaves;a++){var U=I.get(u,Q,a,0);I.get(u,Q,a,1)>K&&(U>K?(I.set(u,Q,a,0,z),I.set(u,Q,a,1,z)):I.set(u,Q,a,1,K))}}}}]),w}();!function(w){w[w.Maple=0]="Maple",w[w.Pine=1]="Pine",w[w.Plum=2]="Plum",w[w.Cedar=4]="Cedar",w[w.Aspen=5]="Aspen",w[w.Elm=6]="Elm",w[w.Palm=7]="Palm",w[w.AutumnMaple=8]="AutumnMaple",w[w.Pear=9]="Pear"}(Z||(Z={}));var ww=function(){function w(v,I,P,K,a){var U;Q(this,w),this.treeRadius=void 0,this.cavesGenerator=void 0,this.chunkSize=void 0,this.seed=void 0,this.treePointGen=void 0,this.blockMetadata=void 0,this.treeMinDistApart=6,this.minTreeHeight=4,this.maxTreeHeight=7,this.treeBlockIds=void 0,this.treeBlockIds=(C(U={},Z.Maple,{block:a["Maple Log"].id,base:a["Maple Log|TreeBase"].id,canopyLeaves:a["Maple Leaves|TreeCanopy"].id}),C(U,Z.Pine,{block:a["Pine Log"].id,base:a["Pine Log|TreeBase"].id,canopyLeaves:a["Pine Leaves|TreeCanopy"].id}),C(U,Z.Plum,{block:a["Plum Log"].id,base:a["Plum Log|TreeBase"].id,canopyLeaves:a["Plum Leaves|TreeCanopy"].id}),C(U,Z.Cedar,{block:a["Cedar Log"].id,base:a["Cedar Log|TreeBase"].id,canopyLeaves:a["Cedar Leaves|TreeCanopy"].id}),C(U,Z.Aspen,{block:a["Aspen Log"].id,base:a["Aspen Log|TreeBase"].id,canopyLeaves:a["Aspen Leaves|TreeCanopy"].id}),C(U,Z.Elm,{block:a["Elm Log"].id,base:a["Elm Log|TreeBase"].id,canopyLeaves:a["Elm Leaves|TreeCanopy"].id}),C(U,Z.Palm,{block:a["Palm Log"].id,base:a["Palm Log|TreeBase"].id,canopyLeaves:a["Palm Leaves|TreeCanopy"].id}),C(U,Z.AutumnMaple,{block:a["Maple Log"].id,base:a["Maple Log|TreeBase"].id,canopyLeaves:a["Autumn Maple Leaves|TreeCanopy"].id}),C(U,Z.Pear,{block:a["Pear Log"].id,base:a["Pear Log|TreeBase"].id,canopyLeaves:a["Pear Leaves|TreeCanopy"].id}),U),this.treeRadius=v.treeRadius,this.cavesGenerator=I,this.chunkSize=P,this.seed=K,this.blockMetadata=a;var p,r=1e5,Y=0,g=u(v.biomeSelector.biomes);try{for(g.s();!(p=g.n()).done;){var J=p.value;J.biome.treeMinDist&&(r=Math.min(r,J.biome.treeMinDist),Y=Math.max(Y,J.biome.treeMinDist))}}catch(w){g.e(w)}finally{g.f()}this.treePointGen=new k(6,!0,!1,K,300,P,{func:function(w){return v._getBiome(w[0],w[1]).biome.treeMinDist||Y},min:r,max:Y},!1,2)}return a(w,[{key:"_getTreeTrunksForBlocksInChunk",value:function(v,I,P,u,Q){for(var K=P.groundHeights,a=P.waterHeights,U=new L(this.chunkSize,[v,I],this.treeRadius),p=v-this.treeRadius;p<v+this.chunkSize+this.treeRadius;p++)for(var r=I-this.treeRadius;r<I+this.chunkSize+this.treeRadius;r++){var Y=u.get(p,r)[0].biome;if(null!==Y.treeMinDist)if(Y.getTotalTreeChance()<=0&&console.error("Biome",Y,"has 0 total tree chance"),this.treePointGen.isPoint(p,r)&&a.get(p,r)===i){var g=K.get(p,r);if(!this.cavesGenerator.isCave(p,g,r,Q)){var J=new e("".concat(p).concat(r).concat(this.seed,"treeHeight")),l=w.getTreeTypeFromBiome(Y,J),R=this.getRandTreeInfo(J),x=R.height,j=R.vineDir;this._addTreeToTreesNearbyBlocks(U,p,r,{pos:[p,r],height:x,vineDir:j,treeType:l},v,I)}}}return U}},{key:"getRandTreeInfo",value:function(w){return{height:Math.floor(w.next()*(this.maxTreeHeight-this.minTreeHeight))+this.minTreeHeight,vineDir:w.next()<1/30?Math.floor(4*w.next()):-1}}},{key:"_addTreeToTreesNearbyBlocks",value:function(w,v,I,P,u,Q){for(var K=v-this.treeRadius;K<=v+this.treeRadius;K++)for(var a=I-this.treeRadius;a<=I+this.treeRadius;a++)if(K>=u&&K<u+this.chunkSize&&a>=Q&&a<Q+this.chunkSize){var U=w.get(K,a)||[];U.push(P),w.set(K,a,U)}}},{key:"getTreeBlock",value:function(w,v,I,Q,K){var a=Q.get(w,I);if(v<=a)return 0;if(v>a&&v<=a+this.maxTreeHeight){var U,p=u(K);try{for(p.s();!(U=p.n()).done;){var r=U.value,Y=r.pos,g=Q.get(Y[0],Y[1])+1,J=this.getTrunkBlockFromInfo(w,v,I,g,r);if(0!==J)return J}}catch(w){p.e(w)}finally{p.f()}}if(v<=a+this.maxTreeHeight+5){var l,R=u(K);try{for(R.s();!(l=R.n()).done;){var x=l.value,j=P(x.pos,2),s=j[0],B=j[1],t=Q.get(s,B),i=this._getLeafBlockFromInfo(w,v,I,s,B,t+1,x);if(0!==i)return i}}catch(w){R.e(w)}finally{R.f()}}return 0}},{key:"getTrunkBlockFromInfo",value:function(w,v,I,P,u){var Q=P+u.height-1,K=u.pos;if(v<=Q){if(K[0]===w&&K[1]===I)return v===P?this.treeBlockIds[u.treeType].base:this.treeBlockIds[u.treeType].block;if(-1!==u.vineDir){var a=this.getVineInfoForTrunk(u.vineDir),U=a.offsetFromTrunk;if(K[0]+U[0]===w&&K[1]+U[1]===I&&v<Q-1)return a.blockId}}return 0}},{key:"getVineInfoForTrunk",value:function(w){var v={offsetFromTrunk:[0,0],blockId:0};return 0===w?(v.offsetFromTrunk[0]=-1,v.blockId=this.blockMetadata["Vines|meta|rot4"].id):1===w?(v.offsetFromTrunk[1]=1,v.blockId=this.blockMetadata.Vines.id):2===w?(v.offsetFromTrunk[0]=1,v.blockId=this.blockMetadata["Vines|meta|rot2"].id):3===w&&(v.offsetFromTrunk[1]=-1,v.blockId=this.blockMetadata["Vines|meta|rot3"].id),v}},{key:"_getLeafBlockFromInfo",value:function(w,v,I,P,u,Q,K){var a=K.height,U=Q+a-3,p=Q+a+this.treeRadius-1;if(v>U&&v<=p){var r,Y;v<p-1&&(r=2.8,Y=3),v===p-1?(r=1.2,Y=1.7):v===p&&(r=.2,Y=1.1);var g=function(w,v){var I=w[0]-v[0],P=w[1]-v[1];return Math.sqrt(I*I+P*P)}([P,u],[w,I]);return g>=Y?0:g>=r?new e("".concat(w).concat(v).concat(I,"leaf")).next()<.8?this.treeBlockIds[K.treeType].canopyLeaves:0:this.treeBlockIds[K.treeType].canopyLeaves}return 0}},{key:"getAllBlocksForTree",value:function(w,v){for(var I=P(v.pos,2),u=I[0],Q=I[1],K=v.height,a=(v.vineDir,[]),U=u-this.treeRadius;U<=u+this.treeRadius;U++)for(var p=w;p<=w+K;p++)for(var r=Q-this.treeRadius;r<=Q+this.treeRadius;r++){var Y=this.getTrunkBlockFromInfo(U,p,r,w,v);if(0===Y){var g=this._getLeafBlockFromInfo(U,p,r,u,Q,w,v);0!==g&&a.push({x:U,y:p,z:r,id:g})}else a.push({x:U,y:p,z:r,id:Y})}return a}}],[{key:"getTreeTypeFromBiome",value:function(w,v){for(var I=Math.floor(v.next()*w.getTotalTreeChance()),P=0,u=0;P<=I;)P+=w.treeChances[u].chance,u++;return w.treeChances[u-1].treeType}}]),w}(),vw=I(5882),Iw=a((function w(){Q(this,w),this.hasLake=!1,this.lakeCreationHasBeenAttempted=!1,this.lakeWaterHeight=0,this.lakeRadius=0,this.lakeBedHeight=0})),Pw=function(){function w(v,I,P,u){Q(this,w),this.worldGenerator=void 0,this.gridSize=224,this.cellCenterMaxOffset=void 0,this.maxRiverSettings={width:23,atFlux:800},this.lakeSettings={minRadius:15,maxRadius:60,maxRadiusAtFlux:1700,noLakeFluxCutoff:50},this.widthOffset=2,this.seed=void 0,this.lakeRadiusNoiseModifier=void 0,this.lakeRadiusNoiseAmplitude=void 0,this.waterBodyInfos=new Map,this.lastReadInfo={lastId:null,info:null},this.worldGenerator=v;var K=Math.max(this.lakeSettings.maxRadius,this.maxRiverSettings.width/2+this.widthOffset)+u+P;this.cellCenterMaxOffset=this.gridSize/2-K,this.seed=I,this.lakeRadiusNoiseModifier=new M([{amplitude:10,frequency:1/55},{amplitude:4,frequency:.04}],"".concat(I,"GlobalHeightmapOffset")),this.lakeRadiusNoiseAmplitude=c(this.lakeRadiusNoiseModifier)}return a(w,[{key:"getInfoNeededForWaterGen",value:function(w,v){var I=[w,v],P=this.getWaterInfo(w,v,!0),Q=1e4,K=0,a=0,U=0,p=0,r=0,Y=0;if(P.downhill){var g=F(I,P.origin,P.downhill.origin),J=g.dist,l=g.fracAlong,R=g.lineSegmentLength;K=Math.floor(J);var x=P.incomingFlux;if(x+=l*P.selfFlux,U=Math.min(1,x/this.maxRiverSettings.atFlux),Q=K-(a=Math.max(1,Math.ceil(U*this.maxRiverSettings.width)))/2,r=P.originNoWaterHeight+-3,P.downhill.lakeInfo.hasLake){Y=P.downhill.lakeInfo.lakeWaterHeight;var j=R-P.downhill.lakeInfo.lakeRadius,s=R*l;p=Math.min(1,s/j)}else Y=P.downhill.originNoWaterHeight+-3,p=l}var B,t=u(P.uphills);try{for(t.s();!(B=t.n()).done;){var i=B.value,z=F(I,i.origin,P.origin),E=z.dist,o=z.fracAlong,h=z.lineSegmentLength,n=Math.floor(E),W=i.incomingFlux;W+=o*i.selfFlux;var O=Math.min(1,W/this.maxRiverSettings.atFlux),N=Math.max(1,Math.ceil(O*this.maxRiverSettings.width)),q=n-N/2;if(q<Q)if(Q=q,K=n,U=O,a=N,r=i.originNoWaterHeight+-3,P.lakeInfo.hasLake){Y=P.lakeInfo.lakeWaterHeight;var m=h-P.lakeInfo.lakeRadius,c=h*o;p=Math.min(1,c/m)}else Y=P.originNoWaterHeight+-3,p=o}}catch(w){t.e(w)}finally{t.f()}if(1e4!==Q){var M=1e4,S=0;if(P.lakeInfo.hasLake){var e=P.lakeInfo,H=this.lakeRadiusNoiseModifier.getOctaves(w,v);H+=this.lakeRadiusNoiseAmplitude,H*=e.lakeRadius/this.lakeSettings.maxRadius,S=e.lakeRadius-H,M=V(P.origin,w,v)-S}var G=Math.floor(Y+(r-Y)*(1-p)),L=G-(Math.ceil(10*U)+2);if(Q<M)return{distFromWater:K,waterRadius:(a+this.widthOffset)/2,waterHeight:G,waterbedHeight:L,isLake:!1};var d=V(P.origin,w,v),D=P.lakeInfo;return{distFromWater:d,waterRadius:S,waterHeight:D.lakeWaterHeight,waterbedHeight:D.lakeBedHeight,isLake:!0}}return{distFromWater:1e4,waterRadius:0,waterHeight:0,waterbedHeight:0,isLake:!1}}},{key:"getWaterInfo",value:function(w,v,I){var P=Math.floor(w/this.gridSize),u=Math.floor(v/this.gridSize),Q=this.getCellInfo(P,u);if(Q.uphills||this.fillInUphillInfo(P,u,Q),Q.downhill||Q.lakeInfo.lakeCreationHasBeenAttempted||(this.fillInLakeInfo(Q),Q.lakeInfo.lakeCreationHasBeenAttempted=!0),I&&Q.downhill){var K=this.getWaterInfo(Q.downhill.origin[0],Q.downhill.origin[1],!1);Q.downhill.lakeInfo=K.lakeInfo}return Q}},{key:"getCellInfo",value:function(w,v){var I="".concat(w,"|").concat(v);if(I===this.lastReadInfo.lastId)return this.lastReadInfo.info;if(this.waterBodyInfos.has(I)){var P=this.waterBodyInfos.get(I);return this.lastReadInfo.lastId=I,this.lastReadInfo.info=P,P}var u=this.getCellOrigin(w,v),Q=this.worldGenerator.getClosestBiomes(u[0],u[1]),K=this.worldGenerator.getNoWaterHeightmapVal(u[0],u[1],Q),a={origin:u,originNoWaterHeight:K,downhill:this.getDownhillFromCell(w,v,K),uphills:null,incomingFlux:null,selfFlux:this.getRainfall(u[0],u[1]),lakeInfo:new Iw};return this.lastReadInfo.lastId=I,this.lastReadInfo.info=a,this.waterBodyInfos.set(I,a),this.waterBodyInfos.size>200&&this.waterBodyInfos.delete(this.waterBodyInfos.keys().next().value),a}},{key:"fillInUphillInfo",value:function(w,v,I){var P,Q=this.getUphillsFromCell(w,v),K=0,a=u(Q);try{for(a.s();!(P=a.n()).done;){var U=P.value;K+=U.incomingFlux+U.selfFlux}}catch(w){a.e(w)}finally{a.f()}I.uphills=Q,I.incomingFlux=K}},{key:"getUphillsFromCell",value:function(w,v){for(var I=[],P=-1;P<=1;P++)for(var u=-1;u<=1;u++){var Q,K,a=w+P,U=v+u,p=Math.abs(P)+Math.abs(u);if(2!==p&&0!==p){var r=this.getCellInfo(a,U);(null===(Q=r.downhill)||void 0===Q?void 0:Q.cell[0])===w&&(null===(K=r.downhill)||void 0===K?void 0:K.cell[1])===v&&(r.uphills||this.fillInUphillInfo(a,U,r),I.push({incomingFlux:r.incomingFlux,selfFlux:r.selfFlux,origin:r.origin,originNoWaterHeight:r.originNoWaterHeight}))}}return I}},{key:"getDownhillFromCell",value:function(w,v,I){for(var P={cell:[0,0],origin:null,originNoWaterHeight:0,lakeInfo:new Iw},u=-1,Q=-1;Q<=1;Q++)for(var K=-1;K<=1;K++){var a=w+Q,U=v+K,p=Math.abs(Q)+Math.abs(K);if(2!==p&&0!==p){var r=this.getCellOrigin(a,U),Y=this.worldGenerator.getClosestBiomes(r[0],r[1]),g=this.worldGenerator.getNoWaterHeightmapVal(r[0],r[1],Y),J=I-g;J>0&&J>u&&(u=J,P.cell[0]=a,P.cell[1]=U,P.origin=r,P.originNoWaterHeight=g)}}return-1!==u?P:null}},{key:"getCellOrigin",value:function(w,v){var I=w*this.gridSize+this.gridSize/2,P=v*this.gridSize+this.gridSize/2,u=new e("".concat(w).concat(v).concat(this.seed,"riverCell"));return[I+Math.floor(u.next()*this.cellCenterMaxOffset*2-this.cellCenterMaxOffset),P+Math.floor(u.next()*this.cellCenterMaxOffset*2-this.cellCenterMaxOffset)]}},{key:"fillInLakeInfo",value:function(w){var v=w.lakeInfo,I=w.incomingFlux+w.selfFlux;if(!(I<this.lakeSettings.noLakeFluxCutoff)){v.hasLake=!0;var P=I/this.lakeSettings.maxRadiusAtFlux,u=this.lakeSettings.minRadius+Math.ceil(P*(this.lakeSettings.maxRadius-this.lakeSettings.minRadius));v.lakeRadius=u,v.lakeWaterHeight=Math.floor(w.originNoWaterHeight-7);var Q=4+.35*u;v.lakeBedHeight=Math.floor(v.lakeWaterHeight-Q)}}},{key:"getRainfall",value:function(w,v){return 100}}]),w}(),uw=function(){function w(v,I,P){for(var u in Q(this,w),this.ores=void 0,this.blockMetadata=void 0,this.seed=void 0,this.chunkSize=void 0,this.blockMetadata=v,this.seed=I,this.chunkSize=P,this.ores={"Moonstone Ore":{radius:2,minDistBetweenDeposits:40,minY:-85,maxY:-85,spawnChance:.5,pointGenerator:null},"Diamond Ore":{radius:2,minDistBetweenDeposits:13,minY:-100,maxY:-85,spawnChance:.28,pointGenerator:null},"Gold Ore":{radius:2,minDistBetweenDeposits:10,minY:-100,maxY:-75,spawnChance:.4,pointGenerator:null},"Iron Ore":{radius:2,minDistBetweenDeposits:5,minY:-80,maxY:15,spawnChance:.5,pointGenerator:null},"Coal Ore":{radius:3,minDistBetweenDeposits:4,minY:-60,maxY:40,spawnChance:.5,pointGenerator:null}},this.ores){var K=this.ores[u];K.pointGenerator=new k(K.minDistBetweenDeposits,!1,!0,"".concat(I).concat(u),20,P,null,!0)}}return a(w,[{key:"getOreBlocksForChunk",value:function(w,v){var I=new L(this.chunkSize,[w,v],0),P=new e("".concat(w).concat(v).concat(this.seed,"oreExists"));for(var Q in this.ores){var K,a=this.ores[Q],U=this.blockMetadata[Q].id,p=a.pointGenerator.getPointsAroundPoint(w+this.chunkSize/2,v+this.chunkSize/2),r=w+this.chunkSize+a.radius,Y=w-a.radius-1,g=v+this.chunkSize+a.radius,J=v-a.radius-1,l=u(p);try{for(l.s();!(K=l.n()).done;){var R=K.value;if(!(R[0]>=r||R[0]<=Y||R[1]>=g||R[1]<=J))for(var x=new e("".concat(R[0]).concat(R[1]).concat(this.seed,"ore")),j=Math.floor(x.next()*(a.maxY-a.minY))+a.minY,s=Math.max(w,R[0]-a.radius),B=Math.min(w+this.chunkSize-1,R[0]+a.radius),t=Math.max(v,R[1]-a.radius),i=Math.min(v+this.chunkSize-1,R[1]+a.radius),z=s;z<=B;z++)for(var E=t;E<=i;E++){if(!(h(R,z,E)>a.radius)&&!(P.next()>=a.spawnChance)){var o={yLevel:j,oreId:U};if(I.get(z,E)){I.get(z,E).push(o)}else{var n=[];I.set(z,E,n),n.push(o)}}}}}catch(w){l.e(w)}finally{l.f()}}return I}},{key:"addOresToColumn",value:function(w,v,I,P,Q,K,a,U){if(U){var p,r=u(U);try{for(r.s();!(p=r.n()).done;){var Y=p.value,g=Y.yLevel,J=Y.oreId;g<a&&g>=Q&&g<Q+this.chunkSize&&w.set(v-P,g-Q,I-K,J)}}catch(w){r.e(w)}finally{r.f()}}}}]),w}();function Qw(w,v){return Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,v){return w.__proto__=v,w},Qw(w,v)}function Kw(w,v){if("function"!==typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),v&&Qw(w,v)}function aw(w){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},aw(w)}function Uw(w){return Uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"==typeof Symbol&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Uw(w)}function pw(w,v){if(v&&("object"===Uw(v)||"function"===typeof v))return v;if(void 0!==v)throw new TypeError("Derived constructors may only return object or undefined");return function(w){if(void 0===w)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return w}(w)}function rw(w){var v=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(w){return!1}}();return function(){var I,P=aw(w);if(v){var u=aw(this).constructor;I=Reflect.construct(P,arguments,u)}else I=P.apply(this,arguments);return pw(this,I)}}var Yw,gw=function(){function w(v,I,P,K,a,U){var p=a.cactusChance,r=a.maxCactusHeight;Q(this,w),this.blockMetadata=void 0,this.seed=void 0,this.grassChance=void 0,this.cactusChance=void 0,this.maxCactusHeight=void 0,this.doFlowerGen=void 0,this.flowerInfos=void 0,this.totalFlowerPatchChance=void 0,this.flowerPatchPointGen=void 0,this.chunkSize=void 0,this.maxPatchRadius=void 0,this.blockMetadata=v,this.seed=P,this.grassChance=K,this.cactusChance=p,this.maxCactusHeight=r,this.chunkSize=I;var Y=.5;this.flowerInfos=[{flower:"Dandelion",patchChance:U.dandelionChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Poppy",patchChance:U.poppyChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Forget-me-not",patchChance:U.forgetMeNotChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Red Tulip",patchChance:U.redTulipChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Pink Tulip",patchChance:U.pinkTulipChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"White Tulip",patchChance:U.whiteTulipChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Orange Tulip",patchChance:U.orangeTulipChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Daisy",patchChance:U.daisyChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Allium",patchChance:U.alliumChance,insidePatchSpawnChance:Y,patchRadius:3},{flower:"Bluebell",patchChance:U.bluebellChance,insidePatchSpawnChance:.85,patchRadius:8},{flower:"Fallen Maple Leaves",patchChance:U.fallenMapleLeavesChance,insidePatchSpawnChance:.5,patchRadius:2},{flower:"Melon",patchChance:U.melonChance,insidePatchSpawnChance:.5,patchRadius:2},{flower:"Watermelon",patchChance:U.watermelonChance,insidePatchSpawnChance:.5,patchRadius:2},{flower:"Pumpkin",patchChance:U.pumpkinChance,insidePatchSpawnChance:.5,patchRadius:2}],this.maxPatchRadius=0;var g,J=u(this.flowerInfos);try{for(J.s();!(g=J.n()).done;){var l=g.value.patchRadius;this.maxPatchRadius=Math.max(this.maxPatchRadius,l)}}catch(w){J.e(w)}finally{J.f()}this.totalFlowerPatchChance=0;var R,x=u(this.flowerInfos);try{for(x.s();!(R=x.n()).done;){var j=R.value.patchChance;this.totalFlowerPatchChance+=j}}catch(w){x.e(w)}finally{x.f()}this.doFlowerGen=null!==U.flowerPatchDistApart,this.doFlowerGen&&(this.flowerPatchPointGen=new k(U.flowerPatchDistApart,!1,!0,P,4,I))}return a(w,[{key:"addBiomeFloraToColumn",value:function(w,v,I,P,u,Q,K){if(K+1>=u&&K+1<u+this.chunkSize){var a=new e("".concat(P).concat(Q).concat(this.seed,"flora"));if(a.next()<this.grassChance&&w.set(P-v,K+1-u,Q-I,this.blockMetadata["Tall Grass"].id),this.doFlowerGen&&this.totalFlowerPatchChance>0){var U=this.flowerPatchPointGen.getClosestPoint(P,Q),p=h(U,P,Q);if(p<this.maxPatchRadius){for(var r=new e("".concat(U[0]).concat(U[1]).concat(this.seed,"flowerpatch")),Y=Math.floor(r.next()*this.totalFlowerPatchChance),g=0,J=0;g<=Y;)g+=this.flowerInfos[J].patchChance,J++;var l=this.flowerInfos[J-1];if(p<l.patchRadius&&a.next()<l.insidePatchSpawnChance){var R=l.flower;w.set(P-v,K+1-u,Q-I,this.blockMetadata[R].id)}}}}if(0!==this.cactusChance){var x=new e("".concat(P).concat(Q).concat(this.seed,"cactus")),j=x.next();if(j<this.cactusChance)for(var s=Math.floor(x.next()*(this.maxCactusHeight-1))+1,B=Math.min(K+s+1,u+this.chunkSize),t=j<this.cactusChance*(2/3),i=Math.max(K+1,u);i<B;i++)w.set(P-v,i-u,Q-I,t?this.blockMetadata["Fat Cactus"].id:this.blockMetadata.Cactus.id)}}}]),w}(),Jw=function(){function w(v,I,P,u,K){var a=K.oreGenerator,U=K.cavesGenerator;Q(this,w),this.offsettedHeight=-5,this.topsoilBlockType=void 0,this.lowsoilBlockType=void 0,this.topwaterBlockType=void 0,this.blockMetadata=void 0,this.chunkSize=void 0,this.treeMinDist=5,this._heightmapSimplex=void 0,this.worldGenerator=void 0,this.oreGenerator=void 0,this.cavesGenerator=void 0,this.floraGenerator=void 0,this.maxCactusHeight=4,this.grassChance=.025,this.maxFloraHeight=this.maxCactusHeight,this.flowerPatchDistApart=40,this.poppyChance=10,this.daisyChance=10,this.pinkTulipChance=10,this.cactusChance=0,this.forgetMeNotChance=0,this.whiteTulipChance=0,this.orangeTulipChance=0,this.redTulipChance=0,this.dandelionChance=0,this.bluebellChance=0,this.alliumChance=0,this.fallenMapleLeavesChance=0,this.melonChance=0,this.watermelonChance=0,this.pumpkinChance=0,this.mapleTreeChance=1,this.pineTreeChance=0,this.plumTreeChance=0,this.cedarTreeChance=0,this.aspenTreeChance=0,this.elmTreeChance=0,this.palmTreeChance=0,this.autumnMapleTreeChance=0,this.pearTreeChance=0,this.seed=void 0,this.totalTreeChance=void 0,this.treeChances=void 0,this.chunkSize=v,this.blockMetadata=I,this.seed=u,this.topsoilBlockType=I["Grass Block"].id,this.lowsoilBlockType=I.Dirt.id,this.topwaterBlockType=I.Water.id,this.worldGenerator=P,this.oreGenerator=a,this.cavesGenerator=U}return a(w,[{key:"init",value:function(){this.floraGenerator=new gw(this.blockMetadata,this.chunkSize,"".concat(this.seed,"flora"),this.grassChance,{cactusChance:this.cactusChance,maxCactusHeight:this.maxCactusHeight},{flowerPatchDistApart:this.flowerPatchDistApart,dandelionChance:this.dandelionChance,poppyChance:this.poppyChance,forgetMeNotChance:this.forgetMeNotChance,redTulipChance:this.redTulipChance,pinkTulipChance:this.pinkTulipChance,whiteTulipChance:this.whiteTulipChance,orangeTulipChance:this.orangeTulipChance,daisyChance:this.daisyChance,bluebellChance:this.bluebellChance,alliumChance:this.alliumChance,fallenMapleLeavesChance:this.fallenMapleLeavesChance,melonChance:this.melonChance,watermelonChance:this.watermelonChance,pumpkinChance:this.pumpkinChance}),this.treeChances=[{treeType:Z.Maple,chance:this.mapleTreeChance},{treeType:Z.Pine,chance:this.pineTreeChance},{treeType:Z.Plum,chance:this.plumTreeChance},{treeType:Z.Cedar,chance:this.cedarTreeChance},{treeType:Z.Aspen,chance:this.aspenTreeChance},{treeType:Z.Elm,chance:this.elmTreeChance},{treeType:Z.Palm,chance:this.palmTreeChance},{treeType:Z.AutumnMaple,chance:this.autumnMapleTreeChance},{treeType:Z.Pear,chance:this.pearTreeChance}],this.totalTreeChance=0;var w,v=u(this.treeChances);try{for(v.s();!(w=v.n()).done;){var I=w.value.chance;this.totalTreeChance+=I}}catch(w){v.e(w)}finally{v.f()}}},{key:"xzId",value:function(w,v){return"".concat(w,"|").concat(v)}},{key:"getHeightmapVal",value:function(w,v){return this.offsettedHeight+this._heightmapSimplex.getOctaves(w,v)}},{key:"getTopsoilBlock",value:function(w,v,I){return this.topsoilBlockType}},{key:"getLowsoilBlockType",value:function(w,v,I,P){return this.lowsoilBlockType}},{key:"getTotalTreeChance",value:function(){return this.totalTreeChance}}]),w}(),lw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"Desert"),a)).grassChance=0,U.cactusChance=6e-4,U.flowerPatchDistApart=null,U.treeMinDist=null,U.topsoilBlockType=P.Sand.id,U.lowsoilBlockType=P.Sand.id,U._heightmapSimplex=new M([{amplitude:2,frequency:1/70},{amplitude:1,frequency:1/30}],"".concat(K,"DesertBiomeHeightMap")),U}return a(I)}(Jw),Rw=function(w){Kw(I,w);var v=rw(I);function I(){var w;Q(this,I);for(var P=arguments.length,u=new Array(P),K=0;K<P;K++)u[K]=arguments[K];return(w=v.call.apply(v,[this].concat(u))).cactusChance=.05,w}return a(I)}(lw),xw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"RedDesert"),a)).topsoilBlockType=P["Red Sand"].id,U.lowsoilBlockType=P["Red Sand"].id,U}return a(I)}(lw),jw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"Plains"),a)).grassChance=.18,U.flowerPatchDistApart=20,U.forgetMeNotChance=10,U.whiteTulipChance=10,U.orangeTulipChance=10,U.redTulipChance=10,U.dandelionChance=10,U.alliumChance=10,U.watermelonChance=2,U.topsoilBlockType=P["Grass Block"].id,U.lowsoilBlockType=P.Dirt.id,U.treeMinDist=75,U._heightmapSimplex=new M([{amplitude:4,frequency:1/70},{amplitude:2,frequency:1/30}],"".concat(K,"PlainsBiomeHeightMap")),U}return a(I)}(Jw),sw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,K,a)).poppyChance=0,U.daisyChance=0,U.pinkTulipChance=0,U.grassChance=.001,U.forgetMeNotChance=0,U.whiteTulipChance=0,U.orangeTulipChance=0,U.redTulipChance=0,U.dandelionChance=0,U.alliumChance=0,U.watermelonChance=0,U.topsoilBlockType=P.Snow.id,U.topwaterBlockType=P.Ice.id,U}return a(I)}(jw),Bw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"Forest"),a)).mapleTreeChance=15,U.aspenTreeChance=1,U.melonChance=3,U.topsoilBlockType=P["Grass Block"].id,U.lowsoilBlockType=P.Dirt.id,U.treeMinDist=6,U._heightmapSimplex=new M([{amplitude:4,frequency:1/70},{amplitude:2,frequency:1/30}],"".concat(K,"ForestBiomeHeightMap")),U}return a(I)}(Jw),tw=function(w){Kw(I,w);var v=rw(I);function I(){var w;Q(this,I);for(var P=arguments.length,u=new Array(P),K=0;K<P;K++)u[K]=arguments[K];return(w=v.call.apply(v,[this].concat(u))).pumpkinChance=3,w.melonChance=0,w.aspenTreeChance=0,w.plumTreeChance=1,w}return a(I)}(Bw),iw=function(w){Kw(I,w);var v=rw(I);function I(){var w;Q(this,I);for(var P=arguments.length,u=new Array(P),K=0;K<P;K++)u[K]=arguments[K];return(w=v.call.apply(v,[this].concat(u))).melonChance=3,w.aspenTreeChance=0,w.pearTreeChance=1,w}return a(I)}(Bw),zw=function(w){Kw(I,w);var v=rw(I);function I(){var w;Q(this,I);for(var P=arguments.length,u=new Array(P),K=0;K<P;K++)u[K]=arguments[K];return(w=v.call.apply(v,[this].concat(u))).flowerPatchDistApart=13,w.fallenMapleLeavesChance=80,w.pumpkinChance=3,w.melonChance=0,w.autumnMapleTreeChance=1,w.mapleTreeChance=0,w.aspenTreeChance=0,w}return a(I)}(Bw),Ew=function(w){Kw(I,w);var v=rw(I);function I(){var w;Q(this,I);for(var P=arguments.length,u=new Array(P),K=0;K<P;K++)u[K]=arguments[K];return(w=v.call.apply(v,[this].concat(u))).melonChance=0,w.aspenTreeChance=0,w.mapleTreeChance=0,w.elmTreeChance=15,w.palmTreeChance=1,w}return a(I)}(Bw),ow=function(w){Kw(I,w);var v=rw(I);function I(){var w;Q(this,I);for(var P=arguments.length,u=new Array(P),K=0;K<P;K++)u[K]=arguments[K];return(w=v.call.apply(v,[this].concat(u))).melonChance=0,w.mapleTreeChance=0,w.aspenTreeChance=0,w.pineTreeChance=15,w.cedarTreeChance=1,w}return a(I)}(Bw),hw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,K,a)).poppyChance=0,U.daisyChance=0,U.pinkTulipChance=0,U.grassChance=.005,U.topsoilBlockType=P.Snow.id,U.topwaterBlockType=P.Ice.id,U}return a(I)}(ow),nw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"Blue"),a)).bluebellChance=1,U.melonChance=0,U.flowerPatchDistApart=12,U.poppyChance=0,U.daisyChance=0,U.pinkTulipChance=0,U}return a(I)}(Bw),Ww=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"RollingHills"),a)).topsoilBlockType=P["Grass Block"].id,U.treeMinDist=25,U.offsettedHeight=20,U._heightmapSimplex=new M([{amplitude:20,frequency:.005},{amplitude:4,frequency:1/70}],"".concat(K,"RollingHillsBiomeHeightMap")),U}return a(I)}(Jw),Vw=function(w){Kw(I,w);var v=rw(I);function I(w,P,u,K,a){var U;return Q(this,I),(U=v.call(this,w,P,u,"".concat(K,"SnowyMountains"),a)).poppyChance=0,U.daisyChance=0,U.pinkTulipChance=0,U.grassChance=0,U.ridgedNoiseAmplitude=void 0,U.ridgedNoiseOctave1=void 0,U.ridgedNoiseOctave2=void 0,U.nonRidgedNoise=void 0,U.treeMinDist=50,U.offsettedHeight=0,U.ridgedNoiseOctave1=new M([{amplitude:80,frequency:.005}],"".concat(K,"SnowyMountainsBiomeRidgedNoise")),U.ridgedNoiseOctave2=new M([{amplitude:20,frequency:1/120}],"".concat(K,"SnowyMountainsBiomeRidgedNoiseOctave2")),U.nonRidgedNoise=new M([{amplitude:8,frequency:1/120}],"".concat(K,"SnowyMountainsBiomeNonRidgedNoise")),U.ridgedNoiseAmplitude=c(U.ridgedNoiseOctave1)+c(U.ridgedNoiseOctave2),U}return a(I,[{key:"getHeightmapVal",value:function(w,v){var I=this.ridgedNoiseAmplitude-Math.abs(this.ridgedNoiseOctave1.getOctaves(w,v))-Math.abs(this.ridgedNoiseOctave2.getOctaves(w,v));return this.offsettedHeight+I+this.nonRidgedNoise.getOctaves(w,v)}},{key:"getTopsoilBlock",value:function(w,v,I){return v>80?this.blockMetadata.Snow.id:v>60?this.blockMetadata.Stone.id:this.blockMetadata["Grass Block"].id}},{key:"getLowsoilBlockType",value:function(w,v,I,P){return v>85&&v>=P-2?this.blockMetadata.Snow.id:v>57?this.blockMetadata.Stone.id:v>53?this.blockMetadata["Rocky Dirt"].id:this.blockMetadata.Dirt.id}}]),I}(Jw),Fw=function(){function w(v,I,P,K,a,U){Q(this,w),this.baseBiome=void 0,this.biomesTotalFrequency=void 0,this.biomes=void 0,this.seed=void 0,this.blockMetadata=void 0,this.chunkSize=void 0,this.mostRecentlyAccessedPtForBiome=[0,0],this.mostRecentlyAccessedBiome=void 0,this.mostRecentlyAccessedModifierPt=[0,0],this.mostRecentlyAccessedModifier=void 0,this.stoneTypes=void 0,this.stonesTotalFrequency=void 0,this.seed=K,this.blockMetadata=U,this.chunkSize=a;var p={oreGenerator:P,cavesGenerator:I};this.baseBiome=new Jw(a,U,v,K,p);var r=new lw(a,U,v,K,p),Y=new Rw(a,U,v,K,p),g=new xw(a,U,v,K,p),J=new jw(a,U,v,K,p),l=new Bw(a,U,v,K,p),R=new tw(a,U,v,K,p),x=new iw(a,U,v,K,p),j=new ow(a,U,v,K,p),s=new hw(a,U,v,K,p),B=new Ew(a,U,v,K,p),t=new zw(a,U,v,K,p),i=new Ww(a,U,v,K,p),z=new Vw(a,U,v,K,p),E=new nw(a,U,v,K,p),o=new sw(a,U,v,K,p);this.biomes=[{biome:r,frequency:35},{biome:Y,frequency:1},{biome:g,frequency:4},{biome:J,frequency:76},{biome:o,frequency:4},{biome:l,frequency:20},{biome:x,frequency:6},{biome:t,frequency:6},{biome:R,frequency:28},{biome:B,frequency:4},{biome:j,frequency:14},{biome:s,frequency:2},{biome:i,frequency:32},{biome:z,frequency:16},{biome:E,frequency:4}],this.biomesTotalFrequency=0;var h,n=u(this.biomes);try{for(n.s();!(h=n.n()).done;){var W=h.value;this.biomesTotalFrequency+=W.frequency,W.biome.init()}}catch(w){n.e(w)}finally{n.f()}this.stoneTypes=[{stoneId:U.Stone.id,frequency:100},{stoneId:U.Andesite.id,frequency:4},{stoneId:U.Diorite.id,frequency:2},{stoneId:U.Granite.id,frequency:1}],this.stonesTotalFrequency=0;var V,F=u(this.stoneTypes);try{for(F.s();!(V=F.n()).done;){var O=V.value;this.stonesTotalFrequency+=O.frequency}}catch(w){F.e(w)}finally{F.f()}}return a(w,[{key:"_getBiomeForBiomePoint",value:function(w){if(this.mostRecentlyAccessedBiome&&w[0]===this.mostRecentlyAccessedPtForBiome[0]&&w[1]===this.mostRecentlyAccessedPtForBiome[1])return this.mostRecentlyAccessedBiome;for(var v=new e("".concat(w[0],"|").concat(w[1],"|").concat(this.seed)),I=Math.floor(v.next()*this.biomesTotalFrequency),P=0,u=0;P<=I;)P+=this.biomes[u].frequency,u++;var Q={biome:this.biomes[u-1].biome,biomeId:u-1};return this.mostRecentlyAccessedBiome=Q,this.mostRecentlyAccessedPtForBiome[0]=w[0],this.mostRecentlyAccessedPtForBiome[1]=w[1],Q}},{key:"getBiomeModifiersForBiomePoint",value:function(w){if(this.mostRecentlyAccessedModifier&&w[0]===this.mostRecentlyAccessedModifierPt[0]&&w[1]===this.mostRecentlyAccessedModifierPt[1])return this.mostRecentlyAccessedModifier;for(var v=new e("".concat(w[0],"|").concat(w[1],"|").concat(this.seed,"Modifiers")),I=Math.floor(v.next()*this.stonesTotalFrequency),P=0,u=0;P<=I;)P+=this.stoneTypes[u].frequency,u++;var Q={stoneTypeId:this.stoneTypes[u-1].stoneId};return this.mostRecentlyAccessedModifier=Q,this.mostRecentlyAccessedModifierPt[0]=w[0],this.mostRecentlyAccessedModifierPt[1]=w[1],Q}},{key:"getBiomeInfoForChunkFill",value:function(w,v,I){for(var P={biomeIds:new H(this.chunkSize,[w,v]),stoneTypeIds:new H(this.chunkSize,[w,v])},u=w;u<w+this.chunkSize;u++)for(var Q=v;Q<v+this.chunkSize;Q++){var K=I.get(u,Q)[0];P.biomeIds.set(u,Q,K.biomeId),P.stoneTypeIds.set(u,Q,K.biomeModifiers.stoneTypeId)}return P}},{key:"getBiomeFromId",value:function(w){return this.biomes[w].biome}}]),w}(),Ow=function(){function w(v,I,P,u,K,a,U,p){Q(this,w),this.seed=void 0,this.chunkSize=void 0,this.biomeSelector=void 0,this.cavesGenerator=void 0,this.treeGenerator=void 0,this.blockMetadata=void 0,this.oreGenerator=void 0,this.baseBiome=void 0,this.clayGenerator=void 0,this.seed=p,this.chunkSize=v,this.biomeSelector=I,this.cavesGenerator=P,this.treeGenerator=u,this.blockMetadata=K,this.oreGenerator=a,this.baseBiome=U,this.clayGenerator=new k(50,!1,!0,p,4,v,null,!0)}return a(w,[{key:"fillChunk",value:function(w,v,I,P,u,Q,K,a,U){if(!(I+this.chunkSize<=t.bedrockLevel)){for(var p=-1e4,r=1e4,Y=-1e4,g=1e4,J=!1,l=v;l<v+this.chunkSize;l++)for(var R=P;R<P+this.chunkSize;R++){p=Math.max(p,u.groundHeights.get(l,R)),r=Math.min(r,u.groundHeights.get(l,R));var x=u.waterHeights.get(l,R);x!==i&&(J=!0,Y=Math.max(Y,x),g=Math.min(g,x))}if(p>=I&&r<I+this.chunkSize)for(var j=v;j<v+this.chunkSize;j++)for(var s=P;s<P+this.chunkSize;s++){var B=U.biomeIds.get(j,s),z=this.biomeSelector.getBiomeFromId(B),E=u.groundHeights.get(j,s);E>=I&&E<I+this.chunkSize&&w.set(j-v,E-I,s-P,z.getTopsoilBlock(j,E,s))}if(p+1>=I&&r-4<I+this.chunkSize)for(var o=v;o<v+this.chunkSize;o++)for(var h=P;h<P+this.chunkSize;h++)for(var n=U.biomeIds.get(o,h),V=this.biomeSelector.getBiomeFromId(n),F=u.groundHeights.get(o,h),O=Math.min(F,I+this.chunkSize),N=Math.max(F-4,I);N<O;N++)w.set(o-v,N-I,h-P,V.getLowsoilBlockType(o,N,h,F));if(p-4>=I)for(var q=v;q<v+this.chunkSize;q++)for(var m=P;m<P+this.chunkSize;m++)for(var c=U.stoneTypeIds.get(q,m),M=u.groundHeights.get(q,m),S=Math.min(M-4,I+this.chunkSize),e=I;e<S;e++)w.set(q-v,e-I,m-P,c);if(p-4>=I)for(var H=v;H<v+this.chunkSize;H++)for(var G=P;G<P+this.chunkSize;G++){var L=u.groundHeights.get(H,G),d=a.get(H,G);this.oreGenerator.addOresToColumn(w,H,G,v,I,P,L-4,d)}if(p>=I&&this.cavesGenerator.addCavesToChunk(w,v,I,P,K),t.bedrockLevel>=I&&t.bedrockLevel<I+this.chunkSize)for(var D=v;D<v+this.chunkSize;D++)for(var f=P;f<P+this.chunkSize;f++)w.set(D-v,t.bedrockLevel-I,f-P,this.blockMetadata.Bedrock.id);if(p+this.baseBiome.maxFloraHeight>=I&&r+1<I+this.chunkSize)for(var b=v;b<v+this.chunkSize;b++)for(var k=P;k<P+this.chunkSize;k++){var C=U.biomeIds.get(b,k),y=this.biomeSelector.getBiomeFromId(C),T=y.maxFloraHeight,Z=u.groundHeights.get(b,k);if(!(Z>=I+this.chunkSize||Z<I-T))if(u.waterHeights.get(b,k)===i)this.cavesGenerator.isCave(b,Z,k,K)||y.floraGenerator.addBiomeFloraToColumn(w,v,P,b,I,k,Z)}if(p+this.treeGenerator.maxTreeHeight>=I)for(var A=v;A<v+this.chunkSize;A++)for(var X=I;X<I+this.chunkSize;X++)for(var ww=P;ww<P+this.chunkSize;ww++){var vw=Q.get(A,ww);if(void 0!==vw){var Iw=this.treeGenerator.getTreeBlock(A,X,ww,u.groundHeights,vw);Iw&&w.set(A-v,X-I,ww-P,Iw)}}if(J&&Y>=I)for(var Pw=v;Pw<v+this.chunkSize;Pw++)for(var uw=P;uw<P+this.chunkSize;uw++){var Qw=u.waterHeights.get(Pw,uw);if(Qw!==i)for(var Kw=U.biomeIds.get(Pw,uw),aw=this.biomeSelector.getBiomeFromId(Kw),Uw=u.groundHeights.get(Pw,uw),pw=Math.min(Qw+1,I+this.chunkSize),rw=Math.max(Uw+1,I);rw<pw;rw++){var Yw=rw===Qw?aw.topwaterBlockType:this.blockMetadata.Water.id;w.set(Pw-v,rw-I,uw-P,Yw)}}if(J&&p>=I&&r<I+this.chunkSize)for(var gw=v;gw<v+this.chunkSize;gw++)for(var Jw=P;Jw<P+this.chunkSize;Jw++){var lw=u.waterHeights.get(gw,Jw),Rw=u.groundHeights.get(gw,Jw);if(lw!==i&&Rw>=I&&Rw<I+this.chunkSize)if(lw===Rw)w.set(gw-v,Rw-I,Jw-P,this.blockMetadata.Sand.id);else if(W(this.clayGenerator.getClosestPoint(gw,Jw),gw,Jw)<100)w.set(gw-v,Rw-I,Jw-P,this.blockMetadata.Clay.id),Rw-1>=I&&w.set(gw-v,Rw-1-I,Jw-P,this.blockMetadata.Clay.id),Rw-2>=I&&w.set(gw-v,Rw-2-I,Jw-P,this.blockMetadata.Clay.id);else{var xw=U.biomeIds.get(gw,Jw),jw=this.biomeSelector.getBiomeFromId(xw);w.set(gw-v,Rw-I,Jw-P,jw.getLowsoilBlockType(gw,Rw,Jw,Rw))}}}}}]),w}(),Nw=I(1075);function qw(){return Yw}var mw,cw,Mw=function(){function w(v,I,P,K){Q(this,w),this.chunkSize=void 0,this.biomePointGen=void 0,this.treeRadius=2,this.neededOutsideChunkHeightRadius=this.treeRadius,this.treeGenerator=void 0,this.seed=void 0,this.biomeOffsetSimplex=void 0,this.globalHeightmap=void 0,this.heightmapPerturb=void 0,this.cavesGenerator=void 0,this.biomeSelector=void 0,this.waterBodyGenerator=void 0,this.needOutsideWaterDist=15,this.mostRecentlyAccessedChunkColumnPos=[0,0],this.mostRecentlyAccessedChunkColumn=null,this.cachedChunkColumnInfos=void 0,this.chunkFiller=void 0,this.isServer=void 0,Yw=K,this.seed=P,this.cachedChunkColumnInfos=new(b())({max:K?400:200,ttl:3e4,updateAgeOnGet:!0}),this.cavesGenerator=new X(P,v,this.neededOutsideChunkHeightRadius);var a=new uw(I,P,v);this.biomeSelector=new Fw(this,this.cavesGenerator,a,P,v,I),this.treeGenerator=new ww(this,this.cavesGenerator,v,P,I),this.chunkSize=v,this.biomePointGen=new k(150,!1,!0,P,3,v),this.biomeOffsetSimplex=new M([{amplitude:1,frequency:.2},{amplitude:5,frequency:1/70}],"".concat(P,"BiomeOffsetSimplex")),this.globalHeightmap=new M([{amplitude:11,frequency:1/4e3},{amplitude:4,frequency:.001}],"".concat(P,"GlobalHeightmapOffset")),this.heightmapPerturb=new M([{amplitude:1,frequency:1/14},{amplitude:5,frequency:1/65},{amplitude:20,frequency:.004}],"".concat(P,"HeightmapPerturb"));var U,p=0,r=u(this.heightmapPerturb.customOctaves);try{for(r.s();!(U=r.n()).done;){p+=U.value.amplitude}}catch(w){r.e(w)}finally{r.f()}this.waterBodyGenerator=new Pw(this,P,p,this.needOutsideWaterDist),this.chunkFiller=new Ow(v,this.biomeSelector,this.cavesGenerator,this.treeGenerator,I,a,this.biomeSelector.baseBiome,P)}return a(w,[{key:"getChunk",value:function(w,v,I,P){try{this._getChunk(w,v,I,P);var u=vw.encode(w.data),Q=String.fromCharCode.apply(null,u);return{hash:(new Nw).update(Q).digest("hex")}}catch(w){console.log(w.stack),console.error(w.stack)}}},{key:"_getChunk",value:function(w,v,I,P){var u=this.getInfoForChunkColumn(v,P),Q=u.biomeInfos,K=u.heightmapVals,a=u.caveInfos,U=u.treeTrunksAroundPoints,p=u.chunkOres;this.chunkFiller.fillChunk(w,v,I,P,K,U,a,p,Q)}},{key:"getInfoForChunkColumn",value:function(w,v){if(this.mostRecentlyAccessedChunkColumn&&this.mostRecentlyAccessedChunkColumnPos[0]===w&&this.mostRecentlyAccessedChunkColumnPos[1]===v)return this.mostRecentlyAccessedChunkColumn;var I="".concat(w,"|").concat(v),P=this.cachedChunkColumnInfos.get(I);if(P)return this.mostRecentlyAccessedChunkColumnPos[0]=w,this.mostRecentlyAccessedChunkColumnPos[1]=v,this.mostRecentlyAccessedChunkColumn=P,P;var u=this._getClosestBiomesForChunk(w,v),Q=this.getHeightMapVals(w,v,u),K=this.cavesGenerator.getCaveInfoForChunk(w,v,Q),a=this.treeGenerator._getTreeTrunksForBlocksInChunk(w,v,Q,u,K),U=u.get(w+Math.floor(this.chunkSize/2),v+Math.floor(this.chunkSize/2))[0].biome.oreGenerator.getOreBlocksForChunk(w,v),p={biomeInfos:this.biomeSelector.getBiomeInfoForChunkFill(w,v,u),heightmapVals:Q,caveInfos:K,treeTrunksAroundPoints:a,chunkOres:U};return this.mostRecentlyAccessedChunkColumnPos[0]=w,this.mostRecentlyAccessedChunkColumnPos[1]=v,this.mostRecentlyAccessedChunkColumn=p,this.cachedChunkColumnInfos.set(I,p),p}},{key:"_getClosestBiomesForChunk",value:function(w,v){for(var I=new L(this.chunkSize,[w,v],this.neededOutsideChunkHeightRadius),P=w-this.neededOutsideChunkHeightRadius;P<w+this.chunkSize+this.neededOutsideChunkHeightRadius;++P)for(var u=v-this.neededOutsideChunkHeightRadius;u<v+this.chunkSize+this.neededOutsideChunkHeightRadius;++u){var Q=this.getClosestBiomes(P,u);I.set(P,u,Q)}return I}},{key:"getClosestBiomes",value:function(w,v){for(var I=this._getBiomeXOffset(w,v),P=this._getBiomeZOffset(w,v),u=this.biomePointGen.getKClosestPointsWithWeights(w+I,v+P,60),Q=[],K=0;K<u.length;K++){var a=u[K],U=this.biomeSelector._getBiomeForBiomePoint(a.pt),p=U.biome,r=U.biomeId,Y={weight:a.weight,biome:p,biomeId:r,biomeModifiers:null};0===K&&(Y.biomeModifiers=this.biomeSelector.getBiomeModifiersForBiomePoint(a.pt)),Q.push(Y)}return Q}},{key:"_getBiome",value:function(w,v){var I=this._getBiomeXOffset(w,v),P=this._getBiomeZOffset(w,v),u=this.biomePointGen.getClosestPoint(w+I,v+P);return this.biomeSelector._getBiomeForBiomePoint(u)}},{key:"_getBiomeXOffset",value:function(w,v){return Math.floor(this.biomeOffsetSimplex.getOctaves(w,v))}},{key:"_getBiomeZOffset",value:function(w,v){return Math.floor(this.biomeOffsetSimplex.getOctaves(w+500,v+860))}},{key:"getHeightMapVals",value:function(w,v,I){for(var P={groundHeights:new H(this.chunkSize,[w,v],this.neededOutsideChunkHeightRadius),waterHeights:new H(this.chunkSize,[w,v],this.neededOutsideChunkHeightRadius),cavesAllowedBelowY:new H(this.chunkSize,[w,v],this.neededOutsideChunkHeightRadius)},u=w-this.neededOutsideChunkHeightRadius;u<w+this.chunkSize+this.neededOutsideChunkHeightRadius;++u)for(var Q=v-this.neededOutsideChunkHeightRadius;Q<v+this.chunkSize+this.neededOutsideChunkHeightRadius;++Q){var K=I.get(u,Q),a=Math.floor(this.heightmapPerturb.getOctaves(u,Q)),U=Math.floor(this.heightmapPerturb.getOctaves(u+200,Q+778)),p=this.getWithWaterHeightmapVal(u+a,Q+U,K),r=p.groundHeight,Y=p.waterHeight,g=p.cavesAllowedBelowY;P.groundHeights.set(u,Q,r),P.waterHeights.set(u,Q,Y),P.cavesAllowedBelowY.set(u,Q,g);var J=Math.min(Math.abs((u-300)%1e3),1e3-Math.abs((u-300)%1e3)),l=Math.min(Math.abs((Q-300)%1e3),1e3-Math.abs((Q-300)%1e3)),R=Math.max(Math.abs(u),Math.abs(Q));(R<50||R>1e4&&Math.max(J,l)<50)&&P.cavesAllowedBelowY.set(u,Q,r-15)}return P}},{key:"getWithWaterHeightmapVal",value:function(w,v,I){var P=this.getNoWaterHeightmapVal(w,v,I),u=this.waterBodyGenerator.getInfoNeededForWaterGen(w,v),Q=u.distFromWater,K=u.waterRadius,a=u.waterHeight,U=u.waterbedHeight,p=u.isLake,r=0,Y=i,g=1e4,J=K+this.needOutsideWaterDist;if(Q<=J){var l=K+4,R=a+2;if(Q<=K){var x=Q/K;p?(x*=x*x,r=Math.floor(U+(a-U)*x-2)):(x*=x,r=Math.floor(U+(a-U)*x)),Y=a}else if(Q<=l){var j=(Q-K)/(l-K);r=a+Math.ceil((R-a)*j)}else{var s=(Q-l)/(J-l);r=R+Math.ceil((P-R)*s)}g=r-15}else r=P;return{groundHeight:r,waterHeight:Y,cavesAllowedBelowY:g}}},{key:"getNoWaterHeightmapVal",value:function(w,v,I){var P,Q=w,K=v,a=0,U=u(I);try{for(U.s();!(P=U.n()).done;){var p=P.value,r=p.biome,Y=p.weight;a+=r.getHeightmapVal(Q,K)*Y}}catch(w){U.e(w)}finally{U.f()}var g=this.globalHeightmap.getOctaves(Q,K);return Math.floor(a)+Math.floor(g)}}]),w}(),Sw=I(7786),ew={};self.onmessage=function(w){var v=w.data;switch(v.type){case"workerInit":mw=v.chunkSize,cw=v.blockMetadata;break;case"createSeed":ew[v.seed]=new Mw(mw,cw,v.seed,!1);break;case"deleteSeed":delete ew[v.seed];break;case"chunk":var I=v.id,u=v.array;u=Sw(new Uint16Array(u.data.buffer),[mw,mw,mw]);var Q=P(I.split("|"),4),K=Q[0],a=Q[1],U=Q[2],p=Q[3];K=parseInt(K),a=parseInt(a),U=parseInt(U);var r=ew[p].getChunk(u,K,a,U),Y=[u.data.buffer];self.postMessage({id:I,array:u,metadata:r},Y);break;default:console.error("Unrecognised data.type")}}}()}();',"Worker",void 0,I.p+"static/js/procGen.worker.e05027c3.worker.js")}var tw=I(47786),iw=I(85882);function zw(w){var v=w.split("|"),I=(0,Yw.e)(v,3),P=I[0],u=I[1],Q=I[2];return[Number(P),Number(u),Number(Q)]}var Ew=Jw.e.chunkSize,ow=0|Math.log2(Ew),hw=Ew-1|0;function nw(w){return w>>ow|0}function Ww(w){return[w[0]>>ow|0,w[1]>>ow|0,w[2]>>ow|0]}function Vw(w){return w&hw|0}function Fw(w,v,I){var P=Jw.e.chunkSize;return[0|Math.floor(w/P),0|Math.floor(v/P),0|Math.floor(I/P)]}var Ow=tw(new Uint16Array(Ew*Ew*Ew),[Ew,Ew,Ew]);iw.encode(Ow.data);var Nw,qw,mw=I(80427),cw=I(77604),Mw={},Sw=function(w){return!!Mw[w]},ew=!1,Hw=new Rw(H.blockMetadata,(function(){return new Bw})),Gw={};function Lw(w){w.worldName="overworld",(0,U.Vb)(mw.b.mapSettings,(function(v){var I=v.useWorldGen,P=v.worldGenSeed;Nw=I,Hw.destroySeed(qw),qw=P,Nw&&Hw.initialiseSeed(P),w.world.markAllChunksForRemoval(),w.world._chunksPending.empty(),w.world._chunkAddSearchFrom=0,Mw={},Gw={},ew=!0})),w.world.maxChunksPendingCreation=10,w.world.on("worldDataNeeded",(function(v,I,P,u,Q,K){if(ew)if(Gw[v]||(Gw[v]=[]),Sw(v))Gw[v].push({id:v,array:I,x:P,y:u,z:Q,worldName:K}),(0,U.vc)(mw.e.needChunk,{id:v,lastSeen:Mw[v].lastSeen,hash:null});else if(Nw)try{Hw.threadedGetChunk(qw,I,P,u,Q,(function(w,I){ew&&(Gw[v].push({id:v,array:w,x:P,y:u,z:Q,worldName:K}),I.hash||console.error("metadata.hash is",I.hash),(0,U.vc)(mw.e.needChunk,{id:v,lastSeen:null,hash:I.hash}))}))}catch(v){w.logErrorMessage("Error in worldgen",v),console.error(v.stack)}else Gw[v].push({id:v,array:I,x:P,y:u,z:Q,worldName:K}),(0,U.vc)(mw.e.needChunk,{id:v,lastSeen:null,hash:null})})),(0,U.Vb)(mw.b.chunk,(function(v){try{!function(v){var I=Gw[v.id].shift();v.id!==I.id&&console.error("serverResp.id !== noaRequest.id",v.id,I.id);0===Gw[v.id].length&&delete Gw[v.id];var P=zw(v.id),Q=(0,Yw.e)(P,3),K=Q[0],a=Q[1],p=Q[2];if(v.cancelled)return void u(v.id);if(v.RLEArr){var r=new Uint8Array(v.RLEArr);if(gw.decode(r,I.array.data),w.world.setChunkData(v.id,I.array,null)){var Y=v.sharedBlockData?JSON.parse(cw.inflate(v.sharedBlockData,{to:"string"})):[];(0,U.N)().chunkAdded(K,a,p,I.array,Y)}return}var g=[];Sw(I.id)&&(J=I.id,l=I.array,gw.decode(Mw[J].blockArr,l.data),g=Mw[J].sharedBlockData?JSON.parse(cw.inflate(Mw[J].sharedBlockData,{to:"string"})):[]);var J,l;w.world.setChunkData(I.id,I.array,null)&&(0,U.N)().chunkAdded(K,a,p,I.array,g)}(v)}catch(v){console.error("err in processChunk func\n",v.stack),w.logErrorMessage("Error in worldgen processChunk func",v)}})),w.world.on("chunkBeingRemoved",(function(w,I,P){var u=zw(w),Q=(0,Yw.e)(u,3),K=Q[0],a=Q[1],p=Q[2];!v&&ew&&function(w,v,I){Mw[w]||(Mw[w]={blockArr:null,lastSeen:null,sharedBlockData:null}),Mw[w].blockArr=gw.encode(v.data),Mw[w].lastSeen=Date.now(),Mw[w].sharedBlockData=I.length>0?cw.deflate(JSON.stringify(I)):null}(w,I,(0,U.N)().blockDataOwner.getSharedBlockArr(K,a,p)),(0,U.N)().removingChunk(K,a,p,!1)})),(0,U.Vb)(mw.b.blockChanged,(function(w){var v=w.newId,I=w.pos;(0,U.N)().setBlock(I[0],I[1],I[2],v)}));var v=!1;(0,U.Vb)(mw.b.resetMap,(function(){Mw={},v=!0,w.world.markAllChunksForRemoval(),v=!1}));var u=function(I){var P=zw(I),u=(0,Yw.e)(P,3),Q=u[0],K=u[1],a=u[2],p=Jw.g.chunkSize;v=!0,w.world.manuallyUnloadChunk(Q*p,K*p,a*p),v=!1,(0,U.N)().removingChunk(Q,K,a,!1),delete Mw[I]};(0,U.Vb)(mw.b.resetChunk,u);var K,a=w.rendering.getScene();window.enablePerfInstru=(0,P.e)(Q().mark((function w(){var v;return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Promise.resolve().then(I.bind(I,23257));case 2:w.t0=w.sent.SceneInstrumentation,w.t1=a,K=new w.t0(w.t1),v={},a.registerBeforeRender((function(){a.meshes.forEach((function(w){w.onBeforeDraw=function(){v[w.name]?v[w.name]++:v[w.name]=1}})),window.drawCounts=v,window.totalDrawCount=Object.values(v).reduce((function(w,v){return w+v}),0),v={}}));case 7:case"end":return w.stop()}}),w)}))),window.capturePerfInfo=function(){K.captureActiveMeshesEvaluationTime=!0,K.captureRenderTargetsRenderTime=!0,K.captureFrameTime=!0,K.captureRenderTime=!0,K.captureInterFrameTime=!0,K.captureParticlesRenderTime=!0,K.captureSpritesRenderTime=!0,K.capturePhysicsTime=!0,K.captureCameraRenderTime=!0},window.logPerfInfo=function(){console.log({activeMeshesEvaluationTimeCounter:K.activeMeshesEvaluationTimeCounter,renderTargetsRenderTimeCounter:K.renderTargetsRenderTimeCounter,drawCallsCounter:K.drawCallsCounter,frameTimeCounter:K.frameTimeCounter,renderTimeCounter:K.renderTimeCounter,interFrameTimeCounter:K.interFrameTimeCounter,particlesRenderTimeCounter:K.particlesRenderTimeCounter,spritesRenderTimeCounter:K.spritesRenderTimeCounter,physicsTimeCounter:K.physicsTimeCounter,cameraRenderTimeCounter:K.cameraRenderTimeCounter})},window.disablePerfInfo=function(){var w=new xw.SceneInstrumentation(a);w.captureActiveMeshesEvaluationTime=!1,w.captureRenderTargetsRenderTime=!1,w.captureFrameTime=!1,w.captureRenderTime=!1,w.captureInterFrameTime=!1,w.captureParticlesRenderTime=!1,w.captureSpritesRenderTime=!1,w.capturePhysicsTime=!1,w.captureCameraRenderTime=!1},window.printDrawcalls=function(){console.log(K.drawCallsCounter.current)}}var dw=I(45031),Dw=I(38172),fw=I(41494);function bw(w){!function(w){var v=I(71173);v.keys().forEach((function(I){var P=/\.\/(.*)\.(js|ts)/.exec(I)[1],u=v(I);u.default&&(u=u.default);var Q=u(w),K=w.entities.createComponent(Q);w.ents.names[P]=K}));var P=w.entities;P.getGenericPlayerState=P.getStateAccessor("genericPlayerState");var u=P.getStateAccessor("heldItem");P.getHeldItemState=u,P.getHeldItem=function(w){return u(w).heldItem},P.getPlayerMeshState=P.getStateAccessor("playerMesh"),P.getHitboxState=P.getStateAccessor("hitbox");var Q=P.getStateAccessor("receivesInputs");P.getReceivesInputs=function(){return Q(w.playerEntity)}}(w),function(w){w.blockTargetIdCheck=function(v){return 0!==v&&!w.registry.getBlockFluidity(v)};var v=w.entities;v.getMovement=v.getStateAccessor("movement"),v.getMoveState=v.getStateAccessor("moveState");var I=v.getStateAccessor("inventory");v.getInventoryState=I,v.getInventory=function(w){return I(w).inventory},v.getInvenOps=function(w){return I(w).opWrapper},v.hasInventory=v.getComponentAccessor("inventory")}(w)}var kw=I(93433),Cw=I(20306),yw=I(38017),Tw=yw.blockIdToName,Zw=yw.blockMetadata,Aw=function(){function w(v,I){(0,J.e)(this,w),this.noa=void 0,this.bloxd=void 0,this.noa=v,this.bloxd=I}return(0,l.c)(w,[{key:"playerCanPlaceItem",value:function(w,v,I,P,u){if(!(u in Cw.i))return console.error("Called for non multiblock ".concat(u)),!1;var Q,K=(0,t.b)(Cw.i[u].positions);try{for(K.s();!(Q=K.n()).done;){var a=Q.value,U=a.block,p=a.x,r=a.y,Y=a.z,g=this.bloxd.getBlock(v+p,I+r,P+Y);if(this.noa.blockTargetIdCheck(g)||!this.bloxd.playerCanChangePos(w,v+p,I+r,P+Y,Zw[U].id))return!1}}catch(w){K.e(w)}finally{K.f()}return!0}},{key:"getPositionsIfMultiblock",value:function(w,v){var I,P=[],u=(0,t.b)(Cw.i[v].positions);try{for(u.s();!(I=u.n()).done;){var Q=I.value,K=(Q.block,Q.x),a=Q.y,U=Q.z;P.push([w[0]+K,w[1]+a,w[2]+U])}}catch(w){u.e(w)}finally{u.f()}return P}},{key:"setBlock",value:function(w,v,I,P){var u=Tw(this.bloxd.getBlock(w,v,I));if(u in Cw.e){var Q,K=Cw.e[u],a=K.mainMultiblock,U=K.compX,p=K.compY,r=K.compZ,Y=(0,t.b)(Cw.i[a].positions);try{for(Y.s();!(Q=Y.n()).done;){var g=Q.value,J=g.x,l=g.y,R=g.z;this.bloxd.setBlockNoMulti(w+J-U,v+l-p,I+R-r,0)}}catch(w){Y.e(w)}finally{Y.f()}}var x=Tw(P);if(x in Cw.i){var j,s=(0,t.b)(Cw.i[x].positions);try{for(s.s();!(j=s.n()).done;){var B=j.value,i=B.block,z=B.x,E=B.y,o=B.z;this.bloxd.setBlockNoMulti(w+z,v+E,I+o,Zw[i].id)}}catch(w){s.e(w)}finally{s.f()}}else this.bloxd.setBlockNoMulti(w,v,I,P)}}]),w}(),Xw=I(47077),wv=I.n(Xw),vv=I(65131),Iv=function(){function w(v,I){(0,J.e)(this,w),this.noa=void 0,this.bloxd=void 0,this.currMapName=void 0,this.storage=new vv.h,this.noa=v,this.bloxd=I}return(0,l.c)(w,[{key:"chunkAdded",value:function(w,v,I,P){this.storage.get(w,v,I)&&console.error(new Error("adding chunk x y z ".concat(w," ").concat(v," ").concat(I," to dataowner that already exists")).stack),this.storage.set(w,v,I,{});var u,Q,K=(0,t.b)(P);try{for(K.s();!(u=K.n()).done;){var a=u.value,U=a.pos,p=a.data,r=a.persisted;(U[0]>31||U[1]>31||U[2]>31||U[0]<0||U[1]<0||U[2]<0)&&(U=[(Q=U)[0]&hw|0,Q[1]&hw|0,Q[2]&hw|0]),this.storage.get(w,v,I)["".concat(U[0],"|").concat(U[1],"|").concat(U[2])]=null!==p&&void 0!==p?p:{persisted:r}}}catch(w){K.e(w)}finally{K.f()}}},{key:"getPersistedBlockArr",value:function(w,v,I){var P=[],u=this.storage.get(w,v,I);for(var Q in u){var K=Q.split("|"),a=(0,Yw.e)(K,3),U=a[0],p=a[1],r=a[2];if(void 0!==u[Q].persisted){var Y=[Number(U),Number(p),Number(r)];P.push({pos:Y,persisted:u[Q].persisted})}}return P}},{key:"getSharedBlockArr",value:function(w,v,I){var P=[],u=this.storage.get(w,v,I);for(var Q in u){var K=Q.split("|"),a=(0,Yw.e)(K,3),p=a[0],r=a[1],Y=a[2],g=[Number(p),Number(r),Number(Y)];if((0,U.Fb)(u[Q]))console.error("ChunkInfo block at local pos",Q,"was nullish:",u[Q]);else{var J=this.getSharedDataForBlock(g[0],g[1],g[2],u[Q]);J&&P.push({pos:g,data:J})}}return P}},{key:"removingChunk",value:function(w,v,I,P){var u=this.storage.get(w,v,I),Q=[w*Jw.g.chunkSize,v*Jw.g.chunkSize,I*Jw.g.chunkSize];for(var K in u){var a=K.split("|"),U=[Number(a[0]),Number(a[1]),Number(a[2])],p=wv().add([0,0,0],U,Q),r=this.bloxd.getBlock(p[0],p[1],p[2]);this.bloxd.onBlockRemoved(p[0],p[1],p[2],r,0,P)}this.storage.remove(w,v,I)}},{key:"blockChanged",value:function(w,v,I){var P=nw(w),u=nw(v),Q=nw(I),K=this.storage.get(P,u,Q);if(K){var a=Vw(w),U=Vw(v),p=Vw(I);delete K["".concat(a,"|").concat(U,"|").concat(p)]}}},{key:"getBlockData",value:function(w,v,I){var P=nw(w),u=nw(v),Q=nw(I),K=Vw(w),a=Vw(v),U=Vw(I);return this.storage.get(P,u,Q)["".concat(K,"|").concat(a,"|").concat(U)]}},{key:"setBlockData",value:function(w,v,I,P){var u=nw(w),Q=nw(v),K=nw(I),a=this.storage.get(u,Q,K),U=Vw(w),p=Vw(v),r=Vw(I);if(a)if(void 0!==P){var Y=[w,v,I],g=this.getSharedDataForBlock(w,v,I,P);if(!this.bloxd.isClient&&g){this.bloxd.room.api.flushOptimisedSetBlocks(),this.bloxd.room.broadcast(mw.b.setBlockData,{pos:Y,data:g});var J=this.bloxd.getBlock(w,v,I);this.bloxd.room.map.setBlock(Y[0],Y[1],Y[2],J)}a["".concat(U,"|").concat(p,"|").concat(r)]=P}else delete a["".concat(U,"|").concat(p,"|").concat(r)]}},{key:"getSharedDataForBlock",value:function(w,v,I,P){var u,Q=null!==P&&void 0!==P?P:this.getBlockData(w,v,I);if(void 0!==(null===Q||void 0===Q||null===(u=Q.persisted)||void 0===u?void 0:u.shared))return Q}}]),w}(),Pv=I(4942);I(4088),I(47786);var uv,Qv,Kv=function(){function w(v){(0,J.e)(this,w),this.a=void 0;for(var I=2166136261,P=0;P<v.length;P++)I=Math.imul(I^v.charCodeAt(P),16777619);this.a=I}return(0,l.c)(w,[{key:"next",value:function(){var w=this.a+=1831565813;return w=Math.imul(w^w>>>15,1|w),(((w^=w+Math.imul(w^w>>>7,61|w))^w>>>14)>>>0)/4294967296}}]),w}();!function(w){w[w.Maple=0]="Maple",w[w.Pine=1]="Pine",w[w.Plum=2]="Plum",w[w.Cedar=4]="Cedar",w[w.Aspen=5]="Aspen",w[w.Elm=6]="Elm",w[w.Palm=7]="Palm",w[w.AutumnMaple=8]="AutumnMaple",w[w.Pear=9]="Pear"}(uv||(uv={}));var av=[H.default["Aspen Sapling"].id,H.default["Maple Sapling"].id,H.default["Elm Sapling"].id,H.default["Plum Sapling"].id,H.default["Pine Sapling"].id,H.default["Cedar Sapling"].id,H.default["Palm Sapling"].id,H.default["Pear Sapling"].id,H.default["Dry Fat Cactus"].id,H.default["Dirt|GrassRoots"].id,H.default["Wheat Seeds"].id,H.default.Wheat_stage1.id,H.default.Wheat_stage2.id,H.default.Wheat_stage3.id,H.default.Wheat_stage4.id,H.default.Wheat_stage5.id],Uv=(Qv={},(0,Pv.c)(Qv,H.default["Wheat Seeds"].id,{into:"Wheat_stage1",duration:35e3}),(0,Pv.c)(Qv,H.default.Wheat_stage1.id,{into:"Wheat_stage2",duration:35e3}),(0,Pv.c)(Qv,H.default.Wheat_stage2.id,{into:"Wheat_stage3",duration:35e3}),(0,Pv.c)(Qv,H.default.Wheat_stage3.id,{into:"Wheat_stage4",duration:35e3}),(0,Pv.c)(Qv,H.default.Wheat_stage4.id,{into:"Wheat_stage5",duration:35e3}),(0,Pv.c)(Qv,H.default.Wheat_stage5.id,{into:"Wheat|FreshlyGrown",duration:35e3}),Qv),pv=function(){function w(v,I){var P=this;(0,J.e)(this,w),this.chunkInfos=new vv.h,this.lastTickCheck=0,this.tickableIds=void 0,this.gameTickableCbs=void 0,this.playerLastTicks=Object.create(null),this.bloxd=void 0,this.room=void 0,this.bloxd=v,this.room=I,this.tickableIds=[!1],this.gameTickableCbs={};var u,Q=function(w){for(;w>P.tickableIds.length;)P.tickableIds[P.tickableIds.length]=!1;P.tickableIds[w]=!0},K=(0,t.b)(av);try{for(K.s();!(u=K.n()).done;){var a=u.value;Q(a)}}catch(w){K.e(w)}finally{K.f()}var U,p=function(w){var v,I,u=(0,t.b)(null!==(v=null===w||void 0===w?void 0:w.tickableBlocks)&&void 0!==v?v:[]);try{for(u.s();!(I=u.n()).done;){var K,a=I.value,U=a.name,p=a.cb,r=(0,H.blockNameToId)(U);Q(r);var Y=null!==(K=P.gameTickableCbs[r])&&void 0!==K?K:[];Y.push(p),P.gameTickableCbs[r]=Y}}catch(w){u.e(w)}finally{u.f()}},r=(0,t.b)(this.room.game.plugins);try{for(r.s();!(U=r.n()).done;){p(U.value)}}catch(w){r.e(w)}finally{r.f()}p(this.room.game)}return(0,l.c)(w,[{key:"chunkAdded",value:function(w,v,I,P){this.chunkInfos.get(w,v,I)&&console.error(new Error("adding ticker to chunk that already exists").stack);var u={lastTick:0,tickablePos:null};this.chunkInfos.set(w,v,I,u);for(var Q=[],K=Jw.g.chunkSize,a=w*K,U=v*K,p=I*K,r=0;r<P.data.length;r++){var Y=P.data[r];if(this.tickableIds[Y]){var g=(r/P.stride[0]|0)%K,J=(r/P.stride[1]|0)%K,l=(r/P.stride[2]|0)%K;Q.push([a+g,U+J,p+l])}}u.tickablePos=Q}},{key:"blockUpdated",value:function(w,v,I,P,u){if(!this.tickableIds[P]&&this.tickableIds[u]){var Q=nw(w),K=nw(v),a=nw(I);this.chunkInfos.get(Q,K,a).tickablePos.push([w,v,I])}if(this.tickableIds[P]&&!this.tickableIds[u])for(var U=nw(w),p=nw(v),r=nw(I),Y=this.chunkInfos.get(U,p,r).tickablePos,g=0;g<Y.length;g++)if(Y[g][0]===w&&Y[g][1]===v&&Y[g][2]===I){Y.splice(g,1);break}}},{key:"removingChunk",value:function(w,v,I){this.chunkInfos.remove(w,v,I)}},{key:"tick",value:function(){if(!(Date.now()-this.lastTickCheck<1e3)){this.lastTickCheck=Date.now();var w,v=this.room.api.getPlayerIds(),I=(0,t.b)(v);try{for(I.s();!(w=I.n()).done;){var P=w.value;this.playerLastTicks[P]||(this.playerLastTicks[P]={hasNearbyTickables:!1,lastTick:0})}}catch(w){I.e(w)}finally{I.f()}for(var u in this.playerLastTicks)v.includes(u)||delete this.playerLastTicks[u];var Q,K=(0,t.b)(v);try{for(K.s();!(Q=K.n()).done;){var a=Q.value,U=this.playerLastTicks[a],p=U.hasNearbyTickables,r=U.lastTick,Y=p?5e3:1e4;if(!(Date.now()-r<Y)){this.playerLastTicks[a].lastTick=Date.now();for(var g=Ww(this.room.api.getPosition(a)),J=(0,Yw.e)(g,3),l=J[0],R=J[1],x=J[2],j=l-5;j<=l+5;j++)for(var s=R-2;s<=R+2;s++)for(var B=x-5;B<=x+5;B++){var i=this.chunkInfos.get(j,s,B);(null===i||void 0===i?void 0:i.tickablePos.length)>0&&Date.now()-i.lastTick>5e3&&this.bloxd.hasChunkWithBlockCoordinates(j*Jw.g.chunkSize,s*Jw.g.chunkSize,B*Jw.g.chunkSize)&&(i.lastTick=Date.now(),this.tickChunk(j,s,B),this.playerLastTicks[a].hasNearbyTickables=!0)}}}}catch(w){K.e(w)}finally{K.f()}}}},{key:"tickChunk",value:function(w,v,I){var P,u=this.chunkInfos.get(w,v,I).tickablePos,Q=(0,t.b)(u);try{for(Q.s();!(P=Q.n()).done;){var K=(0,Yw.e)(P.value,3),a=K[0],U=K[1],p=K[2],r=this.room.getBlock(a,U,p);if(this.tickableIds[r]){var Y=H.default[r].name,g=!1;if(this.gameTickableCbs[r]){var J,l=(0,t.b)(this.gameTickableCbs[r]);try{for(l.s();!(J=l.n()).done;){var R=J.value;g=!0,R(a,U,p,Y)}}catch(w){l.e(w)}finally{l.f()}}var x=Y.split(" ");"Sapling"===x[x.length-1]?this.tickSapling(a,U,p,r):"Dry Fat Cactus"===Y?this.tickDryFatCactus(a,U,p,r):"Dirt|GrassRoots"===Y?this.tickDirtGrassRoots(a,U,p,r):Uv[r]?this.tickGrowable(a,U,p,r):g||console.error("Ticked unexpected block",a,U,p,r,Y)}else{var j;console.error("pos ".concat(a," ").concat(U," ").concat(p," was stored in chunk with x y z ").concat(w," ").concat(v," ").concat(I,". but ").concat(r," ").concat(null===(j=H.default[r])||void 0===j?void 0:j.name," is not tickable"))}}}catch(w){Q.e(w)}finally{Q.f()}}},{key:"tickSapling",value:function(w,v,I,P){var u,Q=this.bloxd.blockDataOwner.getBlockData(w,v,I);if(void 0===(null===(u=Q)||void 0===u?void 0:u.growTime)&&(Q=(0,i.b)((0,i.b)({},Q),{},{growTime:Date.now()+7e4}),this.bloxd.blockDataOwner.setBlockData(w,v,I,Q)),Date.now()>Q.growTime){var K,a,U=new Kv("".concat(Date.now()+w+I)),p=this.room.map.worldGenerator.treeGenerator.getRandTreeInfo(U),r=p.height,Y=(p.vineDir,(0,H.blockIdToName)(P).split(" ")[0]),g={pos:[w,I],height:r,vineDir:-1,treeType:uv[Y]},J=this.room.map.worldGenerator.treeGenerator.getAllBlocksForTree(v,g),l=(0,t.b)(J);try{for(l.s();!(a=l.n()).done;){var R,x=a.value,j=x.x,s=x.y,B=x.z,z=x.id;if(0===this.room.getBlock([j,s,B])||j===w&&s===v&&B===I)this.room.attemptWorldChangeBlock(null===(R=Q.persisted)||void 0===R?void 0:R.planterDbId,j,s,B,z)}}catch(w){l.e(w)}finally{l.f()}this.room.getBlock([w,v,I])===P?this.room.setBlock([w,v,I],0):null!==(K=Q.persisted)&&void 0!==K&&K.planterDbId&&this.bloxd.blockDataOwner.setBlockData(w,v,I,{persisted:{planterDbId:Q.persisted.planterDbId}})}}},{key:"tickGrowable",value:function(w,v,I,P){var u=this.bloxd.blockDataOwner.getBlockData(w,v,I),Q=Uv[P],K=Q.into,a=Q.duration;if(!u){var U=a;this.room.getBlock([w,v-1,I])===H.default["Tilled Soil"].id||(U*=1.3),u={growTime:Date.now()+U},this.bloxd.blockDataOwner.setBlockData(w,v,I,u)}Date.now()>u.growTime&&this.room.api.setBlock([w,v,I],K)}},{key:"tickDryFatCactus",value:function(w,v,I,P){var u=this,Q=this.bloxd.blockDataOwner.getBlockData(w,v,I);if(Q||(Q={hydrateTime:Date.now()+45e3},this.bloxd.blockDataOwner.setBlockData(w,v,I,Q)),Date.now()>Q.hydrateTime){!function(){for(var P=-1;P>=-5;P--){var Q=u.bloxd.room.getBlock([w,v+P,I]);if(Q===H.UNLOADED_ID)return!0;if(!Yv.includes(Q))return rv.includes(Q)}return!1}()?this.room.api.setBlock([w,v,I],"Fat Cactus|Growing"):Q.hydrateTime=Date.now()+45e3}}},{key:"tickDirtGrassRoots",value:function(w,v,I,P){var u=this,Q=this.bloxd.blockDataOwner.getBlockData(w,v,I);if(Q||(Q={regrowTime:Date.now()+45e3},this.bloxd.blockDataOwner.setBlockData(w,v,I,Q)),Date.now()>Q.regrowTime){!function(){for(var P=1;P<=3;P++){var Q=u.bloxd.room.getBlock([w,v+P,I]);if(Q&&u.bloxd.noa.registry.getBlockSolidity(Q))return!1}return!0}()?this.room.api.setBlock([w,v,I],"Dirt"):this.room.api.setBlock([w,v,I],"Grass Block")}}}]),w}(),rv=[H.default.Stone.id,H.default["Messy Stone"].id,H.default.Diorite.id,H.default.Andesite.id,H.default.Granite.id],Yv=[H.default["Fat Cactus"].id,H.default["Dry Fat Cactus"].id,H.default["Fat Cactus|Growing"].id],gv=I(57906),Jv=["Maple Log","Aspen Log","Plum Log","Elm Log","Pine Log","Cedar Log","Palm Log","Pear Log"],lv=["Maple Wood Planks","Aspen Wood Planks","Plum Wood Planks","Elm Wood Planks","Pine Wood Planks","Cedar Wood Planks","Palm Wood Planks","Pear Wood Planks"],Rv=["Maple Leaves","Aspen Leaves","Plum Leaves","Elm Leaves","Pine Leaves","Cedar Leaves","Palm Leaves","Pear Leaves"],xv=["Messy Stone","Stone","Diorite","Andesite","Granite"],jv=["Poppy","Red Tulip"],sv=["Tall Grass","Cactus"],Bv=(0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)((0,i.b)({"Maple Wood Planks":[{requires:[{items:["Maple Log"],amt:1}],produces:4}],"Aspen Wood Planks":[{requires:[{items:["Aspen Log"],amt:1}],produces:4}],"Plum Wood Planks":[{requires:[{items:["Plum Log"],amt:1}],produces:4}],"Elm Wood Planks":[{requires:[{items:["Elm Log"],amt:1}],produces:4}],"Pine Wood Planks":[{requires:[{items:["Pine Log"],amt:1}],produces:4}],"Cedar Wood Planks":[{requires:[{items:["Cedar Log"],amt:1}],produces:4}],"Palm Wood Planks":[{requires:[{items:["Palm Log"],amt:1}],produces:4}],"Pear Wood Planks":[{requires:[{items:["Pear Log"],amt:1}],produces:4}],"Wood Sword":[{requires:[{items:lv,amt:3}],produces:1}],"Stone Sword":[{requires:[{items:xv,amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Iron Sword":[{requires:[{items:["Iron Bar"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Gold Sword":[{requires:[{items:["Gold Bar"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Diamond Sword":[{requires:[{items:["Diamond"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],Stick:[{requires:[{items:lv,amt:1}],produces:1,station:"Workbench"}],"Wood Pickaxe":[{requires:[{items:lv,amt:4}],produces:1}],"Stone Pickaxe":[{requires:[{items:xv,amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Iron Pickaxe":[{requires:[{items:["Iron Bar"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Gold Pickaxe":[{requires:[{items:["Gold Bar"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Diamond Pickaxe":[{requires:[{items:["Diamond"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Moonstone Pickaxe":[{requires:[{items:["Moonstone"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Wood Axe":[{requires:[{items:lv,amt:4}],produces:1}],"Stone Axe":[{requires:[{items:xv,amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Iron Axe":[{requires:[{items:["Iron Bar"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Gold Axe":[{requires:[{items:["Gold Bar"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Diamond Axe":[{requires:[{items:["Diamond"],amt:3},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Wood Spade":[{requires:[{items:lv,amt:2}],produces:1}],"Stone Spade":[{requires:[{items:xv,amt:1},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Iron Spade":[{requires:[{items:["Iron Bar"],amt:1},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Gold Spade":[{requires:[{items:["Gold Bar"],amt:1},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Diamond Spade":[{requires:[{items:["Diamond"],amt:1},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Wood Hoe":[{requires:[{items:lv,amt:2}],produces:1}],"Stone Hoe":[{requires:[{items:xv,amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Iron Hoe":[{requires:[{items:["Iron Bar"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Gold Hoe":[{requires:[{items:["Gold Bar"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Diamond Hoe":[{requires:[{items:["Diamond"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],"Wood Bow":[{requires:[{items:lv,amt:3},{items:Rv,amt:1},{items:["Stick"],amt:2}],produces:1}],"Stone Bow":[{requires:[{items:xv,amt:3},{items:Rv,amt:1},{items:["Stick"],amt:2}],produces:1,station:"Workbench"}],"Iron Bow":[{requires:[{items:["Iron Bar"],amt:3},{items:Rv,amt:1},{items:["Stick"],amt:2}],produces:1,station:"Workbench"}],"Gold Bow":[{requires:[{items:["Gold Bar"],amt:3},{items:Rv,amt:1},{items:["Stick"],amt:2}],produces:1,station:"Workbench"}],"Diamond Bow":[{requires:[{items:["Diamond"],amt:3},{items:Rv,amt:1},{items:["Stick"],amt:2}],produces:1,station:"Workbench"}],"Wood Crossbow":[{requires:[{items:lv,amt:4},{items:Rv,amt:1},{items:["Stick"],amt:2},{items:["Iron Bar"],amt:2}],produces:1}],"Stone Crossbow":[{requires:[{items:xv,amt:4},{items:Rv,amt:1},{items:["Stick"],amt:2},{items:["Iron Bar"],amt:2}],produces:1,station:"Workbench"}],"Iron Crossbow":[{requires:[{items:["Iron Bar"],amt:6},{items:Rv,amt:1},{items:["Stick"],amt:2}],produces:1,station:"Workbench"}],"Gold Crossbow":[{requires:[{items:["Gold Bar"],amt:4},{items:Rv,amt:1},{items:["Stick"],amt:2},{items:["Iron Bar"],amt:2}],produces:1,station:"Workbench"}],"Diamond Crossbow":[{requires:[{items:["Diamond"],amt:4},{items:Rv,amt:1},{items:["Stick"],amt:2},{items:["Iron Bar"],amt:2}],produces:1,station:"Workbench"}],Arrow:[{requires:[{items:xv,amt:1},{items:["Stick"],amt:1}],produces:2,station:"Workbench"}],Compass:[{requires:[{items:["Iron Bar"],amt:2},{items:["Gold Bar"],amt:1}],produces:1,station:"Workbench"}],Shears:[{requires:[{items:["Iron Bar"],amt:2},{items:lv,amt:1}],produces:1,station:"Workbench"}],Workbench:[{requires:[{items:lv,amt:4}],produces:1}],Coal:[{requires:[{items:["Block of Coal"],amt:1}],produces:9,station:"Artisan Bench"},{requires:[{items:["Coal Ore"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Furnace"}],"Iron Bar":[{requires:[{items:["Iron Ore"],amt:1},{items:["Coal"],amt:1}],produces:1,station:"Furnace"},{requires:[{items:["Block of Iron"],amt:1}],produces:9,station:"Artisan Bench"},{requires:[{items:["Iron Watermelon"],amt:1}],produces:128,station:"Workbench"}],"Gold Bar":[{requires:[{items:["Gold Ore"],amt:1},{items:["Coal"],amt:1}],produces:1,station:"Furnace"},{requires:[{items:["Block of Gold"],amt:1}],produces:9,station:"Artisan Bench"}],Diamond:[{requires:[{items:["Block of Diamond"],amt:1}],produces:9,station:"Artisan Bench"},{requires:[{items:["Diamond Ore"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Furnace"}],Moonstone:[{requires:[{items:["Block of Moonstone"],amt:1}],produces:9,station:"Artisan Bench"},{requires:[{items:["Moonstone Ore"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Furnace"}],"Compressed Messy Stone":[{requires:[{items:["Messy Stone"],amt:9}],produces:1,station:"Artisan Bench"},{requires:[{items:["Extra Compressed Messy Stone"],amt:1}],produces:9,station:"Artisan Bench"}],"Extra Compressed Messy Stone":[{requires:[{items:["Compressed Messy Stone"],amt:9}],produces:1,station:"Artisan Bench"},{requires:[{items:["Super Compressed Messy Stone"],amt:1}],produces:9,station:"Artisan Bench"}],"Super Compressed Messy Stone":[{requires:[{items:["Extra Compressed Messy Stone"],amt:9}],produces:1,station:"Artisan Bench"},{requires:[{items:["Hyper Compressed Messy Stone"],amt:1}],produces:9,station:"Artisan Bench"}],"Hyper Compressed Messy Stone":[{requires:[{items:["Super Compressed Messy Stone"],amt:9}],produces:1,station:"Artisan Bench"},{requires:[{items:["Ultra Compressed Messy Stone"],amt:1}],produces:9,station:"Artisan Bench"}],"Ultra Compressed Messy Stone":[{requires:[{items:["Hyper Compressed Messy Stone"],amt:9}],produces:1,station:"Artisan Bench"},{requires:[{items:["Mega Compressed Messy Stone"],amt:1}],produces:9,station:"Artisan Bench"}],"Mega Compressed Messy Stone":[{requires:[{items:["Ultra Compressed Messy Stone"],amt:9}],produces:1,station:"Artisan Bench"}],Bread:[{requires:[{items:["Wheat"],amt:2},{items:["Coal"],amt:1}],produces:1,station:"Furnace"},{requires:[{items:["Wheat"],amt:3}],produces:1,station:"Workbench"},{requires:[{items:["Bread Block"],amt:1}],produces:9,station:"Workbench"}],"Bread Block":[{requires:[{items:["Bread"],amt:9}],produces:1,station:"Workbench"}],"Apple Block":[{requires:[{items:["Apple"],amt:4}],produces:1,station:"Workbench"}],Apple:[{requires:[{items:["Apple Block"],amt:1}],produces:4,station:"Workbench"}],"Plum Block":[{requires:[{items:["Plum"],amt:4}],produces:1,station:"Workbench"}],Plum:[{requires:[{items:["Plum Block"],amt:1}],produces:4,station:"Workbench"}],"Pear Block":[{requires:[{items:["Pear"],amt:4}],produces:1,station:"Workbench"}],Pear:[{requires:[{items:["Pear Block"],amt:1}],produces:4,station:"Workbench"}],"Coconut Block":[{requires:[{items:["Coconut"],amt:4}],produces:1,station:"Workbench"}],Coconut:[{requires:[{items:["Coconut Block"],amt:1}],produces:4,station:"Workbench"}],"Melon Slice":[{requires:[{items:["Melon"],amt:1}],produces:4,station:"Workbench"}],"Gold Melon Slice":[{requires:[{items:["Melon Slice"],amt:2},{items:["Gold Bar"],amt:1}],produces:2,station:"Workbench"}],"Melon Seeds":[{requires:[{items:["Melon Slice"],amt:4}],produces:1,station:"Workbench"}],Melon:[{requires:[{items:["Melon Slice"],amt:4}],produces:1,station:"Workbench"}],"Watermelon Slice":[{requires:[{items:["Watermelon"],amt:1}],produces:4,station:"Workbench"}],"Gold Watermelon Slice":[{requires:[{items:["Watermelon Slice"],amt:2},{items:["Gold Bar"],amt:1}],produces:2,station:"Workbench"}],"Watermelon Seeds":[{requires:[{items:["Watermelon Slice"],amt:4}],produces:1,station:"Workbench"}],Watermelon:[{requires:[{items:["Watermelon Slice"],amt:4}],produces:1,station:"Workbench"}],"Pumpkin Pie":[{requires:[{items:["Pumpkin"],amt:1},{items:["Wheat"],amt:3}],produces:1,station:"Workbench"}],"Pumpkin Seeds":[{requires:[{items:["Pumpkin"],amt:1}],produces:1,station:"Workbench"}],"Carved Pumpkin":[{requires:[{items:["Pumpkin"],amt:1}],produces:1,station:"Artisan Bench"}],"Jack o'Lantern":[{requires:[{items:["Carved Pumpkin"],amt:1},{items:["Coal"],amt:1}],produces:1,station:"Artisan Bench"}],Stone:[{requires:[{items:["Messy Stone"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Furnace"}],Magma:[{requires:[{items:["Stone"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Furnace"}],"Name Tag":[{requires:[{items:lv,amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],Book:[{requires:[{items:["Board"],amt:3}],produces:1,station:"Workbench"}],"Empty Bookshelf":[{requires:[{items:lv,amt:6}],produces:1,station:"Workbench"}],"Potion Table":[{requires:[{items:lv,amt:4},{items:["Glass"],amt:2}],produces:1,station:"Workbench"}],"Empty Bottle":[{requires:[{items:["Sand"],amt:3},{items:["Coal"],amt:1}],produces:4,station:"Furnace"},{requires:[{items:["Sand"],amt:3},{items:["Coal"],amt:1}],produces:1,station:"Potion Table"}],"Poison Potion":[{requires:[{items:["Cactus"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Poison Potion II":[{requires:[{items:["Poison Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Poison Potion":[{requires:[{items:["Poison Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Poison Potion II":[{requires:[{items:["Splash Poison Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Slowness Potion":[{requires:[{items:["Poppy"],amt:1},{items:["Bread"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Slowness Potion II":[{requires:[{items:["Slowness Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Slowness Potion":[{requires:[{items:["Slowness Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Slowness Potion II":[{requires:[{items:["Splash Slowness Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Weakness Potion":[{requires:[{items:["Pumpkin"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Weakness Potion II":[{requires:[{items:["Weakness Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Weakness Potion":[{requires:[{items:["Weakness Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Weakness Potion II":[{requires:[{items:["Splash Weakness Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Instant Damage Potion":[{requires:[{items:["Cactus"],amt:1},{items:["Pumpkin Pie"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Instant Damage Potion II":[{requires:[{items:["Instant Damage Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Instant Damage Potion":[{requires:[{items:["Poison Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Instant Damage Potion II":[{requires:[{items:["Splash Poison Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Milk Potion":[{requires:[{items:["Iron Bar"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Splash Milk Potion":[{requires:[{items:["Milk Potion"],amt:2}],produces:1,station:"Potion Table"}],"Speed Potion":[{requires:[{items:["Cracked Coconut"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Speed Potion II":[{requires:[{items:["Speed Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Speed Potion":[{requires:[{items:["Speed Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Speed Potion II":[{requires:[{items:["Splash Speed Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Defense Potion":[{requires:[{items:["Pear"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Defense Potion II":[{requires:[{items:["Defense Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Defense Potion":[{requires:[{items:["Defense Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Defense Potion II":[{requires:[{items:["Splash Defense Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Strength Potion":[{requires:[{items:["Plum"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Strength Potion II":[{requires:[{items:["Strength Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Strength Potion":[{requires:[{items:["Strength Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Strength Potion II":[{requires:[{items:["Splash Strength Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Jump Potion":[{requires:[{items:["Apple"],amt:1},{items:["Pear"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Jump Potion II":[{requires:[{items:["Jump Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Jump Potion":[{requires:[{items:["Jump Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Jump Potion II":[{requires:[{items:["Splash Jump Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Invisibility Potion":[{requires:[{items:["Gold Melon Slice"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Splash Invisibility Potion":[{requires:[{items:["Invisibility Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Knockback Potion":[{requires:[{items:["Water Bottle"],amt:1},{items:["Bread"],amt:1},{items:["Stick"],amt:1}],produces:1,station:"Potion Table"}],"Splash Knockback Potion II":[{requires:[{items:["Splash Knockback Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Regeneration Potion":[{requires:[{items:["Apple"],amt:1},{items:["Melon Slice"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Regeneration Potion II":[{requires:[{items:["Regeneration Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Regeneration Potion":[{requires:[{items:["Regeneration Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Regeneration Potion II":[{requires:[{items:["Splash Regeneration Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Instant Healing Potion":[{requires:[{items:["Apple"],amt:1},{items:["Watermelon Slice"],amt:1},{items:["Water Bottle"],amt:1}],produces:1,station:"Potion Table"}],"Instant Healing Potion II":[{requires:[{items:["Instant Healing Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],"Splash Instant Healing Potion":[{requires:[{items:["Instant Healing Potion"],amt:2}],produces:1,station:"Potion Table"}],"Splash Instant Healing Potion II":[{requires:[{items:["Splash Instant Healing Potion"],amt:1},{items:["Iron Bar"],amt:1}],produces:1,station:"Potion Table"}],Furnace:[{requires:[{items:xv,amt:8}],produces:1,station:"Workbench"}],Chest:[{requires:[{items:lv,amt:4}],produces:1,station:"Workbench"}],"Moonstone Chest":[{requires:[{items:["Moonstone"],amt:2}],produces:1,station:"Workbench"}],"Moonstone Explosive":[{requires:[{items:["Moonstone"],amt:1},{items:["Sand"],amt:10}],produces:4,station:"Workbench"}],Fireball:[{requires:[{items:["Magma"],amt:4},{items:["Moonstone"],amt:1}],produces:4,station:"Workbench"}],Iceball:[{requires:[{items:["Ice"],amt:4},{items:["Moonstone"],amt:1}],produces:4,station:"Workbench"}],"Artisan Bench":[{requires:[{items:lv,amt:2},{items:xv,amt:2}],produces:1,station:"Workbench"}],Snowball:[{requires:[{items:["Snow"],amt:1}],produces:4,station:"Workbench"}],Snow:[{requires:[{items:["Snowball"],amt:4}],produces:1,station:"Workbench"}],Pebble:[{requires:[{items:xv,amt:1}],produces:1,station:"Workbench"}],"Reinforced Pebble":[{requires:[{items:["Compressed Messy Stone"],amt:1}],produces:1,station:"Workbench"}],Ball:[{requires:[{items:lv,amt:4}],produces:1,station:"Workbench"}],"Reinforced Ball":[{requires:[{items:["Ball"],amt:1},{items:["Pine Log"],amt:1}],produces:1,station:"Workbench"}],"Moonstone Orb":[{requires:[{items:["Moonstone"],amt:1},{items:["Reinforced Pebble"],amt:1}],produces:4,station:"Workbench"}],Net:[{requires:[{items:Rv,amt:15}],produces:1,station:"Workbench"}],"Block of Coal":[{requires:[{items:["Coal"],amt:9}],produces:1,station:"Artisan Bench"}],"Block of Iron":[{requires:[{items:["Iron Bar"],amt:9}],produces:1,station:"Artisan Bench"}],"Block of Gold":[{requires:[{items:["Gold Bar"],amt:9}],produces:1,station:"Artisan Bench"}],"Block of Diamond":[{requires:[{items:["Diamond"],amt:9}],produces:1,station:"Artisan Bench"}],"Block of Moonstone":[{requires:[{items:["Moonstone"],amt:9}],produces:1,station:"Artisan Bench"}],Glass:[{requires:[{items:["Sand"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Furnace"}],Board:[{requires:[{items:lv,amt:1}],produces:1,station:"Workbench"}],"Maple Door":[{requires:[{items:["Maple Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Pine Door":[{requires:[{items:["Pine Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Plum Door":[{requires:[{items:["Plum Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Cedar Door":[{requires:[{items:["Cedar Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Aspen Door":[{requires:[{items:["Aspen Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Elm Door":[{requires:[{items:["Elm Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Palm Door":[{requires:[{items:["Palm Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Pear Door":[{requires:[{items:["Pear Wood Planks"],amt:2}],produces:1,station:"Workbench"}],"Maple Trapdoor":[{requires:[{items:["Maple Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Pine Trapdoor":[{requires:[{items:["Pine Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Plum Trapdoor":[{requires:[{items:["Plum Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Cedar Trapdoor":[{requires:[{items:["Cedar Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Aspen Trapdoor":[{requires:[{items:["Aspen Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Elm Trapdoor":[{requires:[{items:["Elm Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Palm Trapdoor":[{requires:[{items:["Palm Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Pear Trapdoor":[{requires:[{items:["Pear Wood Planks"],amt:1}],produces:1,station:"Workbench"}],Ladder:[{requires:[{items:["Maple Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Pine Ladder":[{requires:[{items:["Pine Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Plum Ladder":[{requires:[{items:["Plum Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Cedar Ladder":[{requires:[{items:["Cedar Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Aspen Ladder":[{requires:[{items:["Aspen Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Elm Ladder":[{requires:[{items:["Elm Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Palm Ladder":[{requires:[{items:["Palm Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Pear Ladder":[{requires:[{items:["Pear Wood Planks"],amt:1}],produces:1,station:"Workbench"}],"Iron Ladder":[{requires:[{items:["Iron Bar"],amt:1}],produces:1,station:"Workbench"}],Bucket:[{requires:[{items:["Iron Bar"],amt:3}],produces:1,station:"Workbench"}],"Wood Helmet":[{requires:[{items:lv,amt:5}],produces:1,station:"Workbench"}],"Wood Chestplate":[{requires:[{items:lv,amt:8}],produces:1,station:"Workbench"}],"Wood Gauntlets":[{requires:[{items:lv,amt:4}],produces:1,station:"Workbench"}],"Wood Leggings":[{requires:[{items:lv,amt:7}],produces:1,station:"Workbench"}],"Wood Boots":[{requires:[{items:lv,amt:4}],produces:1,station:"Workbench"}],"Iron Helmet":[{requires:[{items:["Iron Bar"],amt:5}],produces:1,station:"Workbench"}],"Iron Chestplate":[{requires:[{items:["Iron Bar"],amt:8}],produces:1,station:"Workbench"}],"Iron Gauntlets":[{requires:[{items:["Iron Bar"],amt:4}],produces:1,station:"Workbench"}],"Iron Leggings":[{requires:[{items:["Iron Bar"],amt:7}],produces:1,station:"Workbench"}],"Iron Boots":[{requires:[{items:["Iron Bar"],amt:4}],produces:1,station:"Workbench"}],"Gold Helmet":[{requires:[{items:["Gold Bar"],amt:5}],produces:1,station:"Workbench"}],"Gold Chestplate":[{requires:[{items:["Gold Bar"],amt:8}],produces:1,station:"Workbench"}],"Gold Gauntlets":[{requires:[{items:["Gold Bar"],amt:4}],produces:1,station:"Workbench"}],"Gold Leggings":[{requires:[{items:["Gold Bar"],amt:7}],produces:1,station:"Workbench"}],"Gold Boots":[{requires:[{items:["Gold Bar"],amt:4}],produces:1,station:"Workbench"}],"Diamond Helmet":[{requires:[{items:["Diamond"],amt:5}],produces:1,station:"Workbench"}],"Diamond Chestplate":[{requires:[{items:["Diamond"],amt:8}],produces:1,station:"Workbench"}],"Diamond Gauntlets":[{requires:[{items:["Diamond"],amt:4}],produces:1,station:"Workbench"}],"Diamond Leggings":[{requires:[{items:["Diamond"],amt:7}],produces:1,station:"Workbench"}],"Diamond Boots":[{requires:[{items:["Diamond"],amt:4}],produces:1,station:"Workbench"}],Sandstone:[{requires:[{items:["Sand"],amt:2}],produces:1,station:"Artisan Bench"}],"Red Sandstone":[{requires:[{items:["Red Sand"],amt:2}],produces:1,station:"Artisan Bench"}],Bricks:[{requires:[{items:["Clay"],amt:4},{items:["Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Stone Bricks":[{requires:[{items:["Messy Stone","Stone"],amt:4},{items:["Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Mossy Stone Bricks":[{requires:[{items:["Stone Bricks"],amt:1},{items:sv,amt:1}],produces:1,station:"Artisan Bench"}],"Cracked Stone Bricks":[{requires:[{items:["Stone Bricks"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Sandstone Bricks":[{requires:[{items:["Sandstone"],amt:4},{items:["Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Red Sandstone Bricks":[{requires:[{items:["Red Sandstone"],amt:4},{items:["Red Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Diorite Bricks":[{requires:[{items:["Diorite"],amt:4},{items:["Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Andesite Bricks":[{requires:[{items:["Andesite"],amt:4},{items:["Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Granite Bricks":[{requires:[{items:["Granite"],amt:4},{items:["Sand"],amt:1},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"Ice Bricks":[{requires:[{items:["Ice"],amt:1},{items:["Snow"],amt:1}],produces:1,station:"Artisan Bench"}],"Smooth Stone":[{requires:[{items:["Stone"],amt:2},{items:["Sand"],amt:1}],produces:2,station:"Artisan Bench"}],"Smooth Diorite":[{requires:[{items:["Diorite"],amt:2},{items:["Sand"],amt:1}],produces:2,station:"Artisan Bench"}],"Smooth Andesite":[{requires:[{items:["Andesite"],amt:2},{items:["Sand"],amt:1}],produces:2,station:"Artisan Bench"}],"Smooth Granite":[{requires:[{items:["Granite"],amt:2},{items:["Sand"],amt:1}],produces:2,station:"Artisan Bench"}],"Smooth Sandstone":[{requires:[{items:["Sandstone"],amt:2},{items:["Sand"],amt:1}],produces:2,station:"Artisan Bench"}],"Smooth Red Sandstone":[{requires:[{items:["Red Sandstone"],amt:2},{items:["Red Sand"],amt:1}],produces:2,station:"Artisan Bench"}],"Engraved Stone":[{requires:[{items:["Smooth Stone"],amt:2}],produces:1,station:"Artisan Bench"}],"Engraved Sandstone":[{requires:[{items:["Smooth Sandstone"],amt:2}],produces:1,station:"Artisan Bench"}],"Engraved Red Sandstone":[{requires:[{items:["Smooth Red Sandstone"],amt:2}],produces:1,station:"Artisan Bench"}],"Engraved Diorite":[{requires:[{items:["Smooth Diorite"],amt:2}],produces:1,station:"Artisan Bench"}],"Engraved Andesite":[{requires:[{items:["Smooth Andesite"],amt:2}],produces:1,station:"Artisan Bench"}],"Engraved Granite":[{requires:[{items:["Smooth Granite"],amt:2}],produces:1,station:"Artisan Bench"}],"Messy Dirt":[{requires:[{items:["Dirt"],amt:2}],produces:1,station:"Artisan Bench"}],Dirt:[{requires:[{items:["Messy Dirt"],amt:1}],produces:2}],"Rocky Dirt":[{requires:[{items:["Dirt"],amt:4},{items:xv,amt:1}],produces:4,station:"Artisan Bench"}],"Messy Stone":[{requires:[{items:["Rocky Dirt"],amt:4}],produces:1},{requires:[{items:["Compressed Messy Stone"],amt:1}],produces:9}],"Mossy Messy Stone":[{requires:[{items:["Messy Stone"],amt:1},{items:sv,amt:1}],produces:1,station:"Artisan Bench"}],"Marked Sandstone":[{requires:[{items:["Smooth Sandstone"],amt:2}],produces:1,station:"Artisan Bench"}],"Marked Red Sandstone":[{requires:[{items:["Smooth Red Sandstone"],amt:2}],produces:1,station:"Artisan Bench"}]},iv("Maple Slab","Maple Wood Planks")),iv("Pine Slab","Pine Wood Planks")),iv("Plum Slab","Plum Wood Planks")),iv("Cedar Slab","Cedar Wood Planks")),iv("Aspen Slab","Aspen Wood Planks")),iv("Elm Slab","Elm Wood Planks")),iv("Palm Slab","Palm Wood Planks")),iv("Pear Slab","Pear Wood Planks")),iv("Dirt Slab","Dirt")),iv("Grass Slab","Grass Block")),iv("Messy Stone Slab","Messy Stone")),iv("Stone Slab","Stone")),iv("Smooth Stone Slab","Smooth Stone")),iv("Engraved Stone Slab","Engraved Stone")),iv("Stone Bricks Slab","Stone Bricks")),iv("Mossy Stone Slab","Mossy Messy Stone")),iv("Mossy Stone Bricks Slab","Mossy Stone Bricks")),iv("Andesite Slab","Andesite")),iv("Smooth Andesite Slab","Smooth Andesite")),iv("Engraved Andesite Slab","Engraved Andesite")),iv("Andesite Bricks Slab","Andesite Bricks")),iv("Diorite Slab","Diorite")),iv("Smooth Diorite Slab","Smooth Diorite")),iv("Engraved Diorite Slab","Engraved Diorite")),iv("Diorite Bricks Slab","Diorite Bricks")),iv("Granite Slab","Granite")),iv("Smooth Granite Slab","Smooth Granite")),iv("Engraved Granite Slab","Engraved Granite")),iv("Granite Bricks Slab","Granite Bricks")),iv("Sandstone Slab","Sandstone")),iv("Smooth Sandstone Slab","Smooth Sandstone")),iv("Engraved Sandstone Slab","Engraved Sandstone")),iv("Marked Sandstone Slab","Marked Sandstone")),iv("Sandstone Bricks Slab","Sandstone Bricks")),iv("Red Sandstone Slab","Red Sandstone")),iv("Smooth Red Sandstone Slab","Smooth Red Sandstone")),iv("Engraved Red Sandstone Slab","Engraved Red Sandstone")),iv("Marked Red Sandstone Slab","Marked Red Sandstone")),iv("Red Sandstone Bricks Slab","Red Sandstone Bricks")),iv("Bricks Slab","Bricks")),iv("Ice Bricks Slab","Ice Bricks")),{},{"White Planks":[{requires:[{items:["White Tulip"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Planks":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Gray Planks":[{requires:[{items:["Daisy"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Black Planks":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:lv,amt:2}],produces:2,station:"Artisan Bench"}],"Brown Planks":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Red Planks":[{requires:[{items:jv,amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Orange Planks":[{requires:[{items:["Orange Tulip"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Planks":[{requires:[{items:["Dandelion"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Lime Planks":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Green Planks":[{requires:[{items:sv,amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Planks":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Planks":[{requires:[{items:["Bluebell"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Blue Planks":[{requires:[{items:["Forget-me-not"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Purple Planks":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Planks":[{requires:[{items:["Allium"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Pink Planks":[{requires:[{items:["Pink Tulip"],amt:1},{items:lv,amt:1}],produces:1,station:"Artisan Bench"}],"Green Wool":[{requires:[{items:Rv,amt:4},{items:sv,amt:4}],produces:1,station:"Artisan Bench"}],"White Wool":[{requires:[{items:["White Tulip"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Wool":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Wool":[{requires:[{items:["Daisy"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Wool":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Green Wool"],amt:2}],produces:2,station:"Artisan Bench"}],"Brown Wool":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Wool":[{requires:[{items:jv,amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Wool":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Wool":[{requires:[{items:["Dandelion"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Wool":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Wool":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Wool":[{requires:[{items:["Bluebell"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Wool":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Wool":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Wool":[{requires:[{items:["Allium"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Wool":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Green Wool"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Carpet":[{requires:[{items:["Black Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Blue Carpet":[{requires:[{items:["Blue Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Brown Carpet":[{requires:[{items:["Brown Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Cyan Carpet":[{requires:[{items:["Cyan Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Gray Carpet":[{requires:[{items:["Gray Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Light Gray Carpet":[{requires:[{items:["Light Gray Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Green Carpet":[{requires:[{items:["Green Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Light Blue Carpet":[{requires:[{items:["Light Blue Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Lime Carpet":[{requires:[{items:["Lime Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Magenta Carpet":[{requires:[{items:["Magenta Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Orange Carpet":[{requires:[{items:["Orange Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Pink Carpet":[{requires:[{items:["Pink Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Purple Carpet":[{requires:[{items:["Purple Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Red Carpet":[{requires:[{items:["Red Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"White Carpet":[{requires:[{items:["White Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"Yellow Carpet":[{requires:[{items:["Yellow Wool"],amt:2}],produces:8,station:"Artisan Bench"}],"White Glass":[{requires:[{items:["White Tulip"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Glass":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Glass":[{requires:[{items:["Daisy"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Glass":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Glass"],amt:2}],produces:2,station:"Artisan Bench"}],"Brown Glass":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Glass":[{requires:[{items:jv,amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Glass":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Glass":[{requires:[{items:["Dandelion"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Glass":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Glass":[{requires:[{items:sv,amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Glass":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Glass":[{requires:[{items:["Bluebell"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Glass":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Glass":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Glass":[{requires:[{items:["Allium"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Glass":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Glass"],amt:1}],produces:1,station:"Artisan Bench"}],"Patterned White Glass":[{requires:[{items:["White Glass"],amt:1},{items:["White Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Light Gray Glass":[{requires:[{items:["Light Gray Glass"],amt:1},{items:["Light Gray Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Gray Glass":[{requires:[{items:["Gray Glass"],amt:1},{items:["Gray Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Black Glass":[{requires:[{items:["Black Glass"],amt:1},{items:["Black Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Brown Glass":[{requires:[{items:["Brown Glass"],amt:1},{items:["Brown Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Red Glass":[{requires:[{items:["Red Glass"],amt:1},{items:["Red Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Orange Glass":[{requires:[{items:["Orange Glass"],amt:1},{items:["Orange Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Yellow Glass":[{requires:[{items:["Yellow Glass"],amt:1},{items:["Yellow Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Lime Glass":[{requires:[{items:["Lime Glass"],amt:1},{items:["Lime Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Green Glass":[{requires:[{items:["Green Glass"],amt:1},{items:["Green Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Cyan Glass":[{requires:[{items:["Cyan Glass"],amt:1},{items:["Cyan Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Light Blue Glass":[{requires:[{items:["Light Blue Glass"],amt:1},{items:["Light Blue Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Blue Glass":[{requires:[{items:["Blue Glass"],amt:1},{items:["Blue Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Purple Glass":[{requires:[{items:["Purple Glass"],amt:1},{items:["Purple Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Magenta Glass":[{requires:[{items:["Magenta Glass"],amt:1},{items:["Magenta Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Patterned Pink Glass":[{requires:[{items:["Pink Glass"],amt:1},{items:["Pink Planks"],amt:1}],produces:2,station:"Artisan Bench"}],"Baked Clay":[{requires:[{items:["Clay"],amt:4},{items:["Coal"],amt:1}],produces:4,station:"Artisan Bench"}],"White Baked Clay":[{requires:[{items:["White Tulip"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Baked Clay":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Baked Clay":[{requires:[{items:["Daisy"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Baked Clay":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Baked Clay"],amt:2}],produces:2,station:"Artisan Bench"}],"Brown Baked Clay":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Baked Clay":[{requires:[{items:jv,amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Baked Clay":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Baked Clay":[{requires:[{items:["Dandelion"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Baked Clay":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Baked Clay":[{requires:[{items:sv,amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Baked Clay":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Baked Clay":[{requires:[{items:["Bluebell"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Baked Clay":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Baked Clay":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Baked Clay":[{requires:[{items:["Allium"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Baked Clay":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Baked Clay"],amt:1}],produces:1,station:"Artisan Bench"}],"White Ceramic":[{requires:[{items:["White Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Light Gray Ceramic":[{requires:[{items:["Light Gray Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Gray Ceramic":[{requires:[{items:["Gray Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Black Ceramic":[{requires:[{items:["Black Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Brown Ceramic":[{requires:[{items:["Brown Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Red Ceramic":[{requires:[{items:["Red Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Orange Ceramic":[{requires:[{items:["Orange Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Yellow Ceramic":[{requires:[{items:["Yellow Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Lime Ceramic":[{requires:[{items:["Lime Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Green Ceramic":[{requires:[{items:["Green Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Light Blue Ceramic":[{requires:[{items:["Light Blue Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Blue Ceramic":[{requires:[{items:["Blue Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Purple Ceramic":[{requires:[{items:["Purple Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Magenta Ceramic":[{requires:[{items:["Magenta Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Pink Ceramic":[{requires:[{items:["Pink Baked Clay"],amt:2},{items:["Sand"],amt:2},{items:["Coal"],amt:1}],produces:2,station:"Artisan Bench"}],"Gray Concrete":[{requires:[{items:xv,amt:1},{items:["Clay"],amt:1},{items:["Sand"],amt:2}],produces:2,station:"Artisan Bench"}],"White Concrete":[{requires:[{items:["White Tulip"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Concrete":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Concrete":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Gray Concrete"],amt:2}],produces:2,station:"Artisan Bench"}],"Brown Concrete":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Concrete":[{requires:[{items:jv,amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Concrete":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Concrete":[{requires:[{items:["Dandelion"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Concrete":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Concrete":[{requires:[{items:sv,amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Concrete":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Concrete":[{requires:[{items:["Bluebell"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Concrete":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Concrete":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Concrete":[{requires:[{items:["Allium"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Concrete":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Gray Concrete"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Bed":[{requires:[{items:["Green Wool"],amt:3},{items:lv,amt:3}],produces:1,station:"Artisan Bench"}],"White Bed":[{requires:[{items:["White Tulip"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Bed":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Bed":[{requires:[{items:["Daisy"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Bed":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Lime Bed"],amt:2}],produces:2,station:"Artisan Bench"}],"Brown Bed":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Bed":[{requires:[{items:jv,amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Bed":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Bed":[{requires:[{items:["Dandelion"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Bed":[{requires:[{items:sv,amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Bed":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Bed":[{requires:[{items:["Bluebell"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Bed":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Bed":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Bed":[{requires:[{items:["Allium"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Bed":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Lime Bed"],amt:1}],produces:1,station:"Artisan Bench"}],"White Wood Helmet":[{requires:[{items:["White Tulip"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"White Wood Chestplate":[{requires:[{items:["White Tulip"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"White Wood Gauntlets":[{requires:[{items:["White Tulip"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"White Wood Leggings":[{requires:[{items:["White Tulip"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"White Wood Boots":[{requires:[{items:["White Tulip"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Wood Helmet":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Wood Chestplate":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Wood Gauntlets":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Wood Leggings":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Gray Wood Boots":[{requires:[{items:["White Tulip"],amt:1},{items:["Daisy"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Wood Helmet":[{requires:[{items:["Daisy"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Wood Chestplate":[{requires:[{items:["Daisy"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Wood Gauntlets":[{requires:[{items:["Daisy"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Wood Leggings":[{requires:[{items:["Daisy"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Gray Wood Boots":[{requires:[{items:["Daisy"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Wood Helmet":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Wood Chestplate":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Wood Gauntlets":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Wood Leggings":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Black Wood Boots":[{requires:[{items:jv,amt:1},{items:["Dandelion"],amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Brown Wood Helmet":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Brown Wood Chestplate":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Brown Wood Gauntlets":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Brown Wood Leggings":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Brown Wood Boots":[{requires:[{items:jv,amt:1},{items:sv,amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Wood Helmet":[{requires:[{items:jv,amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Wood Chestplate":[{requires:[{items:jv,amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Wood Gauntlets":[{requires:[{items:jv,amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Wood Leggings":[{requires:[{items:jv,amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Red Wood Boots":[{requires:[{items:jv,amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Wood Helmet":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Wood Chestplate":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Wood Gauntlets":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Wood Leggings":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Orange Wood Boots":[{requires:[{items:["Orange Tulip"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Wood Helmet":[{requires:[{items:["Dandelion"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Wood Chestplate":[{requires:[{items:["Dandelion"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Wood Gauntlets":[{requires:[{items:["Dandelion"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Wood Leggings":[{requires:[{items:["Dandelion"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Yellow Wood Boots":[{requires:[{items:["Dandelion"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Wood Helmet":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Wood Chestplate":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Wood Gauntlets":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Wood Leggings":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Lime Wood Boots":[{requires:[{items:sv,amt:1},{items:["White Tulip"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Wood Helmet":[{requires:[{items:sv,amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Wood Chestplate":[{requires:[{items:sv,amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Wood Gauntlets":[{requires:[{items:sv,amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Wood Leggings":[{requires:[{items:sv,amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Green Wood Boots":[{requires:[{items:sv,amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Wood Helmet":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Wood Chestplate":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Wood Gauntlets":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Wood Leggings":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Cyan Wood Boots":[{requires:[{items:sv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Wood Helmet":[{requires:[{items:["Bluebell"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Wood Chestplate":[{requires:[{items:["Bluebell"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Wood Gauntlets":[{requires:[{items:["Bluebell"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Wood Leggings":[{requires:[{items:["Bluebell"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Light Blue Wood Boots":[{requires:[{items:["Bluebell"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Wood Helmet":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Wood Chestplate":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Wood Gauntlets":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Wood Leggings":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Blue Wood Boots":[{requires:[{items:["Forget-me-not"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Wood Helmet":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Wood Chestplate":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Wood Gauntlets":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Wood Leggings":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Purple Wood Boots":[{requires:[{items:jv,amt:1},{items:["Forget-me-not"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Wood Helmet":[{requires:[{items:["Allium"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Wood Chestplate":[{requires:[{items:["Allium"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Wood Gauntlets":[{requires:[{items:["Allium"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Wood Leggings":[{requires:[{items:["Allium"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Magenta Wood Boots":[{requires:[{items:["Allium"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Wood Helmet":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Wood Helmet"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Wood Chestplate":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Wood Chestplate"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Wood Gauntlets":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Wood Gauntlets"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Wood Leggings":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Wood Leggings"],amt:1}],produces:1,station:"Artisan Bench"}],"Pink Wood Boots":[{requires:[{items:["Pink Tulip"],amt:1},{items:["Wood Boots"],amt:1}],produces:1,station:"Artisan Bench"}]}),tv=function(){function w(v){(0,J.e)(this,w),this.bloxd=void 0,this.playerRecipes={},this.bloxd=v,this.bloxd.isClient&&this.onPlayerJoin(this.bloxd.noa.playerEntity)}return(0,l.c)(w,[{key:"onPlayerJoin",value:function(w){this.playerRecipes[w]=JSON.parse(JSON.stringify(Bv))}},{key:"onPlayerLeave",value:function(w){delete this.playerRecipes[w]}},{key:"onClientReset",value:function(){this.playerRecipes[this.bloxd.noa.playerEntity]=JSON.parse(JSON.stringify(Bv))}},{key:"editRecipesForPlayer",value:function(w,v,I){this.playerRecipes[w][v]=I}},{key:"getItemsHavingOneIngredientOf",value:function(w,v,I){var P=this,u=this.playerRecipes[w],Q=[],K=function(K){u[K].forEach((function(u,a){u.station;P.canUseRecipeAtStation(w,K,a,I)&&P.itemCanBeCrafted(w,v,K,a)&&Q.push({name:K,craftingIdx:a,haveIngredients:!0})}))};for(var a in u)K(a);var U=function(K){u[K].forEach((function(u,a){u.station;P.canUseRecipeAtStation(w,K,a,I)&&P.haveOneOrMoreIngredientOf(w,v,K,a)&&!P.itemCanBeCrafted(w,v,K,a)&&Q.push({name:K,craftingIdx:a,haveIngredients:!1})}))};for(var p in u)U(p);return Q}},{key:"canUseRecipeAtStation",value:function(w,v,I,P){var u=this.playerRecipes[w][v][I].station;return!("Workbench"!==P&&"Artisan Bench"!==P||u)||(P&&P===u||!P&&!u)}},{key:"haveOneOrMoreIngredientOf",value:function(w,v,I,P){var u,Q=this.playerRecipes[w][I],K=(0,t.b)(Q[P].requires);try{for(K.s();!(u=K.n()).done;){var a,U=u.value.items,p=(0,t.b)(U);try{for(p.s();!(a=p.n()).done;){var r=a.value;if(0!==v.getAmountOfItem(r))return!0}}catch(w){p.e(w)}finally{p.f()}}}catch(w){K.e(w)}finally{K.f()}return!1}},{key:"itemCanBeCrafted",value:function(w,v,I,P){var u=this.playerRecipes[w][I];if(void 0===u[P])return!1;var Q,K=(0,t.b)(u[P].requires);try{for(K.s();!(Q=K.n()).done;){var a,U=Q.value,p=U.items,r=U.amt,Y=0,g=(0,t.b)(p);try{for(g.s();!(a=g.n()).done;){var J=a.value;Y+=v.getAmountOfItem(J)}}catch(w){g.e(w)}finally{g.f()}if(Y<r)return!1}}catch(w){K.e(w)}finally{K.f()}return!0}},{key:"spaceInInvenToCraft",value:function(w,v,I,P){var u=this.playerRecipes[w][I];if(!1!==this.bloxd.registry.metadatas[I].stackable){if(null===v.getFreeInventoryPosition())return!1}else if(u[P].produces>v.getNumFreeSlots())return!1;return!0}},{key:"craftItem",value:function(w,v,I,P){if(!this.itemCanBeCrafted(w,v,I,P))return!1;if(!this.spaceInInvenToCraft(w,v,I,P))return!1;var u,Q=this.playerRecipes[w][I],K=(0,t.b)(Q[P].requires);try{for(K.s();!(u=K.n()).done;){var a,U=u.value,p=U.items,r=U.amt,Y=[],g=(0,t.b)(p);try{for(g.s();!(a=g.n()).done;){var J=a.value;Y.push({item:J,amt:v.getAmountOfItem(J)})}}catch(w){g.e(w)}finally{g.f()}Y.sort((function(w,v){return w.amt-v.amt}));for(var l=r,R=0,x=Y;R<x.length;R++){var j=x[R],s=j.item,B=j.amt;if(B>0&&(B>=l?(v.removeItemName(s,l),l=0):(v.removeItemName(s,B),l-=B)),0===l)break}}}catch(w){K.e(w)}finally{K.f()}var i=Q[P].produces,z=0;if(!1!==this.bloxd.registry.metadatas[I].stackable)z=v.pickUpItem({name:I,typeObj:this.bloxd.getItemTypeObj(I),amount:i,attributes:{}});else for(var E=0;E<i;E++)z+=v.pickUpItem({name:I,typeObj:this.bloxd.getItemTypeObj(I),amount:null,attributes:{}});return i===z||(console.error(new Error("Crafted the wrong amount!").stack),!1)}},{key:"getRecipesForPlayer",value:function(w){return this.playerRecipes[w]}}]),w}();function iv(w,v){return(0,Pv.c)({},w,[{requires:[{items:[v],amt:2}],produces:4,station:"Artisan Bench"}])}var zv=I(90574),Ev=I(66645),ov=I(79520),hv=I(85728),nv=function(){function w(v){var I=this;(0,J.e)(this,w),this.bloxd=v,this.metadatas=(0,i.b)({},V.F),this.cachedBiggestItemIdPlusOne=null,v.isClient&&(0,U.Vb)(mw.b.customItemsUpdate,(function(w){var v,P=(0,t.b)(w);try{for(P.s();!(v=P.n()).done;){var u=v.value,Q=u.name,K=u.itemObj;I.registerItem(Q,K),I.bloxd.rendering.customItemUpdate(Q,K)}}catch(w){P.e(w)}finally{P.f()}}))}return(0,l.c)(w,[{key:"registerItem",value:function(w,v){var I,P=null!==(I=v.id)&&void 0!==I?I:Object.values(this.metadatas).reduce((function(w,v){return Math.max(w,v.id)}),0)+1,u=(0,i.b)((0,i.b)({},v),{},{name:w,id:P,isCustom:!0});this.metadatas[w]=u,this.metadatas[P]=u,this.bloxd.isClient||this.bloxd.room.broadcast(mw.b.customItemsUpdate,[{name:w,itemObj:u}]),(0,H.addMetaInfoForItem)(this.metadatas,u)}},{key:"onPlayerJoinServer",value:function(w){var v=[];for(var I in this.metadatas)isNaN(Number(I))&&this.metadatas[I].isCustom&&v.push({name:I,itemObj:this.metadatas[I]});this.bloxd.room.mapEntToClient[w].send(mw.b.customItemsUpdate,v)}},{key:"getBiggestItemIdPlusOne",value:function(){if(null!==this.cachedBiggestItemIdPlusOne)return this.cachedBiggestItemIdPlusOne;var w=Object.values(this.metadatas).reduce((function(w,v){return Math.max(v.id,w)}),0);return this.cachedBiggestItemIdPlusOne=w+1,this.cachedBiggestItemIdPlusOne}}]),w}(),Wv=I(62043),Vv=function(){function w(v,I){var P=this;(0,J.e)(this,w),this.isClient=!0,this.noa=void 0,this.ents=void 0,this.multiblockManager=void 0,this.room=void 0,this.blockDataOwner=void 0,this.craftingManager=void 0,this.rendering=void 0,this.registry=new nv(this),this.chunkTicker=void 0,this.noa=v,this.ents=v.ents,this.multiblockManager=new Aw(v,this),this.room=I,this.blockDataOwner=new Iv(v,this),this.craftingManager=new tv(this),this.isClient?this.rendering=new U.Lc.BloxdClientRenderingClass(this):this.chunkTicker=new pv(this,I),this.isClient&&(0,U.ac)((function(){P.onClientReset()}))}return(0,l.c)(w,[{key:"setBlock",value:function(w,v,I,P){this.multiblockManager.setBlock(w,v,I,P)}},{key:"setBlockNoMulti",value:function(w,v,I,P){var u=this.getBlock(w,v,I);this.isClient?this.hasChunkWithBlockCoordinates(w,v,I)&&this.noa.setBlock(P,w,v,I):(this.chunkTicker.blockUpdated(w,v,I,u,P),this.room.map.setBlock(w,v,I,P)),this.getMetaInfo(P).rootId!==this.getMetaInfo(u).rootId&&(this.onBlockRemoved(w,v,I,u,P,!0),this.blockDataOwner.blockChanged(w,v,I),this.blockAdded(w,v,I,P))}},{key:"getBlock",value:function(w,v,I){return this.isClient?this.noa.getBlock(w,v,I):this.room.map.getBlock(w,v,I)}},{key:"playerCanPlaceItem",value:function(w,v,I,P,u){return u in Cw.i?this.multiblockManager.playerCanPlaceItem(w,v,I,P,u):this.playerCanChangePos(w,v,I,P,u)}},{key:"playerCanChangePos",value:function(w,v,I,P){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.isClient?(console.log(this.hasChunkWithBlockCoordinates(v,I,P),!this.noa.registry.getBlockSolidity(u),this.noa.world.walkThroughType.has(u),!this.noa.ents.isTerrainBlocked(v,I,P)),this.hasChunkWithBlockCoordinates(v,I,P)&&this.posSatisfiesModifyConstraints(w,v,I,P)&&(!this.noa.registry.getBlockSolidity(u)||this.noa.world.walkThroughType.has(u)||!this.noa.ents.isTerrainBlocked(v,I,P))):this.hasChunkWithBlockCoordinates(v,I,P)&&this.posSatisfiesModifyConstraints(w,v,I,P)}},{key:"posSatisfiesModifyConstraints",value:function(w,v,I,P){if(this.isClient)return console.assert(w===this.noa.playerEntity||w===this.noa.serverPlayerEntity,"eId in client posSatisfiesModifyConstraints must be local player"),this.noa.world.canChangeBlock(v,I,P);var u=this.getBlock(v,I,P),Q=this.room.clientOptions[w].canChange,K=this.room.playerAuthInfo[w];return Q?(0,Wv.i)(v,I,P,u,K.cantChangeBlockCoord,K.canChangeBlockCoord,K.cantChangeBlockType,K.canChangeBlockType,K.cantChangeBlockRect,K.canChangeBlockRect,!1):(0,Wv.i)(v,I,P,u,K.canChangeBlockCoord,K.cantChangeBlockCoord,K.canChangeBlockType,K.cantChangeBlockType,K.canChangeBlockRect,K.cantChangeBlockRect,!0)}},{key:"canWaterBucketAtPos",value:function(w,v,I,P){return this.playerCanChangePos(w,v,I,P)||!this.getPlayerClientOption(w,"strictWaterBuckets")}},{key:"getPlayerClientOption",value:function(w,v){return this.isClient?(console.assert(w===this.noa.playerEntity||w===this.noa.serverPlayerEntity,"eId in client getPlayerClientOption must be local player"),this.noa.serverSettings[v]):this.room.api.getClientOption(w,v)}},{key:"getItemId",value:function(w){if(w&&"Air"!==w){if(this.registry.metadatas[w])return this.registry.metadatas[w].id;throw new Error("Invalid block name. You sent ".concat(w,". The only valid item names are 'Air' and those contained within the blockMetadata/itemMetadata files or those registered with the api"))}return 0}},{key:"getItemName",value:function(w){return w&&0!==w?this.registry.metadatas[w].name:"Air"}},{key:"getItemTypeObj",value:function(w){return w&&"Air"!==w?U.Lc.itemsClient[w]:null}},{key:"getMetaInfo",value:function(w){return w&&"Air"!==w?this.registry.metadatas[w].meta:Fv}},{key:"getItemStat",value:function(w,v,I){var P;if(["ttb","displayName","harvestLevel","stoodOnSpeedMultiplier","specialToolDrop","description","altActionable","eatHealAmt","hitPlayerDamage"].includes(I)){var u,Q,K,a,U,p=this.getItemName(v),r=I[0].toUpperCase()+I.slice(1),Y="".concat(p).concat(r);return"displayName"===I?null!==(K=this.getPlayerClientOption(w,Y))&&void 0!==K?K:null!==(a=null===(U=this.registry.metadatas[v])||void 0===U?void 0:U.displayName)&&void 0!==a?a:p:null!==(u=this.getPlayerClientOption(w,Y))&&void 0!==u?u:null===(Q=this.registry.metadatas[v])||void 0===Q?void 0:Q[I]}return null===(P=this.registry.metadatas[v])||void 0===P?void 0:P[I]}},{key:"getBlockTypeIsHarvestable",value:function(w,v){var I=this.getInvenHeldItem(w);if(v&&!this.getPlayerClientOption(w,"creative")){var P,u,Q,K=null===(P=V.F[null===I||void 0===I?void 0:I.name])||void 0===P?void 0:P.harvests,a=null===(u=V.F[null===I||void 0===I?void 0:I.name])||void 0===u?void 0:u.level,U="rock"===this.registry.metadatas[v].harvestType&&0!==this.registry.metadatas[v].harvestLevel&&"rock"!==K;return"rock"===K&&(null!==(Q=this.getItemStat(w,v,"harvestLevel"))&&void 0!==Q?Q:0)>(null!==a&&void 0!==a?a:0)&&(U=!0),!U}return!0}},{key:"getInvenHeldItem",value:function(w){return this.noa.ents.hasComponent(w,"inventory")?this.noa.ents.getInventory(w).getItemAtSelectedSlot():null}},{key:"getIsStoodOnBlock",value:function(w){return(0,zv.e)(this.noa,w,!1).length>=1}},{key:"getStoodBlockSpeedMultiplier",value:function(w){this.isClient&&console.assert(w===this.noa.playerEntity,"eId in client getStoodBlockSpeedMultiplier must be local player");var v=(0,zv.e)(this.noa,w,!1);console.assert(v.length>0,"getStoodBlockSpeedMultiplier called when player is not standing on a block");var I,P=(0,t.b)(v);try{for(P.s();!(I=P.n()).done;){var u=I.value,Q=this.getItemStat(w,u,"stoodOnSpeedMultiplier");if(void 0!==Q)return Q}}catch(w){P.e(w)}finally{P.f()}return 1}},{key:"getBhopMultiplier",value:function(w,v){var I=this.getPlayerClientOption(w,"bunnyhopMaxMultiplier")-1,P=0;return 1===v?P=.5*I:2===v?P=.75*I:v>=3&&(P=I),1+P}},{key:"getPlayerTargetInfo",value:function(w){var v,I,P=this.getPlayerEyePos(w);this.isClient?(console.assert(w===this.noa.playerEntity,"Should only get targeted block for local player"),v=null!==(I=this.noa.actionDirection)&&void 0!==I?I:this.noa.camera.getDirection()):v=this.room.playerAuthInfo[w].useDir;return this.noa.pickBlock(P,v)}},{key:"getPlayerEidList",value:function(){var w=this;return this.isClient?Object.keys(this.noa.playerNames).filter((function(v){return v!==w.noa.playerEntity.toString()})):Object.values(this.room.mapSeshToEnt)}},{key:"getPlayersAvailableForShopInput",value:function(w,v){if("player"===v.userInput.type){var I,P=null!==(I=v.userInput.excludedPlayers)&&void 0!==I?I:[w];return this.getPlayerEidList().filter((function(w){return!P.includes(w)}))}console.error("Used getPlayersAvailableForInput on non-player userInput ShopItem")}},{key:"updateBookshelfContents",value:function(w,v,I,P,u){var Q=H.blockMetadata[P].name.split("|");if(u<=6){var K,a="".concat(0===u?"Empty Bookshelf":"Bookshelf","|meta|").concat(null!==(K=Q[2])&&void 0!==K?K:"rot1","|books").concat(u);this.setBlock(w,v,I,(0,H.blockNameToId)(a))}else console.error(new Error("Bookshelf has more than 6 books").stack)}},{key:"swapDoorTypeOpenClosed",value:function(w,v,I,P,u){var Q,K=H.blockMetadata[u].name.split("|"),a=K[0],p=[v,I,P],r=a;if(a in Cw.e){var Y=Cw.e[a];r=Y.mainMultiblock,p=[v-Y.compX,I-Y.compY,P-Y.compZ]}var g=[r];(Q=g).push.apply(Q,(0,kw.d)(K.slice(1))),1===g.length&&g.push("meta","rot1","closed");var J="open"===g[3]?"closed":"open";g[3]=J,"rot1"===g[2]&&"closed"===g[3]&&(g=[g[0]]);var l=g.join("|");if(this.setBlock(p[0],p[1],p[2],(0,H.blockNameToId)(l)),this.isClient){var R=(0,Ev.d)("open"===J?"doorOpen":"doorClose"),x=[v+.5,I+1,P+.5];(0,ov.c)().play(R,1,(0,U.P)(w)===(0,U.pb)().playerEntity?void 0:x)}return{setPos:p,id:(0,H.blockNameToId)(l)}}},{key:"hasChunkWithBlockCoordinates",value:function(w,v,I){return this.isClient?this.noa.world.hasChunkWithBlockCoordinates(w,v,I):this.room.map.hasChunkWithBlockCoordinates(w,v,I)}},{key:"chunkAdded",value:function(w,v,I,P,u){this.blockDataOwner.chunkAdded(w,v,I,u),this.isClient?this.rendering.removeBoardsInChunk(w,v,I):this.chunkTicker.chunkAdded(w,v,I,P);var Q,K=(0,t.b)(u);try{for(K.s();!(Q=K.n()).done;){var a=Q.value,U=(0,Yw.e)(a.pos,3),p=U[0],r=U[1],Y=U[2],g=P.get(p,r,Y),J=w*Jw.g.chunkSize,l=v*Jw.g.chunkSize,R=I*Jw.g.chunkSize;this.blockAdded(J+p,l+r,R+Y,g)}}catch(w){K.e(w)}finally{K.f()}}},{key:"removingChunk",value:function(w,v,I,P){this.blockDataOwner.removingChunk(w,v,I,P),this.isClient?this.rendering.removeBoardsInChunk(w,v,I):this.chunkTicker.removingChunk(w,v,I)}},{key:"getPlayerEyePos",value:function(w){var v=this.noa.entities.getMoveState(w).crouching,I=this.noa.ents.getPosition(w);return[I[0],I[1]+Jw.g.playerHeight*(v?Jw.g.crouchingEyeHeightRatio:Jw.g.playerEyeToHeightRatio),I[2]]}},{key:"globalToLocal",value:function(w,v){return wv().subtract(null!==v&&void 0!==v?v:wv().create(),w,this.noa.worldOriginOffset)}},{key:"localToGlobal",value:function(w,v){return wv().add(null!==v&&void 0!==v?v:wv().create(),w,this.noa.worldOriginOffset)}},{key:"tick",value:function(){this.isClient||this.chunkTicker.tick()}},{key:"onPlayerJoin",value:function(w){this.craftingManager.onPlayerJoin(w),this.isClient||this.registry.onPlayerJoinServer(w)}},{key:"onPlayerLeave",value:function(w){this.craftingManager.onPlayerLeave(w)}},{key:"onClientReset",value:function(){this.craftingManager.onClientReset()}},{key:"onPlayerChangeBlock",value:function(w,v,I,P,u,Q){this.isClient||"Sapling"===(0,H.blockIdToName)(Q).split(" ").slice(-1)[0]&&(console.assert(void 0===this.blockDataOwner.getBlockData(v,I,P),"Sapling block data is not undefined"),this.blockDataOwner.setBlockData(v,I,P,{persisted:{planterDbId:this.room.api.getPlayerDbId(w)}}))}},{key:"onBlockRemoved",value:function(w,v,I,P,u,Q){if(this.isClient)"Board"===this.getMetaInfo(P).rootName&&this.rendering.removeBoard(w,v,I);else{if("Chest"===this.getMetaInfo(P).rootName){var K=this.blockDataOwner.getBlockData(w,v,I);null!==K&&void 0!==K&&K.openedByPlayer&&this.room.closeStandardChestForPlayer(K.openedByPlayer,w,v,I)}if(!Q)return;if("Chest"===this.getMetaInfo(P).rootName){var a=this.blockDataOwner.getBlockData(w,v,I);if(null!==a&&void 0!==a&&a.persisted){var U,p=(0,gv.g)(a.persisted.chestStr,this.noa),r=(0,t.b)(p.getItems());try{for(r.s();!(U=r.n()).done;){var Y=U.value;if(null!==Y){var g=Y.name,J=Y.amount;this.room.createItem([w+.5,v+.5,I+.5],this.getItemId(g),null!==J&&void 0!==J?J:1,!0)}}}catch(w){r.e(w)}finally{r.f()}}}if(null!==this.getMetaInfo(P).books&&null===this.getMetaInfo(u).books){var l,R,x=null===(l=this.blockDataOwner.getBlockData(w,v,I))||void 0===l||null===(R=l.persisted)||void 0===R?void 0:R.books;if(x){var j=x.filter((function(w){return void 0!==w.customAttributes})).length>0;if(j||x.length<6){var s,B=(0,t.b)(x);try{for(B.s();!(s=B.n()).done;){var i=s.value;this.room.createItem([w+.4+.2*Math.random(),v+.5,I+.4+.2*Math.random()],this.getItemId("Book"),1,!0,i)}}catch(w){B.e(w)}finally{B.f()}this.room.createItem([w+.4+.2*Math.random(),v+.5,I+.4+.2*Math.random()],this.getItemId("Empty Bookshelf"),1,!0)}else this.room.createItem([w+.4+.2*Math.random(),v+.5,I+.4+.2*Math.random()],this.getItemId("Bookshelf"),1,!0)}else this.room.createItem([w+.4+.2*Math.random(),v+.5,I+.4+.2*Math.random()],this.getItemId("Empty Bookshelf"),1,!0)}}}},{key:"blockAdded",value:function(w,v,I,P){this.isClient&&this.hasChunkWithBlockCoordinates(w,v,I)&&"Board"===this.getMetaInfo(P).rootName&&this.rendering.addBoard(w,v,I,P),"Bookshelf"===this.getMetaInfo(P).rootName?this.blockDataOwner.setBlockData(w,v,I,{persisted:{books:[{},{},{},{},{},{}]}}):"Empty Bookshelf"===this.getMetaInfo(P).rootName&&this.blockDataOwner.setBlockData(w,v,I,{persisted:{books:[]}})}},{key:"canAttack",value:function(w,v){var I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isClient)return console.error(new Error("canAttack not implemented for client").stack),!1;if(void 0!==v&&this.room.clientOptions[w]&&this.room.clientOptions[v]&&null!==this.room.clientOptions[v]._health&&!this.room.otherPlayerSettings[w][v]._invincible&&(I||this.room.otherPlayerSettings[w][v].canAttack)&&this.room.api.isAlive(v)){var P=this.room.hasGameReceivedPlayer(w),u=this.room.hasGameReceivedPlayer(v);return P||console.error(new Error("Game hasn't received player").stack),u||console.error(new Error("Game hasn't received player").stack),P&&u}return!1}},{key:"playerAttemptDamageOtherPlayer",value:function(w,v,I,P,u){var Q=arguments.length>5&&void 0!==arguments[5]&&arguments[5],K=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],U=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],p=arguments.length>9?arguments[9]:void 0,r=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(this.isClient)return console.error(new Error("playerAttemptDamageOtherPlayer not implemented for client").stack),!1;if(!this.canAttack(w,v,r))return!1;for(var Y=this.room.mapEntToClient[w],g=0,J=this.ents.getInvenOps(v),l=0;l<V.d.length;l++){var R,x=J.playerInventory.numSlots-V.d.length+l,j=null===(R=J.getItemAtIdx(x))||void 0===R?void 0:R.name;j&&(g+=V.F[j].armourReduction)}var s=this.room.playerAuthInfo[v];I*=1-g,s.currentEffects["Damage Reduction"]&&(I*=.6*Math.pow(.8,s.currentEffects["Damage Reduction"].effectLevel-1)),s.currentEffects.Weakness&&(I*=1+(s.currentEffects.Weakness.effectLevel+1)/2*.2),I*=this.getPlayerClientOption(w,"dealingDamageMultiplier"),I*=this.getPlayerClientOption(v,"receivingDamageMultiplier");var B=I=Math.ceil(I),t=Date.now()-s.lastReceivedCdAttackTime<400;if(U&&t){if(s.lastReceivedCdAttackDmg>=I)return!1;B=I,I-=s.lastReceivedCdAttackDmg}var i=this.room.gamePlayerCb(Y,"onPlayerDamagingOtherPlayer",w,v,I,P);if("preventDamage"===i||null===i)return!1;"number"===typeof i&&(I=i),U&&(s.lastReceivedCdAttackDmg=B,t||(s.lastReceivedCdAttackTime=Date.now()));var z=this.room.api.getPosition(v),E=this.room.api.changeHealth(v,-I,{playerId:w,withItem:P}),o=!1;if(E){var h=this.room.gamePlayerCb(Y,"onPlayerKilledOtherPlayer",w,v,I,P);if("keepInventory"!==h)for(var n=this.ents.getInvenOps(v),W=0;W<n.playerInventory.numSlots;W++){var F=this.room.api.getItemSlot(v,W);if(F){if("Protector"===F.name)continue;this.room.api.createItemDrop(z[0]+.5*Math.random()-.25,z[1]+1.5,z[2]+.5*Math.random()-.25,F.name,F.amount),this.room.api.setItemSlot(v,W,"Air")}}}else if(u){var O,N,q=this.noa.ents.getMoveState(w).speed;q>this.room.clientOptions[w].walkingSpeed*this.room.clientOptions[w].speedMultiplier&&!this.room.playerAuthInfo[w].hasUsedFirstSprintHit&&(o=!0,this.room.playerAuthInfo[w].hasUsedFirstSprintHit=!0);var m=null===(O=this.room.api.getHeldItem(w))||void 0===O?void 0:O.name;this.room.mapEntToClient[v].send(mw.b.attacked,{sprinted:o,dir:u,scalar:null!==(N=V.D[m])&&void 0!==N?N:1,redVert:K})}return a&&(this.room.broadcast(mw.b.entityHurt,{eId:v,yourAttack:!1,kbPs:!1,cPs:!1},{except:Y}),Y.send(mw.b.entityHurt,{eId:v,yourAttack:!0,kbPs:o,cPs:Q}),this.room.api.playSound(v,"hit",1,1.2+.1*Math.random()),v!==w&&(p?this.room.api.playSound(w,p.sound,p.volume,p.pitch):this.room.api.playSound(w,"hit",1,1.2+.1*Math.random()))),s.lastHurtTime=Date.now(),!0}},{key:"useThrowable",value:function(w,v,I,P){var u=this,Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(this.isClient)console.error(new Error("Should not be called on client").stack);else{var a=(this.room.eIdCounter--).toString();this.room.gamePlayerCb(w,"onPlayerUsedThrowable",I,v,a);var U=new hv.c(this,a,v),p=this.getPlayerEyePos(I);U.initServer({pos:p,throwerEId:I,thrownDir:P,dispose:function(){u.noa.ents.deleteEntity(a),u.room.state.deleteEntity(a)},extraVelocityMult:Q,extraDamageMult:K}),this.room.state.createEntity(a,v),this.room.state.setEntityPosition(a,p)}}},{key:"getInventory",value:function(w){var v;return null===(v=this.noa.ents.getInventoryState(w))||void 0===v?void 0:v.inventory}},{key:"hasItem",value:function(w,v){return this.getInventory(w).getAmountOfItem(v)>0}}]),w}(),Fv=Object.freeze(new H.ItemMetaInfo("Air",0,"",null,null,null,null,null,null,null,null,null)),Ov=I(60136),Nv=I(43668),qv=I(47313),mv=I(34703),cv=I(85008),Mv=I(46417),Sv=qv.memo((function(){return(0,cv.c)(),(0,Mv.jsx)(ev,{})})),ev=function(w){(0,Ov.e)(I,w);var v=(0,Nv.d)(I);function I(w){var P;return(0,J.e)(this,I),(P=v.call(this,w)).showQueue=[],P.slideDuration=1,P.state={showQueue:[],currState:null},P.currMessage=null,P.justShowed=!1,P}return(0,l.c)(I,[{key:"componentDidMount",value:function(){var w=this;this.sub=U.hc.subscribe("TopRightHelper",(function(v){w.showQueue.push(v),w.setState({showQueue:w.showQueue})}))}},{key:"componentWillUnmount",value:function(){U.hc.unsubscribe(this.sub),clearTimeout(this.slideOutTimeout),clearTimeout(this.hidingMessageTimeout)}},{key:"componentDidUpdate",value:function(w,v){var I=this;this.justShowed&&(this.justShowed=!1,this.setState({currState:"slideIn"}),this.slideOutTimeout=setTimeout((function(){I.setState({currState:"slideOut"})}),1e3*((this.currMessage.duration||8)-1)),this.hidingMessageTimeout=setTimeout((function(){I.showQueue.shift(),I.currMessage=null,I.setState({showQueue:I.showQueue,currState:null})}),1e3*(this.currMessage.duration||8)))}},{key:"render",value:function(){var w,v,I,P,u,Q=!0;if(this.state.showQueue.length>0&&null===this.state.currState?(this.currMessage=this.state.showQueue[0],this.justShowed=!0,w="slideIn"):"slideOut"===this.state.currState?w="slideOut":null===this.currMessage&&(Q=!1),this.currMessage){var K=this.currMessage.color||"rgb(102, 102, 102)";v={width:this.currMessage.width||"250px",height:this.currMessage.height||"70px",animation:"1s ".concat("slideOut"===w?"HelperSlideKeyFrameReverse":"HelperSlideKeyFrame")},I={backgroundColor:K},P={animation:"2s ".concat("slideOut"===w?"CloseNotification":"ExpandNotification")},u={fontSize:this.currMessage.fontSize||"16px",animation:"2s ".concat("slideOut"===w?"textDisappear":"textAppear")}}return Q?(0,Mv.jsxs)("div",{className:"TopRightHelperBox",style:v,children:[(0,Mv.jsx)("div",{className:"LeftSide",style:I,children:(0,Mv.jsx)("i",{className:"fas fa-".concat(this.currMessage.iconSizeMult||3,"x fa-").concat(this.currMessage.icon," HelperIcon")})}),(0,Mv.jsx)("div",{className:"RightSide",style:P,children:(0,Mv.jsx)("div",{className:"HelperText",style:u,children:this.currMessage.text})})]}):null}}]),I}(qv.Component),Hv=I(4873);function Gv(){var w=(0,qv.useState)(0),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=(0,U.pb)(),Q=(0,mv.P)("changedHotbarUsingNumkeys",!(0,R.g)()),K=(0,Yw.e)(Q,2),a=K[0],p=K[1],r=function(w){u.ents.getInventory(u.playerEntity).setSelectedSlotIndex(w),P(w),(0,U.vc)(mw.e.newSelectedInventorySlotI,w)};(0,mv.T)("ScrollInventorySlot",(function(w){var v=I+w;v<0?v=9:v>9&&(v=0),r(v)})),(0,mv.T)("setSelectedInventorySlotI",(function(w){r(w),p(!1)}));var Y=u.ents.getInventory(u.playerEntity),g=(0,qv.useState)(Y.getHotBar()),J=(0,Yw.e)(g,2),l=J[0],x=J[1],j=l[I];return(0,mv.T)("updatedInventory",(function(){x(Y.getHotBar())})),(0,qv.useEffect)((function(){var w=U.hc.subscribe("DropHotbarItem",(function(w){if(j){var v,P=w&&null!==(v=j.amount)&&void 0!==v?v:1;u.ents.getInvenOps(u.playerEntity).removeItemClient(I,P,!0)}}));return function(){U.hc.unsubscribe(w)}}),[j,I,u.ents,u.playerEntity]),(0,Mv.jsxs)("div",{className:"hotbarContainer",children:[(0,Mv.jsx)("div",{className:"hotbar",children:new Array(10).fill(0).map((function(w,v){return(0,Mv.jsxs)("div",{className:"item ".concat(v===I?"SelectedItem":""),style:{marginLeft:"".concat(v,"0%")},onPointerDown:function(){r(v)},children:[l[v]?(0,Mv.jsx)(Hv.b,{itemName:l[v].typeObj.name,amount:dv(l[v])}):null,a&&(0,Mv.jsx)("div",{className:"HotbarItemNumber SmallTextBold",children:v<9?v+1:0})]},v)}))}),(0,Mv.jsx)(Lv,{selectedItem:j})]})}function Lv(w){var v,I,P,u,Q=w.selectedItem,K=(0,qv.useState)(!1),a=(0,Yw.e)(K,2),p=a[0],r=a[1],Y=(0,qv.useRef)(null),g=(0,mv.L)(),J=(0,qv.useCallback)((function(){var w;clearTimeout(Y.current),r(!0),g();var v=null===Q||void 0===Q||null===(w=Q.attributes)||void 0===w?void 0:w.customAttributes;void 0===(null===v||void 0===v?void 0:v.shotsLeft)&&(Y.current=setTimeout((function(){r(!1)}),2e3))}),[Q]);(0,qv.useEffect)((function(){return J(),function(){clearTimeout(Y.current),r(!1)}}),[Q,J]),(0,mv.T)("serverOption|".concat(null===Q||void 0===Q?void 0:Q.typeObj.name,"DisplayName"),(function(){r(!0)}));var l=(0,qv.useState)(null===Q||void 0===Q||null===(v=Q.attributes)||void 0===v||null===(I=v.customAttributes)||void 0===I?void 0:I.shotsLeft),R=(0,Yw.e)(l,2),x=R[0],j=R[1];(0,qv.useEffect)((function(){var w,v;j(null===Q||void 0===Q||null===(w=Q.attributes)||void 0===w||null===(v=w.customAttributes)||void 0===v?void 0:v.shotsLeft)}),[Q]),(0,mv.T)("localPlayerNewShotsLeft",(function(w){j(w)}));var s=(0,cv.g)();return(0,Mv.jsx)(Mv.Fragment,{children:p&&Q?(0,Mv.jsxs)("div",{className:"SelectedItemName SmallTextBold",style:{bottom:"".concat(Math.min(Math.round(.05*s),70),"px")},children:[(0,Mv.jsx)(mv.B,{text:null!==(P=null===(u=Q.attributes)||void 0===u?void 0:u.customDisplayName)&&void 0!==P?P:(0,U.N)().getItemStat((0,U.pb)().playerEntity,(0,U.N)().getMetaInfo(Q.name).rootName,"displayName")}),void 0!==x?(0,Mv.jsx)("div",{className:"SelectedItemShotsLeft",children:" : ".concat(x,"|").concat(Q.typeObj.clipSize)}):null]}):null})}function dv(w){return w.typeObj.stackable?w.amount:0}var Dv=I(7727),fv=I(63368),bv=I(30845),kv=I(31493),Cv=I(46123),yv=I.n(Cv),Tv=qv.memo((function(w){var v=w.categories;return(0,cv.c)(),(0,Mv.jsx)(Zv,{categories:v})})),Zv=function(w){(0,Ov.e)(I,w);var v=(0,Nv.d)(I);function I(w){var P,u,Q,K,a;if((0,J.e)(this,I),(K=v.call(this,w)).itemsDivRef=void 0,K.useScrollLocation=void 0,K.lastRewardedAttempt=void 0,K.onBoughtInfoTimeout=void 0,K.localCategoryInfo=void 0,K.currSub=void 0,K.categoriesSub=void 0,K.playerNamesUpdatedSub=void 0,K.showShopSub=void 0,K.forceShopSub=void 0,K.isForcedOpen=!1,K.overShopInfoSub=void 0,K.toggleShop=function(){var w={showShop:K.isForcedOpen||!K.state.showShop};w.showShop!==K.state.showShop&&(K.state.showShop?w.currentItemsScrollLocation=K.itemsDivRef.current.scrollTop:K.useScrollLocation=!0,K.setState(w))},K.onNewCategories=function(w){var v,I;if(w&&0!==Object.keys(w).length){var P=null;for(var u in w)0===Object.keys(w[u].items).length&&delete w[u];var Q=new Set;for(var a in w)for(var p in Q.add(a),!0===w[a].autoSelectCategory&&(P=a),K.localCategoryInfo[a]||(K.localCategoryInfo[a]={redDot:!1,items:{}}),w[a].redDot&&(K.localCategoryInfo[a].redDot=!0),w[a].forceRemoveRedDot&&(K.localCategoryInfo[a].redDot=!1),w[a].items){var r=w[a].items[p];K.localCategoryInfo[a].items[p]||(K.localCategoryInfo[a].items[p]={redDot:!1}),r.redDot&&(K.localCategoryInfo[a].items[p].redDot=!0),r.forceRemoveRedDot&&(K.localCategoryInfo[a].items[p].redDot=!1)}for(var Y in K.localCategoryInfo)if(Q.has(Y))for(var g in K.localCategoryInfo[Y].items){var J;null!==(J=w[Y])&&void 0!==J&&J.items[g]||delete K.localCategoryInfo[Y].items[g]}else delete K.localCategoryInfo[Y];var l=(0,i.b)({},K.state.itemUserInputs),R={categories:w,itemUserInputs:l};for(var x in w){var j=function(v){var I,P,u,Q=w[x].items[v],a=K.state.itemUserInputs[v];if("dropdown"===(null===(I=Q.userInput)||void 0===I?void 0:I.type)){var p=!a||!Q.userInput.dropdownOptions.some((function(w){return("object"===typeof w?w.option:w)===a}));if(p){var r=Q.userInput.dropdownOptions[0];l[v]="object"===typeof r?r.option:r}}else if("text"===(null===(P=Q.userInput)||void 0===P?void 0:P.type))a||(l[v]="");else if("player"===(null===(u=Q.userInput)||void 0===u?void 0:u.type)){var Y=(0,U.N)().getPlayersAvailableForShopInput((0,U.pb)().serverPlayerEntity,Q);a&&Y.includes(a)||(l[v]=Y.length>0?Y[0]:null)}};for(var s in w[x].items)j(s)}for(var B in null===P||K.state.showShop?w[K.state.selectedCategoryName]?null!==(v=w[K.state.selectedCategoryName])&&void 0!==v&&null!==(I=v.items)&&void 0!==I&&I[K.state.selectedItemName]||(R.selectedItemName=Object.keys(w[K.state.selectedCategoryName].items)[0]):(R.selectedCategoryName=Object.keys(w)[0],R.selectedItemName=Object.keys(w[R.selectedCategoryName].items)[0]):(R.selectedCategoryName=P,R.selectedItemName=Object.keys(w[P].items)[0]),K.setState(R),w)if(w[B].redDot){U.hc.publish("showShopIconRedDot",!0,!0);break}var t=!1;for(var z in K.localCategoryInfo)K.localCategoryInfo[z].redDot&&(t=!0);return t||U.hc.publish("showShopIconRedDot",!1,!0),R}K.setState({categories:{}})},K.setOnBoughtInfo=function(w){K.setState({onBoughtInfo:w}),clearTimeout(K.onBoughtInfoTimeout),K.onBoughtInfoTimeout=setTimeout((function(){K.setState({onBoughtInfo:null})}),3e3)},K.getShop=function(w){var v=K.state.currencies,I=K.state.categories,P=K.state.selectedCategoryName,u=K.state.selectedItemName,Q=I[P],a=null===Q||void 0===Q?void 0:Q.items[u],p=function(w,v){var I={category:P,name:w,shopVersion:(0,U.pb)().serverSettings._shopVersion,userInput:K.state.itemUserInputs[w]};if(v.isRewardedAd){if(Date.now()-K.lastRewardedAttempt<5e3)return;(0,g.w)((function(){console.log("bought rewarded ad"),(0,U.vc)(mw.e.itemBought,I),K.setOnBoughtInfo(v.onBoughtMessage)}),(function(){console.log("Rewarded ad failed"),K.setState({showRewardedAdFail:!0})})),K.lastRewardedAttempt=Date.now()}else{(0,U.vc)(mw.e.itemBought,I);var u=(0,U.S)(w,v,K.state.itemUserInputs[w]);if(!isNaN(u)&&v.currency){var Q=(0,i.b)({},K.state.currencies);Q[v.currency].amount-=u,K.setState({currencies:Q})}v.onBoughtMessage&&K.setOnBoughtInfo(v.onBoughtMessage)}},r=function(w,v){K.setState({itemUserInputs:(0,i.b)((0,i.b)({},K.state.itemUserInputs),{},(0,Pv.c)({},w,v))})};g.G[(0,g.p)()].showRewardedAds||function(w){for(var v in w)for(var I in w[v].items)w[v].items[I].isRewardedAd&&(delete w[v].items[I],0===Object.keys(w[v].items).length&&delete w[v])}(I);var Y=K.getShopIsShowing();return(0,Mv.jsxs)("div",{style:{display:Y?"":"none",pointerEvents:Y?void 0:"none"},children:[(0,Mv.jsx)(mv.j,{show:"crazygames"!==g.M||Y,close:K.toggleShop,forcePointerLock:!Y,globallyUniqueKey:"ShopComponent",children:0!==Object.keys(K.state.categories).length&&(0,Mv.jsx)(Mv.Fragment,{children:(0,Mv.jsxs)("div",{className:"ShopBody SmallTextLight",children:[(0,Mv.jsxs)("div",{className:"ShopSidebarMenu",children:[!K.isForcedOpen&&(0,Mv.jsx)(fv.d,{onClick:K.toggleShop,className:"ShopResumeButton",children:"Resume"}),(0,Mv.jsx)(mv.y,{className:"ShopCategories",items:Object.keys(I).map((function(w){return{str:w,redDot:!0===K.localCategoryInfo[w].redDot}})),selectedItemStr:P,onClick:function(w){!0===K.localCategoryInfo[w].redDot&&(K.localCategoryInfo[w].redDot=!1,K.redDotCountDecreased()),K.setState({selectedCategoryName:w,selectedItemName:Object.keys(K.state.categories[w].items)[0]})}}),(0,Mv.jsx)("div",{className:"ShopCurrencies",children:v&&Object.keys(v).map((function(w){return(0,Mv.jsxs)("div",{className:"ShopCurrencyDiv",children:[(0,Mv.jsx)("div",{className:"ShopCurrencyAmtIcon",style:{color:v[w].iconColour},children:(0,Mv.jsx)(II,{iconName:v[w].icon})}),"\xa0",v[w].amount]},w)}))})]}),(0,Mv.jsxs)("div",{className:"ShopItemsWrapper",children:[(0,Mv.jsx)("div",{className:"ShopBannerDiv",children:(0,Mv.jsx)(Dv.e,{info:w[0],showing:K.state.showShop})}),(0,Mv.jsx)("div",{className:"ShopItems",ref:K.itemsDivRef,children:Object.keys(I[P].items).map((function(w){var I,a=Q.items[w],Y=K.state.itemUserInputs[w],g=(0,U.S)(w,a,Y);return(0,Mv.jsxs)("div",{className:"ShopItem ".concat(w===u?"SelectedShopItem":""),onClick:function(){K.setState({selectedItemName:w}),!0===K.localCategoryInfo[P].items[w].redDot&&(K.localCategoryInfo[P].items[w].redDot=!1,K.setState({categories:(0,i.b)({},K.state.categories)}))},children:[(0,Mv.jsx)("div",{className:"ShopItemHeaderDiv",children:(0,Mv.jsx)("div",{className:"ShopItemHeader",children:(0,Mv.jsx)(mv.B,{text:null!==(I=a.customTitle)&&void 0!==I?I:w})})}),(0,Mv.jsx)("div",{className:"ItemImageDiv",children:a.image&&(0,Mv.jsx)(Xv,{image:a.image,color:a.imageColour,minWidth:5,minHeight:4.8})}),(0,Mv.jsx)(vI,{item:a,currInput:Y,updateInput:function(v){r(w,v)}}),(0,Mv.jsx)(wI,{item:a,cost:g,currenciesObj:v,outerClassName:"BuyItemDiv",userInputValid:null!==Y,onBuy:function(){p(w,a)}}),!0===K.localCategoryInfo[P].items[w].redDot&&(0,Mv.jsx)(mv.x,{top:"-0.2rem",right:"-0.2rem"})]},w)}))})]}),(0,Mv.jsx)(Av,{selectedItemName:u,selectedItem:a,currencies:v,buyItem:p,currUserInput:K.state.itemUserInputs[u],updateUserInput:function(w){r(u,w)}})]})})}),null!==K.state.onBoughtInfo?(0,Mv.jsx)("div",{className:"ShopOnBoughtInfo",children:(0,Mv.jsx)(mv.B,{text:K.state.onBoughtInfo})}):null,K.state.showRewardedAdFail?(0,Mv.jsx)(mv.t,{className:"RewardedAdFailInfo",hide:function(){K.setState({showRewardedAdFail:!1})},bgClassName:"RewardedAdFailBg",containerClassName:"RewardedAdFailContainer",children:(0,Mv.jsx)("div",{children:"The rewarded ad failed. You need to disable adblock if you have it enabled."})}):null]})},w.categories)for(var p in a=w.categories)0===Object.keys(a[p].items).length&&delete a[p];else a={};var r=Object.keys(a)[0];K.state={showShop:!1,selectedCategoryName:r,selectedItemName:null===(P=Object.keys(null!==(u=null===(Q=a[r])||void 0===Q?void 0:Q.items)&&void 0!==u?u:{}))||void 0===P?void 0:P[0],currentItemsScrollLocation:0,currencies:(0,U.pb)().serverSettings.currencyAmounts,categories:a,showRewardedAdFail:!1,onBoughtInfo:null,itemUserInputs:{}},K.itemsDivRef=qv.createRef(),K.useScrollLocation=!1,K.lastRewardedAttempt=0,K.onBoughtInfoTimeout=null,K.localCategoryInfo={};var Y=K.onNewCategories(w.categories);return K.state=(0,i.b)((0,i.b)({},K.state),Y),K}return(0,l.c)(I,[{key:"shouldComponentUpdate",value:function(w,v,I){return v.showShop||this.state.showShop}},{key:"componentDidMount",value:function(){var w=this;this.currSub=U.hc.subscribe("serverOption|currencyAmounts",(function(v){w.setState({currencies:v})})),this.categoriesSub=U.hc.subscribe("serverOption|shopInfo",this.onNewCategories),this.playerNamesUpdatedSub=U.hc.subscribe("playerNamesUpdated",(function(){w.onNewCategories((0,i.b)({},w.state.categories))})),this.showShopSub=U.hc.subscribe("toggleShop",(function(){w.toggleShop()})),this.forceShopSub=U.hc.subscribe("forceShowShop",(function(v){w.isForcedOpen=v,w.toggleShop()})),this.overShopInfoSub=U.hc.subscribe("overShopInfo",(function(v){w.setOnBoughtInfo(v)}))}},{key:"componentWillUnmount",value:function(){U.hc.unsubscribe(this.currSub),U.hc.unsubscribe(this.categoriesSub),U.hc.unsubscribe(this.playerNamesUpdatedSub),U.hc.unsubscribe(this.showShopSub),U.hc.unsubscribe(this.overShopInfoSub)}},{key:"getShopIsShowing",value:function(){return 0!==Object.keys(this.state.categories).length&&this.state.showShop}},{key:"componentDidUpdate",value:function(w,v){this.useScrollLocation&&(this.itemsDivRef.current&&(this.itemsDivRef.current.scrollTop=this.state.currentItemsScrollLocation),this.useScrollLocation=!1);var I=this.state.selectedCategoryName;this.getShopIsShowing()&&!0===this.localCategoryInfo[I].redDot&&(this.localCategoryInfo[I].redDot=!1,this.redDotCountDecreased(),this.setState({categories:(0,i.b)({},this.state.categories)})),0===Object.keys(this.state.categories).length&&this.state.showShop&&this.setState({showShop:!1}),this.getShopIsShowing()&&!v.showShop?(0,g.j)():!this.getShopIsShowing()&&v.showShop&&(0,g.h)()}},{key:"redDotCountDecreased",value:function(){for(var w in this.state.categories)if(!0===this.localCategoryInfo[w].redDot)return;U.hc.publish("showShopIconRedDot",!1,!0)}},{key:"render",value:function(){return(0,Mv.jsx)(Dv.g,{getChildren:this.getShop,useAdBannersArgs:{banners:[{adId:2,adType:"leaderboard",maxWidth:window.innerWidth-42*(0,U.rb)(),maxHeight:101}],showing:this.getShopIsShowing()}})}}]),I}(qv.Component);function Av(w){var v,I=w.selectedItemName,P=w.selectedItem,u=w.currencies,Q=w.buyItem,K=w.currUserInput,a=w.updateUserInput,p=(0,U.S)(I,P,K);return(0,Mv.jsxs)("div",{className:"SelectedItemViewer",children:[(0,Mv.jsx)("div",{className:"SelectedItemHeaderDiv SmallTextBold",children:(0,Mv.jsx)("div",{className:"SelectedItemHeader",children:(0,Mv.jsx)(mv.B,{text:null!==(v=P.customTitle)&&void 0!==v?v:I})})}),(0,Mv.jsx)("div",{className:"SelectedItemImageDiv",children:P.image&&(0,Mv.jsx)(Xv,{image:P.image,color:P.imageColour,minWidth:8,minHeight:7.5})}),(0,Mv.jsx)("div",{className:"SelectedItemDescription",children:(0,Mv.jsx)(mv.B,{text:P.description})}),(0,Mv.jsx)(vI,{item:P,currInput:K,updateInput:a}),(0,Mv.jsx)(wI,{item:P,cost:p,currenciesObj:u,outerClassName:"SelectedBuyItemDiv",userInputValid:null!==K,onBuy:function(){Q(I,P)}})]})}function Xv(w){var v,I=w.image,P=w.color,u=w.minWidth,Q=w.minHeight,K=I.split("|")[0];if(K in U.Lc.itemsClient)return(0,Mv.jsx)("div",{className:"ShopBlock",style:{minWidth:"".concat(u,"rem"),height:"0",minHeight:"".concat(Q,"rem")},children:(0,Mv.jsx)(Hv.b,{itemName:K,amount:null!==(v=parseInt(I.split("|")[1]))&&void 0!==v?v:0,amountFontSize:"".concat(Q/4,"rem")})});if(".jpg"===K.slice(-4)||".png"===K.slice(-4)){var p=".jpg"===K.slice(-4)?1.6*u:u;return(0,Mv.jsx)("img",{className:yv()({ShopPixelImage:".png"===K.slice(-4)}),style:{width:"".concat(p,"rem"),height:"auto",fontSize:"1.25rem"},src:"textures/games/".concat((0,a.u)(),"/").concat(K),alt:K,draggable:!1})}return(0,Mv.jsx)("i",{className:"fas fa-".concat(I," SelectedItemImage"),style:{color:P}})}function wI(w){var v,I,P=w.item,u=w.cost,Q=w.currenciesObj,K=w.outerClassName,a=w.userInputValid,U=w.onBuy,p=(isNaN(u)||void 0===P.currency||u<=Q[P.currency].amount)&&a&&(null===(v=P.canBuy)||void 0===v||v),r=!isNaN(u)&&0!==u;return P.buyButtonText?I=P.buyButtonText:r?(I=u,!0===P.sell&&(I=-1*u),I=I.toString()):0===u?I="Free":P.isRewardedAd?I="Watch ad":(console.error("Shop item does not have correct values. Defaulting the text on the buy button to Get. Shop item:",P),I="Get"),(0,Mv.jsx)(fv.d,{className:"".concat(K," SmallTextLight"),disabled:!p,onClick:function(){var w;(isNaN(u)||void 0===P.currency||u<=Q[P.currency].amount)&&a&&(null===(w=P.canBuy)||void 0===w||w)&&U()},children:(0,Mv.jsxs)("div",{className:"BuyItemCostAndIcon",children:[r&&(0,Mv.jsx)("div",{style:{color:p?Q[P.currency].iconColour:"lightgray"},className:"BuyItemIcon",children:(0,Mv.jsx)(II,{iconName:Q[P.currency].icon})}),(0,Mv.jsx)("div",{className:"BuyItemCost",children:(0,Mv.jsx)(mv.B,{text:I})})]})})}function vI(w){var v=w.item,I=w.currInput,P=w.updateInput,u=(0,qv.useRef)(null);if(!v.userInput)return null;if("text"===v.userInput.type){console.assert(void 0!==I,"Rendered ItemUserInput but currInput is undefined. Item: ".concat(JSON.stringify(v)));var Q=v.userInput.wordCharsOnly;return(0,Mv.jsx)("div",{className:"ShopItemUserInput ShopItemUserInputTextWrapper",children:(0,Mv.jsx)(bv.d,{className:"ShopItemUserInputText",placeholderText:v.userInput.placeholderText,defaultValue:I,domRef:u,onValueChange:function(w,v){!0===Q&&(w=(0,U.mc)(w)),u.current.value=w,P(w)}})})}if("dropdown"===v.userInput.type)return console.assert(void 0!==I,"Rendered ItemUserInput but currInput is undefined. Item: ".concat(JSON.stringify(v))),(0,Mv.jsx)("div",{className:"ShopItemUserInput ShopItemUserInputDropdown",children:(0,Mv.jsx)(kv.b,{options:v.userInput.dropdownOptions.map((function(w){return"object"===typeof w?w.option:w})),value:I,onChange:function(w){var v=w.value;P(v)}})});if("player"===v.userInput.type){var K=(0,U.N)().getPlayersAvailableForShopInput((0,U.pb)().serverPlayerEntity,v);return(0,Mv.jsx)("div",{className:"ShopItemUserInput ShopItemUserInputDropdown",children:(0,Mv.jsx)(kv.b,{options:K.map((function(w){return{value:w,label:(0,U.pb)().playerNames[w]}})),value:I,onChange:function(w){var v=w.value;P(v)}})})}}function II(w){var v=w.iconName;return v in U.Lc.itemsClient?(0,Mv.jsx)(Hv.b,{itemName:v,amount:1}):(0,Mv.jsx)("i",{className:"fas fa-".concat(v," 2x")})}var PI=I(31382),uI=I(96724),QI=I(95319);function KI(w){var v=w.tasks,I=w.lastDisplayedTasks;return(0,Mv.jsx)(Mv.Fragment,{children:Object.keys(v).map((function(w){return(0,Mv.jsx)(aI,{task:v[w],lastDisplayedAs:I[w]},v[w].text)}))})}function aI(w){var v=w.task,I=w.lastDisplayedAs,P=(0,qv.useState)((null===I||void 0===I?void 0:I.progress)/v.goal),u=(0,Yw.e)(P,2),Q=u[0],K=u[1],a=(0,qv.useState)(!1),U=(0,Yw.e)(a,2),p=U[0],r=U[1],Y=(0,qv.useState)(v.claimed||!1),g=(0,Yw.e)(Y,2),J=g[0],l=g[1];return(0,qv.useEffect)((function(){K(v.progress/v.goal)}),[v.progress,v.goal]),J?null:(0,Mv.jsxs)("div",{className:"Task",children:[(0,Mv.jsx)("div",{className:"TaskDescDiv",children:(0,Mv.jsx)(mv.F,{vw:1.5,maxPx:30,children:v.text})}),v.progress<v.goal?(0,Mv.jsxs)("div",{className:"TaskProgress",children:[0!==Q?(0,Mv.jsx)("div",{className:"TaskProgressForeground",style:{width:"".concat(100*Q,"%")}}):null,(0,Mv.jsx)("div",{className:"TaskProgressText",children:"".concat(v.progress,"/").concat(v.goal)})]}):(0,Mv.jsx)("div",{className:"ClaimRewardButton Button",onClick:function(){r(!0)},children:(0,Mv.jsx)(mv.F,{vw:1.5,maxPx:30,children:"Claim Reward"})}),p?(0,Mv.jsx)(UI,{task:v,close:function(){v.claimed=!0,l(!0),r(!1)}}):null]})}function UI(w){var v=w.task,I=w.close,P=(0,qv.useState)(0),u=(0,Yw.e)(P,2),Q=u[0],K=u[1],a=(0,qv.useState)("closed"),p=(0,Yw.e)(a,2),r=p[0],Y=p[1];(0,qv.useEffect)((function(){var w;return"animStart"===r&&(w=setTimeout((function(){Y("animEnd")}),700)),function(){clearTimeout(w)}}),[r]),(0,QI.b)((function(){(0,U.vc)(mw.e.completeTask,v.text,!0)}));var g=(0,mv._)("currencyAmounts");return(0,Mv.jsxs)("div",{className:"RewardBackground",onClick:function(){if("animEnd"===r)if(0===v.rewards.length)I(),(0,U.vc)(mw.e.completeTask,v.text,!0);else{var w=(0,U.pb)().serverSettings.currencyAmounts;for(var P in Q)w[P].amount+=Q[P];U.hc.publish("serverOption|currencyAmounts",w),Y("closed")}else"closed"===r&&(K(v.rewards.pop()),Y("animStart"))},children:[(0,Mv.jsx)("img",{className:"Chest",alt:"closed"!==r?"open chest":"closed chest",src:"/textures/miscImages/Treasure Chest ".concat("closed"!==r?"open":"closed",".png")}),(0,Mv.jsx)("div",{className:"Rewards",children:"closed"!==r?Object.keys(Q).map((function(w){return(0,Mv.jsxs)("div",{className:"Reward",children:[(0,Mv.jsx)("i",{className:"fas fa-".concat(g[w].icon," 3x UiCurrencyIcon RewardIcon"),style:{color:g[w].iconColour}}),(0,Mv.jsx)("div",{className:"RewardAmountText",children:"animStart"===r?0:Q[w]})]},w)})):null}),"animStart"===r?(0,Mv.jsx)(pI,{}):null,(0,Mv.jsx)("div",{className:"ChestsLeft",children:v.rewards.length})]})}function pI(){var w=(0,qv.useState)(0),v=(0,Yw.e)(w,2),I=v[0],P=v[1];(0,qv.useEffect)((function(){P(1)}),[]);return new Array(40).fill().map((function(w,v){return(0,Mv.jsx)("i",{className:"fas fa-star 3x UiCurrencyIcon OpenStar",style:{bottom:"".concat(50*I*Math.cos(v/40*(2*Math.PI))+50,"vh"),left:"".concat(50*I*Math.sin(v/40*(2*Math.PI)),"vh"),opacity:0===I?1:0}},v)}))}function rI(w){var v=w.lbStats,I=w.storedState,P=void 0===I?{}:I,u=(0,qv.useState)(P.selectedCat||(null===v||void 0===v?void 0:v[0])||null),Q=(0,Yw.e)(u,2),K=Q[0],a=Q[1],p=(0,qv.useState)(P.selectedTimeframe||"Today"),r=(0,Yw.e)(p,2),Y=r[0],g=r[1],J=(0,qv.useState)(null),l=(0,Yw.e)(J,2),R=l[0],x=l[1];(0,qv.useEffect)((function(){null===K&&null!==v&&v.length>0&&a(v[0])}),[v,K]);var j=(0,qv.useState)(P.seeingTop||!1),s=(0,Yw.e)(j,2),B=s[0],i=s[1],z=(0,qv.useState)(!1),E=(0,Yw.e)(z,2),o=E[0],h=E[1],n=(0,qv.useCallback)((function(){null!==K&&null!==Y&&((0,U.vc)(mw.e.leaderboardRequest,{category:K.value,timeframe:Y,seeTop:B},!0),O(!0),H&&G(null))}),[K,Y,P,B]);(0,qv.useEffect)((function(){n(),P.selectedCat=K,P.selectedTimeframe=Y,P.seeingTop=B}),[K,Y,P,B,n]),(0,qv.useEffect)((function(){if((null===R||void 0===R?void 0:R.length)>0)if(B)B&&h(null===N(R));else{var w,v=(0,t.b)(R);try{for(v.s();!(w=v.n()).done;){if(1===w.value.place)return void h(!1)}}catch(w){v.e(w)}finally{v.f()}h(!0)}}),[R,B]),(0,mv.T)("leaderboardResponse",(function(w){for(var I=w.category,P=w.timeframe,u=w.data,Q=0;Q<v;Q++)if(v[Q].value===I){a(v[Q]);break}g(P),x(u),O(!1)}));var W=(0,qv.useState)(!0),V=(0,Yw.e)(W,2),F=V[0],O=V[1];function N(w){for(var v=0;v<w.length;v++)if(w[v].name===(0,U.pb)().playerNames[(0,U.pb)().playerEntity])return w[v].place;return null}var q=(0,qv.useState)(!1),m=(0,Yw.e)(q,2),c=m[0],M=m[1],S=(0,qv.useState)(null),e=(0,Yw.e)(S,2),H=e[0],G=e[1];(0,qv.useEffect)((function(){if(R&&!c){var w=N(R);w<(P.lastSeenPlayerPlace||0)&&G(P.lastSeenPlayerPlace-w),M(!0)}}),[R,P,c]),(0,qv.useEffect)((function(){return function(){R&&(P.lastSeenPlayerPlace=N(R))}}),[R,P]);var L=(0,qv.useRef)(null),d=(0,qv.useState)(void 0),D=(0,Yw.e)(d,2),f=D[0],b=D[1];return(0,qv.useEffect)((function(){var w,v;f!==(null===(w=L.current)||void 0===w?void 0:w.offsetHeight)&&b(null===(v=L.current)||void 0===v?void 0:v.offsetHeight)})),U.Lc.isLoggedIn?(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsxs)("div",{className:"LeaderboardSelectors",children:[(0,Mv.jsx)("div",{className:"LeaderboardSelect",children:(0,Mv.jsx)(kv.b,{options:v.map((function(w){return{label:w.label,value:w.value}})),value:K,onChange:function(w){a(w)},controlClassName:"LBSelectClass",arrowClassName:"LBSelectArrow",menuClassName:"LBDropdownMenu"})}),(0,Mv.jsx)("div",{className:"LeaderboardSelect",children:(0,Mv.jsx)(kv.b,{options:["Today","This week","All Time"].map((function(w){return{value:w,label:w,className:"LBDropdownMenuItem"}})),value:Y,onChange:function(w){g(w.label)},controlClassName:"LBSelectClass",arrowClassName:"LBSelectArrow",menuClassName:"LBDropdownMenu"})}),o?(0,Mv.jsx)("div",{className:"SeeTopText",onClick:function(){i(!B)},children:B?"See Yourself":"See Top"}):null]}),(0,Mv.jsx)("div",{className:"LBTableWrapper",children:F?(0,Mv.jsx)("div",{className:"loader"}):null===H?(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsx)("div",{className:"LBTableHeaderBG",style:{height:f?"calc(".concat(f,"px + 1.4vmin)"):"6.5vmin"}}),(0,Mv.jsxs)("table",{className:"LBTable",children:[(0,Mv.jsx)("thead",{className:"LBTableTHead",ref:L,children:(0,Mv.jsxs)("tr",{children:[(0,Mv.jsx)("th",{className:"LBTablePlaceTH LBTableTH",children:"PLACE"}),(0,Mv.jsx)("th",{className:"LBTablePlayerTH LBTableTH",children:"PLAYER"}),(0,Mv.jsx)("th",{className:"LBTableValueTH LBTableTH",children:K.label.toUpperCase()})]})}),(0,Mv.jsx)("tbody",{children:R.map((function(w){return(0,Mv.jsxs)("tr",{className:"LBTableTR ".concat(w.name===(0,U.pb)().playerNames[(0,U.pb)().playerEntity]?"LBTableTRYou":""),children:[(0,Mv.jsx)("td",{className:"LBTableTD",children:"#".concat(w.place)}),(0,Mv.jsx)("td",{className:"LBTableTD",children:w.name}),(0,Mv.jsx)("td",{className:"LBTableTD",children:w.stat})]},w.name)}))})]})]}):(0,Mv.jsx)("div",{className:"LBIncreaseWrapper",onClick:function(){G(null)},children:(0,Mv.jsxs)("div",{className:"LBIncreaseDiv",children:[(0,Mv.jsx)("div",{className:"TriangleUp"}),(0,Mv.jsx)("div",{className:"LBIncreaseText",children:"".concat(H," Place").concat(H>1?"s":"")})]})})})]}):(0,Mv.jsxs)("div",{className:"LBLoginDiv",children:[(0,Mv.jsx)("div",{className:"LBLoginInfo",children:"Login to see the leaderboard"}),(0,Mv.jsx)("div",{className:"LBLoginInfo",children:"You can login from the top left homescreen"})]})}U.hc.subscribe("requiredLibrariesLoaded",(function(){setTimeout((function(){var w=new Image,v=new Image;w.src="/textures/miscImages/Treasure Chest open.png",v.src="/textures/miscImages/Treasure Chest closed.png"}),1e4)}));var YI=qv.memo((function(){(0,cv.c)();var w=(0,mv._)("_tasks"),v=(0,mv._)("_availableLeaderboards"),I=(0,qv.useState)({}),P=(0,Yw.e)(I,2),u=P[0],Q=P[1];w&&Object.keys(w).length>0&&0===Object.keys(u).length&&Q(w);var K=(0,qv.useState)({tasks:{},leaderboard:{}}),a=(0,Yw.e)(K,1)[0],U={tasks:{Title:"Tasks",getIsDefined:function(){return!!w&&Object.keys(w).length>0},content:(0,Mv.jsx)(KI,{tasks:w,lastDisplayedTasks:u})},leaderboard:{Title:"Leaderboard",getIsDefined:function(){return(null===v||void 0===v?void 0:v.length)>0},content:(0,Mv.jsx)(rI,{lbStats:v,storedState:a.leaderboard})}},p=(0,qv.useState)(s()),r=(0,Yw.e)(p,2),Y=r[0],J=r[1],l=(0,qv.useState)(!1),R=(0,Yw.e)(l,2),x=R[0],j=R[1];function s(){for(var w in U)if(U[w].getIsDefined())return w;return null}(0,mv.T)("ToggleMenu",(function(){Y&&(x?o():j(!0))})),(0,qv.useEffect)((function(){Y||J(s())}),[s()]);var B=(0,qv.useState)(!1),t=(0,Yw.e)(B,2),z=t[0],E=t[1];function o(){j(!1),Q((0,i.b)({},w))}(0,qv.useEffect)((function(){x&&Y&&!z&&E(!0)}),[x,z,Y]),(0,qv.useEffect)((function(){!z&&w&&"tasks"!==Y&&J("tasks")}),[z,w,Y]),(0,qv.useEffect)((function(){x&&Y?(0,g.j)():(0,g.h)()}),[x]);var h=(0,Dv.h)({showing:Y&&x,banners:[{adType:"leaderboard",adId:4,maxWidth:.75*document.documentElement.clientWidth,maxHeight:24*document.documentElement.clientHeight/100}]});return(0,Mv.jsx)(Mv.Fragment,{children:Y?(0,Mv.jsx)("div",{style:{display:x?"block":"none",pointerEvents:x?void 0:"none"},children:(0,Mv.jsxs)(mv.j,{close:o,escDoesExit:!1,closeClassnameList:["VerticalMenuScreenDiv"],forcePointerLock:!x,globallyUniqueKey:"RetentionFeaturesComponent",children:[(0,Mv.jsxs)("div",{className:"VerticalMenuScreenDiv",children:[(0,Mv.jsx)(JI,{}),(0,Mv.jsxs)("div",{className:"MenuDiv",children:[(0,Mv.jsx)(gI,{setCategory:J,menuCategories:U,selectedCat:Y}),(0,Mv.jsx)("div",{className:"MenuCategoryContainer",children:U[Y].content})]})]}),(0,Mv.jsxs)("div",{className:"BottomScreenMenuWrapper",children:["crazygames"!==g.M&&(0,Mv.jsx)("div",{className:"MenuBannerDiv",children:(0,Mv.jsx)(Dv.e,{info:h[0],showing:x})}),(0,Mv.jsx)("div",{className:"DiscordMenuDivDiv",children:(0,Mv.jsx)("div",{className:"DiscordMenuDiv",children:(0,Mv.jsx)(lI,{tasks:w})})})]})]})}):null})}));function gI(w){var v=w.selectedCat,I=w.setCategory,P=w.menuCategories;return(0,Mv.jsx)("div",{className:"MenuHeader",children:Object.keys(P).map((function(w){return P[w].getIsDefined()?(0,Mv.jsx)("div",{className:"MenuHeaderCategory ".concat(w===v?"SelectedHeaderCat":"UnselectedHeaderCat"),onClick:function(){I(w)},children:P[w].Title},w):null}))})}function JI(){var w=(0,mv._)("currencyAmounts");return(0,Mv.jsx)("div",{className:"TopScreenCurrencies",children:Object.keys(w).map((function(v){return(0,Mv.jsxs)("div",{className:"TopScreenCurrencyDiv",children:[(0,Mv.jsx)("i",{className:"fas fa-".concat(w[v].icon," 3x UiCurrencyIcon"),style:{color:w[v].iconColour}}),(0,Mv.jsx)("div",{className:"UiCurrencyAmount",children:w[v].amount})]},v)}))})}function lI(w){var v=w.tasks;return(0,Mv.jsxs)("a",{className:"MenuDiscordButtonWrapper",href:"https://discord.gg/vwMp5y25RX",target:"_blank",rel:"noreferrer",children:[(0,Mv.jsx)("div",{className:"DiscordButton",onClick:function(){U.l.setItem("DiscordPressed",!0),(0,U.vc)(mw.e.generalCookieSet,{cookie:"joinDiscord",value:!0}),"joinDiscord"in v&&U.hc.publish("clientTaskProgress",{taskId:"joinDiscord",progress:1})}}),(0,Mv.jsx)(mv.x,{})]})}var RI=I(69844),xI=I(23455),jI=qv.memo((function(){return(0,cv.c)(),(0,Mv.jsx)(sI,{})})),sI=function(w){(0,Ov.e)(I,w);var v=(0,Nv.d)(I);function I(w){var P;return(0,J.e)(this,I),(P=v.call(this,w)).state={weaponHits:[]},P.timeouts=[],P.weaponHitIndicatorLifetime=1e3,P.weaponHits=[],P}return(0,l.c)(I,[{key:"componentDidMount",value:function(){var w=this;this.weaponHitsSub=U.hc.subscribe("shotPlayer",(function(v){var I=v.damage,P=v.wasCrit,u=v.distance,Q=Date.now();w.weaponHits=[].concat((0,kw.d)(w.weaponHits),[{damage:I,timeReceived:Q,wasCrit:P,distanceToHit:u}]),w.setState({weaponHits:w.weaponHits});var K=setTimeout((function(){w.timeouts=w.timeouts.filter((function(w){return w!==K})),w.weaponHits=w.weaponHits.filter((function(w){return w.timeReceived!==Q})),w.setState({weaponHits:w.weaponHits})}),w.weaponHitIndicatorLifetime);w.timeouts.push(K)}))}},{key:"componentWillUnmount",value:function(){U.hc.unsubscribe(this.weaponHitsSub);var w,v=(0,t.b)(this.timeouts);try{for(v.s();!(w=v.n()).done;){var I=w.value;clearTimeout(I)}}catch(w){v.e(w)}finally{v.f()}}},{key:"render",value:function(){var w=this;return(0,Mv.jsx)("div",{className:"WeaponDamageNumberWrapper",children:this.weaponHits.map((function(v){var I,P=v.damage,u=v.timeReceived,Q=v.wasCrit,K=v.distanceToHit;return v.pos||(v.pos=function(w){var v=50/(.35*Math.pow(w,.7)),I=-Math.PI/4+Math.random()*Math.PI/2;return{x:v*Math.sin(I),y:-v*Math.cos(I)}}(K)),I=Q?"WeaponDamageCrit":"WeaponDamageNormal",(0,Mv.jsx)(BI,{className:"WeaponDamageNumber ".concat(I),classNames:"WeaponDamageNumber",timeout:w.weaponHitIndicatorLifetime,enterActiveStyle:{transform:"translate(calc(".concat(v.pos.x,"vh - 50%), calc(").concat(v.pos.y,"vh - 50%))"),transition:"transform ".concat(w.weaponHitIndicatorLifetime,"ms ease-out")},children:(0,Mv.jsx)("div",{children:Math.floor(P)})},u)}))})}}]),I}(qv.Component);function BI(w){var v=w.children,I=w.className,P=w.classNames,u=w.timeout,Q=w.enterActiveStyle,K=(0,qv.useState)(!1),a=(0,Yw.e)(K,2),U=a[0],p=a[1];(0,qv.useEffect)((function(){p(!0)}),[]);var r=(0,qv.useRef)(null),Y=(0,qv.useState)(!1),g=(0,Yw.e)(Y,2),J=g[0],l=g[1];return(0,Mv.jsx)(xI.e,{className:I,classNames:P||I,in:U,timeout:u,nodeRef:r,onEntering:function(){l(!0)},children:(0,qv.cloneElement)(v,{ref:r,style:J&&Q||void 0})})}function tI(){return(0,Mv.jsx)(iI,{actualValueSetting:"_health",maxValueSetting:"maxHealth",icon:"heart",text:"",color:"red"})}function iI(w){var v=w.actualValueSetting,I=w.maxValueSetting,P=w.icon,u=(w.text,w.color,(0,mv._)(v)),Q=(0,mv._)(I);return(0,cv.g)(),null===u?null:(0,Mv.jsx)("div",{className:"BottomScreenStatBarWrapper",children:(0,Mv.jsxs)("div",{className:"BottomScreenStatBarBackground",children:[(0,Mv.jsx)("div",{className:"BottomScreenStatBar",style:{transform:"scaleX(".concat(Math.max(u/Q,0),")"),transformOrigin:"left center"}}),(0,Mv.jsxs)(mv.F,{vw:1.2,maxPx:14.4,className:"BottomScreenStatBarText SmallTextBold",children:[(0,Mv.jsx)("i",{className:"fas fa-".concat(P)})," ".concat(Math.ceil(u),"/").concat(Q)]})]})})}var zI=I(93239),EI=qv.memo((function(){(0,cv.c)();var w=(0,qv.useState)(!1),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=(0,qv.useRef)(0),Q=(0,qv.useRef)(null),K=(0,qv.useReducer)((function(w){return w+1}),0),a=(0,Yw.e)(K,2),p=(a[0],a[1]),r=(0,mv._)("respawnButtonText"),Y=(0,mv._)("usePlayAgainButton"),J=(0,qv.useState)((0,U.pb)().serverSettings.secsToRespawn),l=(0,Yw.e)(J,2),R=l[0],x=l[1],j=(0,qv.useState)((0,U.pb)().serverSettings.autoRespawn),s=(0,Yw.e)(j,2),B=s[0],t=s[1];(0,mv.T)("serverOption|secsToRespawn",(function(w){x(w),I&&u.current>=0&&w<u.current&&(u.current=w,B&&u.current<=0&&E())})),(0,mv.T)("serverOption|autoRespawn",(function(w){t(w),w&&I&&u.current<=0&&E()}));var i=function(w){w?P(!1):(P(!0),u.current=R,p(),B&&u.current<=0&&E(),clearInterval(Q.current),null===Q.current&&u.current>0&&(Q.current=setInterval((function(){u.current=Math.max(u.current-1,0),p(),u.current<=0&&(clearInterval(Q.current),Q.current=null,(0,U.pb)().serverSettings.autoRespawn&&E())}),1e3)))};(0,mv.T)("otherPlayerSettingsClientifiedEId|".concat((0,U.pb)().playerEntity,"|_isAlive"),(function(w){console.log("Updating respawn component from otherPlayerSettingsClientifiedEId. isAlive:",w),i(w)})),(0,qv.useEffect)((function(){var w=(0,U.pb)();console.log("Updating respawn component from initial mount"),i(w.otherPlayerSettings[w.playerEntity][w.playerEntity]._isAlive)}),[]);var z=(0,qv.useRef)(0),E=function(){if(Date.now()-z.current>1e3){var w=function(){(0,U.vc)(mw.e.respawn),z.current=Date.now()};(0,U.pb)().serverSettings.autoRespawn?w():(0,g.u)((function(){w()}),"respawn")}},o=(0,Dv.h)({showing:I,banners:[{adType:"leaderboard",adId:1,maxWidth:.8*document.documentElement.clientWidth,maxHeight:.35*document.documentElement.clientHeight},{adType:"square",adId:1,maxWidth:window.innerWidth<1e3||window.innerHeight<700?0:1e4,maxHeight:1e5}]}),h=0===u.current,n=h?"":" in ".concat(u.current);return(0,Mv.jsx)(mv.i,{showing:I,globallyUniqueKey:"RespawnComponent",alwaysMountChildren:!0,children:(0,Mv.jsx)("div",{style:{display:I?"":"none",pointerEvents:I?void 0:"none"},children:(0,Mv.jsxs)(mv.j,{close:function(){P(!1)},zIndex:1,togglePointerLock:!1,closeOnPressBackground:!1,children:[(0,Mv.jsxs)("div",{className:"CenteredRespawnDiv",children:[(0,Mv.jsxs)("div",{className:"RespawnMainContent",children:[B&&(0,Mv.jsxs)("div",{className:"AutoRespawnText FullyFancyText",children:["Respawning",n]}),!B&&(0,Mv.jsxs)(Mv.Fragment,{children:[Y&&(0,Mv.jsx)(fv.i,{className:"RespawnButton",onClick:function(){(0,g.u)((function(){(0,zI.j)(U.Lc.connectedPlayingMode,null)}))},children:"Play Again"}),(0,Mv.jsx)(fv.d,{className:"RespawnButton",onClick:E,disabled:!h,children:"".concat(r).concat(n)}),(0,Mv.jsx)(fv.l,{className:"RespawnButton",onClick:function(){(0,zI.g)()},disabled:!h,children:"Exit Game".concat(n)})]})]}),(0,Mv.jsx)("div",{className:"RespawnLbBannerDiv",children:(0,Mv.jsx)(Dv.e,{info:o[0]})})]}),(0,Mv.jsx)("div",{className:"RespawnSideSquareBannerDiv",children:(0,Mv.jsx)(Dv.e,{info:o[1]})})]})})})})),oI=I(66293),hI=I(32901),nI=I.n(hI),WI=vv.t?7e7:7e3,VI=qv.memo((function(){var w=(0,qv.useRef)([]),v=(0,mv.L)();(0,mv.T)("playerKilled",(function(I){var P,u,Q=I.deadEId,K=I.killerEId,a=I.withItem,p=I.headshot,r=I.killstreak,Y=w.current;if(Y.length>=3){var g=Y.shift();clearTimeout(g.timeout)}""!==(0,U.pb)().otherPlayerSettings[(0,U.pb)().playerEntity][K].killfeedColour?(P=(0,U.pb)().otherPlayerSettings[(0,U.pb)().playerEntity][K].killfeedColour,u=(0,U.pb)().otherPlayerSettings[(0,U.pb)().playerEntity][Q].killfeedColour):(P=K===(0,U.pb)().serverPlayerEntity?"#2727f1":"#912c2c",u=Q===(0,U.pb)().serverPlayerEntity?"#2727f1":"#912c2c");var J={deadName:(0,U.pb)().playerNames[Q],killerName:(0,U.pb)().playerNames[K],withItem:a,wasHeadshot:p,killstreak:r,timeout:setTimeout((function(){Y.shift(),v()}),WI),reactId:"".concat(K,"|").concat(Q,"|").concat(Date.now()),killerColour:P,deadColour:u};Y.push(J),v()})),(0,qv.useEffect)((function(){var v=w.current;return function(){for(;v.length>0;){var w=v.pop().timeout;clearTimeout(w)}}}),[]);return(0,Mv.jsx)("div",{className:"Killfeed",children:w.current.map((function(w){var v,I=w.deadName,P=w.killerName,u=w.withItem,Q=w.wasHeadshot,K=w.killstreak,a=w.killerColour,p=w.deadColour,r=w.reactId;return(0,Mv.jsxs)("div",{className:"IndividualKillWrapper SmallTextLight",style:{background:"linear-gradient(90deg, ".concat(nI()(a).alpha(.5)," calc(100% - 10rem), ").concat(nI()(p).alpha(.5)," 100%)")},children:[K>=2?(0,Mv.jsx)("div",{className:"KillfeedKillstreak",children:(0,U.q)(K)}):null,(0,Mv.jsx)("div",{className:"KillfeedKillerName",children:P}),(0,Mv.jsx)("div",{className:"KillfeedItem",style:{height:"5vmin",width:"Gun"===(null===(v=U.Lc.itemsClient[u])||void 0===v?void 0:v.type)?"7.5vmin":"5vmin"},children:(0,Mv.jsx)(Hv.b,{itemName:u,amount:0,gunTransform:"scaleX(-1)",itemMarginTop:0})}),Q?(0,Mv.jsx)("i",{className:"fas fa-crosshairs 3x KillfeedHeadshotIcon"}):null,(0,Mv.jsx)("div",{className:"KillfeedDeadName",children:I})]},r)}))})})),FI=I(3170),OI=qv.memo((function(){return(0,Mv.jsx)("div",{className:"BottomRightElements",children:(0,Mv.jsx)(mI,{})})})),NI=0,qI=1;function mI(){var w=(0,qv.useRef)([]),v=(0,qv.useRef)(NI),I=(0,qv.useRef)(),P=(0,qv.useRef)(),u=(0,mv._)("showProgressBar");(0,qv.useEffect)((function(){return function(){v.current=NI,clearTimeout(I.current)}}),[u]),(0,mv.T)("progressBarUpdate",(function(I){var P=I.toFraction,u=I.toDuration;w.current.push({toFraction:P,toDuration:u}),v.current===NI&&Q()}));var Q=function u(){console.assert(v.current===NI);var Q=w.current;if(Q.length>0){var K=Q.shift(),a=K.toFraction,U=K.toDuration;v.current=qI;P.current.style.transition="transform ".concat(Math.max(U-50,0),"ms linear"),P.current.style.backgroundColor="var(--darkerColourShaded)",I.current=setTimeout((function(){P.current.style.transform="scaleX(".concat(a,")"),I.current=setTimeout((function(){1===a&&(P.current.style.backgroundColor="var(--buttonColourShaded)"),v.current=NI,u()}),Math.max(U-50,0))}),50)}};if(!u)return null;return(0,Mv.jsx)("div",{className:"ProgressBarBackground",children:(0,Mv.jsx)("div",{className:"ProgressBarForeground",ref:P,style:{width:"".concat(15,"vw"),transformOrigin:"left center",transform:"scaleX(0)"}})})}var cI=I(34177),MI={Helmet:I(82113),Chestplate:I(7673),Gauntlets:I(5827),Leggings:I(45100),Boots:I(3145)},SI=0;U.hc.subscribe("noaTick",(function(){Date.now()-SI>9200&&((0,U.vc)(mw.e.chestConf,(0,U.X)(),!0),SI=Date.now())}));var eI=qv.memo((function(w){var v=w.touchScreen,I=(0,U.pb)(),P=I.ents.getInventory(I.playerEntity),u=I.ents.getInvenOps(I.playerEntity),Q=u.openChest,K=(0,qv.useState)(!1),a=(0,Yw.e)(K,2),p=a[0],r=a[1],Y=(0,qv.useState)(null),g=(0,Yw.e)(Y,2),J=g[0],l=g[1],R=function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!p;if(!v&&uw.current&&(Qw.current=uw.current.scrollTop),l(w),r(v),Q){(0,U.vc)(mw.e.closeChest,null),u.chestClosed();var I=(0,ov.c)().play("chestClose",1);I.rate(.8+.4*Math.random())}};(0,mv.T)("ToggleInventory",R),(0,mv.T)("chestToggleFromServer",(function(w){if(l(null),r(w),w)(0,ov.c)().play("chestOpen",1).rate(.8+.4*Math.random());else if(Q){(0,ov.c)().play("chestClose",1).rate(.8+.4*Math.random())}}));(0,mv.T)("updatedInventory",(function(w){null!==G&&k(G)(!0),i()}));var x=(0,qv.useRef)(null),j=(0,qv.useRef)(null),s=(0,qv.useRef)(null),B=(0,qv.useReducer)((function(w){return w+1}),0),t=(0,Yw.e)(B,2),i=(t[0],t[1]),z=(0,mv._)("inventoryItemsMoveable"),E=function(w,v){u.movePosWithAmtClient(j.current.idx,w,v)?(j.current.amount-=v,j.current.amount<=0&&(j.current=null)):console.error("movePosWithAmtClient failed")},o=(0,qv.useRef)(0),h=function(w){return function(v){var I=TI(v);if(I||M(v.pageX,v.pageY),z){if(m(v),o.current=Date.now(),I&&(q.current.itemBeingDragged=!0,u.getItemAtIdx(w)&&u.getItemAtIdx(w).amount&&u.getItemAtIdx(w).amount>0)){var P=v.pageX,Q=v.pageY,K=N.current.x,a=N.current.y;clearTimeout(n.current),n.current=setTimeout((function(){j.current&&j.current.idx===w&&(Math.abs(P-N.current.x)<20&&Math.abs(Q-N.current.y)<20||K===N.current.x&&a===N.current.y)&&q.current.itemBeingDragged&&(W.current={initTouchX:v.pageX,initTouchY:v.pageY,maxAmount:j.current.amount},j.current.amount=Math.ceil(j.current.amount/2),c(),i())}),500)}F(v,w)}}},n=(0,qv.useRef)(null),W=(0,qv.useRef)(null);(0,qv.useEffect)((function(){clearTimeout(n.current)}),[p]);var F=function(w,v){var I,K=u.getItemAtIdx(v),a=0===(I=w).button||void 0===I.button;if(-1===v)if(j.current){var U=a&&j.current.amount||1;u.removeItemClient(j.current.idx,U,!0)&&(j.current.amount-=U,j.current.amount<=0&&(j.current=null))}else a&&R();else if(yI(w)){var p;if(!K)return;var r=K.amount;if(v===(null===(p=j.current)||void 0===p?void 0:p.idx)&&(r=j.current.amount<=0?0:K.amount-j.current.amount),0===r)return;var Y=(0,V.q)(K.name),g=Y?(0,V.m)(Y):null;!V.d.includes(Y)||null!==u.getItemAtIdx(g)&&v!==g?Q?v<P.numSlots?u.moveItemIntoIdxsClient(P.numSlots,P.numSlots+Q.numSlots,v,r):u.moveItemIntoIdxsClient(0,P.numSlots-V.d.length,v,r):u.inCreative?v<10?u.moveItemIntoIdxsClient(10,P.numSlots-V.d.length,v,r):v<P.numSlots?u.moveItemIntoIdxsClient(0,10,v,r):u.moveItemIntoIdxsClient(0,P.numSlots-V.d.length,v,r):v<10?u.moveItemIntoIdxsClient(10,P.numSlots-V.d.length,v,r):u.moveItemIntoIdxsClient(0,10,v,r):v<P.numSlots-V.d.length||v>=P.numSlots?u.swapPosClient(g,v):(u.moveItemIntoIdxsClient(0,P.numSlots-V.d.length,g,r),(0,ov.c)().play("equip_leather1",1).rate(.9+.3*Math.random()))}else if(j.current){var J=j.current.idx;if(K&&j.current.name===K.name&&j.current.amount>0&&dv(K)>0&&(K.amount<Jw.g.maxItemStackSize||v===J))a?K.amount+j.current.amount<=Jw.g.maxItemStackSize||v===J?E(v,j.current.amount):E(v,Jw.g.maxItemStackSize-K.amount):E(v,1);else if(j.current.amount>0&&!K)E(v,a?j.current.amount:1);else if(a||K||0===j.current.amount)if(u.inCreative&&!u.openChest&&v>=P.numSlots){var l=0===j.current.amount?1:j.current.amount;u.removeItemClient(j.current.idx,l,!1)&&(j.current=null)}else{if(u.swapPosClient(v,j.current.idx)){var x=u.getItemAtIdx(J),s=!u.openChest&&u.inCreative&&j.current.idx>=u.playerInventory.numSlots;x&&j.current.idx!==v&&!s?j.current={idx:j.current.idx,name:x.typeObj.name,amount:dv(x)}:j.current=null}}else E(v,1)}else{if(!K)return;if(a)j.current={idx:v,name:K.typeObj.name,amount:dv(K)};else{var B=Math.ceil(dv(K)/2);j.current={idx:v,name:K.typeObj.name,amount:B}}}i()},O=function(w){return function(w){var v=TI(w);if(m(w),q.current.itemBeingDragged=!1,clearTimeout(n.current),W.current)return W.current=null,void i();if(v&&j.current&&Date.now()-o.current>150){var I=document.elementFromPoint(w.clientX,w.clientY),P=I.getAttribute("data-inven-idx");null!==P?F(w,parseInt(P)):I.classList.contains("InventoryBackgroundScreen")&&F(w,-1)}M(w.pageX,w.pageY)}},N=(0,qv.useRef)({x:0,y:0}),q=(0,qv.useRef)({isTouch:!1,itemBeingDragged:!1}),m=function(w){q.current.isTouch=TI(w)};(0,qv.useEffect)((function(){var w;if(p){if(!q.current.isTouch){var v=N.current;M(v.x,v.y)}w=function(w){w.preventDefault(),m(w),M(w.pageX,w.pageY),W.current&&S(w)},document.addEventListener("pointermove",w)}return function(){document.removeEventListener("pointermove",w)}}));var c=function(){x.current.style.transform="translate(0.5rem, 0.5rem)"},M=function(w,v){var I=N.current;I.x=w,I.y=v,x.current?!q.current.isTouch||q.current.itemBeingDragged&&!W.current?x.current.style.transform="translate(".concat(I.x,"px, ").concat(I.y,"px)"):c():s.current&&(s.current.style.transform="translate(".concat(I.x+10,"px, ").concat(I.y+10,"px)"))},S=function(w){var v=W.current,I=v.initTouchX,P=(v.initTouchY,v.maxAmount),u=(w.pageX-I)*W.current.maxAmount/160,Q=Math.ceil(P/2)+Math.ceil(u);j.current.amount=Math.min(P,Math.max(1,Q)),i()};(0,qv.useEffect)((function(){return fw.e.setInventoryOpen(p),function(){fw.e.setInventoryOpen(!1)}}),[p]);var e=(0,qv.useState)(null),H=(0,Yw.e)(e,2),G=H[0],L=H[1],d=(0,qv.useState)(null),D=(0,Yw.e)(d,2),f=D[0],b=D[1],k=function(w){return function(v,P){if(L(v&&void 0!==w?w:null),v){if(void 0===w&&!P)return void I.logErrorMessage("Error in invenComp",new Error("isHovering true but no idx or itemName").stack);if(void 0!==w){var Q,K,a=u.getItemAtIdx(w);if(!a)return void b(null);var p=a.attributes;b({name:null!==(Q=p.customDisplayName)&&void 0!==Q?Q:(0,U.N)().getItemStat(I.playerEntity,(0,U.N)().getMetaInfo(a.name).rootName,"displayName"),desc:null!==(K=p.customDescription)&&void 0!==K?K:(0,U.N)().getItemStat(I.playerEntity,(0,U.N)().getMetaInfo(a.name).rootName,"description")})}else b({name:(0,U.N)().getItemStat(I.playerEntity,P,"displayName"),desc:(0,U.N)().getItemStat(I.playerEntity,P,"description")})}else b(null)}};(0,mv.T)("DropInvenItem",(function(w){if(null!==G&&null!==u.getItemAtIdx(G)){var v,I,P=u.getItemAtIdx(G),Q=w&&null!==(v=P.amount)&&void 0!==v?v:1;u.removeItemClient(G,Q,!0),G===(null===(I=j.current)||void 0===I?void 0:I.idx)&&(j.current.amount-=Q,j.current.amount<=0&&(j.current=null),i())}})),(0,mv.T)("numkeyPressed",(function(w){var v=w-1;null!==G&&p&&(u.swapPosClient(v,G)&&j.current&&(j.current.idx===G?j.current.idx=v:j.current.idx===v&&(j.current.idx=G)),i())})),(0,qv.useEffect)((function(){p||(j.current=null,b(null),i())}),[p]),(0,mv.T)("EscKeyPressed",(function(){R(null,!1)})),(0,mv.T)("syncedInvenFromServer",(function(){j.current=null,i()})),(0,mv.T)("craftingRecipesEdited",(function(w){var v=w.itemName,I=w.recipesForItem;(null===A||void 0===A?void 0:A.name)===v&&(null===A||void 0===A?void 0:A.craftingIdx)>=I.length&&X(null),i()}));var C,y=(0,mv._)("canCraft"),T=(0,qv.useReducer)((function(w,v){return(null===w||void 0===w?void 0:w.name)!==(null===v||void 0===v?void 0:v.name)||(null===w||void 0===w?void 0:w.craftingIdx)!==(null===v||void 0===v?void 0:v.craftingIdx)?v:w}),null),Z=(0,Yw.e)(T,2),A=Z[0],X=Z[1],ww=(0,qv.useState)(""),vw=(0,Yw.e)(ww,2),Iw=vw[0],Pw=vw[1],uw=(0,qv.useRef)(null),Qw=(0,qv.useRef)(0);return(0,qv.useEffect)((function(){p&&uw.current&&(uw.current.scrollTop=Qw.current)}),[p]),Q?C=(0,Mv.jsx)("div",{className:"GridItemSlots LeftSideItemSlots",children:new Array(u.openChest.numSlots).fill(0).map((function(w,v){var I=P.numSlots+v;return(0,Mv.jsx)(dI,{idx:I,draggedInfo:j.current,setHovered:k(I),pointerDown:h(I),pointerUp:O()},I)}))}):!u.inCreative||null!==J&&y?y&&(C=(0,Mv.jsx)(HI,{onCraft:function(){!function(){if(j.current){var w=j.current,v=w.idx,I=w.name,P=w.amount;(null===u.getItemAtIdx(v)||u.getItemAtIdx(v).name!==I||u.getItemAtIdx(v).amount<P)&&(j.current=null)}}()},craftingStation:J,selectedCraftable:A,dispatchSelectedCraftable:X,setHovered:k()})):C=(0,Mv.jsx)(kI,{creativeScrollDiv:uw,playerInven:P,getSetHoveringForIdx:k,getPointerDownForIdx:h,getPointerUpForIdx:O,creativeSearchVal:Iw,setCreativeSearchVal:Pw}),(0,Mv.jsxs)("div",{className:"InventoryCompWrapper",style:{touchAction:p?"none":null},children:[j.current&&(0,Mv.jsx)(DI,{draggedInfo:j.current,toAddRef:x}),!j.current&&null!==f&&(0,Mv.jsx)(fI,{displayInfo:f,domRef:s}),W.current&&(0,Mv.jsx)(CI,{info:W.current,draggedInfo:j.current,forceRerender:i}),(0,Mv.jsx)(bI,{touchScreen:v}),(0,Mv.jsx)(mv.j,{show:p,className:"InventoryBackgroundScreen",globallyUniqueKey:"Inventory",close:R,forcePointerLock:!p,zIndex:3,closeOnPressBackground:!1,preventContextMenu:!0,pointerDown:h(-1),pointerUp:O(),doGameplayStartStopOnShow:!0,children:(0,Mv.jsxs)("div",{className:"Inventory",children:[(0,Mv.jsxs)("div",{className:"InvenBody",children:[C,(0,Mv.jsxs)("div",{className:"InvenBodyRight",children:[(0,Mv.jsx)("div",{className:"ArmourItemSlots",children:new Array(V.d.length).fill(0).map((function(w,v){var I,u=P.numSlots-V.d.length+v,Q=null===(I=j.current)||void 0===I?void 0:I.name,K=V.d[v],a=h(u),U=O();return(0,Mv.jsx)(dI,{idx:u,draggedInfo:j.current,setHovered:k(u),pointerDown:function(w){Q&&(0,V.q)(Q)!==K||a(w)},pointerUp:function(w){Q&&Q.split(" ")[1]!==K||U(w)},defaultIconB64:MI[K]},u)}))}),(0,Mv.jsx)("div",{className:"GridItemSlots",children:new Array(P.numSlots-10-V.d.length).fill(0).map((function(w,v){var I=v+10;return(0,Mv.jsx)(dI,{idx:I,draggedInfo:j.current,setHovered:k(I),pointerDown:h(I),pointerUp:O()},I)}))})]})]}),(0,Mv.jsx)("div",{className:"InvenHotbar",children:new Array(10).fill(0).map((function(w,v){return(0,Mv.jsx)(dI,{idx:v,draggedInfo:j.current,setHovered:k(v),pointerDown:h(v),pointerUp:O()},v)}))})]})})]})}));function HI(w){var v=w.onCraft,I=w.dispatchSelectedCraftable,P=w.selectedCraftable,u=w.craftingStation,Q=w.setHovered,K=(0,U.pb)(),a=K.ents.getInventory(K.playerEntity),p=(0,U.N)().craftingManager.getItemsHavingOneIngredientOf(K.playerEntity,a,u),r=P;return p.length>0&&null===P&&(r=p[0]),(0,qv.useEffect)((function(){var w;p.some((function(w){return w.name===(null===P||void 0===P?void 0:P.name)&&w.craftingIdx===(null===P||void 0===P?void 0:P.craftingIdx)}))||I(null!==(w=p[0])&&void 0!==w?w:null)})),(0,Mv.jsx)("div",{className:"Craftables",children:p.length>0&&(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsxs)("div",{className:"CraftablesLeftSide",children:[(0,Mv.jsx)("div",{className:"CraftingStationHeader SmallTextBold",children:u}),(0,Mv.jsx)("div",{className:"CraftableItems",children:p.map((function(w){var v=w.name,P=w.craftingIdx,u=w.haveIngredients;return(0,Mv.jsx)(LI,{itemName:v,onClick:function(){I(w)},isSelected:r.name===v&&r.craftingIdx===P,haveIngredients:u,setHovered:Q},"".concat(v,"_").concat(P))}))})]}),(0,Mv.jsx)(GI,{recipeItem:r,onCraft:v,setHovered:Q})]})})}function GI(w){var v=w.recipeItem,I=v.name,P=v.craftingIdx,u=w.onCraft,Q=w.setHovered,K=(0,U.pb)(),a=K.ents.getInventory(K.playerEntity),p=!(0,U.N)().craftingManager.spaceInInvenToCraft(K.playerEntity,a,I,P),r=(0,U.N)().craftingManager.itemCanBeCrafted(K.playerEntity,a,I,P),Y=(0,U.N)().craftingManager.getRecipesForPlayer(K.playerEntity)[I],g="4rem";3===Y[P].requires.length?g="3.75rem":Y[P].requires.length>=4&&(g="3.25rem");var J=function(w){if(yI(w)){for(var v=[];(0,U.N)().craftingManager.craftItem(K.playerEntity,a,I,P);)u(),v.push({itemName:I,craftingIdx:P});(0,U.vc)(mw.e.craftItem,v)}else{(0,U.N)().craftingManager.craftItem(K.playerEntity,a,I,P)&&(u(),(0,U.vc)(mw.e.craftItem,[{itemName:I,craftingIdx:P}]))}},l=(0,qv.useRef)(null);return(0,qv.useEffect)((function(){return function(){clearInterval(l.current)}}),[]),(0,Mv.jsxs)("div",{className:"CraftableInfo SmallTextBold",children:[(0,Mv.jsx)("div",{className:"CraftableHeader",children:I}),Y[P].requires.map((function(w){var v=w.items,I=w.amt;return(0,Mv.jsx)("div",{className:"CraftingRecipeItemReq",style:{width:g,height:g},onPointerEnter:function(){null===Q||void 0===Q||Q(!0,v[0])},onPointerLeave:function(){null===Q||void 0===Q||Q(!1)},children:(0,Mv.jsx)(Hv.b,{itemName:v[0],amount:I})},v[0])})),(!r||p)&&(0,Mv.jsxs)("div",{className:"CantCraftInfo",children:[!r&&"Missing ingredients",(0,Mv.jsx)("br",{}),p&&"Inventory is full"]}),(0,Mv.jsx)(fv.d,{className:"DoCraftButton",onPointerDown:function(w){J(w),clearInterval(l.current),l.current=setTimeout((function(){l.current=setInterval((function(){J(w)}),100)}),400)},onPointerUp:function(w){clearInterval(l.current)},onPointerLeave:function(w){clearInterval(l.current)},disabled:!r||p,children:(0,Mv.jsx)("div",{className:"DoCraftItem",onPointerEnter:function(){null===Q||void 0===Q||Q(!0,I)},onPointerLeave:function(){null===Q||void 0===Q||Q(!1)},children:(0,Mv.jsx)(Hv.b,{itemName:I,amount:Y[P].produces})})})]})}function LI(w){var v=w.onClick,I=w.itemName,P=w.isSelected,u=w.haveIngredients,Q=w.setHovered;return(0,Mv.jsx)("div",{className:yv()("InvenItem",{CraftableItemNotEnoughIngredients:!u}),onClick:v,style:{cursor:P?null:"pointer"},onPointerEnter:function(){null===Q||void 0===Q||Q(!0,I)},onPointerLeave:function(){null===Q||void 0===Q||Q(!1)},children:(0,Mv.jsx)(Hv.b,{itemName:I,amount:1})})}function dI(w){var v=w.idx,I=w.setHovered,P=w.pointerDown,u=w.pointerUp,Q=w.draggedInfo,K=w.defaultIconB64,a=void 0===K?null:K,p=(0,U.pb)(),r=p.ents.getInvenOps(p.playerEntity).getItemAtIdx(v);return(0,Mv.jsxs)("div",{className:"InvenItem",onPointerEnter:function(){null===I||void 0===I||I(!0)},onPointerLeave:function(){null===I||void 0===I||I(!1)},onPointerDown:P,onPointerUp:u,"data-inven-idx":v,children:[r&&function(){var w=dv(r);return(null===Q||void 0===Q?void 0:Q.idx)===v&&w>0&&(w-=Q.amount),((null===Q||void 0===Q?void 0:Q.idx)!==v||w>0)&&(0,Mv.jsx)(Hv.b,{itemName:r.typeObj.name,amount:w})}(),a&&(!r||(null===Q||void 0===Q?void 0:Q.idx)===v)&&(0,Mv.jsx)("div",{className:"InvenItemUnfilled",style:{backgroundImage:"url(".concat(a,")")}})]})}function DI(w){var v=w.draggedInfo,I=v.name,P=v.amount,u=w.toAddRef;return(0,Mv.jsx)("div",{className:"DraggedInvenItem",ref:u,children:(0,Mv.jsx)(Hv.b,{itemName:I,amount:P})})}function fI(w){var v=w.displayInfo,I=w.domRef;return(0,Mv.jsxs)("div",{className:"InvenHoveredItemInfo SmallTextBold",ref:I,children:[(0,Mv.jsx)(mv.B,{text:v.name}),(0,Mv.jsx)("div",{className:"InvenHoveredItemInfoDescription",children:(0,Mv.jsx)(mv.B,{text:v.desc})})]})}function bI(w){var v=w.touchScreen,I=function(){var w=(0,U.pb)().ents.getInventoryState((0,U.pb)().playerEntity);if(null!==w&&void 0!==w&&w.inventory){var v=w.inventory;return Jv.some((function(w){return v.getAmountOfItem(w)>0}))}return!1};return(0,mv.T)("updatedInventory",(function(w){(0,U.pb)().serverSettings.creative||U.l.getItem("LogInInventoryRedDotTutorialComplete")||(I()?(U.hc.publish("RedDotOpenInventoryIcon",!0),U.hc.publish("TouchTutorialOpenInventoryIcon",!0)):(U.hc.publish("RedDotOpenInventoryIcon",!1),U.hc.publish("TouchTutorialOpenInventoryIcon",!1)))})),(0,mv.T)("ToggleInventory",(function(){I()&&(U.l.setItem("LogInInventoryRedDotTutorialComplete",!0),U.hc.publish("RedDotOpenInventoryIcon",!1),U.hc.publish("TouchTutorialOpenInventoryIcon",!1))})),(0,Mv.jsx)("div",{className:"OpenInventoryEllipses",onPointerDown:function(){U.hc.publish("ToggleInventory")},children:(0,Mv.jsx)(mv.G,{touchScreen:v,icon:"ellipsis",keyboardButton:"Tab",keyboardButtonClassname:"OpenInventoryEllipsesPrompt",onPointerDown:function(w){U.hc.publish("ToggleInventory"),w.stopPropagation()},showRedDotPubSubId:"RedDotOpenInventoryIcon",showTouchTutorialPubSubId:"TouchTutorialOpenInventoryIcon",touchIconPosition:"topleft"})})}var kI=qv.memo((function(w){var v=w.creativeScrollDiv,I=w.playerInven,P=w.getSetHoveringForIdx,u=w.getPointerDownForIdx,Q=w.getPointerUpForIdx,K=w.creativeSearchVal,a=w.setCreativeSearchVal,U=(0,cI.d)(K);return(0,Mv.jsxs)("div",{className:"CreativeItemSlotsWrapper",children:[(0,Mv.jsx)("div",{className:"CreativeItemSlotsSearchWrapper",children:(0,Mv.jsx)(bv.d,{className:"CreativeItemSlotsSearch",placeholderText:"Search",defaultValue:K,maxLength:1e4,onValueChange:function(w,v){a(w)},blurOnEnter:!0})}),(0,Mv.jsx)("div",{className:"CreativeItemSlots",ref:v,children:(0,Mv.jsx)("div",{className:"CreativeItemSlotsInner",children:U.map((function(w){var v=I.numSlots+w;return(0,Mv.jsx)(dI,{idx:v,draggedInfo:null,setHovered:P(v),pointerDown:u(v),pointerUp:Q(v)},v)}))})})]})}));function CI(w){var v=w.info,I=w.draggedInfo;return(0,Mv.jsxs)("div",{className:"LongHoldSplitInfoUI SmallTextBold",style:{left:v.initTouchX,top:v.initTouchY},children:[(0,Mv.jsx)("div",{className:"LongHoldSplitInfoUIInner",style:{width:"".concat(I.amount/v.maxAmount*100,"%")}}),(0,Mv.jsxs)("div",{className:"LongHoldSplitInfoUIText",children:[I.amount,"/",v.maxAmount]})]})}function yI(w){return!!w.shiftKey}function TI(w){return"touches"in w||"touch"===w.pointerType||"pen"===w.pointerType}var ZI,AI,XI,wP,vP=I(32692),IP=I(43971),PP=I(90690),uP=I(37105),QP=I(4268),KP=I(23056),aP={head:"Head",body:"Body",legs:"Legs"},UP={Head:"head",Body:"body",Legs:"legs"},pP=document.createElement("canvas");pP.classList.add("CharCustomisationPreviewCanvas");var rP=qv.memo((function(){var w=(0,qv.useState)(!1),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=function(){P(!I)};(0,mv.T)("ToggleCharCustomisation",(function(){u()}));var Q=(0,qv.useRef)({head:"Bob",body:"Bob",legs:"Bob"}),K=(0,mv.L)(),a=(0,qv.useRef)(!1);(0,mv.T)("charCustomisationUpdated",(function(w){var v,P=!1,u=(0,t.b)(w);try{for(u.s();!(v=u.n()).done;){var p=v.value,r=p.eId,Y=p.part,g=p.selected;if(r!==(0,U.pb)().serverPlayerEntity)return;P=!0,I&&a.current||(Q.current=(0,i.b)((0,i.b)({},Q.current),{},(0,Pv.c)({},Y,g)),XI&&XI.updateInstanceCustomisation(wP,Y,g)),K()}}catch(w){u.e(w)}finally{u.f()}P&&(a.current=!0)}));var p=(0,qv.useState)(Object.values(UP)[0]),r=(0,Yw.e)(p,2),Y=r[0],g=r[1],J=(0,qv.useRef)(null);return(0,qv.useEffect)((function(){if(I){if(J.current.appendChild(pP),!ZI)ZI=new PP.d(pP,!0,{preserveDrawingBuffer:!0}),(AI=new uP.d(ZI)).clearColor=new h.f(61/255,75/255,121/255,1),AI.ambientColor=new h.b(1,1,1),new QP.c("Camera",3*Math.PI/2,Math.PI/2,22,O.l.Zero(),AI).attachControl(pP,!0),(0,dw.f)(AI).then((function(w){var v=w.container,I=w.customisationMgr;XI=I;var P=(0,dw.b)(v,I);for(var u in wP=P,P.setEnabled(!0),P.position=new O.l(0,-8.2,0),P.rotation=new O.l(0,.2,0),P.rotationQuaternion=null,IP.c)I.updateInstanceCustomisation(P,u,Q.current[u]);var K=new KP.c("light",new O.l(-.1,1,-.3),AI);K.diffuse=new h.b(1,1,1),K.specular=new h.b(1,1,1),K.groundColor=new h.b(.5,.5,.5)}));return ZI.runRenderLoop((function(){AI.render()})),function(){ZI.stopRenderLoop()}}}),[I]),(0,Mv.jsx)(mv.j,{close:function(){u()},zIndex:2,togglePointerLock:!0,show:I,globallyUniqueKey:"CharCustomisationUI",forcePointerLock:!I,doGameplayStartStopOnShow:!0,children:(0,Mv.jsxs)("div",{className:"CharCustomisation SmallTextLight",children:[(0,Mv.jsx)(mv.y,{items:Object.keys(UP),onClick:function(w){g(UP[w])},selectedItemStr:aP[Y]}),(0,Mv.jsxs)("div",{className:"CharCustomisPartSelectorWrapper",children:[(0,Mv.jsx)("div",{className:"CharCustomisPartSelector",children:Object.keys(IP.c[Y]).map((function(w){var v=w===Q.current[Y];return(0,Mv.jsx)("div",{className:yv()("CharCustomPartWrapper",{SelectedCharCustomPartWrapper:v}),children:(0,Mv.jsx)("div",{className:"CharCustomPart",style:{backgroundImage:"url(".concat(IP.c[Y][w].previewTex,")")},onClick:function(){if(w!==Q.current[Y]){Q.current=(0,i.b)((0,i.b)({},Q.current),{},(0,Pv.c)({},Y,w)),K();var v={partType:Y,selected:w};(0,U.vc)(mw.e.updateMyCosmetic,v),XI&&XI.updateInstanceCustomisation(wP,Y,w)}}})},w)}))}),(0,Mv.jsx)("div",{className:"CharCustomisSelectedText",children:"Selected: ".concat(Q.current[Y])})]}),(0,Mv.jsx)("div",{className:"CharCustomisationPreview",ref:J})]})})})),YP=qv.memo((function(){var w=(0,mv.L)(),v=function(v,P){I(v),(0,U.vc)(mw.e.UiRequestResp,{id:v,response:P}),w()},I=function(v){var I=P.current.findIndex((function(w){return w.id===v}));-1!==I&&(P.current.splice(I,1),w())};(0,mv.T)("newUiRequest",(function(v){P.current.push(v),w()})),(0,mv.T)("removeUiRequest",(function(w){I(w)})),(0,mv.T)("YKeyPressed",(function(){P.current.length>0&&v(P.current[0].id,!0)})),(0,mv.T)("XKeyPressed",(function(){P.current.length>0&&v(P.current[0].id,!1)}));var P=(0,qv.useRef)([]);return(0,Mv.jsx)("div",{className:"UiRequests",children:P.current.map((function(w){var I=w.id,u=w.text,Q=I!==P.current[0].id;return(0,Mv.jsxs)("div",{className:"UiRequest",children:[(0,Mv.jsx)("div",{className:"UiReqText",children:(0,Mv.jsx)(mv.B,{text:u})}),(0,Mv.jsx)(fv.i,{className:"UiReqAcceptButt UiReqButton",onClick:function(){v(I,!0)},disabled:Q,children:"Y"}),(0,Mv.jsx)(fv.l,{className:"UiReqDismissButt UiReqButton",onClick:function(){v(I,!1)},disabled:Q,children:"X"})]},I)}))})})),gP=qv.memo((function(){var w=(0,qv.useRef)([]),v=(0,mv.L)();(0,mv.T)("uiRequestPopup",(function(I){var P=I.text,u=I.callback;w.current.push({text:P,callback:u}),v()}));var I=function(I){(0,w.current.shift().callback)(I),v()},P=w.current.length>0;return P?(0,Mv.jsx)(mv.j,{close:function(){I(!1)},escDoesExit:!0,show:P,forcePointerLock:!P,globallyUniqueKey:"UiRequestPopup",children:(0,Mv.jsxs)("div",{className:"UiRequestPopupWrapper",children:[(0,Mv.jsx)(mv.B,{text:w.current[0].text}),(0,Mv.jsxs)("div",{className:"UiRequestPopupButtons",children:[(0,Mv.jsx)(fv.d,{className:"UiRequestPopupButton",onClick:function(){return I(!0)},children:"Yes"}),(0,Mv.jsx)(fv.l,{className:"UiRequestPopupButton",onClick:function(){return I(!1)},children:"No"})]})]})}):null})),JP=qv.memo((function(){var w=(0,qv.useRef)({}),v=(0,qv.useReducer)((function(w){return w+1}),0),I=(0,Yw.e)(v,2),P=(I[0],I[1]);return(0,mv.T)("EffectUpdate",(function(v){var I=v.name,u=v.icon,Q=v.duration,K=v.level;0===Q?delete w.current[I]:w.current[I]={icon:u,duration:Q,level:K,startTime:Date.now()},P()})),(0,mv.T)("RemoveEffect",(function(v){var I=v.name;delete w.current[I],P()})),(0,qv.useEffect)((function(){var v=setInterval((function(){if(0!==Object.keys(w.current).length){for(var v in w.current)Date.now()-w.current[v].startTime>=w.current[v].duration&&delete w.current[v];P()}}),1e3);return function(){clearInterval(v)}}),[]),(0,Mv.jsx)("div",{className:"EffectInfosWrapper",children:Object.entries(w.current).map((function(v){var I=(0,Yw.e)(v,2),P=I[0],u=I[1],Q=u.icon,K=u.duration,a=u.level;return(0,Mv.jsxs)("div",{className:"EffectInfo",children:[(0,Mv.jsx)("div",{className:"EffectInfoIcon",children:(0,Mv.jsx)(Hv.b,{itemName:Q,amount:0})}),(0,Mv.jsxs)("div",{className:"EffectInfoRightSide",children:[(0,Mv.jsx)("div",{className:"EffectInfoName SmallTextBold",children:"".concat(P," ").concat(a>1?(0,U.q)(a):"")}),(0,Mv.jsx)("div",{className:"EffectInfoDuration SmallTextLight",children:(0,vv.j)(K-(Date.now()-w.current[P].startTime))})]})]},P)}))})})),lP=[{numLines:7,charsPerLine:16,uiFontSize:3.3,ingameFontSize:25},{numLines:5,charsPerLine:11,uiFontSize:4.6,ingameFontSize:36},{numLines:3,charsPerLine:7,uiFontSize:7.5,ingameFontSize:58}];function RP(w,v){for(var I=lP[v],P=I.numLines,u=I.charsPerLine,Q=w.split("\n"),K=0;K<Q.length;K++){var a=Q[K];a.length>u&&(Q[K]=a.substring(0,u),Q.length<P&&Q.splice(K+1,0,a.substring(u)))}return Q.length>P&&Q.splice(P,Q.length-P),Q.join("\n")}var xP={book:{numLines:13,charsPerLine:19,uiFontSize:1.95},nameTag:{numLines:5,charsPerLine:11,uiFontSize:4.6}};var jP=function(w,v,I){var P=(0,qv.useState)(""),u=(0,Yw.e)(P,2);u[0],u[1];(0,qv.useEffect)((function(){return(0,PI.d)(!w()),function(){(0,PI.d)(!0)}})),(0,qv.useEffect)((function(){setTimeout((function(){v.current&&v.current.focus()}),1)}),[I]),(0,qv.useEffect)((function(){var v=(0,U.pb)().ents.getMoveState((0,U.pb)().playerEntity);w()?v.speedMultiplier.setMultiplierType("writeableItemOpened",0):v.speedMultiplier.setMultiplierType("writeableItemOpened",1)}),[I])},sP=qv.memo((function(w){w.isInputActive,w.onClose;var v=w.onChange,I=w.textAreaRef,P=w.fontSize,u=w.lineHeight,Q=w.currText;return(0,Mv.jsxs)("div",{className:"WriteOnBoardWrapper",children:[(0,Mv.jsx)("img",{src:"".concat((0,U.L)("board_full")),alt:"Board",className:"WriteOnBoardImg"}),(0,Mv.jsx)("textarea",{className:"WriteOnBoardTextArea",value:Q,ref:I,style:{fontSize:"".concat(P,"rem"),lineHeight:"".concat(u,"rem")},onKeyDown:function(w){w.stopPropagation()},spellCheck:"false",autoComplete:"off",onChange:v})]})}));function BP(w){return 1.3*w}var tP=qv.memo((function(){var w=(0,qv.useState)(null),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=(0,qv.useState)(""),Q=(0,Yw.e)(u,2),K=Q[0],a=Q[1],p=(0,qv.useState)(0),r=(0,Yw.e)(p,2),Y=r[0],g=r[1],J=function(w){a(RP(K,w)),g(w),U.l.setItem("lastBoardTextSize",w)},l=function(){P(null),(0,U.vc)(mw.e.updateBoard,{pos:I,newText:K,textSize:Y})};(0,mv.T)("EditBoard",(function(w){var v=w.pos;if(P(v),null!==v){var I,u,Q,K=(0,U.N)().blockDataOwner.getBlockData(v[0],v[1],v[2]);a(null!==(I=null===K||void 0===K?void 0:K.persisted.shared.text)&&void 0!==I?I:"");var p=null!==(u=null!==(Q=null===K||void 0===K?void 0:K.persisted.shared.textSize)&&void 0!==Q?Q:U.l.getItem("lastBoardTextSize"))&&void 0!==u?u:0;g(p),U.l.setItem("lastBoardTextSize",p)}}));var R=(0,qv.useRef)(null);jP((function(){return null!==I}),R,I);var x=lP[Y].uiFontSize,j=BP(x);return(0,Mv.jsxs)(mv.j,{className:"WriteOnBoardBg",close:l,escDoesExit:!0,show:null!==I,forcePointerLock:null===I,globallyUniqueKey:"WriteOnSignComp",children:[(0,Mv.jsx)(sP,{isInputActive:function(){return null!==I},onClose:l,onChange:function(w){a(RP(w.target.value,Y))},textAreaRef:R,fontSize:x,lineHeight:j,currText:K}),(0,Mv.jsx)("div",{className:"WriteOnBoardTextSizeHeader SmallTextBold",children:"Text Size"}),(0,Mv.jsxs)("div",{className:"WriteOnBoardTextSizeButtons",children:[(0,Mv.jsx)(fv.d,{className:"WriteOnBoardTextSizeButton",onClick:function(){J(0)},disabled:0===Y,children:"Small"}),(0,Mv.jsx)(fv.d,{className:"WriteOnBoardTextSizeButton",onClick:function(){J(1)},disabled:1===Y,children:"Medium"}),(0,Mv.jsx)(fv.d,{className:"WriteOnBoardTextSizeButton",onClick:function(){J(2)},disabled:2===Y,children:"Large"})]})]})})),iP=I(82700),zP=qv.memo((function(){var w=(0,qv.useState)(""),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=(0,qv.useState)(!1),Q=(0,Yw.e)(u,2),K=Q[0],a=Q[1],p=function(){a(!1),(0,U.vc)(mw.e.updateNameTag,I)};(0,mv.T)("EditNameTag",(function(w){null!==w&&(P(w),a(!0))}));var r=(0,qv.useRef)(null);jP((function(){return K}),r,K);var Y=xP.nameTag.uiFontSize,g=BP(Y);return(0,Mv.jsxs)(mv.j,{className:"WriteOnBoardBg",close:p,escDoesExit:!0,show:K,forcePointerLock:!K,globallyUniqueKey:"WriteOnSignComp",children:[(0,Mv.jsx)("div",{className:"NameTagTrim",children:(0,Mv.jsx)(sP,{isInputActive:function(){return K},onClose:p,onChange:function(w){var v=w.target.value.replaceAll("\n","");v.length>19?P(v.substring(0,19)):P(v)},textAreaRef:r,fontSize:Y,lineHeight:g,currText:I})}),(0,Mv.jsx)(fv.d,{onClick:p,className:"WriteOnNameTagCloseButton",children:"Finish"})]})})),EP=qv.memo((function(){var w=(0,qv.useState)(""),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=(0,qv.useState)(!1),Q=(0,Yw.e)(u,2),K=Q[0],a=Q[1],p=(0,qv.useState)(0),r=(0,Yw.e)(p,2),Y=r[0],g=r[1],J=(0,qv.useState)(!1),l=(0,Yw.e)(J,2),R=l[0],x=l[1],j=(0,qv.useState)(["","","","","","","","","",""]),s=(0,Yw.e)(j,2),B=s[0],t=s[1],i=(0,qv.useState)("Title"),z=(0,Yw.e)(i,2),E=z[0],o=z[1],h=(0,qv.useState)(!0),n=(0,Yw.e)(h,2),W=n[0],V=n[1];(0,mv.T)("EditBook",(function(w){var v,I=w.pages,u=w.title,Q=w.isPublished;null!==I?(t(I),P(null!==(v=I[0])&&void 0!==v?v:""),o(u),g(0),a(!0),x(!1),V(!Q)):t(["","","","","","","","","",""])}));var F=(0,qv.useRef)(null),O=(0,qv.useRef)(null);jP((function(){return K}),F,K);var N=xP.book.uiFontSize,q=BP(N),m=function(){(0,U.vc)(mw.e.updateBook,{pages:B,title:E,isPublished:!W})},c=function(w){R&&(B[Y]=I,x(!1)),P(B[w]),g(w)};return(0,Mv.jsxs)(mv.j,{className:"WriteOnBoardBg",close:function(){a(!1),B[Y]=I,m()},escDoesExit:!0,show:K,forcePointerLock:!K,globallyUniqueKey:"WriteOnBookComp",children:[(0,Mv.jsxs)("div",{className:"WriteOnBookWrapper",children:[(0,Mv.jsx)("textarea",{className:"BookTitleTextArea SmallTextLight",value:E,ref:O,style:{fontSize:"3rem",lineHeight:"".concat(q,"rem")},onKeyDown:function(w){w.stopPropagation()},spellCheck:"false",autoComplete:"off",onChange:function(w){var v=w.target.value;v.length>xP.book.charsPerLine&&(v=v.substring(0,xP.book.charsPerLine)),o(v)},readOnly:!W}),(0,Mv.jsx)("img",{src:"".concat((0,U.L)("book_page")),alt:"book_page",className:"WriteOnBookPageImg"}),(0,Mv.jsx)("div",{className:"BookTextAreaPadding",children:(0,Mv.jsx)("textarea",{className:"WriteOnBookPageTextArea",value:I,ref:F,style:{fontSize:"".concat(N,"rem"),lineHeight:"".concat(q,"rem")},onKeyDown:function(w){w.stopPropagation()},spellCheck:"false",autoComplete:"off",onChange:function(w){var v=w.target.value;P(function(w,v){for(var I=xP[v],P=I.numLines,u=I.charsPerLine,Q=w.split("\n"),K=0;K<Q.length;K++){var a=Q[K];a.length>u&&(Q[K]=a.substring(0,u),Q.length<P&&Q.splice(K+1,0,a.substring(u)))}return Q.length>P&&Q.splice(P,Q.length-P),Q.join("\n")}(v,"book")),x(!0)},readOnly:!W})})]}),(0,Mv.jsxs)("div",{className:"BookNavigationWrapper",children:[(0,Mv.jsx)(fv.d,{disabled:0===Y,onClick:function(){c(Y-1)},className:"BookNavButton",children:"<"}),(0,Mv.jsx)("div",{style:{width:"2rem"}}),(0,Mv.jsx)(fv.d,{disabled:9===Y,onClick:function(){c(Y+1)},className:"BookNavButton",children:">"}),(0,Mv.jsx)("div",{style:{width:"2rem"}}),(0,Mv.jsx)(fv.d,{onClick:function(){V(!W)},className:"BookNavButton",children:W?"Publish":"Edit"})]})]})})),oP=function(w){(0,Ov.e)(I,w);var v=(0,Nv.d)(I);function I(w){var P,u;return(0,J.e)(this,I),(u=v.call(this,w)).serverOptionSub=void 0,u.leftRoomSub=void 0,u.state={serverSettings:(null===(P=(0,U.pb)())||void 0===P?void 0:P.serverSettings)||{}},u}return(0,l.c)(I,[{key:"componentDidMount",value:function(){var w=this;this.serverOptionSub=U.hc.subscribe("newAllServerOptions",(function(v){w.setState({serverSettings:v})})),(0,U.Hc)("CookieConsent",!0),setTimeout((function(){(0,U.wb)()}),0)}},{key:"componentWillUnmount",value:function(){U.hc.unsubscribe(this.serverOptionSub),U.hc.unsubscribe(this.leftRoomSub)}},{key:"render",value:function(){return(0,Mv.jsxs)(Mv.Fragment,{children:[(0,Mv.jsx)(FP,{touchScreen:this.props.touchScreen,useProfanityFilter:this.props.escMenuOptions.useProfanityFilter,showChat:this.props.escMenuOptions.showChat,showCoordinates:this.props.escMenuOptions.showCoordinates,showChunkCoordinates:this.props.escMenuOptions.showChunkCoordinates}),(0,Mv.jsx)(oI.c,{}),this.props.touchScreen?(0,Mv.jsx)(uI.b,{escMenuOptions:this.props.escMenuOptions}):null,(0,Mv.jsx)(Sv,{}),(0,Mv.jsx)(OP,{}),(0,Mv.jsx)(Tv,{categories:this.state.serverSettings.shopInfo}),(0,Mv.jsx)(NP,{ShopClick:function(){U.hc.publish("toggleShop")},touchScreen:this.props.touchScreen}),(0,Mv.jsx)(mv.g,{touchScreen:this.props.touchScreen}),(0,Mv.jsx)(mv.q,{}),(0,Mv.jsx)(RI.d,{touchScreen:this.props.touchScreen,optionChangeCBs:this.props.optionChangeCBs,escMenuOptions:this.props.escMenuOptions,showingOptions:this.props.settingsAreOpen}),(0,Mv.jsx)(YI,{}),(0,Mv.jsx)(hP,{}),(0,Mv.jsx)(jI,{}),(0,Mv.jsx)(EI,{}),this.state.serverSettings.showKillfeed&&(0,Mv.jsx)(VI,{}),(0,Mv.jsx)(rP,{}),(0,Mv.jsx)(FI.e,{}),(0,Mv.jsx)(OI,{}),(0,Mv.jsx)(gP,{}),(0,Mv.jsx)(YP,{}),(0,Mv.jsx)(tP,{}),(0,Mv.jsx)(zP,{}),(0,Mv.jsx)(EP,{}),(0,Mv.jsx)(iP.e,{}),this.state.serverSettings.useInventory&&this.state.serverSettings.useFullInventory&&(0,Mv.jsx)(eI,{touchScreen:this.props.touchScreen}),(0,Mv.jsx)(JP,{}),(0,Mv.jsx)(qP,{})]})}}]),I}(qv.Component),hP=qv.memo((function(){(0,cv.c)();var w=(0,mv._)("middleTextUpper"),v=(0,mv._)("middleTextLower"),I=(0,mv._)("useInventory");return(0,Mv.jsxs)("div",{className:"BottomMiddleElements",children:[w&&""!==w?(0,Mv.jsx)("div",{className:"MiddleText MiddleTextUpper SmallTextBold",children:(0,Mv.jsx)(mv.B,{text:w})}):null,v&&""!==v?(0,Mv.jsx)("div",{className:"MiddleText",children:(0,Mv.jsx)(mv.B,{text:v})}):null,(0,Mv.jsx)(mv.e,{}),(0,Mv.jsx)(tI,{}),I?(0,Mv.jsx)(Gv,{}):null]})}));function nP(){var w=(0,qv.useRef)(null);return(0,qv.useEffect)((function(){var v,I,P=0,u=0,Q=performance.now(),K=0,a=function(){P++,u++;var v=performance.now();if(!(v-Q<1e3)){var I=Math.round(P/(v-Q)*1e3);if(w.current.textContent=I,P=0,Q=v,I<55){var a,p;K+=1;var r=(0,U.pb)(),Y=U.l.getItem("decreaseLoadDistPromptDeniedCount"),g=r.serverSettings.minChunkAddDist;K>=15&&((0,U.pb)().world._chunkAddDistance[0]>g||(0,U.pb)().world._chunkAddDistance[1]>Jw.g.minVertChunkLoadDist)&&(null!==(a=U.l.getItem("lastDecreaseLoadDistPromptTime"))&&void 0!==a?a:0)+432e5<Date.now()&&(null!==(p=U.l.getItem("decreaseLoadDistPromptDeniedCount"))&&void 0!==p?p:0)<3&&(U.l.setItem("lastDecreaseLoadDistPromptTime",Date.now()),U.hc.publish("uiRequestPopup",{text:"Lag (low FPS) caused by high chunk load distance. Decrease it?",callback:function(w){w?(r.world.setAddRemoveDistance([g,Jw.g.minVertChunkLoadDist],[g+1,Jw.g.minVertChunkLoadDist+1]),U.l.setItem("chunkHorizAddDist",g),U.l.setItem("chunkVertAddDist",Jw.g.minVertChunkLoadDist),U.hc.publish("updatedChunkLoadDist"),U.l.setItem("decreaseLoadDistPromptDeniedCount",0)):U.l.setItem("decreaseLoadDistPromptDeniedCount",Y+1)}}))}else K=0}};return(0,U.pb)().on("afterRender",a),(0,U.pb)().GA&&(v=setTimeout((function(){var w=performance.now();u=0,I=setTimeout((function(){var v=performance.now()-w,I=1e3*u/v;(0,U.pb)().GA.addDesignEvent("bloxdFps",I)}),15e3)}),15e3)),function(){(0,U.pb)().off("afterRender",a),clearTimeout(v),clearTimeout(I)}}),[]),(0,Mv.jsxs)("div",{className:"FpsWrapperDiv",children:[(0,Mv.jsx)("div",{children:"FPS"}),(0,Mv.jsx)("div",{className:"FpsNumberDiv",ref:w})]})}function WP(){var w=(0,qv.useRef)(null),v=(0,qv.useRef)(null),I=(0,qv.useRef)(null),P=(0,qv.useRef)(0);return(0,qv.useEffect)((function(){var u=function(){if(w.current&&2===++P.current){var u=(0,U.pb)().ents.getPosition((0,U.pb)().playerEntity);w.current.textContent=u[0].toFixed(2),v.current.textContent=u[1].toFixed(2),I.current.textContent=u[2].toFixed(2),P.current=0}};return(0,U.pb)().on("tick",u),function(){(0,U.pb)().off("tick",u)}})),(0,Mv.jsxs)("div",{className:"CoordinateUI",children:[(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:w}),(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:v}),(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:I})]})}function VP(){var w=(0,qv.useRef)(null),v=(0,qv.useRef)(null),I=(0,qv.useRef)(null),P=(0,qv.useRef)(null),u=(0,qv.useRef)(0);return(0,qv.useEffect)((function(){var Q=(0,U.pb)(),K=function(){if(w.current&&2===++u.current){var K=Q.ents.getPosition(Q.playerEntity),a=Fw(K[0],K[1],K[2]);w.current.textContent="".concat(a[0]," ").concat(a[1]," ").concat(a[2]);var U=Jw.g.chunkSize,p=K[0]%U;p<0&&(p+=32);var r=K[1]%U;r<0&&(r+=32);var Y=K[2]%U;Y<0&&(Y+=32),v.current.textContent=p.toFixed(2),I.current.textContent=r.toFixed(2),P.current.textContent=Y.toFixed(2),u.current=0}};return Q.on("tick",K),function(){Q.off("tick",K)}})),(0,Mv.jsxs)("div",{className:"CoordinateUI ChunkCoordUI",children:[(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:w}),(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:v}),(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:I}),(0,Mv.jsx)("div",{className:"SingleCoordinateUI",ref:P})]})}var FP=qv.memo((function(w){var v=w.touchScreen,I=w.useProfanityFilter,P=w.showChat,u=w.showCoordinates,Q=w.showChunkCoordinates;(0,cv.c)();var K=a.b[U.Lc.modeAttemptedPlay],p="".concat(null!==K&&void 0!==K&&K.combinedTitle?"".concat(null===K||void 0===K?void 0:K.combinedTitle," "):"").concat(K.title).concat(K.subText?" ".concat(K.subText):"");return(0,Mv.jsxs)("div",{className:"TopLeftElements",children:[P&&(0,Mv.jsx)(PI.b,{touchScreen:v,useProfanityFilter:I}),(0,Mv.jsxs)("div",{className:"RightOfChatWrapper",children:[(0,Mv.jsxs)("div",{className:"LobbyNameWrapper",children:[(0,Mv.jsx)("div",{children:"Lobby"}),(0,Mv.jsx)("div",{className:"LobbyNameGamemode",children:p}),(0,Mv.jsx)("div",{children:null!==U.Lc.connectedLobbyName?U.Lc.connectedLobbyName:"null"})]}),(0,Mv.jsx)(nP,{})]}),(0,Mv.jsxs)("div",{className:"CoordinatesWrapper",children:[u&&(0,Mv.jsx)(WP,{}),Q&&(0,Mv.jsx)(VP,{})]})]})})),OP=qv.memo((function(){(0,cv.c)();var w=(0,mv._)("RightInfoText");return null!==w&&void 0!==w&&w.length>0?(0,Mv.jsx)("div",{className:"RightInfoDiv",children:(0,Mv.jsx)(mv.B,{text:w})}):null})),NP=qv.memo((function(w){var v=w.ShopClick,I=w.touchScreen;(0,cv.c)();var P=!!(0,mv._)("shopInfo"),u={Shop:{icon:(0,U.pb)().serverSettings.useCommandsShopIcon?"terminal":"cart-shopping",key:"B",clickCb:v,showTouchTutorialPubSubId:"showShopTouchTutorial",showRedDotPubSubId:"showShopIconRedDot"},Menu:{icon:"bars",key:"M",clickCb:function(){U.hc.publish("ToggleMenu")}},CharCustomisation:{icon:"shirt",key:"N",clickCb:function(){U.hc.publish("ToggleCharCustomisation")}}},Q=[],K=(0,mv._)("_tasks"),a=(0,mv._)("_availableLeaderboards");return(K||a)&&Q.push("Menu"),P&&Q.push("Shop"),Q.push("CharCustomisation"),(0,Mv.jsx)("div",{className:"BottomLeftIcons",children:Q.map((function(w){var v=u[w],P=v.icon,Q=v.key,K=v.clickCb,a=v.showTouchTutorialPubSubId,U=v.showRedDotPubSubId;return(0,Mv.jsx)("div",{className:"BottomLeftIcon",children:(0,Mv.jsx)(mv.G,{touchScreen:I,icon:P,keyboardButton:Q,onClick:function(){K()},showTouchTutorialPubSubId:a,showRedDotPubSubId:U})},w)}))})})),qP=qv.memo((function(){var w=(0,qv.useState)(!1),v=(0,Yw.e)(w,2),I=v[0],P=v[1],u=function(){P(!1)};(0,mv.T)("ctrlCrouchWithoutFullscreen",(function(){P(!0)})),(0,mv.T)("displaymodeFullscreenChange",(function(w){w&&u()}));var Q="crazygames"===g.M;return(0,Mv.jsx)(mv.j,{close:u,escDoesExit:!0,show:I,forcePointerLock:!I,globallyUniqueKey:"CantCtrlCrouchIfNotFullscreenComp",children:(0,Mv.jsxs)("div",{className:"CantCtrlCrouchIfNotFullscreenComp SmallTextBold",children:[(0,Mv.jsx)("div",{className:"CantCtrlCrouchHeader",children:"Go fullscreen to crouch with ctrl"}),Q&&(0,Mv.jsx)("div",{className:"CantCtrlCrouchInstructions SmallTextLight",children:"Press the crazygames full screen button"}),(0,Mv.jsx)("div",{className:"CantCtrlCrouchSubtext SmallTextLight",children:"(Otherwise I can't stop CTRL+W closing the window!)"}),(0,Mv.jsxs)("div",{className:"CantCtrlCrouchButtonsContainer",children:[!Q&&(0,Mv.jsx)(fv.i,{className:"CantCtrlCrouchButtonWrapper",onClick:function(){(0,vP.k)(),u()},children:(0,Mv.jsx)("div",{className:"CantCtrlCrouchButton",children:"Go Fullscreen"})}),(0,Mv.jsx)(fv.l,{className:"CantCtrlCrouchButtonWrapper",onClick:function(){u()},children:(0,Mv.jsx)("div",{className:"CantCtrlCrouchButton",children:"Nevermind"})})]})]})})})),mP=I(24412),cP=I(90673),MP=I(77129),SP={debug:!1,align:"center",vAlign:"middle",fontSize:14,fontWeight:"",fontStyle:"",fontVariant:"",font:"Arial",lineHeight:null,justify:!1,drawText:function(w,v,I,P,u,Q){var K=this;if(u<=0||Q<=0||this.fontSize<=0)return{height:0};var a=I+u,p=P+Q,r=this.fontStyle,Y=this.fontVariant,g=this.fontWeight,J=this.fontSize,l=this.font,R="".concat(r," ").concat(Y," ").concat(g," ").concat(J,"px ").concat(l);w.font=R;var x,j=P+Q/2+this.fontSize/2;"right"===this.align?(x=a,w.textAlign="right"):"left"===this.align?(x=I,w.textAlign="left"):(x=I+u/2,w.textAlign="center");var s,B=(0,t.b)(v);try{for(B.s();!(s=B.n()).done;){var i=s.value;w.measureText(i).width>=u&&(v=v.replace(i,""))}}catch(w){B.e(w)}finally{B.f()}v=(0,U.Mb)(v);var z=[],E=v.split("\n"),o=this.justify?w.measureText("\u200a").width:0;E.forEach((function(v){var I=w.measureText(v).width;if(I<=u)z.push(v);else{var P,Q,a,U=v,p=u;for(I=w.measureText(U).width;I>p;){for(P=0,Q=0,a="";Q<p;)P++,a=U.substr(0,P),Q=w.measureText(a).width;P--,a=a.substr(0,P);var r=P;if(" "!==U.substr(P,1)){for(;" "!==U.substr(P,1)&&0!==P;)P--;0===P&&(P=r),a=U.substr(0,P)}a=K.justify?K.justifyLine(w,a,o,"\u200a",u):a,U=U.substr(P),I=w.measureText(U).width,z.push(a)}I>0&&z.push(U)}}));var h=this.lineHeight?this.lineHeight:this.getTextHeight(w,v,R),n=h*(z.length-1),W=n/2,V=P;return"top"===this.vAlign?j=P+this.fontSize:"bottom"===this.vAlign?(j=p-n,V=p):(V=P+Q/2,j-=W),z.forEach((function(v){v=v.trim(),w.fillText(v,x,j),j+=h})),this.debug&&(w.lineWidth=3,w.strokeStyle="#00909e",w.strokeRect(I,P,u,Q),w.lineWidth=2,w.strokeStyle="#f6d743",w.beginPath(),w.moveTo(x,P),w.lineTo(x,p),w.stroke(),w.strokeStyle="#ff6363",w.beginPath(),w.moveTo(I,V),w.lineTo(a,V),w.stroke()),{height:n+h}},getTextHeight:function(w,v,I){var P=w.textBaseline,u=w.font;w.textBaseline="bottom",w.font=I;var Q=w.measureText(v).actualBoundingBoxAscent;return w.textBaseline=P,w.font=u,Q},justifyLine:function(w,v,I,P,u){var Q=v.trim(),K=w.measureText(Q).width,a=Q.split(/\s+/).length-1,U=Math.floor((u-K)/I);if(a<=0||U<=0)return Q;for(var p=Math.floor(U/a),r=U-a*p,Y=[],g=0;g<p;g++)Y.push(P);return Y=Y.join(""),Q.replace(/\s+/g,(function(w){var v=r>0?Y+P:Y;return r--,w+v}))}},eP=I(52644),HP=I(44811),GP=I(23886),LP=function(){function w(v){var I=this;(0,J.e)(this,w),this.bloxd=void 0,this.noa=void 0,this.cachedEntityMeshTypes={},this.bloxd=v,this.noa=v.noa,this.noa.ents.createComponent({name:"isBoard"}),(0,U.ac)((function(){var w,v=(0,t.b)(I.bloxd.ents.getStatesList("isBoard"));try{for(v.s();!(w=v.n()).done;){var P=w.value;I.bloxd.ents.deleteEntity(P.__id)}}catch(w){v.e(w)}finally{v.f()}}))}return(0,l.c)(w,[{key:"addBoard",value:function(w,v,I,P){var u,Q,K=this;this.removeBoard(w,v,I);var a=this.bloxd.blockDataOwner.getBlockData(w,v,I),U=null!==(u=null===a||void 0===a?void 0:a.persisted.shared.text)&&void 0!==u?u:"",p=null!==(Q=null===a||void 0===a?void 0:a.persisted.shared.textSize)&&void 0!==Q?Q:0,r=this.bloxd.noa.rendering.getScene(),Y=this.noa.ents.add([w,v,I],1,1),g=null;this.noa.ents.addComponent(Y,"hidingMeshManager",{addMeshComponent:function(){var w=function(){var w,v=new MP.d("BoardTextTransform",r);if(""===U.trim())w=new E.b("EmptyBoardMesh",r);else{var I=7/8;w=S.c.CreatePlane("BoardPlane",{width:1,height:I},r);var u=256,Q=new cP.d("BoardDynamicTexture",{width:u,height:224},r),K=Q.getContext();SP.fontSize=lP[p].ingameFontSize,SP.fontWeight="bolder",SP.font="'Jetbrains Mono'",SP.drawText(K,U,0,0,u,224),Q.update();var a=new o.b("mat",r);a.diffuseTexture=Q,a.diffuseTexture.hasAlpha=!0,a.specularColor=new h.b(0,0,0),a.freeze(),w.material=a,w.freezeWorldMatrix(),Uw(v,0,0,0,P,.375),v.rotation.y+=Math.PI,w.rotation=v.rotation}return{mesh:w,transform:v}}(),v=w.mesh,I=w.transform;g=v,K.noa.entities.addComponent(Y,"mesh",{mesh:v,offset:[.5+I.position.x,.5+I.position.y,.5+I.position.z]})},removeMeshComponent:function(){var w;null===(w=g)||void 0===w||w.dispose(!1,!0),K.noa.entities.removeComponent(Y,"mesh")},addShadow:!1,hideDist:25}),this.noa.ents.addComponent(Y,"isBoard")}},{key:"removeBoard",value:function(w,v,I){var P,u=[w,v,I],Q=(0,t.b)(this.bloxd.ents.getStatesList("isBoard"));try{for(Q.s();!(P=Q.n()).done;){var K=P.value;if(wv().squaredDistance(this.bloxd.ents.getPosition(K.__id),u)<.01)return void this.bloxd.ents.deleteEntity(K.__id)}}catch(w){Q.e(w)}finally{Q.f()}}},{key:"removeBoardsInChunk",value:function(w,v,I){var P,u=(0,t.b)(this.bloxd.ents.getStatesList("isBoard"));try{for(u.s();!(P=u.n()).done;){var Q=P.value,K=Ww(this.bloxd.ents.getPosition(Q.__id)),a=(0,Yw.e)(K,3),U=a[0],p=a[1],r=a[2];U===w&&p===v&&r===I&&this.bloxd.ents.deleteEntity(Q.__id)}}catch(w){u.e(w)}finally{u.f()}}},{key:"getThrowableMesh",value:function(w){var v;return"Fireball"===w?v=U.Lc.itemsClient["Fireball Block"].getMesh(.95):"Iceball"===w?v=U.Lc.itemsClient["Iceball Block"].getMesh(.95):(v=U.Lc.itemsClient[w].getMesh(.13)).billboardMode=eP.b.BILLBOARDMODE_Y,v}},{key:"newParticleSystem",value:function(w){var v=this.noa.rendering.getScene(),I=new HP.e("".concat(w.texture,"|minColor").concat(w.colorGradients[0].minColor),50,v);I.particleTexture=new z.e((0,mP.m)(w.texture),v,void 0,void 0,z.e.NEAREST_SAMPLINGMODE);var P,u=(0,t.b)(w.colorGradients);try{for(u.s();!(P=u.n()).done;){var Q=P.value;I.addColorGradient(Q.timeFraction,(0,GP.d)(Q.minColor[0],Q.minColor[1],Q.minColor[2],Q.minColor[3]),(0,GP.d)(Q.maxColor[0],Q.maxColor[1],Q.maxColor[2],Q.maxColor[3]))}}catch(w){u.e(w)}finally{u.f()}I.minLifeTime=w.minLifeTime,I.maxLifeTime=w.maxLifeTime,I.minEmitPower=w.minEmitPower,I.maxEmitPower=w.maxEmitPower,I.minSize=w.minSize,I.maxSize=w.maxSize;var K,a=(0,t.b)(w.velocityGradients);try{for(a.s();!(K=a.n()).done;){var U=K.value;I.addVelocityGradient(U.timeFraction,U.factor,U.factor2)}}catch(w){a.e(w)}finally{a.f()}(0,GP.j)(this.noa,I),I.createBoxEmitter(new O.l(1,1,1),new O.l(-1,-1,-1),new O.l(Math.min(w.pos1[0],w.pos2[0]),Math.min(w.pos1[1],w.pos2[1]),Math.min(w.pos1[2],w.pos2[2])),new O.l(Math.max(w.pos1[0],w.pos2[0]),Math.max(w.pos1[1],w.pos2[1]),Math.max(w.pos1[2],w.pos2[2]))),I.manualEmitCount=0,new mP.e(I,w.maxLifeTime).emitAmount(w.manualEmitCount),setTimeout((function(){I.dispose()}),1e4*w.maxLifeTime)}},{key:"getEntityMesh",value:function(w,v,I){var P=this.noa.rendering.getScene();if("BloxdBlock"===w)return{mesh:U.Lc.itemsClient[v.blockName].getMesh(v.size,I),meshOffset:wv().fromValues(0,v.size/2,0),nameYOffset:v.size+.3};if("Box"===w){var u="".concat(w,"|").concat(JSON.stringify(v));if(!this.cachedEntityMeshTypes[u]){var Q,K;v.diffuseColor?((K=new o.b("".concat(u,"EntityMesh"),P)).diffuseColor=new h.b(v.diffuseColor[0]/255,v.diffuseColor[1]/255,v.diffuseColor[2]/255),K.specularColor=new h.b(0,0,0),K.emissiveColor=new h.b(v.emissiveColor[0]/255,v.emissiveColor[1]/255,v.emissiveColor[2]/255)):((K=U.Lc.itemsClient[v.texture].getCubeBlockMeshMaterial(this.noa.rendering.getScene())).diffuseTexture.wrapU=z.e.WRAP_ADDRESSMODE,K.diffuseTexture.wrapV=z.e.WRAP_ADDRESSMODE);var a=null===(Q=v.backFaceCulling)||void 0===Q||Q;K.backFaceCulling=a,K.freeze();var p=F.BoxBuilder.CreateBox("".concat(u,"EntityMesh"),{width:v.width,height:v.height,depth:v.depth,faceUV:v.faceUV?[new O.p(v.faceUV[0][0]+.01,v.faceUV[0][1]+.01,v.faceUV[0][2]-.01,v.faceUV[0][3]-.01),new O.p(v.faceUV[1][0]+.01,v.faceUV[1][1]+.01,v.faceUV[1][2]-.01,v.faceUV[1][3]-.01),new O.p(v.faceUV[2][0]+.01,v.faceUV[2][1]+.01,v.faceUV[2][2]-.01,v.faceUV[2][3]-.01),new O.p(v.faceUV[3][0]+.01,v.faceUV[3][1]+.01,v.faceUV[3][2]-.01,v.faceUV[3][3]-.01),new O.p(v.faceUV[4][0]+.01,v.faceUV[4][1]+.01,v.faceUV[4][2]-.01,v.faceUV[4][3]-.01),new O.p(v.faceUV[5][0]+.01,v.faceUV[5][1]+.01,v.faceUV[5][2]-.01,v.faceUV[5][3]-.01)]:void 0},this.noa.rendering.getScene());p.material=K,p.alwaysSelectAsActiveMesh=!0,p.doNotSyncBoundingInfo=!0,p.setEnabled(!1),P.removeMesh(p),this.cachedEntityMeshTypes[u]=p}var r=this.cachedEntityMeshTypes[u].createInstance("".concat(u,"EntityMeshInstance"));return this.noa.rendering.addMeshToScene(r),r.position.x=0,r.position.y=0,r.position.z=0,I(r),{mesh:r,meshOffset:wv().fromValues(0,v.height/2,0),nameYOffset:v.height+.3}}console.error("Not implemented custom meshes for type",w)}},{key:"customItemUpdate",value:function(w,v){(0,N.s)(w,v.id,this.bloxd.noa.rendering.getScene(),v.type)}}]),w}();function dP(){return sw()('/*! For license information please see meshing.worker.3257a332.worker.js.LICENSE.txt */\n!function(){var w={379:function(w){"use strict";w.exports=function(w){for(var v=new Array(w),I=0;I<w;++I)v[I]=I;return v}},110:function(w){function v(w){return!!w.constructor&&"function"===typeof w.constructor.isBuffer&&w.constructor.isBuffer(w)}w.exports=function(w){return null!=w&&(v(w)||function(w){return"function"===typeof w.readFloatLE&&"function"===typeof w.slice&&v(w.slice(0,0))}(w)||!!w._isBuffer)}},786:function(w,v,I){var P=I(379),u=I(110),Q="undefined"!==typeof Float64Array;function K(w,v){return w[0]-v[0]}function a(){var w,v=this.stride,I=new Array(v.length);for(w=0;w<I.length;++w)I[w]=[Math.abs(v[w]),w];I.sort(K);var P=new Array(I.length);for(w=0;w<P.length;++w)P[w]=I[w][1];return P}function U(w,v){var I=["View",v,"d",w].join("");v<0&&(I="View_Nil"+w);var u="generic"===w;if(-1===v){var Q="function "+I+"(a){this.data=a;};var proto="+I+".prototype;proto.dtype=\'"+w+"\';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+I+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+I+"(a){return new "+I+"(a);}";return new Function(Q)()}if(0===v){Q="function "+I+"(a,d) {this.data = a;this.offset = d};var proto="+I+".prototype;proto.dtype=\'"+w+"\';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+I+"_copy() {return new "+I+"(this.data,this.offset)};proto.pick=function "+I+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+I+"_get(){return "+(u?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+I+"_set(v){return "+(u?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+I+"(a,b,c,d){return new "+I+"(a,d)}";return new Function("TrivialArray",Q)(p[w][0])}Q=["\'use strict\'"];var K=P(v),U=K.map((function(w){return"i"+w})),r="this.offset+"+K.map((function(w){return"this.stride["+w+"]*i"+w})).join("+"),Y=K.map((function(w){return"b"+w})).join(","),g=K.map((function(w){return"c"+w})).join(",");Q.push("function "+I+"(a,"+Y+","+g+",d){this.data=a","this.shape=["+Y+"]","this.stride=["+g+"]","this.offset=d|0}","var proto="+I+".prototype","proto.dtype=\'"+w+"\'","proto.dimension="+v),Q.push("Object.defineProperty(proto,\'size\',{get:function "+I+"_size(){return "+K.map((function(w){return"this.shape["+w+"]"})).join("*"),"}})"),1===v?Q.push("proto.order=[0]"):(Q.push("Object.defineProperty(proto,\'order\',{get:"),v<4?(Q.push("function "+I+"_order(){"),2===v?Q.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===v&&Q.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):Q.push("ORDER})")),Q.push("proto.set=function "+I+"_set("+U.join(",")+",v){"),u?Q.push("return this.data.set("+r+",v)}"):Q.push("return this.data["+r+"]=v}"),Q.push("proto.get=function "+I+"_get("+U.join(",")+"){"),u?Q.push("return this.data.get("+r+")}"):Q.push("return this.data["+r+"]}"),Q.push("proto.index=function "+I+"_index(",U.join(),"){return "+r+"}"),Q.push("proto.hi=function "+I+"_hi("+U.join(",")+"){return new "+I+"(this.data,"+K.map((function(w){return["(typeof i",w,"!==\'number\'||i",w,"<0)?this.shape[",w,"]:i",w,"|0"].join("")})).join(",")+","+K.map((function(w){return"this.stride["+w+"]"})).join(",")+",this.offset)}");var J=K.map((function(w){return"a"+w+"=this.shape["+w+"]"})),l=K.map((function(w){return"c"+w+"=this.stride["+w+"]"}));Q.push("proto.lo=function "+I+"_lo("+U.join(",")+"){var b=this.offset,d=0,"+J.join(",")+","+l.join(","));for(var R=0;R<v;++R)Q.push("if(typeof i"+R+"===\'number\'&&i"+R+">=0){d=i"+R+"|0;b+=c"+R+"*d;a"+R+"-=d}");Q.push("return new "+I+"(this.data,"+K.map((function(w){return"a"+w})).join(",")+","+K.map((function(w){return"c"+w})).join(",")+",b)}"),Q.push("proto.step=function "+I+"_step("+U.join(",")+"){var "+K.map((function(w){return"a"+w+"=this.shape["+w+"]"})).join(",")+","+K.map((function(w){return"b"+w+"=this.stride["+w+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(R=0;R<v;++R)Q.push("if(typeof i"+R+"===\'number\'){d=i"+R+"|0;if(d<0){c+=b"+R+"*(a"+R+"-1);a"+R+"=ceil(-a"+R+"/d)}else{a"+R+"=ceil(a"+R+"/d)}b"+R+"*=d}");Q.push("return new "+I+"(this.data,"+K.map((function(w){return"a"+w})).join(",")+","+K.map((function(w){return"b"+w})).join(",")+",c)}");var x=new Array(v),j=new Array(v);for(R=0;R<v;++R)x[R]="a[i"+R+"]",j[R]="b[i"+R+"]";Q.push("proto.transpose=function "+I+"_transpose("+U+"){"+U.map((function(w,v){return w+"=("+w+"===undefined?"+v+":"+w+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+I+"(this.data,"+x.join(",")+","+j.join(",")+",this.offset)}"),Q.push("proto.pick=function "+I+"_pick("+U+"){var a=[],b=[],c=this.offset");for(R=0;R<v;++R)Q.push("if(typeof i"+R+"===\'number\'&&i"+R+">=0){c=(c+this.stride["+R+"]*i"+R+")|0}else{a.push(this.shape["+R+"]);b.push(this.stride["+R+"])}");return Q.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),Q.push("return function construct_"+I+"(data,shape,stride,offset){return new "+I+"(data,"+K.map((function(w){return"shape["+w+"]"})).join(",")+","+K.map((function(w){return"stride["+w+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",Q.join("\\n"))(p[w],a)}var p={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};w.exports=function(w,v,I,P){if(void 0===w)return(0,p.array[0])([]);"number"===typeof w&&(w=[w]),void 0===v&&(v=[w.length]);var K=v.length;if(void 0===I){I=new Array(K);for(var a=K-1,r=1;a>=0;--a)I[a]=r,r*=v[a]}if(void 0===P){P=0;for(a=0;a<K;++a)I[a]<0&&(P-=(v[a]-1)*I[a])}for(var Y=function(w){if(u(w))return"buffer";if(Q)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(w),g=p[Y];g.length<=K+1;)g.push(U(Y,g.length-1));return(0,g[K+1])(w,v,I,P)}}},v={};function I(P){var u=v[P];if(void 0!==u)return u.exports;var Q=v[P]={exports:{}};return w[P](Q,Q.exports,I),Q.exports}I.n=function(w){var v=w&&w.__esModule?function(){return w.default}:function(){return w};return I.d(v,{a:v}),v},I.d=function(w,v){for(var P in v)I.o(v,P)&&!I.o(w,P)&&Object.defineProperty(w,P,{enumerable:!0,get:v[P]})},I.o=function(w,v){return Object.prototype.hasOwnProperty.call(w,v)},function(){"use strict";function w(w,v){(null==v||v>w.length)&&(v=w.length);for(var I=0,P=new Array(v);I<v;I++)P[I]=w[I];return P}function v(v,I){if(v){if("string"===typeof v)return w(v,I);var P=Object.prototype.toString.call(v).slice(8,-1);return"Object"===P&&v.constructor&&(P=v.constructor.name),"Map"===P||"Set"===P?Array.from(v):"Arguments"===P||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?w(v,I):void 0}}function P(w,I){var P="undefined"!==typeof Symbol&&w[Symbol.iterator]||w["@@iterator"];if(!P){if(Array.isArray(w)||(P=v(w))||I&&w&&"number"===typeof w.length){P&&(w=P);var u=0,Q=function(){};return{s:Q,n:function(){return u>=w.length?{done:!0}:{done:!1,value:w[u++]}},e:function(w){throw w},f:Q}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,a=!0,U=!1;return{s:function(){P=P.call(w)},n:function(){var w=P.next();return a=w.done,w},e:function(w){U=!0,K=w},f:function(){try{a||null==P.return||P.return()}finally{if(U)throw K}}}}function u(w,I){return function(w){if(Array.isArray(w))return w}(w)||function(w,v){var I=null==w?null:"undefined"!==typeof Symbol&&w[Symbol.iterator]||w["@@iterator"];if(null!=I){var P,u,Q=[],K=!0,a=!1;try{for(I=I.call(w);!(K=(P=I.next()).done)&&(Q.push(P.value),!v||Q.length!==v);K=!0);}catch(w){a=!0,u=w}finally{try{K||null==I.return||I.return()}finally{if(a)throw u}}return Q}}(w,I)||v(w,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=I(786),K=I.n(Q);function a(w,v){for(var I=0;I<v.length;I++){var P=v[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function U(w,v,I){return 1023&w|(1023&v)<<10|(1023&I)<<20}var p=function(){function w(){!function(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}(this,w),this.arr=[],this.hash={}}var v,I,P;return v=w,I=[{key:"forEach",value:function(w,v){this.arr.forEach(w,v)}},{key:"includes",value:function(w,v,I){var P=U(w,v,I);return!!this.hash[P]}},{key:"add",value:function(w,v,I){var P=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=U(w,v,I);this.hash[u]||(P?this.arr.unshift([w,v,I,u]):this.arr.push([w,v,I,u]),this.hash[u]=!0)}},{key:"removeByIndex",value:function(w){var v=this.arr[w];delete this.hash[v[3]],this.arr.splice(w,1)}},{key:"remove",value:function(w,v,I){var P=U(w,v,I);if(this.hash[P]){delete this.hash[P];for(var u=0;u<this.arr.length;u++)if(P===this.arr[u][3])return void this.arr.splice(u,1);throw"internal bug with location queue - hash value overlapped"}}},{key:"count",value:function(){return this.arr.length}},{key:"isEmpty",value:function(){return 0===this.arr.length}},{key:"empty",value:function(){this.arr=[],this.hash={}}},{key:"pop",value:function(){var w=this.arr.pop();return delete this.hash[w[3]],w}},{key:"copyFrom",value:function(w){for(var v in this.arr=w.arr.slice(),this.hash={},w.hash)this.hash[v]=!0}},{key:"sortByDistance",value:function(w){var v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=arguments.length>2&&void 0!==arguments[2]&&arguments[2],P=this.arr.length,u=I&&P>1e3;if(u){var Q=this.arr.slice(0,100).concat(this.arr.slice(P-100));r(Q,w,v);for(var K=0;K<100;K++)this.arr[K]=Q[K],this.arr[P-K-1]=Q[200-K-1]}else r(this.arr,w,v)}}],I&&a(v.prototype,I),P&&a(v,P),Object.defineProperty(v,"prototype",{writable:!1}),w}();function r(w,v,I){var u,Q={},K=P(w);try{for(K.s();!(u=K.n()).done;){var a=u.value;Q[a[3]]=v(a[0],a[1],a[2])}}catch(w){K.e(w)}finally{K.f()}I?w.sort((function(w,v){return Q[w[3]]-Q[v[3]]})):w.sort((function(w,v){return Q[v[3]]-Q[w[3]]})),Q=null}function Y(w,v,I,P,u,Q,a,U){var r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;this.noa=w,this.isDisposed=!1,this.requestID=v,this.voxels=a,this.userData=U,this.i=I,this.j=P,this.k=u,this.size=Q,this.x=I*Q,this.y=P*Q,this.z=u*Q,this.pos=[this.x,this.y,this.z],this._terrainDirty=!1,this._objectsDirty=!1,this._terrainMeshes=[],w._terrainMesher.initChunk(this),w._objectMesher.initChunk(this),this._isFull=!1,this._isEmpty=!1,this._wholeLayerVoxel=Array(Q).fill(-1),r>=0&&(this.voxels.data.fill(r,0,this.voxels.size),this._wholeLayerVoxel.fill(r));var Y=Array.from(Array(27),(function(){return null}));this._neighbors=K()(Y,[3,3,3]).lo(1,1,1),this._neighbors.set(0,0,0,this),this._neighborCount=0,this._timesMeshed=0,this._blockHandlerLocs=new p,J(this)}function g(w,v,I,P,u,Q){var K=v[I];K&&K(w.x+P,w.y+u,w.z+Q)}function J(w){for(var v=w.voxels,I=v.data,P=v.shape[0],u=w.noa.registry._opacityLookup,Q=w.noa.registry._blockHandlerLookup,K=w.noa.registry._objectLookup,a=w.noa.registry._blockIsPlainLookup,U=w.noa._objectMesher,p=!0,r=!0,Y=0;Y<P;++Y){var J=w._wholeLayerVoxel[Y];if(J>=0&&!U[J]&&!Q[J])u[J]||(p=!1),0!==J&&(r=!1);else{for(var l=v.get(0,Y,0),R=0;R<P;++R)for(var x=v.index(R,Y,0),j=0;j<P;++j,++x){var s=I[x];if(l>=0&&s!==l&&(l=-1),0!==s)if(a[s])r=!1;else{p=p&&u[s],r=!1,K[s]&&(U.setObjectBlock(w,s,R,Y,j),w._objectsDirty=!0);var B=Q[s];B&&(w._blockHandlerLocs.add(R,Y,j),g(w,B,"onLoad",R,Y,j))}else p=!1}l>=0&&(w._wholeLayerVoxel[Y]=l)}}w._isFull=p,w._isEmpty=r,w._terrainDirty=!w._isEmpty}function l(w,v){var I=w.voxels,P=w.noa.registry._blockHandlerLookup;w._blockHandlerLocs.arr.forEach((function(Q){var K=u(Q,3),a=K[0],U=K[1],p=K[2],r=I.get(a,U,p);g(w,P[r],v,a,U,p)}))}Y.prototype._updateVoxelArray=function(w){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;l(this,"onUnload"),this.noa._objectMesher.disposeChunk(this),this.noa._terrainMesher.disposeChunk(this),this.voxels=w,this._terrainDirty=!1,this._objectsDirty=!1,this._blockHandlerLocs.empty(),this.noa._objectMesher.initChunk(this),this.noa._terrainMesher.initChunk(this),v>=0?this._wholeLayerVoxel.fill(v):this._wholeLayerVoxel.fill(-1),J(this)},Y.prototype.get=function(w,v,I){return this.voxels.get(w,v,I)},Y.prototype.getSolidityAt=function(w,v,I){return this.noa.registry._solidityLookup[this.voxels.get(w,v,I)]},Y.prototype.set=function(w,v,I,P){var u=this.voxels.get(w,v,I);if(P!==u){this.voxels.set(w,v,I,P);var Q=this.noa.registry._solidityLookup,K=this.noa.registry._objectLookup,a=this.noa.registry._opacityLookup,U=this.noa.registry._blockHandlerLookup;a[P]||(this._isFull=!1),0!==P&&(this._isEmpty=!1),this._wholeLayerVoxel[v]!==P&&(this._wholeLayerVoxel[v]=-1);var p=U[u],r=U[P];p&&g(this,p,"onUnset",w,v,I),r?(g(this,r,"onSet",w,v,I),this._blockHandlerLocs.add(w,v,I)):this._blockHandlerLocs.remove(w,v,I);var Y=this.noa._objectMesher,J=K[u],l=K[P];J&&Y.setObjectBlock(this,0,w,v,I),l&&Y.setObjectBlock(this,P,w,v,I);var R=Q[u]!==Q[P],x=a[u]!==a[P],j=!J&&0!==u,s=!l&&0!==P;if((J||l)&&(this._objectsDirty=!0),(R||x||j||s)&&(this._terrainDirty=!0),(this._terrainDirty||this._objectsDirty)&&this.noa.world._queueChunkForRemesh(this),R||x||j||s)for(var B=this.size-1,t=0===v?-1:0,i=0===I?-1:0,z=w===B?1:0,E=v===B?1:0,o=I===B?1:0,h=0===w?-1:0;h<=z;h++)for(var n=t;n<=E;n++)for(var W=i;W<=o;W++)if(0!==(h|n|W)){var V=this._neighbors.get(h,n,W);V&&(V._terrainDirty=!0,this.noa.world._queueChunkForRemesh(V))}}},Y.prototype.updateMeshes=function(){this._terrainDirty&&(this.noa._terrainMesher.meshChunk(this),this._timesMeshed++,this._terrainDirty=!1),this._objectsDirty&&(this.noa._objectMesher.buildObjectMeshes(),this._objectsDirty=!1)},Y.prototype.dispose=function(){l(this,"onUnload"),this._blockHandlerLocs.empty(),this.noa._objectMesher.disposeChunk(this),this.noa._terrainMesher.disposeChunk(this),this.voxels.data=null,this.voxels=null,this._neighbors.data=null,this._neighbors=null,this.isDisposed=!0};function R(){this.terrainID=0,this.numFaces=0,this.matIDs=[],this.dirs=[],this.is=[],this.js=[],this.ks=[],this.wids=[],this.hts=[],this.packedAO=[]}function x(w,v,I,u,Q,a,U){var p=new Int16Array(16),r=new Int16Array(16),Y=function(w,v){return Q[6*w+v]},g=function(w){return a[w]},J=g,l=U-1,R=[1,1,1,1,1,-1,1,-1,1,-1,1,1,-1,-1,1,-1,1,-1,1,-1,-1,-1,-1,-1],x=[0,0,0,0,0,l,0,l,0,l,0,0,l,l,0,l,0,l,0,l,l,l,l,l],i=[0,1,1,0,1,-1,1,1,0,-1,1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,-1,1,0,-1,-1,1,-1,0,-1,-1,0],E=[0,0,0,1,0,0,0,0,l,1,0,l,0,0,0,0,0,1,l,0,0,l,0,1,0,0,0,0,1,0,l,0,0,l,1,0,0,0,l,0,1,l,l,0,l,l,1,l,0,l,0,1,l,0,0,l,l,1,l,l,0,l,0,0,l,1,l,l,0,l,l,1],o=[0,0,1,0,0,-1,0,1,0,0,-1,0,1,0,0,-1,0,0],h=[0,0,0,1,0,0,0,0,l,1,0,l,0,0,0,1,0,0,0,l,0,1,l,0,0,0,0,0,1,0,l,0,0,l,1,0],n=[0,0,0,0,1,0,0,0,l,0,1,l,0,0,0,0,0,1,0,l,0,0,l,1,0,0,0,0,0,1,l,0,0,l,0,1],W=[];function V(w,v){if(F=w.get(0,0,0),O=w,N.length!==v+1){N=[],q=[],m=[];for(var I=-1;I<v+1;I++){var P=I<0?0:I<v?1:2;N[I]=0|[-1,0,1][P],q[I]=0|[v-1,I,0][P],m[I]=0|[0,I,v-1][P]}}}this.copyNeighborChunksForMesh=function(w){for(var v=B.get(),I=w.size,u=0;u<R.length;u+=3){var Q=R[u],K=R[u+1],a=R[u+2],U=w._neighbors.get(Q,K,a);if(U){var p=j.get();v.set(Q,K,a,p);var r=s.get(p),Y=x[u],g=x[u+1],J=x[u+2];r.set(Y,g,J,U.voxels.get(Y,g,J)),s.release(r)}}for(var l=0;l<i.length;l+=3){var t=i[l],z=i[l+1],V=i[l+2],F=w._neighbors.get(t,z,V);if(F){var O=j.get();v.set(t,z,V,O);for(var N=s.get(O),q=E[2*l],m=E[2*l+1],c=E[2*l+2],M=E[2*l+3],S=E[2*l+4],e=E[2*l+5],H=N.index(q,m,c),G=N.index(M,S,e)-H,L=0,d=H;L<I;L++,d+=G)O[d]=F.voxels.data[d];s.release(N)}}for(var D=0;D<o.length;D+=3){var f=o[D],b=o[D+1],k=o[D+2],C=w._neighbors.get(f,b,k);if(C){var y=j.get();v.set(f,b,k,y);for(var T=s.get(y),Z=h[2*D],A=h[2*D+1],X=h[2*D+2],ww=h[2*D+3],vw=h[2*D+4],Iw=h[2*D+5],Pw=n[2*D],uw=n[2*D+1],Qw=n[2*D+2],Kw=n[2*D+3],aw=n[2*D+4],Uw=n[2*D+5],pw=T.index(Z,A,X),rw=T.index(ww,vw,Iw)-pw,Yw=T.index(Pw,uw,Qw),gw=T.index(Kw,aw,Uw)-Yw,Jw=0,lw=pw;Jw<I;Jw++,lw+=rw)for(var Rw=0,xw=lw;Rw<I;Rw++,xw+=gw)y[xw]=C.voxels.data[xw];s.release(T)}}var jw=j.get();v.set(0,0,0,jw);for(var sw=0;sw<w.voxels.data.length;sw++)jw[sw]=w.voxels.data[sw];var Bw,tw=0,iw=P(v.data);try{for(iw.s();!(Bw=iw.n()).done;){var zw=Bw.value;zw&&(W[tw++]=zw.buffer)}}catch(w){iw.e(w)}finally{iw.f()}return W.length=tw,B.release(v),{copiedNeighbors:v,transferableBuffers:W}},this.mesh=function(w){var v=w.size;J=g;var I=w._isEmpty||w._isFull,P={};t.reset();for(var u=0;u<3;++u){var Q=2===u?0:2,a=1===u?0:1,U=w._neighbors.data.map((function(w){return w&&w.voxels?w.voxels.transpose(u,Q,a):null})),Y=K()(U,[3,3,3]).lo(1,1,1).transpose(u,Q,a);p.length<v*v&&(p=new Int16Array(v*v),r=new Int16Array(v*v)),V(Y,v);var l=Y.get(-1,0,0),R=Y.get(0,0,0);if(l){var x=l.lo(v,0,0),j=M(u,x,-1,R,0);j>0&&S(0,u,Q,a,v,v,j,P)}if(!I)for(var s=0;s<v-1;s++){if(1===u){var B=w._wholeLayerVoxel[s];if(B>=0&&B===w._wholeLayerVoxel[s+1])continue}var i=1===u?null:w._wholeLayerVoxel,z=M(u,R,s,R,s+1,i);z>0&&S(s+1,u,Q,a,v,v,z,P)}}return P};var F,O,N=[],q=[],m=[];function c(v,I,P){var u=0|N[v],Q=0|N[I],K=0|N[P];if(0===(u|Q|K))return w[F.get(v,I,P)];var a=O.get(u,Q,K);if(a){var U=0|q[v],p=0|q[I],r=0|q[P];return w[a.get(U,p,r)]}var Y=0|m[v],g=0|m[I],J=0|m[P];return w[F.get(Y,g,J)]}function M(w,P,Q,K,a){for(var U=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=P.shape[1],J=p,l=r,R=2*w,x=0,j=P.index(Q,0,0),s=P.stride[1],B=P.stride[2],t=K.index(a,0,0),i=K.stride[1],E=K.stride[2],o=0,h=0;h<g;++h){var n=j,W=t;if(j+=B,t+=E,U&&U[h]>=0)x+=g;else for(var V=0;V<g;V++,x++,n+=s,W+=i){var F=P.data[n],O=K.data[W];if(F!==O){var N=u[F],q=u[O];if(!N||!q){var m=Y(F,R),M=Y(O,R+1);m!==M&&(N||0===M?(J[x]=m,v&&(l[x]=z(c,a,Q,V,h,I)),o++):(q||0===m)&&(J[x]=-M,v&&(l[x]=z(c,Q,a,V,h,I)),o++))}}}}return o}function S(w,I,P,u,Q,K,a,U){var Y=p,g=r,l=0,R=2*I,x=[0,0,0];x[I]=w;for(var j=v?e:H,s=0;s<K;++s)for(var B=1,i=1,z=0;z<Q;z+=B,l+=B){var E=0|Y[l];if(E){var o=0|g[l];for(B=1;B<Q-z&&j(l+B,Y,E,g,o);++B);w:for(i=1;i<K-s;++i)for(var h=0;h<B;++h){if(!j(l+h+i*Q,Y,E,g,o))break w}var n=Math.abs(E),W=J(n);if(!(W in U)){var V=t.get();V.numFaces=0,V.terrainID=W,U[W]=V}var F=U[W],O=F.numFaces;F.numFaces++,F.matIDs[O]=n,x[P]=z,x[u]=s,F.is[O]=x[0],F.js[O]=x[1],F.ks[O]=x[2],F.wids[O]=B,F.hts[O]=i,F.packedAO[O]=o,F.dirs[O]=E>0?R:R+1;for(var N=0;N<i;++N)for(var q=0;q<B;++q)Y[l+q+N*Q]=0;if(0===(a-=B*i))return}else B=1}}function e(w,v,I,P,u){return I===v[w]&&u===P[w]}function H(w,v,I,P,u){return I===v[w]}}var j,s,B,t=function(){var w=[],v=0;return{get:function(){return v>=w.length&&w.push(new R),v++,w[v-1]},reset:function(){v=0}}}();function i(w,v,I,Q,K,a,U){var p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;function Y(w,v,I,P,u,Q,K,a){var U=12*v,p=[I,P,u],r=[0,0,0],Y=[0,0,0];r[2===Q?0:2]=K,Y[1===Q?0:1]=a;for(var g=0;g<3;g++)w[U+g]=p[g],w[U+3+g]=p[g]+r[g],w[U+6+g]=p[g]+r[g]+Y[g],w[U+9+g]=p[g]+Y[g]}function g(w,v,I,P,u,Q){for(var K=8*v,a=.0015,U=0;U<8;U++)w[K+U]=a;0===I?(w[K+1]=w[K+3]=u-a,w[K+2]=w[K+4]=Q*(P-a),w[K+0]=w[K+6]=Q*a):1===I?(w[K+1]=w[K+7]=P-a,w[K+4]=w[K+6]=Q*(u-a),w[K+0]=w[K+2]=Q*a):(w[K+1]=w[K+3]=u-a,w[K+2]=w[K+4]=-Q*(P-a),w[K+0]=w[K+6]=-Q*a)}function J(w,v,I){for(var P=12*v,u=0;u<12;u++)w[P+u]=I[u%3]}function l(w,v,I,P,u){var Q=6*v,K=4*v;0===I&&(P=-P);var a=P<0?0:1;u||(a+=2);for(var U=R[a],p=0;p<6;p++)w[Q+p]=K+U[p]}this.buildMesh=function(I){var u,Q=w.rendering.getScene(),K=[],a=P(I);try{for(a.s();!(u=a.n()).done;){var U=u.value,Y=U.positions,g=U.indices,J=U.normals,l=U.colors,R=U.uvs,x=U.atlasIndexes,j=U.requestID,s=U.terrainID,B="chunk_".concat(j,"_").concat(s),t=new p(B,Q),i=new r;i.positions=Y,i.indices=g,i.normals=J,i.colors=l,i.uvs=R,i.applyToMesh(t),t.doNotSyncBoundingInfo=!0,t._updateBoundingInfo=function(){return t},t._refreshBoundingInfo=function(){return t},x&&t.setVerticesData("texAtlasIndices",x,!1,1),t.material=v.getMaterial(s),K.push(t)}}catch(w){a.e(w)}finally{a.f()}return K},this.createMeshData=function(w,v){var P=[1,1,1],p=[];for(var r in w){var R=w[r],t=R.terrainID,i=!1;i=a[R.matIDs[0]]>=0;var z,o=R.numFaces,h=new Uint16Array(6*o),n=new Float32Array(12*o),W=new Float32Array(12*o),V=new Float32Array(16*o),F=new Float32Array(8*o);i&&(z=new Float32Array(4*o));for(var O=0;O<R.numFaces;O++){var N=R.matIDs[O],q=R.dirs[O],m=R.is[O],c=R.js[O],M=R.ks[O],S=R.wids[O],e=R.hts[O],H=q/2|0,G=q%2?-1:1;Y(n,O,m,c,M,H,S,e),g(F,O,H,S,e,G);var L=[0,0,0];L[H]=G,J(W,O,L);var d=u(E(R.packedAO[O]),4),D=d[0],f=d[1],b=d[2],k=d[3];if(l(h,O,H,G,j(D,f,b,k)),i)x(z,O,a[N]);var C=U[N]||P;I?B(V,O,C,Q,K,D,f,b,k):s(V,O,C)}p.push({positions:n,indices:h,normals:W,colors:V,uvs:F,atlasIndexes:i?z:null,requestID:v.requestID,terrainID:t})}return p};var R=[[0,1,2,0,2,3],[0,2,1,0,3,2],[1,2,3,1,3,0],[1,3,2,1,0,3]];function x(w,v,I){for(var P=4*v,u=0;u<4;u++)w[P+u]=I}function j(w,v,I,P){return w===I?P!==v||2===P:P!==v&&w+I>P+v}function s(w,v,I){for(var P=16*v,u=0;u<16;u+=4)w[P+u]=I[0],w[P+u+1]=I[1],w[P+u+2]=I[2],w[P+u+3]=1}function B(w,v,I,P,u,Q,K,a,U){var p=16*v;t(w,p,I,Q,P,u),t(w,p+4,I,U,P,u),t(w,p+8,I,a,P,u),t(w,p+12,I,K,P,u)}function t(w,v,I,P,u,Q){var K=0===P?Q:u[P-1];w[v]=I[0]*K,w[v+1]=I[1]*K,w[v+2]=I[2]*K,w[v+3]=1}}function z(w,v,I,P,u){var Q=arguments.length>5&&void 0!==arguments[5]&&arguments[5],K=1,a=1,U=1,p=1;w(v,P+1,u)&&(++U,++p),w(v,P-1,u)&&(++K,++a),w(v,P,u+1)&&(++a,++p),w(v,P,u-1)&&(++K,++U);var r=w(v,P,u);return r?(p=3===p||w(v,P+1,u+1)?3:2,a=3===a||w(v,P-1,u+1)?3:2,p<<6|(U=3===U||w(v,P+1,u-1)?3:2)<<4|a<<2|(K=3===K||w(v,P-1,u-1)?3:2)):Q?(1===p&&w(v,P+1,u+1)&&(p=2),1===a&&w(v,P-1,u+1)&&(a=2),1===U&&w(v,P+1,u-1)&&(U=2),1===K&&w(v,P-1,u-1)&&(K=2),p<<6|U<<4|a<<2|K):(1===p&&(w(v,P+1,u+1)?p=2:w(I,P,u+1)&&w(I,P+1,u)&&w(I,P+1,u+1)||(p=0)),1===U&&(w(v,P+1,u-1)?U=2:w(I,P,u-1)&&w(I,P+1,u)&&w(I,P+1,u-1)||(U=0)),1===a&&(w(v,P-1,u+1)?a=2:w(I,P,u+1)&&w(I,P-1,u)&&w(I,P-1,u+1)||(a=0)),1===K&&(w(v,P-1,u-1)?K=2:w(I,P,u-1)&&w(I,P-1,u)&&w(I,P-1,u-1)||(K=0)),p<<6|U<<4|a<<2|K)}function E(w){return[3&w,w>>2&3,w>>6&3,w>>4&3]}var o,h,n=I(786);self.onmessage=function(w){var v=w.data,I=v.type,u=v.data;switch(I){case"meshingInit":var Q=u.chunkSize,K=u.solidLookupArr,a=u.doAO,U=u.skipRevAo,p=u.opacityLookup,r=u.blockFaceToMatId,Y=u.matIdToTerrainId,g=u.aoVals,J=u.revAoVal,l=u.atlasIndexLookup,R=u.matColorLookup;o=new x(K,a,U,p,r,Y,Q),h=new i(null,null,a,g,J,l,R);break;case"meshChunk":for(var j=u.chunk,s=j.size,B=0;B<j._neighborsData.length;B++){j._neighborsData[B]&&(j._neighborsData[B]={voxels:n(j._neighborsData[B],[s,s,s])})}j._neighbors=n(j._neighborsData,[3,3,3]).lo(1,1,1);var t=o.mesh(j),z=h.createMeshData(t,j),E=[];for(var W in z){var V=z[W];for(var F in V){var O;null!==(O=V[F])&&void 0!==O&&O.buffer&&E.push(V[F].buffer)}}var N,q=[],m=P(j._neighborsData);try{for(m.s();!(N=m.n()).done;){var c=N.value;if(c){var M=c.voxels.data;q.push(M),E.push(M.buffer)}}}catch(w){m.e(w)}finally{m.f()}self.postMessage({chunkI:j.chunkI,chunkJ:j.chunkJ,chunkK:j.chunkK,vertexDataInfo:z,reusableChunkArrs:q},E);break;default:console.error("Unrecognised data.type")}}}()}();',"Worker",void 0,I.p+"meshing.worker.3257a332.worker.js")}var DP,fP,bP=B().GameAnalytics,kP=B(),CP=I(52126).g,yP=function(){};function TP(w){U.Lc.noa&&console.log("client csv detection");try{var v;if(null!==(v=(0,a.m)())&&void 0!==v&&v.GAConfig){var I=(0,a.m)().GAConfig;U.Lc.GameAnalytics=bP,U.Lc.gaENums=kP,["development","test"].includes("production")&&CP.logGameAnalyticsDebug?bP.setEnabledInfoLog(!0):bP.setEnabledInfoLog(!1),bP.configureAvailableResourceCurrencies(I.AvailableCurrencies),bP.configureAvailableResourceItemTypes(I.AvailableItemCategories),bP.initialize(I.GAGameKey,I.GASecretKey);var P=p.parse(document.location.search);bP.addDesignEvent("portal:".concat(P.portal||"root"),234);var u={hey:{category:"hi",subCategory:"noway",value:2}},Q=U.hc.subscribe("leaveValues",(function(w){var v=w.leaveEventType,I=w.category,P=w.subCategory,Q=w.value;console.log(v,I,P,Q),u[v]={category:I,subCategory:P,value:Q}}));yP=function(){for(var w in u){var v=u[w],I=v.category,P=v.subCategory,Q=v.value,K=w;I&&(K+=":"+I),P&&(K+=":"+P),bP.addDesignEvent(K,Q||0)}},w.GA=U.Lc.GameAnalytics,w.gaENums=U.Lc.gaENums,w.logErrorMessage=(0,U.lb)(w.GA,w.gaENums),console.log("Defined noa.logErrorMessage");var K=function(v){var I=v.message,P=v.filename,u=v.lineno,Q=v.colno,K=v.error;w.logErrorMessage("Uncaught error in window event listener ".concat(I,", ").concat(P,", ").concat(u,", ").concat(Q,", ").concat(K),K)};window.addEventListener("error",K),(0,U.Yb)((function(){yP(),bP.endSession(),U.hc.unsubscribe(Q),yP=function(){},w.GA=void 0,w.gaENums=void 0,w.logErrorMessage=(0,U.lb)(null,null),window.removeEventListener("error",K)}))}}catch(w){console.error("ERROR initialising gameanalytics")}}function ZP(w,v){return AP.apply(this,arguments)}function AP(){return AP=(0,P.e)(Q().mark((function w(v,I){var u,K,a,r,J,l,R,x,s;return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:if(console.log("Play attempted."),u=v,K=I,console.log("Awaiting for all libs needed for gameplay to be loaded."),console.log("Libs needed for gameplay loaded."),!(a=p.parse(document.location.search).forcedIp)||CP.testLocalMatchmaking){w.next=13;break}r=a||CP.localGameserverUrl,console.log("Colyseus connecting to ".concat(r)),fP=new j.d(r),U.Lc.connectedWebsocketUrl=r,w.next=25;break;case 13:return w.next=15,Y()((0,P.e)(Q().mark((function w(){return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,XP(v,I);case 2:return w.abrupt("return",w.sent);case 3:case"end":return w.stop()}}),w)}))),{onFailedAttempt:function(w){console.log("Attempt ".concat(w.attemptNumber," to get game server IP failed."))},retries:3});case 15:if(J=w.sent,l=J.succeeded,R=J.failReason,x=J.lobbyName,s=J.playingMode,l){w.next=23;break}return console.log("Join room did not succeed, reason:",R),w.abrupt("return",{succeeded:!1,failReason:R,playingMode:null,lobby:null});case 23:u=x,K=s;case 25:return console.log("Playing",K),U.Lc.connectedPlayingMode=K,U.hc.publish("enterLoadingScreen"),U.hc.publish("loadingScreenState","Loading Game"),(0,g.h)(),DP?Pu(DP,u,K):vu(u,K),w.abrupt("return",{succeeded:!0,failReason:null,playingMode:K,lobby:u});case 32:case"end":return w.stop()}}),w)}))),AP.apply(this,arguments)}function XP(w,v){return wu.apply(this,arguments)}function wu(){return wu=(0,P.e)(Q().mark((function w(v,I){return Q().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,U.cc)("".concat(CP.matchmakingUrl,"/play"),{requestedLobbyName:null!==v&&void 0!==v?v:null,languages:(0,U.eb)(),game:I,dbId:U.Lc.id}).then((function(w){var v=w.ip,I=w.lobbyName,P=w.game,u=w.succeeded,Q=w.failReason;if(!u)return{succeeded:!1,failReason:Q,lobbyName:null,playingMode:null};var K="wss://";console.log("Connecting to ".concat(K).concat(v));var a="".concat(K).concat(v);return fP=new j.d(a),U.Lc.connectedWebsocketUrl=a,{succeeded:!0,failReason:null,lobbyName:I,playingMode:P}})));case 1:case"end":return w.stop()}}),w)}))),wu.apply(this,arguments)}function vu(w,v){bw(DP=new K.e({tickRate:CP.clientTicksPerSecond,debug:!1,showFPS:!1,inverseY:!1,inverseX:!1,chunkSize:CP.chunkSize,blockTestDistance:CP.blockTestDistance,playerStart:[0,5,0],playerHeight:CP.playerHeight,playerWidth:CP.playerWidth,playerAutoStep:CP.playerAutoStep,useAO:!0,AOmultipliers:[.92,.8,.5],reverseAOmultiplier:1,chunkAddDistance:[CP.chunkHorizAddDistance,CP.chunkVertAddDistance],chunkRemoveDistance:[CP.chunkHorizAddDistance+1,CP.chunkVertAddDistance+1],preventDefaults:!1,fluidDrag:1,fluidDensity:3,isBodyInsideUnloadedBlock:function(w){var v=U.Lc.bloxd;if(w===DP.ents.getPhysicsBody(DP.playerEntity))return(0,zv.h)(v,w);var I=[Math.floor((w.aabb.base[0]+w.aabb.max[0])/2),Math.floor(w.aabb.base[1]),Math.floor((w.aabb.base[2]+w.aabb.max[2])/2)];return v.localToGlobal(I,I),!v.hasChunkWithBlockCoordinates(I[0],I[1],I[2])},getMeshingWorker:function(){return new dP}})),U.Lc.BloxdClientRenderingClass=LP,U.Lc.bloxd=new Vv(DP),DP.bloxd=U.Lc.bloxd;U.Lc.bloxd,U.Lc.noa=DP,U.hc.publish("noaDefined"),console.log("noaDefined"),U.Lc.pointerLockWrapper=new x(DP),(0,U.ac)((function(){U.Lc.pointerLockWrapper.reset()}));var I=function(w){return D.apply(this,arguments)}(DP),P=(0,dw.j)(DP),u=Promise.all([I,P]);DP.colyClient=fP,(0,Dw.j)(DP,w,v,u),Lw(DP),u.then((function(){(0,fw.l)(DP)})),(0,mP.q)(DP),U.l.setItem("numTimesPlayed",U.l.getItem("numTimesPlayed")+1),TP(DP),console.log("Running with webgl version",DP.rendering._engine.webGLVersion)}function Iu(){var w,v,I,P;console.log("Leaving game"),U.hc.publish("leaveGame"),null===(w=DP.colyRoom)||void 0===w||null===(v=w.removeAllListeners)||void 0===v||v.call(w),null===(I=DP.colyRoom)||void 0===I||null===(P=I.leave)||void 0===P||P.call(I),delete DP.colyRoom,delete DP.serverPlayerEntity,(0,U.tc)(DP),function(w){ew=!1,Nw=!1,Hw.destroySeed(qw),qw=null,w.world.markAllChunksForRemoval(),Mw={},Gw={}}(DP),U.Lc.connectedWebsocketUrl=null,DP.setPaused(!0)}function Pu(w,v,I){(0,U.tc)(w),w.colyClient=fP,(0,Dw.j)(w,v,I),TP(w),w.setPaused(!1)}window.addEventListener("beforeunload",(function(){yP()})),I.e(622).then(I.t.bind(I,67882,23)).then((function(w){w.polyfill()})),window.leaveGame=function(){Iu()}},66293:function(w,v,I){"use strict";I.d(v,{c:function(){return p},d:function(){return g}});var P=I(29439),u=I(85774),Q=I(34703),K=I(47313),a=I(44695),U=I(46417),p=K.memo((function(){var w,v,I=(0,u.pb)(),p=(0,Q._)("canChange");(0,Q.X)("cameraZoomSet",null),(0,Q.X)("newLocalPlayerHeldItem",null);var r=(0,K.useState)(!1),Y=(0,P.e)(r,2),g=Y[0],J=Y[1];(0,Q.T)("mouseState",(function(w){var v=w.isDown;J(v)}));var R=null===(w=(0,u.pb)().ents.getHeldItemState((0,u.pb)().playerEntity))||void 0===w?void 0:w.heldItem,x=I.camera.zoomDistance<=1||p||null!==I.entities.getHeldItemState(I.playerEntity).heldItemName,j=(null===R||void 0===R?void 0:R.gunTypeObj)||(null===R||void 0===R||null===(v=R.typeObj)||void 0===v?void 0:v.holdAsAiming);return"touchOnly"===a.e&&!j||!x?null:"Gun"===I.entities.getHeldItemState(I.playerEntity).heldType?(0,U.jsx)(l,{}):(0,U.jsx)("div",{className:"CrossHair",style:{transform:"scale(".concat(g?1.4:1,")")},children:"+"})})),r=[{current:null},{current:null},{current:null},{current:null}],Y=0;function g(w){r[0].current?J(w):Y=w}function J(w){var v="".concat(.1*w,"vh");r[0].current.style.transform="translateX(calc(0px - ".concat(v,"))"),r[1].current.style.transform="translateX(calc(0px + ".concat(v,"))"),r[2].current.style.transform="translateY(calc(0px - ".concat(v,"))"),r[3].current.style.transform="translateY(calc(0px + ".concat(v,"))")}function l(){var w=.6,v=.15,I="".concat(1.2,"vh"),P="".concat(.3,"vh");return(0,K.useEffect)((function(){Y&&J(Y)}),[]),(0,U.jsxs)("div",{className:"GunCrosshairWrapper",children:[(0,U.jsx)("div",{className:"GunCrosshair",style:{width:I,height:P,top:"".concat(49.85,"vh"),left:"calc(50vw - ".concat(w,"vh)")},ref:r[0]}),(0,U.jsx)("div",{className:"GunCrosshair",style:{width:I,height:P,top:"".concat(49.85,"vh"),left:"calc(50vw - ".concat(w,"vh)")},ref:r[1]}),(0,U.jsx)("div",{className:"GunCrosshair",style:{width:P,height:I,top:"".concat(49.4,"vh"),left:"calc(50vw - ".concat(v,"vh)")},ref:r[2]}),(0,U.jsx)("div",{className:"GunCrosshair",style:{width:P,height:I,top:"".concat(49.4,"vh"),left:"calc(50vw - ".concat(v,"vh)")},ref:r[3]})]})}},3170:function(w,v,I){"use strict";I.d(v,{e:function(){return U},i:function(){return p}});var P=I(34703),u=I(85774),Q=I(47313),K=I(46417),a={},U=Q.memo((function(){var w=(0,P.L)();return(0,P.T)("damagedByOtherPlayer",(function(v){var I=v.whoShotEId,P=v.direction;if(a[I]){var u=a[I];clearTimeout(u.timeout),u.direction=P,u.timeout=setTimeout((function(){delete a[I],w()}),800)}else a[I]={direction:P,domElement:null,timeout:setTimeout((function(){delete a[I],w()}),800)};w()})),(0,P.T)("playerKilled",(function(v){var I=v.deadEId;v.killerEId===(0,u.pb)().serverPlayerEntity&&I in a&&(clearTimeout(a[I].timeout),delete a[I],w())})),(0,Q.useEffect)((function(){return function(){for(var w in a)clearTimeout(a[w].timeout),delete a[w]}}),[]),(0,K.jsx)("div",{className:"DirectionalDamage",children:Object.keys(a).map((function(w){return(0,K.jsx)("div",{className:"DamageIndicator",ref:function(v){a[w]&&(a[w].domElement=v)},style:{width:r,height:r}},w)}))})}));function p(w){for(var v=0,I=Object.values(a);v<I.length;v++){var P=I[v];Y(w,P.domElement,P.direction)}}var r="".concat(3.5,"vw");function Y(w,v,I){var P=I-w.camera.heading,u=13*Math.sin(P),Q=13*Math.cos(P);v.style.transform="translate(calc(".concat(u,"vw - 50%), calc(0px - ").concat(Q,"vw - 50%)) rotate(").concat(P,"rad)")}},96724:function(w,v,I){"use strict";I.d(v,{b:function(){return B},e:function(){return W}});var P=I(29439),u=I(47313),Q=I(85774),K=I(13529),a=I.n(K),U=I(44695),p=I(47077),r=I.n(p),Y=I(52126),g=I(34703),J=I(46123),l=I.n(J),R=I(85008),x=I(80427),j=I(55250),s=I(46417),B=u.memo((function(w){var v=w.escMenuOptions;return(0,u.useEffect)((function(){var w=(0,Q.pb)().camera;w.sensitivityX=v.touchscreenSensitivity,w.sensitivityY=v.touchscreenSensitivity;var I=(0,Q.pb)().ents;return I.getState((0,Q.pb)().playerEntity,I.names.receivesInputs).isTouchscreen=!0,console.log(U.e),"touchOnly"!==U.e&&Q.hc.publish("showError",{error:"Touch detected, setting controls to touch. Mouse and keyboard control will be disabled. Change control type by visiting the options in the top right",timeoutLength:15e3}),function(){I.getState((0,Q.pb)().playerEntity,I.names.receivesInputs).isTouchscreen=!1,w.sensitivityX=v.mouseSensitivity,w.sensitivityY=v.mouseSensitivity}}),[v.mouseSensitivity,v.touchscreenSensitivity]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E,{}),(0,s.jsx)(z,{}),(0,s.jsx)(V,{}),(0,s.jsx)(i,{}),(0,s.jsx)(t,{})]})}));function t(){var w=(0,Q.pb)();return(0,u.useEffect)((function(){var v=function(v,I){var P=w.rendering.getScene().createPickingRay(v,I),u=P.origin,K=P.direction;w.actionOrigin=[u.x,u.y,u.z],w.actionDirection=[isNaN(K.x)?1:K.x,isNaN(K.y)?0:K.y,isNaN(K.z)?0:K.z],u=[u.x,u.y,u.z],K=[K.x,K.y,K.z],(0,Q.N)().localToGlobal(u,u);var a=w.pickBlock(u,K,w.camera.zoomDistance+Y.g.blockTestDistance,(function(w){return 0!==w}));if(a&&(a.blockID&&r().dist(a.position,(0,Q.N)().getPlayerEyePos(w.playerEntity))<=Y.g.blockTestDistance))return w.blockTestDistance=w.camera.zoomDistance+Y.g.blockTestDistance,void w.updateBlockTargets();w.blockTestDistance=0},I=document.getElementById("noa-container"),P=null,u=null,K=!1,a=function(I){if(u=Date.now(),K=function(w,v){for(var I in F)if(F[I](w,v))return!0;return!1}(I.targetTouches[0].clientX,I.targetTouches[0].clientY))return w.actionOrigin=null,void(w.actionDirection=null);if(v(I.targetTouches[0].clientX,I.targetTouches[0].clientY),w.targetedBlock){var a=w.targetedBlock.position.join("|");P=setTimeout((function(){if(w.targetedBlock){var v=w.targetedBlock.position.join("|");a===v&&((0,Q.vc)(x.e.ingameClick,{type:j.e.TouchDownLong,doubleClick:(0,Q.tb)()},!0),w.ents.getHeldItem(w.playerEntity).touchDownLong()),P=null}}),300)}},U=function(w){K||v(w.targetTouches[0].clientX,w.targetTouches[0].clientY)},p=function(I){K?K=!1:(v(I.changedTouches[0].clientX,I.changedTouches[0].clientY),Date.now()-u<200&&((0,Q.vc)(x.e.ingameClick,{type:j.e.TouchShort,doubleClick:(0,Q.tb)()},!0),w.ents.getHeldItem(w.playerEntity).touchShort()),w.ents.getHeldItem(w.playerEntity).upFirePrimary(),w.actionOrigin=null,w.actionDirection=null,clearTimeout(P))};return I.addEventListener("touchstart",a,{passive:!0}),I.addEventListener("touchmove",U,{passive:!0}),I.addEventListener("touchend",p,{passive:!0}),function(){I.removeEventListener("touchstart",a),I.removeEventListener("touchmove",U),I.removeEventListener("touchend",p),clearTimeout(P)}}),[w]),null}function i(){var w=(0,u.useRef)(!1),v=(0,u.useRef)(!1),I=(0,u.useRef)(0),P=(0,g.L)(),K=function(){var I=(0,Q.pb)();I.entities.getMoveState(I.playerEntity).crouching=w.current||v.current,n(),P()},a=w.current||v.current;return(0,s.jsx)("div",{className:"TouchCrouchBackground",children:(0,s.jsx)("div",{className:l()("TouchCrouch",{TouchCrouchDown:a}),children:(0,s.jsx)("i",{className:"fas fa-angle-down",onPointerDown:function(){w.current=!0,v.current?v.current=!1:Date.now()-I.current<400&&(v.current=!0),I.current=Date.now(),K()},onPointerUp:function(){w.current=!1,K()}})})})}function z(){return(0,s.jsx)("div",{className:"JumpCircle TouchButton",onTouchStart:function(){(0,Q.pb)().ents.getMoveState((0,Q.pb)().playerEntity).jumping=!0},onTouchEnd:function(){(0,Q.pb)().ents.getMoveState((0,Q.pb)().playerEntity).jumping=!1},children:(0,s.jsx)("i",{className:"fas fa-arrow-up JumpIcon"})})}function E(){var w=(0,Q.pb)(),v=(0,u.useRef)(null),I=(0,u.useState)(!1),K=(0,P.e)(I,2),U=K[0],p=K[1];return(0,u.useEffect)((function(){var I=a().create({zone:v.current,mode:U?"dynamic":"static",color:"white",dynamicPage:!0,fadeTime:1,multitouch:!0,maxNumberOfNipples:1,restOpacity:1,position:{bottom:"50vh",left:"20vw"}});return I.on("move",(function(v,I){var P=w.ents;P.getState(w.playerEntity,P.names.receivesInputs).joystickHeading=I.angle.radian,h=I.distance/50,n()})),I.on("end",(function(w,v){h=0,n(),p(!0)})),function(){I.destroy()}}),[U]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{id:"NippleZone",className:"NippleZone",ref:v})})}var o,h=0;function n(){var w=(0,Q.pb)(),v=w.ents.getMoveState(w.playerEntity),I=w.serverSettings.runningSpeed,P=w.ents.getMovement(w.playerEntity);(v.crouching&&!P.shouldIgnoreCrouchingSpeedReduction()||!w.ents.getState(w.playerEntity,"receivesInputs").canRunCombinator.getTotalBooleanVal())&&(I=w.serverSettings.crouchingSpeed),v.speed=h*I,v.speedMultiplier.setMultiplierType("serverSettingsSpeedMultiplier",w.serverSettings.speedMultiplier)}function W(){var w;null===(w=o)||void 0===w||w()}function V(){var w,v,I,K=null===(w=(0,Q.pb)().ents.getHeldItemState((0,Q.pb)().playerEntity))||void 0===w?void 0:w.heldItem,a=(0,g._)("touchscreenActionButton"),U=null!==K&&void 0!==K&&K.gunTypeObj?[{icon:"arrows-rotate"}]:a,p=null;null!==K&&void 0!==K&&K.gunTypeObj||null!==K&&void 0!==K&&null!==(v=K.typeObj)&&void 0!==v&&v.holdAsAiming?p=[{icon:"Arrow"}]:"Chargeable"===(null===K||void 0===K||null===(I=K.typeObj)||void 0===I?void 0:I.type)&&(p=[{icon:K.typeObj.name}]);var r=null!==K&&void 0!==K&&K.gunTypeObj?[{icon:"crosshairs"}]:null,Y=(0,u.useReducer)((function(w){return w+1}),0),J=(0,P.e)(Y,2),l=(J[0],J[1]);o=l,(0,u.useEffect)((function(){return function(){o=void 0}}),[]);var R=[{bottom:6,right:15,size:5},{bottom:12,right:11,size:8},{bottom:15,right:5,size:5}],j=[{onPointerDown:function(){(0,Q.vc)(x.e.touchscreenActionButtonPress,!0),null!==K&&void 0!==K&&K.gunTypeObj&&K.reload()},onPointerUp:function(){(0,Q.vc)(x.e.touchscreenActionButtonPress,!1)}},{onPointerDown:function(){null===K||void 0===K||K.touchDownSecondary()},onPointerUp:function(){null===K||void 0===K||K.touchUpSecondary()}},{onPointerDown:function(){null===K||void 0===K||K.touchDownTertiary()},onPointerUp:function(){null===K||void 0===K||K.touchUpTertiary()}}];return(0,s.jsx)(s.Fragment,{children:[U,p,r].map((function(w,v){if(!w)return null;var I=R[v];return(0,s.jsx)(O,{icon:w,bottom:I.bottom,right:I.right,size:I.size,pointerDown:j[v].onPointerDown,pointerUp:j[v].onPointerUp},JSON.stringify(w))}))})}var F={};function O(w){var v=w.icon,I=w.bottom,Q=w.right,K=w.size,a=w.pointerDown,U=w.pointerUp,p=JSON.stringify(v),r=(0,u.useRef)(!1),Y=(0,u.useRef)({centreX:0,centreY:0,radius:0}),J=(0,R.c)(),l=(0,P.e)(J,2),x=l[0],j=l[1];(0,u.useEffect)((function(){var w=document.getElementById(p).getBoundingClientRect(),v=w.left+w.width/2,I=w.top+w.height/2,P=w.width/2;Y.current={centreX:v,centreY:I,radius:P}}),[x,j]);var B=function(w){i(w.changedTouches[0].clientX,w.changedTouches[0].clientY)&&(r.current=!0,a())},t=function(){r.current&&(r.current=!1,U())},i=function(w,v){return Math.hypot(w-Y.current.centreX,v-Y.current.centreY)<Y.current.radius};return(0,u.useEffect)((function(){return F[p]=i,function(){delete F[p]}}),[p]),(0,u.useEffect)((function(){var w=document.getElementById("noa-container");return w.addEventListener("touchstart",B,{passive:!0}),w.addEventListener("touchend",t,{passive:!0}),function(){w.removeEventListener("touchstart",B),w.removeEventListener("touchend",t)}})),(0,s.jsx)("div",{className:"TouchArbitraryActionButton TouchButton",id:p,style:{bottom:"".concat(I,"rem"),right:"".concat(Q,"rem"),width:"".concat(K,"rem"),height:"".concat(K,"rem"),fontSize:"".concat(2*K/5,"rem")},children:(0,s.jsx)(g.B,{text:v})})}},14848:function(w,v,I){"use strict";I.d(v,{d:function(){return Q},f:function(){return K},j:function(){return u}});var P=I(85774),u={Wood:0,Iron:1,Gold:2,Diamond:3},Q=(0,P.ob)(2*Object.keys(u).length*64)/64,K=I(74304)},43971:function(w,v,I){"use strict";I.d(v,{c:function(){return u},e:function(){return p},i:function(){return r}});var P=I(85774),u={head:{Bob:{texture:"bob_head",previewTex:Y("bob_head_preview"),skinColour:[220,157,118]},Emma:{texture:"emma_head",previewTex:Y("emma_head_preview"),skinColour:[239,216,177]},Leo:{texture:"leo_head",previewTex:Y("leo_head_preview"),skinColour:[255,224,177]},Isabel:{texture:"isabel_head",previewTex:Y("isabel_head_preview"),skinColour:[220,157,118]},Sanjay:{texture:"sanjay_head",previewTex:Y("sanjay_head_preview"),skinColour:[181,135,72]},Sara:{texture:"sara_head",previewTex:Y("sara_head_preview"),skinColour:[140,112,91]}},body:{Bob:{texture:"bob_body",previewTex:Y("bob_body_preview")},Emma:{texture:"emma_body",previewTex:Y("emma_body_preview")},"Light Blue Polo":{texture:"light_blue_polo",previewTex:Y("light_blue_polo_preview")},"Green Top With Rolled Up Sleeves":{texture:"green_top_with_rolled_up_sleeves",previewTex:Y("green_top_with_rolled_up_sleeves_preview")},Khakis:{texture:"khakis_body",previewTex:Y("khakis_body_preview")},"Light Blue Crop Top":{texture:"light_blue_crop_top",previewTex:Y("light_blue_crop_top_preview")}},legs:{Bob:{texture:"bob_legs",previewTex:Y("bob_legs_preview")},Emma:{texture:"emma_legs",previewTex:Y("emma_legs_preview")},"Navy Blue Jeans":{texture:"navy_blue_jeans",previewTex:Y("navy_blue_jeans_preview")},"Tan Shorts":{texture:"tan_shorts",previewTex:Y("tan_shorts_preview")},Khakis:{texture:"khakis_legs",previewTex:Y("khakis_legs_preview")},"Navy Blue Denim Shorts":{texture:"navy_blue_denim_shorts",previewTex:Y("navy_blue_denim_shorts_preview")}}},Q=0;for(var K in u){var a=u[K];for(var U in a)a[U].atlasIdx=Q++}var p=(0,P.ob)(64*Q)/64,r=Y("componentAtlas");function Y(w){return I(86940)("./".concat(w,".png"))}},37928:function(w,v,I){"use strict";I.d(v,{b:function(){return s},d:function(){return x},e:function(){return j},f:function(){return R}});var P=I(60136),u=I(43668),Q=I(93433),K=I(37762),a=I(15671),U=I(43144),p=I(96558),r=I(80105),Y=I(43971),g=I(9488),J=I(14848),l=I(23886),R={"LegLeft|Armour":1,"LegRight|Armour":1,"LowerBody|Armour":1,"GauntletLeft|Armour":0,"GauntletRight|Armour":0,"Body|Armour":0,"Helmet|Armour":0,"BootsLeft|Armour":0,"BootsRight|Armour":0},x=function(){function w(v,I){(0,a.e)(this,w),this.bloxd=void 0,this.playerCharMeshNames=[],this.bloxd=v;var P,u=I.meshes.slice(1),Q=(0,K.b)(u);try{for(Q.s();!(P=Q.n()).done;){var U=P.value;void 0===R[U.name]&&this.playerCharMeshNames.push(U.name)}}catch(w){Q.e(w)}finally{Q.f()}var p,J=(0,K.b)(u);try{for(J.s();!(p=J.n()).done;){var l=p.value;if(void 0!==R[l.name])l.registerInstancedBuffer("aAtlasIdx1",1),l.registerInstancedBuffer("aHueColour",4),l.instancedBuffers.aAtlasIdx1=0,l.instancedBuffers.aHueColour=new g.f(0,0,0,0);else{l.registerInstancedBuffer("aAtlasIdx1",1),l.registerInstancedBuffer("aAtlasIdx2",1),l.registerInstancedBuffer("aAtlasIdx3",1),l.registerInstancedBuffer("aSkinColour",3),l.registerInstancedBuffer("aOverlayColour",4),l.instancedBuffers.aAtlasIdx1=Y.c.head.Bob.atlasIdx,l.instancedBuffers.aAtlasIdx2=Y.c.body.Bob.atlasIdx,l.instancedBuffers.aAtlasIdx3=Y.c.legs.Bob.atlasIdx;var x=Y.c.head.Bob.skinColour;l.instancedBuffers.aSkinColour=new r.l(x[0]/255,x[1]/255,x[2]/255),l.instancedBuffers.aOverlayColour=new g.f(0,0,0,0)}}}catch(w){J.e(w)}finally{J.f()}}return(0,U.c)(w,[{key:"updateInstanceCustomisation",value:function(w,v,I){var P,u=this.getPlayerInstanceChildren(w),Q=(0,K.b)(u);try{for(Q.s();!(P=Q.n()).done;){var a=P.value;if("head"===v){a.instancedBuffers.aAtlasIdx1=Y.c.head[I].atlasIdx;var U=Y.c.head[I].skinColour;a.instancedBuffers.aSkinColour=new r.l(U[0]/255,U[1]/255,U[2]/255)}else"body"===v?a.instancedBuffers.aAtlasIdx2=Y.c.body[I].atlasIdx:"legs"===v&&(a.instancedBuffers.aAtlasIdx3=Y.c.legs[I].atlasIdx)}}catch(w){Q.e(w)}finally{Q.f()}}},{key:"updateInstanceOverlayColour",value:function(w,v){var I,P=this.getPlayerInstanceChildren(w),u=(0,K.b)(P);try{for(u.s();!(I=u.n()).done;){I.value.instancedBuffers.aOverlayColour=v}}catch(w){u.e(w)}finally{u.f()}}},{key:"updateInstanceArmour",value:function(w,v,I,P){var u=[];"Helmet"===v?u.push("Helmet|Armour"):"Chestplate"===v?u.push("Body|Armour"):"Gauntlets"===v?(u.push("GauntletLeft|Armour"),u.push("GauntletRight|Armour")):"Leggings"===v?(u.push("LegLeft|Armour"),u.push("LegRight|Armour"),u.push("LowerBody|Armour")):"Boots"===v&&(u.push("BootsLeft|Armour"),u.push("BootsRight|Armour"));for(var K=this.bloxd.noa.ents.getPlayerMeshState(w).namedNodes,a=0,U=u;a<U.length;a++){var p=U[a],Y=K[p];null===I?Y.setEnabled(!1):(Y.instancedBuffers.aAtlasIdx1=2*J.j[I]+R[p],Y.instancedBuffers.aHueColour=P?l.d.apply(void 0,(0,Q.d)(P).concat([1])):new r.p(0,0,0,0),Y.setEnabled(!0))}}},{key:"getPlayerInstanceChildren",value:function(w){var v=this,I=w.getChildMeshes(!1).filter((function(w){return v.playerCharMeshNames.includes(w.name)}));return 6!==I.length&&(console.error("getPlayerInstanceChildren num instance descendance failed."),console.log("root instance that failed:",w)),I}}]),w}(),j=function(w){(0,P.e)(I,w);var v=(0,u.d)(I);function I(w){var P;(0,a.e)(this,I);var u={ATLAS_TEX_NUM:"".concat(Y.e.toString(),".0")};return w.customShaderNameResolve=function(w,v,I,u,Q,K){return K&&P.getAttributes(K),w},(P=v.call(this,w,"Player",200,u))._enable(!0),P}return(0,U.c)(I,[{key:"getClassName",value:function(){return"PlayerMaterialPlugin"}},{key:"getAttributes",value:function(w){w.includes("aAtlasIdx1")||(w.push("aAtlasIdx1"),w.push("aAtlasIdx2"),w.push("aAtlasIdx3"),w.push("aSkinColour"),w.push("aOverlayColour"))}},{key:"getCustomCode",value:function(w){return"vertex"===w?{CUSTOM_VERTEX_DEFINITIONS:"\n                attribute highp float aAtlasIdx1;\n                attribute highp float aAtlasIdx2;\n                attribute highp float aAtlasIdx3;\n                attribute lowp vec3 aSkinColour;\n                \n                attribute lowp vec4 aOverlayColour;\n                                \n                // vMainUV1 is inbuilt into the babylon shader\n                varying highp vec2 vMainUV2;\n                varying highp vec2 vMainUV3;\n                varying lowp vec3 vSkinColour;\n                \n                varying lowp vec4 vOverlayColour;\n            ",CUSTOM_VERTEX_MAIN_END:"\n\t\t\t\tvMainUV2 = vec2((vMainUV1.x+aAtlasIdx2)/ATLAS_TEX_NUM, vMainUV1.y);\n\t\t\t\tvMainUV3 = vec2((vMainUV1.x+aAtlasIdx3)/ATLAS_TEX_NUM, vMainUV1.y);\n\t\t\t\t\n\t\t\t\tvMainUV1 = vec2((vMainUV1.x+aAtlasIdx1)/ATLAS_TEX_NUM, vMainUV1.y);\n\t\t\t\t\n\t\t\t\tvSkinColour = aSkinColour;\n\t\t\t\tvOverlayColour = aOverlayColour;\n\t\t\t"}:"fragment"===w?{CUSTOM_FRAGMENT_DEFINITIONS:"\n                varying highp vec2 vMainUV2;\n                varying highp vec2 vMainUV3;\n                varying lowp vec3 vSkinColour;\n                \n                varying lowp vec4 vOverlayColour;\n            ","!baseColor\\=texture2D\\(diffuseSampler,vDiffuseUV\\+uvOffset\\);":"\n\t\t\t\t// Apply selected skins\n\t\t\t\tvec4 col1 = texture2D(diffuseSampler, vMainUV1);\n\t\t\t\tvec4 col2 = texture2D(diffuseSampler, vMainUV2);\n\t\t\t\tvec4 col3 = texture2D(diffuseSampler, vMainUV3);\n\t\t\t\tbaseColor = col1+col2*(1.0-col1.a)+col3*(max(1.0-col1.a-col2.a, 0.0))+vec4(vSkinColour, 1)*(max(1.0-col1.a-col2.a-col3.a, 0.0));\n\t\t\t\t\n\t\t\t\t// Apply overlay\n\t\t\t\tbaseColor = baseColor*(1.0-vOverlayColour.a) + vOverlayColour*vOverlayColour.a;\n\t\t\t"}:null}}]),I}(p.d),s=function(w){(0,P.e)(I,w);var v=(0,u.d)(I);function I(w,P){var u;(0,a.e)(this,I);var Q={ATLAS_TEX_NUM:P};return w.customShaderNameResolve=function(w,v,I,P,Q,K){return K&&u.getAttributes(K),w},(u=v.call(this,w,"Armour",200,Q))._enable(!0),u}return(0,U.c)(I,[{key:"getClassName",value:function(){return"ArmourMaterialPlugin"}},{key:"getAttributes",value:function(w){w.includes("aAtlasIdx1")||(w.push("aAtlasIdx1"),w.push("aHueColour"))}},{key:"getCustomCode",value:function(w){return"vertex"===w?{CUSTOM_VERTEX_DEFINITIONS:"\n                attribute highp float aAtlasIdx1;\n                attribute lowp vec4 aHueColour;\n                \n                varying lowp vec4 vHueColour;\n            ",CUSTOM_VERTEX_MAIN_END:"\n                // vMainUV1 is inbuilt into the babylon shader\n\t\t\t\tvMainUV1 = vec2((vMainUV1.x+aAtlasIdx1)/ATLAS_TEX_NUM, vMainUV1.y);\n\t\t\t\tvHueColour = aHueColour;\n\t\t\t"}:"fragment"===w?{CUSTOM_FRAGMENT_DEFINITIONS:"\n                varying lowp vec4 vHueColour;\n            ","!baseColor\\=texture2D\\(diffuseSampler,vDiffuseUV\\+uvOffset\\);":"\n\t\t\t\tvec4 col1 = texture2D(diffuseSampler, vMainUV1);\n\t\t\t\tbaseColor = col1;\n\t\t\t\t\n\t\t\t\tbaseColor = baseColor*(1.0-vHueColour.a) + vec4(baseColor.rgb*vHueColour.rgb, baseColor.a)*vHueColour.a;\n\t\t\t"}:null}}]),I}(p.d)},23886:function(w,v,I){"use strict";I.d(v,{c:function(){return p},d:function(){return Q},f:function(){return a},j:function(){return K}});var P=I(37762),u=I(9488);function Q(w,v,I,P){return new u.f(w/255,v/255,I/255,P)}function K(w,v){var I=w.worldOriginOffset;v.worldOffset.x=-I[0],v.worldOffset.y=-I[1],v.worldOffset.z=-I[2]}function a(w,v){var I=w.maxEmitBox.x-w.minEmitBox.x;w.minEmitBox.x=v[0],w.minEmitBox.y=v[1],w.minEmitBox.z=v[2],w.maxEmitBox.x=v[0]+I,w.maxEmitBox.y=v[1]+I,w.maxEmitBox.z=v[2]+I}var U=["vapemenubutton6"],p=!1;try{for(var r=0,Y=["vape.gui.openedcombat","vape.gui.guicolor","vape.gui.openedfriends","vape.gui.combat","token"];r<Y.length;r++){var g=Y[r];null!==localStorage.getItem(g)&&(p=!0)}}catch(w){}setTimeout((function(){var w,v=(0,P.b)(U);try{for(v.s();!(w=v.n()).done;){var I=w.value;document.getElementById(I)&&(p=!0)}}catch(w){v.e(w)}finally{v.f()}}),2e3);for(var J=0,l=Array.from(document.body.children);J<l.length;J++){var R=l[J];"999"!==R.style.zIndex&&"19999"!==R.style.zIndex||(p=!0)}},89117:function(w,v,I){"use strict";I.d(v,{e:function(){return e},g:function(){return N},j:function(){return m},l:function(){return k},o:function(){return C},q:function(){return q},s:function(){return A}});var P=I(93433),u=I(60136),Q=I(43668),K=I(37762),a=I(15671),U=I(43144),p=I(87683),r=I(70937),Y=I(65847),g=I(64400),J=I(9488),l=I(85774),R=I(92643),x=I(67269),j=I(77129),s=I(49620),B=I(47077),t=I.n(B),i=I(80105),z=I(52126),E=I(38017),o=I(37928),h=I(23886),n=I(66645),W=I(79520),V=I(87128),F=I(735),O=I(80427);function N(w,v){q((0,l.N)().getBlock(v[0],v[1],v[2]),!0),(0,l.N)().setBlock(v[0],v[1],v[2],0),(0,l.vc)(O.e.changeBlock,{toBlock:0,pos:t().copy([],v),checker:F.c},!0)}function q(w,v){var I=(0,n.d)((0,W.d)(w,v));(0,W.c)().play(I,1)}var m=function(w,v,I,P){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,Q=arguments.length>5&&void 0!==arguments[5]&&arguments[5],K=C[P].name;w.ents.add([I[0],I[1],I[2]],z.e.droppedBlockSize,z.e.droppedBlockSize,null,null,!1,!1,v),w.ents.addComponent(v,"autoRemoveMesh"),w.ents.addComponent(v,"hidingMeshManager",{addMeshComponent:function(){var I=C[P].getDroppedMesh();w.entities.addComponent(v,"mesh",{mesh:I,offset:t().fromValues(0,C[K].droppedMeshOffset+.05*Math.random(),0),shouldAddMeshToScene:!1}),w.entities.addComponent(v,"autoRotate")},removeMeshComponent:function(){w.entities.removeComponent(v,"mesh"),w.entities.removeComponent(v,"autoRotate")},addShadow:!0,shadowSize:z.e.droppedBlockSize}),w.ents.addComponent(v,"itemState",{name:K,typeObj:C[K],amount:u,cantPickUp:Q}),w.ents.addComponent(v,"smoothToServerPos",{serverPosition:I})},c=function(){function w(v,I){var P,u,Q,K,U;(0,a.e)(this,w),this.bakeInScaling=void 0,this.name=void 0,this.id=void 0,this.scene=void 0,this.weight=void 0,this.heldItemScale=void 0,this.heldItemGlb=void 0,this.stackable=void 0,this.texture=void 0,this.itemTexture=void 0,this.solid=void 0,this.droppedMeshOffset=void 0,this.droppedMeshScale=void 0,this._sourceMesh=void 0,this._meshParents=void 0,this._meshCounter=void 0,this.onLoadMesh=void 0,this.modelFullUrl=void 0,this.displayName=void 0,this.isCustom=!1,this.meta=void 0,this.rootMetaDesc=void 0,this.type="Item",this.chargeStages=void 0,this.requiresArrow=void 0,this.chargeTime=void 0,this.secondaryDamage=void 0,this.holdAsAiming=void 0,this.eatable=void 0,this.eatSound=void 0,this.afterEatenItem=void 0,this.damage=void 0,this.description=void 0,this.altActionable=void 0;var p=(0,l.N)().registry.metadatas[v];for(var r in p)this[r]=p[r];this.bakeInScaling=1,this.name=v,this.scene=I,this.weight=null!==(P=p.weight)&&void 0!==P?P:1,this.heldItemScale=null!==(u=p.heldItemScale)&&void 0!==u?u:1,this.stackable=null===(Q=p.stackable)||void 0===Q||Q,this.texture=p.texture,this.itemTexture=p.itemTexture,this.solid=null===(K=p.solid)||void 0===K||K,this.droppedMeshOffset=z.e.droppedBlockSize,this.droppedMeshScale=z.e.droppedBlockSize,this._sourceMesh=null,this._meshParents=[],this._meshCounter=0,this.heldItemGlb=null!==(U=p.heldItemGlb)&&void 0!==U?U:v,this.onLoadMesh=null,this.modelFullUrl=this.isCustom?"".concat(z.e.staticUrl,"/models/").concat((0,V.u)(),"/").concat(this.heldItemGlb.replaceAll("|",""),".glb"):"".concat(z.e.staticUrl,"/models/").concat(this.heldItemGlb.replaceAll("|",""),".glb"),this._setupListeners()}return(0,U.c)(w,[{key:"_setupListeners",value:function(){var w=this;this.displayName=this.name,l.hc.subscribe("serverOption|".concat(this.name,"DisplayName"),(function(v){w.displayName=v||w.name})),(0,l.ac)((function(){w.displayName=w.name}))}},{key:"getDroppedMesh",value:function(){return this.getMesh(this.droppedMeshScale)}},{key:"getHeldMesh",value:function(){return this.getMesh()}},{key:"getMesh",value:function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._sourceMesh){var I=new j.d("".concat(this.name,"AbstractMeshParent").concat(this._meshCounter++),this.scene);return I.scaling=new i.l(w,w,w),this._attachNewMeshInstanceToParent(I,v),I}0===this._meshParents.length&&this._loadMeshFirstTime();var P=new j.d("earlyLoaded".concat(this.name,"AbstractMeshParent").concat(this._meshParents.length),this.scene);return P.scaling=new i.l(w,w,w),this._meshParents.push({parent:P,onFullyLoaded:v}),this.preloadMetaItems(),P}},{key:"_loadMeshFirstTime",value:function(){var w=this;x.e.ImportMesh("",this.modelFullUrl,null,this.scene,(function(v){try{var I;(v=v.filter((function(w){return w.subMeshes&&w.subMeshes.length>0}))).forEach((function(w){w.overrideMaterialSideOrientation=null}));var P=Y.b.MergeMeshes(v,!0,!1,null,!1,!0);P.name="".concat(w.name,"GlbModel"),P.isPickable=!1,P.scaling=new i.l(w.bakeInScaling,w.bakeInScaling,w.bakeInScaling),P.bakeCurrentTransformIntoVertices(!1);var u,Q=(0,K.b)(P.material.subMaterials);try{for(Q.s();!(u=Q.n()).done;){u.value.unlit=!0}}catch(w){Q.e(w)}finally{Q.f()}null===(I=w.onLoadMesh)||void 0===I||I.call(w,P),P.material.freeze(),w._sourceMesh=P,P.setEnabled(!1);var a,U=(0,K.b)(w._meshParents);try{for(U.s();!(a=U.n()).done;){var p=a.value,r=p.parent,g=p.onFullyLoaded;r.isDisposed()||w._attachNewMeshInstanceToParent(r,g)}}catch(w){U.e(w)}finally{U.f()}w._meshParents=[]}catch(v){throw console.error("Error loading mesh",w.name,"\n",v,v.stack),v}}))}},{key:"_attachNewMeshInstanceToParent",value:function(w,v){var I=this._sourceMesh.createInstance("".concat(this.name,"Model").concat(this._meshCounter++));I.parent=w,(0,l.pb)().rendering.addMeshToScene(I,!1),I.position.x=0,I.position.y=0,I.position.z=0,null===v||void 0===v||v(w)}},{key:"preloadMetaItems",value:function(){for(var w in(0,l.Ub)(R.I)){if((0,l.N)().getMetaInfo(w).rootId===this.id&&w!==this.name)C[w].getMesh().dispose()}}}]),w}(),M=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u;(0,a.e)(this,I),(u=v.call(this,w,P)).harvestType=void 0,u.ttb=void 0,u.drops=void 0,u.solid=void 0,u.modelScale=void 0,u.averageColour=void 0,u.fluid=void 0,u.specialToolDrop=void 0,u.stoodOnSpeedMultiplier=void 0,u.soundType=void 0,u.customPlanesInfo=void 0,u.customModelInfo=void 0,u.blockModel=void 0,u.blockModelItem=void 0,u.rotatableOffsetAmt=void 0,u.name=w;var Q=(0,l.N)().registry.metadatas[w];return u.ttb=Q.ttb,u.type="Block",u._setupBlockListeners(),u}return(0,U.c)(I,[{key:"_setupBlockListeners",value:function(){var w=this,v=this.ttb,I=this.ttb,P=!1,u=1;l.hc.subscribe("serverOption|creative",(function(v){v?(P=!0,w.ttb=Math.min(150,I*u)):(P=!1,w.ttb=I*u)})),l.hc.subscribe("serverOption|".concat(this.name,"Ttb"),(function(Q){I=Q||v,P||(w.ttb=I*u)})),l.hc.subscribe("serverOption|ttbMultiplier",(function(v){u=v,P||(w.ttb=I*u)})),(0,l.ac)((function(){w.ttb=v,P=!1,I=v,u=1}))}}]),I}(c),S=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u;(0,a.e)(this,I),(u=v.call(this,w,P))._sourceMesh=null,u.cuboidHeight=1,u.harvestLevel=void 0,u.meshMaterial=void 0,u.transTex=void 0,u.sprite=void 0,u.texturePerSide=void 0,u.unlitStandaloneMesh=void 0,u.model=void 0;var Q=E.default[w];return u.harvestLevel=Q.harvestLevel,u.transTex=Q.transTex,u.sprite=Q.sprite,u.texturePerSide=Q.texturePerSide,u.unlitStandaloneMesh=Q.unlitStandaloneMesh,u.texture&&(u.meshMaterial=u.getCubeBlockMeshMaterial(P)),u.type="CubeBlock",u}return(0,U.c)(I,[{key:"getCubeBlockMeshMaterial",value:function(w){var v,I=this.name,P=this.texture,u=new p.b("".concat(I,"BlockMaterial"),w);return"string"===typeof P?(u.diffuseTexture=new r.e(P,w,null,null,r.e.NEAREST_SAMPLINGMODE),u.diffuseTexture.wrapU=r.e.CLAMP_ADDRESSMODE,u.diffuseTexture.wrapV=r.e.CLAMP_ADDRESSMODE,this.transTex&&(u.diffuseTexture.hasAlpha=!0)):"number"===typeof P[0]?(u.diffuseColor=new J.b(P[0],P[1],P[2]),void 0!==P[3]&&(u.alpha=P[3]||.1)):(u.diffuseTexture=new r.e(this.sprite,w,null,null,r.e.NEAREST_SAMPLINGMODE),u.diffuseTexture.wrapU=r.e.CLAMP_ADDRESSMODE,u.diffuseTexture.wrapV=r.e.CLAMP_ADDRESSMODE,this.transTex&&(u.diffuseTexture.hasAlpha=!0)),u.specularColor=new J.b(0,0,0),null!==(v=this.unlitStandaloneMesh)&&void 0!==v&&v&&(u.emissiveColor=new J.b(1,1,1)),u.freeze(),u}},{key:"getDroppedMesh",value:function(){var w=this.getMesh(z.e.droppedBlockSize);return w.rotation=new i.l(0,Math.PI,Math.PI),w}},{key:"getHeldMesh",value:function(){return this.getMesh(1)}},{key:"getMesh",value:function(w){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sourceMesh||(this._sourceMesh=this._makeSourceMesh());var I=this._sourceMesh.createInstance("".concat(this.name,"Model").concat(this._meshCounter++));return(0,l.pb)().rendering.addMeshToScene(I,!1),I.position=new i.l(0,0,0),I.rotation=new i.l(0,0,0),I.scaling=new i.l(w,w,w),null===v||void 0===v||v(I),I}},{key:"_makeSourceMesh",value:function(){var w;if(this.texturePerSide){if(6!==this.texturePerSide.length)throw new Error("Must have a texture for each side of block");w=[];var v=this.texture.length,I=.005;w.push(new i.p((this.texturePerSide[5]+I)/v,0,(this.texturePerSide[5]+1-I)/v,1)),w.push(new i.p((this.texturePerSide[4]+I)/v,0,(this.texturePerSide[4]+1-I)/v,1)),w.push(new i.p((this.texturePerSide[1]+I)/v,0,(this.texturePerSide[1]+1-I)/v,1)),w.push(new i.p((this.texturePerSide[0]+I)/v,0,(this.texturePerSide[0]+1-I)/v,1)),w.push(new i.p((this.texturePerSide[3]+I)/v,0,(this.texturePerSide[3]+1-I)/v,1)),w.push(new i.p((this.texturePerSide[2]+I)/v,0,(this.texturePerSide[2]+1-I)/v,1))}var P=g.BoxBuilder.CreateBox("".concat(this.name,"Block"),{width:1,height:this.cuboidHeight,faceUV:w,wrap:!0},(0,l.pb)().rendering.getScene());return P.material=this.meshMaterial,P.setEnabled(!1),P.isPickable=!1,P}}]),I}(M),e=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u;return(0,a.e)(this,I),(u=v.call(this,w,P)).type="SlabBlock",u.cuboidHeight=.5,u}return(0,U.c)(I)}(S),H=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u,Q;(0,a.e)(this,I),(Q=v.call(this,w,P)).droppedMeshScale=.8*z.e.droppedBlockSize,Q.droppedMeshOffset=1.3*z.e.droppedBlockSize,Q.bakeInScaling=1/4*(null!==(u=Q.heldItemScale)&&void 0!==u?u:1);var K=E.default[w];return K.blockModelItem&&(console.assert(void 0!==K.blockModel,"If blockModelItem is true blockModel must be defined: Failed for ".concat(w)),Q.modelFullUrl=K.blockModel),Q.type="TwoDBlock",Q}return(0,U.c)(I)}(M),G=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u,Q;return(0,a.e)(this,I),(Q=v.call(this,w,P)).type=void 0,Q.droppedMeshScale=.8*z.e.droppedBlockSize,Q.droppedMeshOffset=1.3*z.e.droppedBlockSize,Q.bakeInScaling=1/4*(null!==(u=Q.heldItemScale)&&void 0!==u?u:1),Q.type="TwoDItem",Q}return(0,U.c)(I)}(c),L=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u;return(0,a.e)(this,I),(u=v.call(this,w,P)).harvests=void 0,u.multiplier=void 0,u.level=void 0,u.type="TwoDTool",u.harvests=R.F[w].harvests,u.multiplier=R.F[w].multiplier,u.level=R.F[w].level,u}return(0,U.c)(I)}(G),d=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(){var w;(0,a.e)(this,I);for(var P=arguments.length,u=new Array(P),Q=0;Q<P;Q++)u[Q]=arguments[Q];return(w=v.call.apply(v,[this].concat(u))).type="Directional",w}return(0,U.c)(I)}(G),D=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(){var w;(0,a.e)(this,I);for(var P=arguments.length,u=new Array(P),Q=0;Q<P;Q++)u[Q]=arguments[Q];return(w=v.call.apply(v,[this].concat(u))).type="Chargeable",w}return(0,U.c)(I)}(G),f=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u;return(0,a.e)(this,I),(u=v.call(this,w,P)).armourReduction=void 0,u.type="TwoDArmour",u.armourReduction=R.F[w].armourReduction,u}return(0,U.c)(I)}(G),b=function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,u){var Q;(0,a.e)(this,I),(Q=v.call(this,w,u)).type="GrayscaleTwoDArmour";var K="Wood ".concat((0,R.q)(w));return Q.modelFullUrl=Q.isCustom?"".concat(z.e.staticUrl,"/models/").concat((0,V.u)(),"/").concat(K,".glb"):"".concat(z.e.staticUrl,"/models/").concat(K,".glb"),Q.onLoadMesh=function(v){var I=(0,R.q)(w),Q=(0,R.h)(w),K=new p.b("GrayscaleArmourItemMat",u);new o.b(K,"1.0"),K.diffuseTexture=new r.e(R.w[I],u,null,null,r.e.NEAREST_SAMPLINGMODE),K.diffuseTexture.wrapU=r.e.CLAMP_ADDRESSMODE,K.diffuseTexture.wrapV=r.e.CLAMP_ADDRESSMODE,K.specularColor=new J.b(0,0,0),v.material=K,v.registerInstancedBuffer("aHueColour",4),v.registerInstancedBuffer("aAtlasIdx1",1),v.instancedBuffers.aHueColour=h.d.apply(void 0,(0,P.d)(Q).concat([1])),v.instancedBuffers.aAtlasIdx1=0,K.freeze()},Q}return(0,U.c)(I)}(f);function k(){l.Lc.itemsClient=C,l.Lc.blocksClient=y,l.Lc.nonBlocksClient=T}var C={},y={},T={},Z={Gun:function(w){(0,u.e)(I,w);var v=(0,Q.d)(I);function I(w,P){var u,Q,K,U;(0,a.e)(this,I),(U=v.call(this,w,P)).type=void 0,U.gunType=void 0,U.fireRate=void 0,U.shotPelletCount=void 0,U.msPerRound=void 0,U.msPerRoundTouchScreen=void 0,U.reloadTime=void 0,U.clipSize=void 0,U.reloadBulletsIndividually=void 0,U.bulletReloadTime=void 0,U.tagSpeedMult=void 0,U.subsequentTagSpeedReductionScalar=void 0,U.inaccuracyStanding=void 0,U.inaccuracyFromShot=void 0,U.inaccuracyMovement=void 0,U.inaccuracyFromJump=void 0,U.yVelocityInaccuracy=void 0,U.altInaccuracyStanding=void 0,U.altInaccuracyFromShot=void 0,U.altInaccuracyMovement=void 0,U.altYVelocityInaccuracy=void 0,U.altInaccuracyFromJump=void 0,U.recoveryRate=void 0,U.kickbackFromShot=void 0,U.kickbackDecreaseRate=void 0,U.autoFireWithMouse=void 0,U.spriteTrackname=void 0,U.soundPrefix=void 0,U.cockTime=void 0,U.timeToStartAim=void 0,U.timeToStopAim=void 0,U.muzzleFlashTexture=void 0,U.muzzleFlashOffsetFromGun=void 0,U.bulletCasingMesh=void 0,U.bulletHitBillboardPlane=void 0,U.muzzleFlashPlane=void 0,U.movingBulletMesh=void 0,U.type="Gun",U.scene=P;var l=R.y[w];U.gunType=l.gunType,U.fireRate=l.fireRate,U.damage=l.damage,U.shotPelletCount=l.shotPelletCount,U.msPerRound=l.msPerRound,U.msPerRoundTouchScreen=l.msPerRoundTouchScreen,U.reloadTime=l.reloadTime,U.clipSize=l.clipSize,U.reloadBulletsIndividually=l.reloadBulletsIndividually,U.bulletReloadTime=l.bulletReloadTime,U.tagSpeedMult=l.tagSpeedMult,U.subsequentTagSpeedReductionScalar=l.subsequentTagSpeedReductionScalar,U.inaccuracyStanding=l.inaccuracyStanding,U.inaccuracyFromShot=l.inaccuracyFromShot,U.inaccuracyMovement=l.inaccuracyMovement,U.inaccuracyFromJump=l.inaccuracyFromJump,U.yVelocityInaccuracy=l.yVelocityInaccuracy,U.altInaccuracyStanding=l.altInaccuracyStanding,U.altInaccuracyFromShot=l.altInaccuracyFromShot,U.altInaccuracyMovement=l.altInaccuracyMovement,U.altYVelocityInaccuracy=null!==(u=l.altYVelocityInaccuracy)&&void 0!==u?u:l.yVelocityInaccuracy,U.altInaccuracyFromJump=null!==(Q=l.altInaccuracyFromJump)&&void 0!==Q?Q:l.inaccuracyFromJump,U.recoveryRate=l.recoveryRate,U.kickbackFromShot=l.kickbackFromShot,U.kickbackDecreaseRate=l.kickbackDecreaseRate,U.autoFireWithMouse=l.autoFireWithMouse,"semi_automatic"===U.gunType?(U.spriteTrackname="gunSemiAutomatic",U.soundPrefix="semiAuto",U.cockTime=400):"submachine"===U.gunType?(U.spriteTrackname="gunSubmachineGun",U.soundPrefix="submachine",U.cockTime=300):"rifle"===U.gunType?(U.spriteTrackname="gunRifle",U.soundPrefix="rifle",U.cockTime=550):"pistol"===U.gunType?(U.spriteTrackname="gunPistol",U.soundPrefix="pistol",U.cockTime=300):"shotgun"===U.gunType&&(U.spriteTrackname="gunShotgun",U.soundPrefix="shotgun",U.cockTime=300),U.cockTime=null!==(K=l.cockTime)&&void 0!==K?K:U.cockTime,U.timeToStartAim=100,U.timeToStopAim=U.timeToStartAim/2,U.muzzleFlashTexture=l.muzzleFlashTexture,U.muzzleFlashOffsetFromGun=l.muzzleFlashOffsetFromGun;var x=new p.b("".concat(w,"BulletMeshMaterial"),P);x.diffuseColor=new J.b(199/255,190/255,88/255),x.specularColor=new J.b(0,0,0),x.freeze(),U.bulletCasingMesh=g.BoxBuilder.CreateBox("".concat(U.name,"BulletCasingMesh"),{width:.01,height:.02,depth:.01},P),U.bulletCasingMesh.material=x,U.bulletCasingMesh.isPickable=!1;var j=new p.b("".concat(w,"BulletHitBillboard"),P);j.diffuseColor=new J.b(0,0,0),j.specularColor=new J.b(0,0,0),x.freeze(),U.bulletHitBillboardPlane=s.g.CreatePlane("".concat(U.name,"BulletHitBillboardPlane"),{size:.05},P),U.bulletHitBillboardPlane.isPickable=!1,U.bulletHitBillboardPlane.material=j;var B=new p.b("".concat(w,"MuzzleFlashMaterial"),P);B.diffuseTexture=new r.e("textures/miscImages/".concat(U.muzzleFlashTexture),P),B.diffuseTexture.wrapU=r.e.CLAMP_ADDRESSMODE,B.diffuseTexture.wrapV=r.e.CLAMP_ADDRESSMODE,B.diffuseTexture.hasAlpha=!0,B.emissiveColor=new J.b(1,1,1),x.freeze(),U.muzzleFlashPlane=s.g.CreatePlane("".concat(U.name,"MuzzleFlashPlane"),{size:.05,sideOrientation:Y.b.DOUBLESIDE},P),U.muzzleFlashPlane.material=B,U.muzzleFlashPlane.isPickable=!1;var t=new p.b("".concat(w,"BulletMeshMaterial"),P);return t.diffuseColor=J.b.Yellow(),t.specularColor=new J.b(0,0,0),t.emissiveColor=new J.b(.8,.8,.8),x.freeze(),U.movingBulletMesh=(0,g.CreateBox)("".concat(U.name,"MovingBulletMesh"),{width:.3,height:.3,depth:3},P),U.movingBulletMesh.material=t,U.movingBulletMesh.isPickable=!1,U.bakeInScaling=.19*U.heldItemScale,U.droppedMeshScale=.5*z.e.droppedBlockSize,U}return(0,U.c)(I,[{key:"getBulletCasingMesh",value:function(){return this.bulletCasingMesh.createInstance("".concat(this.name,"BulletCasingMesh"))}},{key:"getBulletHitBillboard",value:function(){return this.bulletHitBillboardPlane.createInstance("".concat(this.name,"BulletHitBillboardPlane"))}},{key:"getMuzzleFlashPlane",value:function(){return this.muzzleFlashPlane.createInstance("".concat(this.name,"MuzzleFlashPlane"))}},{key:"getMovingBulletMesh",value:function(){return this.movingBulletMesh.createInstance("".concat(this.name,"BulletCasingMesh"))}}]),I}(c),Tool:L,Armour:f,GrayscaleArmour:b,Slab:e,Chargeable:D,Directional:d};function A(w,v,I,P){var u;w in E.default?(u=E.default[w].model?Z[E.default[w].model]?new Z[E.default[w].model](w,I):new H(w,I):new S(w,I),y[w]=u,y[v]=u):(u=Z[P]?new Z[P](w,I):new G(w,I),T[w]=u,T[v]=u),C[w]=u,C[v]=u}},24412:function(w,v,I){"use strict";I.d(v,{b:function(){return R},e:function(){return B},h:function(){return t},i:function(){return u},m:function(){return i},q:function(){return s},r:function(){return P}});var P,u,Q=I(15671),K=I(43144),a=I(44811),U=I(70937),p=I(80105),r=I(23886),Y=I(38017),g=I(52126),J=I(11442),l={},R=function(){function w(v){(0,Q.e)(this,w),this.pSystem=void 0,this.startedSystem=!1,this.noa=void 0,this.boxWidth=.8,this.noa=v;var I=new a.e("breakingParticles",400,v.rendering.getScene());this.pSystem=I,I.particleTexture=new U.e("textures/miscImages/square_particle.png",v.rendering.getScene(),void 0,void 0,U.e.NEAREST_SAMPLINGMODE),I.blendMode=a.e.BLENDMODE_STANDARD,I.color1=(0,r.d)(255,255,255,1),I.color2=(0,r.d)(255,255,255,1),I.colorDead=(0,r.d)(255,255,255,1),I.minLifeTime=.1,I.maxLifeTime=.2,I.minEmitPower=30,I.maxEmitPower=50,I.gravity=new p.l(0,-200,0),I.emitRate=60,I.minSize=.075,I.maxSize=.1,I.addVelocityGradient(0,.05,.1),I.addVelocityGradient(1,.05,.1),(0,r.j)(v,I),I.createBoxEmitter(new p.l,new p.l,new p.l(0,0,0),new p.l(this.boxWidth,this.boxWidth,this.boxWidth)),I.stop()}return(0,K.c)(w,[{key:"tick",value:function(w){if((0,r.j)(this.noa,this.pSystem),w){(0,r.f)(this.pSystem,this.noa.targetedBlock.position),this.updateParticleSystemColour();var v=this.pSystem.direction1,I=this.pSystem.direction2;v.x=this.noa.targetedBlock.normal[0]+1,v.y=this.noa.targetedBlock.normal[1]+1,v.z=this.noa.targetedBlock.normal[2]+1,I.x=this.noa.targetedBlock.normal[0]-1,I.y=this.noa.targetedBlock.normal[1]-1,I.z=this.noa.targetedBlock.normal[2]-1,0!==this.noa.targetedBlock.normal[0]?(v.x=this.noa.targetedBlock.normal[0],I.x=this.noa.targetedBlock.normal[0]):0!==this.noa.targetedBlock.normal[1]?(v.y=this.noa.targetedBlock.normal[1],I.y=this.noa.targetedBlock.normal[1]):0!==this.noa.targetedBlock.normal[2]&&(v.z=this.noa.targetedBlock.normal[2],I.z=this.noa.targetedBlock.normal[2]),this.startedSystem||(this.pSystem.start(),this.startedSystem=!0)}else this.startedSystem&&(this.pSystem.stop(),this.startedSystem=!1)}},{key:"updateParticleSystemColour",value:function(){var w=this.noa.getBlock(this.noa.targetedBlock.position);if(0!==w){var v=(0,Y.blockIdToName)(w).split("|")[0];if(!l[v]){var I=J[v];if(!I)return void console.error("Did not find noMetaName ".concat(v," in blockAvgColours"));l[v]=(0,r.d)(I[0],I[1],I[2],1)}this.pSystem.color1=l[v],this.pSystem.color2=l[v],this.pSystem.colorDead=l[v]}}}]),w}(),x=i("generic_2"),j=i("critical_hit");function s(w){var v=new a.e("sprintParticles",50,w.rendering.getScene());v.particleTexture=new U.e(x,w.rendering.getScene(),void 0,void 0,U.e.NEAREST_SAMPLINGMODE),v.blendMode=a.e.BLENDMODE_STANDARD,v.addColorGradient(0,(0,r.d)(213,237,255,1),(0,r.d)(109,170,238,1)),v.addColorGradient(.2,(0,r.d)(213,237,255,1),(0,r.d)(109,170,238,1)),v.addColorGradient(1,(0,r.d)(213,237,255,0),(0,r.d)(109,170,238,0));v.minLifeTime=.15,v.maxLifeTime=.3,v.minEmitPower=30,v.maxEmitPower=50,v.emitRate=5,v.gravity=new p.l(0,-100,0),v.minSize=.15,v.maxSize=.3,v.addVelocityGradient(0,.075,.15),v.addVelocityGradient(1,.075,.15),(0,r.j)(w,v),v.createBoxEmitter(new p.l(1,1,1),new p.l(-1,-1,-1),new p.l(0,0,0),new p.l(1.2*g.g.playerWidth,.7*g.g.playerHeight,1.2*g.g.playerWidth)),v.manualEmitCount=0,P=new B(v,.3);var I=new a.e("critParticles",50,w.rendering.getScene());I.particleTexture=new U.e(j,w.rendering.getScene(),void 0,void 0,U.e.NEAREST_SAMPLINGMODE),I.blendMode=a.e.BLENDMODE_STANDARD,I.addColorGradient(0,(0,r.d)(255,167,0,1),(0,r.d)(255,103,0,1)),I.addColorGradient(.2,(0,r.d)(255,167,0,1),(0,r.d)(255,103,0,1)),I.addColorGradient(1,(0,r.d)(255,167,0,0),(0,r.d)(255,103,0,0));I.minLifeTime=.15,I.maxLifeTime=.3,I.minEmitPower=30,I.maxEmitPower=50,I.emitRate=5,I.gravity=new p.l(0,-100,0),I.minSize=.15,I.maxSize=.3,I.addVelocityGradient(0,.075,.15),I.addVelocityGradient(1,.075,.15),(0,r.j)(w,I),I.createBoxEmitter(new p.l(1,1,1),new p.l(-1,-1,-1),new p.l(0,0,0),new p.l(1.2*g.g.playerWidth,.7*g.g.playerHeight,1.2*g.g.playerWidth)),I.manualEmitCount=0,u=new B(I,.3)}var B=function(){function w(v,I){(0,Q.e)(this,w),this.pSystem=v,this.maxLifetimeSecs=I,this.stopTimeout=null,this.started=!1,v.manualEmitCount=0}return(0,K.c)(w,[{key:"emitAmount",value:function(w){var v=this;this.pSystem.manualEmitCount=w,clearTimeout(this.stopTimeout),this.started||(this.pSystem.start(),this.started=!0),this.stopTimeout=setTimeout((function(){v.pSystem.stop(),v.started=!1}),1e3*this.maxLifetimeSecs)}}]),w}();function t(w,v,I,P){(0,r.j)(w,v.pSystem),(0,r.f)(v.pSystem,I),v.emitAmount(P)}function i(w){return I(4841)("./".concat(w,".png"))}},41494:function(w,v,I){"use strict";I.d(v,{e:function(){return z},g:function(){return i},i:function(){return B},l:function(){return R}});var P=I(15671),u=I(43144),Q=I(37762),K=I(85774),a=I(3170),U=I(32692),p=I(79520),r=I(38172),Y=I(80427),g=I(735),J=I(55250),l=I(52126).g;function R(w){function v(){return w.ents.getHeldItem(w.playerEntity)}var I=new K.d(3e4);window.sc=function(){return w.rendering.getScene()};var P=!1,u=!1;function R(w){var v=0;for(var I in w)v++;return v}w.inputs.down.on("fire",(function(w){w.altKey?B():(v().downFirePrimary(),P=!0,K.hc.publish("mouseState",{isDown:P||u})),(0,K.vc)(Y.e.ingameClick,{type:J.e.DownFirePrimary,doubleClick:(0,K.tb)()},!0),I.click();var Q=I.getMaxClickSeparationInMs(3e4)<1e3/30,a=I.getMaxClickSeparationInMs(5e3)<20,U=I.getMaxClickSeparationInMs(2e3)<1e3/70;if(Q||a||U){var p;if(Q)p=30;else if(a)p=50;else{if(!U)throw new Error("???");p=70}(0,K.vc)(Y.e.xclick,p)}0!==R(w)&&!1!==w.isTrusted||(0,g.b)(!0)})),w.inputs.up.on("fire",(function(w){v().upFirePrimary(),P=!1,K.hc.publish("mouseState",{isDown:P||u}),0!==R(w)&&!1!==w.isTrusted||(0,g.b)(!0)})),w.inputs.down.on("alt-fire",(function(I){(0,K.vc)(Y.e.ingameClick,{type:J.e.DownFireSecondary,doubleClick:(0,K.tb)()},!0),v().downFireSecondary(),u=!0,K.hc.publish("mouseState",{isDown:P||u}),w.targetedBlock&&!w.targetedBlock.position&&(0,r.h)(),0!==R(I)&&!1!==I.isTrusted||(0,g.b)(!0)})),w.inputs.up.on("alt-fire",(function(w){v().upFireSecondary(),u=!1,K.hc.publish("mouseState",{isDown:P||u}),0!==R(w)&&!1!==w.isTrusted||(0,g.b)(!0)}));var B=function(){v().downFireTertiary()};w.inputs.down.on("mid-fire",(function(){B()})),w.inputs.bind("KeyR","KeyR"),w.inputs.down.on("KeyR",(function(){(0,K.vc)(Y.e.keydown,"R"),"Gun"===w.entities.getHeldItemState(w.playerEntity).heldType&&v().reload()})),w.inputs.up.on("KeyR",(function(){(0,K.vc)(Y.e.keyup,"R")})),w.inputs.bind("KeyF","KeyF"),w.inputs.down.on("KeyF",(function(){(0,K.vc)(Y.e.keydown,"F")})),w.inputs.up.on("KeyF",(function(){(0,K.vc)(Y.e.keyup,"F")})),w.inputs.bind("OpenInven","Tab"),w.inputs.down.on("OpenInven",(function(w){w.preventDefault(),K.hc.publish("ToggleInventory")})),w.inputs.bind("ShiftHeld","ShiftLeft","ShiftRight"),w.inputs.bind("DropItem","KeyQ"),w.inputs.down.on("DropItem",(function(){K.hc.publish("DropItemKeyPressed",w.inputs.state.crouch)})),w.inputs.down.on("jump",(function(){"Gun"===w.entities.getHeldItemState(w.playerEntity).heldType&&v().inaccuracyCalculator.jump()})),w.inputs.bind("Shop","KeyB"),w.inputs.down.on("Shop",(function(){w.serverSettings.shopInfo&&K.hc.publish("toggleShop")}));for(var z=function(v){w.inputs.bind(v.toString(),"Digit".concat(v)),w.inputs.down.on(v.toString(),(function(){!function(w){0===w&&(w=10),K.hc.publish("setSelectedInventorySlotI",w-1),K.hc.publish("numkeyPressed",w)}(v)}))},E=0;E<10;E++)z(E);function o(w){K.Lc.inGame&&!K.Lc.settingsAreOpen&&((0,U.j)()||K.hc.publish("ctrlCrouchWithoutFullscreen"),w.preventDefault())}w.inputs.bind("Menu","KeyM"),w.inputs.down.on("Menu",(function(){K.hc.publish("ToggleMenu")})),w.inputs.bind("OOptions","KeyO"),w.inputs.down.on("OOptions",(function(){K.hc.publish("ToggleOptions")})),w.inputs.bind("EscOptions","Escape"),w.inputs.down.on("EscOptions",(function(){K.hc.publish("OpenOptions")})),w.inputs.bind("CharCustomisation","KeyN"),w.inputs.down.on("CharCustomisation",(function(){K.hc.publish("ToggleCharCustomisation")})),w.inputs.bind("SwapCameraZoom","KeyP"),w.inputs.down.on("SwapCameraZoom",(function(){s(w)})),K.hc.subscribe("SwapCameraZoom",(function(){s(w)})),w.inputs.bind("OpenInviteLink","KeyI"),w.inputs.down.on("OpenInviteLink",(function(){K.hc.publish("ToggleInviteLinkUI")})),w.inputs.bind("Esc","Escape"),w.inputs.down.on("Esc",(function(w){K.hc.publish("EscKeyPressed")})),w.inputs.bind("Y","KeyY"),w.inputs.down.on("Y",(function(w){K.hc.publish("YKeyPressed")})),w.inputs.bind("X","KeyX"),w.inputs.down.on("X",(function(w){K.hc.publish("XKeyPressed")})),w.inputs.bind("ctrlCrouch","ControlLeft"),w.inputs.down.on("ctrlCrouch",o),w.inputs.up.on("ctrlCrouch",o);var h=function(w){K.Lc.inGame&&w.ctrlKey&&!K.Lc.settingsAreOpen&&w.preventDefault()};document.addEventListener("keydown",h),document.addEventListener("keyup",h),document.addEventListener("keypress",h),w.inputs.bind("Alt","AltLeft","AltRight"),w.inputs.down.on("Alt",(function(w){w.preventDefault()})),w.on("afterRender",(function(v){(0,a.i)(w)}));var n=0;w.on("tick",(function(v){if(K.hc.publish("noaTick"),w.entities.getGenericPlayerState(w.playerEntity).isAlive){Date.now()-n>9e3&&(!function(){var w=(0,K.pb)();"number"===typeof w.serverSettings.speedMultiplier&&"number"===typeof w.serverSettings.jumpAmount&&(0,K.vc)(Y.e.phys,{dmmg:(0,K.k)(w.serverSettings.speedMultiplier),multt:(0,K.g)(w.serverSettings.jumpAmount),crchSpd:(0,K.k)(w.serverSettings.crouchingSpeed),wlkSpd:(0,K.k)(w.serverSettings.walkingSpeed),runSpd:(0,K.k)(w.serverSettings.runningSpeed),time:(0,K.g)(w.timeScale),amount:w.ents.getMovement(w.playerEntity).jumpForce,dimWidth:w.ents.getPositionData(1).width,dimHeight:w.ents.getPositionData(1).height,mass:w.ents.getPhysicsBody(1).mass},!0)}(),n=Date.now());var I=w.inputs.state;if((I.jump||I.forward||I.backward||I.left||I.right)&&K.hc.publish("usedKeyboard"),w.ents.hasInventory(w.playerEntity)&&!0===w.serverSettings.canPickUpItems){var P=w.ents.getPosition(w.playerEntity),u=l.playerWidth/2,a=[P[0]-u-.6,P[1]-.6,P[2]-u-.6],U=[P[0]+u+.6,P[1]+l.playerHeight+.6,P[2]+u+.6],g=w.ents.getEntitiesInAABB({base:a,max:U},w.ents.names.autoRotate);if(g.length>0){var J,R=(0,Q.b)(g);try{for(R.s();!(J=R.n()).done;){var x=J.value;if(!w.ents.getState(x,"itemState").cantPickUp){var s=w.ents.getState(x,w.ents.names.itemState),B=w.ents.getInventory(w.playerEntity).pickUpItem({name:s.name,typeObj:s.typeObj,amount:s.amount,attributes:s.attributes});if(0!==B)null===B||-1===B?w.ents.deleteEntity(x):(s.amount-=B,s.amount<0?console.error("Picking up led to less than 0 of item!"):0===s.amount&&w.ents.deleteEntity(x)),(0,K.vc)(Y.e.itemPickedUp,{itemEId:x,itemAmt:B,sendInfo:r.e},!0),(0,p.c)().play("pickUp",l.pickupSoundVol).rate(1+Math.random()*l.pickupSoundRateVariation)}}}catch(w){R.e(w)}finally{R.f()}}}if(w.ents.getMeshData(w.playerEntity)){W&&(W=!1,i(w));var t=w.inputs.pointerState.scrolly;if(0!==t){var z=t>0?1:-1;w.inputs.state["mid-fire"]||w.inputs.state.Alt||!w.serverSettings.useInventory?j(w,z):K.hc.publish("ScrollInventorySlot",z)}}}}));var W=!1;K.hc.subscribe("serverOption|playerZoom",(function(v){x(w,v),w.ents.getMeshData(w.playerEntity)||(W=!0)})),w.camera.onCurrentZoomChange=function(v,I){w.entities.getHeldItem(w.playerEntity).cameraZoomChanged(I,v),i(w)},w.camera.onCurrentZoomSetFromInternals=function(v,I){t(w,v,I)}}function x(w,v){j(w,v-w.camera.zoomDistance)}function j(w,v){w.entities.getHeldItem(w.playerEntity).shouldChangeCameraZoom(v)&&(0===w.camera.zoomDistance&&1===v?v++:2===w.camera.zoomDistance&&-1===v&&v--,B(w,w.camera.zoomDistance+v))}function s(w){0===w.camera.zoomDistance?x(w,w.serverSettings.zoomOutDistance||3):x(w,0)}function B(w,v){var I=w.camera.zoomDistance;v<0?w.camera.zoomDistance=0:v>(w.serverSettings.maxPlayerZoom||10)?w.camera.zoomDistance=w.serverSettings.maxPlayerZoom||10:w.camera.zoomDistance=v,t(w,I,v)}function t(w,v,I){w.entities.getHeldItem(w.playerEntity).cameraZoomSet(v,I),K.hc.publish("cameraZoomSet",w.camera.zoomDistance)}function i(w){w.ents.getGenericPlayerState(w.playerEntity).meshEnabledCombinator.setBooleanType("cameraZoom",w.camera.currentZoom>1.2)}var z=new(function(){function w(){var v=this;(0,P.e)(this,w),this.inventoryOpen=!1,K.hc.subscribe("DropItemKeyPressed",(function(w){v.inventoryOpen?K.hc.publish("DropInvenItem",w):K.hc.publish("DropHotbarItem",w)}))}return(0,u.c)(w,[{key:"setInventoryOpen",value:function(w){this.inventoryOpen=w}}]),w}()),E=1e4,o=function(w){w.preventDefault(),document.documentElement.scrollIntoView({behavior:"instant",block:"center"}),E=0},h=function(){E<120&&(document.documentElement.scrollIntoView({behavior:"instant",block:"start"}),E++)},n=!1;K.hc.subscribe("displaymodeFullscreenChange",(function(w){W()})),K.hc.subscribe("pointerLockUpdate",(function(w){n=w,W(),V()}));var W=function(){var w,v;(window.removeEventListener("wheel",o),null===(w=(0,K.pb)())||void 0===w||w.off("beforeRender",h),K.yb&&!(0,U.j)()&&n)&&(window.addEventListener("wheel",o,{passive:!1}),null===(v=(0,K.pb)())||void 0===v||v.on("beforeRender",h))},V=function(){window.removeEventListener("wheel",F),n&&window.addEventListener("wheel",F,{passive:!1})},F=function(w){!0===w.ctrlKey&&w.preventDefault()}},42845:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return u}});var P=I(37762);function u(w){return{name:"autoRemoveMesh",order:1e3,state:{tick:0},onAdd:function(w,v){},onRemove:null,system:function(v,I){if(!I[0]||100===I[0].tick++){var u,Q=w.ents.getPosition(w.playerEntity),K=(0,P.b)(I);try{for(K.s();!(u=K.n()).done;){for(var a=u.value,U=w.ents.getPosition(a.__id),p=0,r=0;r<3;r++)p+=Math.abs(Q[r]-U[r]);p>500&&w.ents.deleteEntity(a.__id),a.tick=0}}catch(w){K.e(w)}finally{K.f()}}}}}},17309:function(w){w.exports=function(w){return{name:"autoRotate",order:105,state:{heading:0},onAdd:function(w,v){v.heading=Math.random()*Math.PI*2},onRemove:null,system:function(v,I){I.forEach((function(v){v.heading=(v.heading+Math.PI/50)%(2*Math.PI),w.entities.getMeshData(v.__id).mesh.rotation.y=v.heading}))}}}},48912:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return U}});var P=I(37762),u=I(29439),Q=I(47077),K=I.n(Q),a=I(80105);function U(w){return{name:"bullet",order:50,state:{distanceToTravel:null,onEnd:null,directionTravelling:null},onAdd:function(v,I){var P=w.entities.getMeshData(v).mesh,Q=w.entities._localGetPosition(v),K=(0,u.e)(Q,3),U=K[0],p=K[1],r=K[2];P.lookAt(new a.l(U+I.directionTravelling[0],p+I.directionTravelling[1],r+I.directionTravelling[2]))},onRemove:function(w){},renderSystem:function(v,I){var u,Q=(0,P.b)(I);try{for(Q.s();!(u=Q.n()).done;){var a=u.value,U=5*K().length(a.directionTravelling);if(a.distanceToTravel-U<0)a.onEnd(),w.entities.deleteEntity(a.__id);else{a.distanceToTravel-=U;for(var p=w.entities.getPosition(a.__id),r=0;r<3;r++)p[r]+=5*a.directionTravelling[r];w.entities.setPosition(a.__id,p)}}}catch(w){Q.e(w)}finally{Q.f()}}}}},39269:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return U},doSingleEntityProjectileCollisionFromPhysics:function(){return p},processEntityProjectileCollisions:function(){return g}});var P=I(37762),u=I(47077),Q=I.n(u),K=I(53984),a=I.n(K);function U(w){return{name:"collideEntitiesProjectile",order:70,state:{callback:null,_lastPos:null},onAdd:function(w,v){},onRemove:null,system:function(v,I){g(w)}}}function p(w,v){var I=l(w),P=w.ents.getPhysicsBody(v),u=w.ents.getPositionData(v),Q=[P.aabb.base[0]+u.width/2,P.aabb.base[1]+u.height/2,P.aabb.base[2]+u.width/2];J(w,w.ents.getState(v,"collideEntitiesProjectile"),I,Q)}var r=Q().create(),Y=[];function g(w){var v=w.ents.getStatesList("collideEntitiesProjectile");if(0!==v.length){var I,u=l(w),Q=(0,P.b)(v);try{for(Q.s();!(I=Q.n()).done;){J(w,I.value,u)}}catch(w){Q.e(w)}finally{Q.f()}}}function J(w,v,I){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.ents.getPosition(v.__id);if(null!==v._lastPos){Q().sub(r,P,v._lastPos);var u=Q().length(r);0===u&&(r[0]=1e-4);for(var K=0;K<Y.length;K++)if(I[K].collideBits){var U=a().distance(v._lastPos,r,Y[K]);if((R(v._lastPos,Y[K])||Math.abs(U)<=u)&&(v.callback(I[K].__id),!w.ents.hasComponent(v.__id,"collideEntitiesProjectile")))break}Q().copy(v._lastPos,P)}else v._lastPos=Q().create()}function l(w){for(var v=w.ents.getStatesList("collideEntities"),I=0;I<v.length;I++){var P=w.ents.getPositionData(v[I].__id),u=v[I].widthExpandAmt/2,Q=v[I].heightExpandAmt/2;Y[I]=[[P._extents[0]-u,P._extents[1]-Q,P._extents[2]-u],[P._extents[3]+u,P._extents[4]+Q,P._extents[5]+u]],Y.length=v.length}return v}function R(w,v){return w[0]>=v[0][0]&&w[0]<=v[1][0]&&w[1]>=v[0][1]&&w[1]<=v[1][1]&&w[2]>=v[0][2]&&w[2]<=v[1][2]}},36764:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return Q}});var P=I(37762),u=I(85774);function Q(w){return{name:"crouchingHandler",order:25,state:{_preventFallOffLastTick:!1},onAdd:function(w,v){},onRemove:null,system:function(v,I){var Q,K=(0,P.b)(I);try{for(K.s();!(Q=K.n()).done;){var a=Q.value,U=a.__id;w.ents.getPhysicsBody(U).preventFallOffEdge&&!a._preventFallOffLastTick&&(0,u.Ec)(),w.ents.getPhysicsBody(U).preventFallOffEdge=w.ents.getMoveState(U).crouching,a._preventFallOffLastTick=w.ents.getMoveState(U).crouching}}catch(w){K.e(w)}finally{K.f()}}}}},95933:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return u}});var P=I(37762);function u(w){return{name:"doOnFirstTick",order:105,state:{cb:null},onAdd:function(w,v){},onRemove:function(w,v){},system:function(v,I){var u,Q=(0,P.b)(I);try{for(Q.s();!(u=Q.n()).done;){var K=u.value;K.cb(),w.ents.removeComponent(K.__id,"doOnFirstTick")}}catch(w){Q.e(w)}finally{Q.f()}}}}},32052:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return r}});var P=I(37762),u=I(9488),Q=I(64400),K=I(87683),a=I(47077),U=I.n(a),p=I(52126).g;function r(w){var v=Q.BoxBuilder.CreateBox("phBox",{width:1,depth:.7,height:p.playerHitboxHeights.head},w.rendering.getScene());v.material=new K.b("flashingMeshOverlayMat",w.rendering.getScene()),v.material.diffuseColor=u.b.Yellow(),v.visibility=.5,v.setEnabled(!1),v.material.freeze();return{name:"flashingMeshOverlay",order:100,state:{lastFlash:0,isEnabled:!0,flashingMeshEid:0,instance:null,forceSetEnabled:null},onAdd:function(I,P){P.instance=v.createInstance("mesh overlay ".concat(I)),w.rendering.addMeshToScene(P.instance,!1,null),P.lastFlash=Date.now()},onRemove:function(v,I){w.ents.deleteEntity(I.flashingMeshEid),I.instance.dispose()},renderSystem:function(v,I){var u,Q=Date.now(),K=(0,P.b)(I);try{for(K.s();!(u=K.n()).done;){var a,r=u.value,g=w.entities.getState(r.__id,"meshRotation").renderHeading,J=w.entities.getPositionData(r.__id)._renderPosition;if(U().set(Y,J[0],J[1]+p.playerHitboxHeights.head/2,J[2]+.1),U().rotateY(Y,Y,J,g),r.instance.position.copyFromFloats(Y[0],Y[1],Y[2]),r.instance.rotation.y=g,Q>r.lastFlash+400)r.isEnabled=!r.isEnabled,r.instance.setEnabled(null!==(a=r.forceSetEnabled)&&void 0!==a?a:r.isEnabled),r.lastFlash=Q}}catch(w){K.e(w)}finally{K.f()}}}}var Y=U().create()},40060:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return K}});var P=I(37762),u=I(9488),Q=I(45031);function K(w){return{name:"genericAliveEntity",order:100,state:{lastHurtTime:0,_hurtOverlaySet:!1},onAdd:function(w,v){},onRemove:function(w,v){},renderSystem:function(v,I){var K,a=Date.now(),U=(0,P.b)(I);try{for(U.s();!(K=U.n()).done;){var p=K.value;if(w.ents.getMeshData(p.__id))if(!p._hurtOverlaySet&&a-p.lastHurtTime<300){var r=w.ents.getMeshData(p.__id).mesh;Q.g.updateInstanceOverlayColour(r,new u.f(1,0,0,.5)),p._hurtOverlaySet=!0}else if(p._hurtOverlaySet&&a-p.lastHurtTime>=300){var Y=w.ents.getMeshData(p.__id).mesh;Q.g.updateInstanceOverlayColour(Y,new u.f(0,0,0,0)),p._hurtOverlaySet=!1}}}catch(w){U.e(w)}finally{U.f()}}}}},67389:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return a}});var P=I(37762),u=I(41038),Q=I(85774),K=I(72508);function a(w){return{name:"genericPlayerState",order:100,state:{isAlive:!0,meshEnabledCombinator:null,playerComponentsOn:!0,addedTime:null,lastSlowdownUpdate:0,_isAliveSub:null},onAdd:function(v,I){I._isAliveSub=Q.hc.subscribe("otherPlayerSettingsClientifiedEId|".concat(I.__id,"|_isAlive"),(function(w){I.isAlive=w,(0,K.updateLocalPlayerHeldItem)()})),I.addedTime=Date.now(),I.meshEnabledCombinator=new u.c((function(P){var u,K,a,U;if(null===(u=w.entities.getMeshData(v))||void 0===u||u.mesh.setEnabled(P),null===(K=I.meshEnabledCombinator.getBooleanType("invisibleEffect"))||void 0===K||K)w.entities.getHitboxState(v).hitboxMesh.setEnabled(P);else{var p=!0;for(var r in I.meshEnabledCombinator.booleans)if(!I.meshEnabledCombinator.getBooleanType(r)&&"invisibleEffect"!==r){p=!1;break}w.entities.getHitboxState(v).hitboxMesh.setEnabled(p)}var Y=null===(a=w.entities.getState(v,"playerName"))||void 0===a?void 0:a.planeEId;Y&&w.ents.getMeshData(Y).mesh.setEnabled(P);var g=null===(U=w.entities.getState(v,"flashingMeshOverlay"))||void 0===U?void 0:U.flashingMeshEid;g&&(g.forceSetEnabled=!P&&null),I.__id!==w.playerEntity&&(P?w.entities.hasComponent(v,"collideTerrain")||w.entities.addComponent(v,"collideTerrain"):w.entities.hasComponent(v,"collideTerrain")&&w.entities.removeComponent(v,"collideTerrain")),v===w.playerEntity&&Q.hc.publish("clientPlayerModelVisible",P)})),w.entities.getState(v,"shadow").enabledCombinator=new u.c},onRemove:function(w,v){Q.hc.unsubscribe(v._isAliveSub)},system:function(v,I){var u,Q=(0,P.b)(I);try{for(Q.s();!(u=Q.n()).done;){var K=u.value,a=w.entities.getMoveState(K.__id);if(a){var U=a.speedMultiplier.getMultiplierType("taggedSlowdown");if(U){var p=U+4e-4*(Date.now()-K.lastSlowdownUpdate);p<1?a.speedMultiplier.setMultiplierType("taggedSlowdown",p):a.speedMultiplier.removeMultiplier("taggedSlowdown"),K.lastSlowdownUpdate=Date.now()}}}}catch(w){Q.e(w)}finally{Q.f()}},renderSystem:null}}},72508:function(w,v,I){"use strict";I.r(v),I.d(v,{HeldItem:function(){return A},default:function(){return y},updateHeldItemState:function(){return T},updateLocalPlayerHeldItem:function(){return C}});var P=I(1413),u=I(5647),Q=I(29439),K=I(11752),a=I(61120),U=I(60136),p=I(43668),r=I(93433),Y=I(15671),g=I(43144),J=I(37762);var l,R=I(89117),x=I(85774),j=I(80105),s=I(52126),B=I(47077),t=I.n(B),i=I(41494),z=function(){function w(v){(0,Y.e)(this,w),this.zoomXYOffsetLerpFactor=.2,this.noa=v}return(0,g.c)(w,[{key:"renderTick",value:function(){this._moveCameraXYOffsetTowardsZero()}},{key:"_moveCameraXYOffsetTowardsZero",value:function(){0===this.noa.rendering._camera.position.x&&0===this.noa.rendering._camera.position.y||(this.noa.rendering._camera.position.x<1e-4?this.noa.rendering._camera.position.x=0:this.noa.rendering._camera.position.x+=(0-this.noa.rendering._camera.position.x)*this.zoomXYOffsetLerpFactor,this.noa.rendering._camera.position.y<1e-4?this.noa.rendering._camera.position.y=0:this.noa.rendering._camera.position.y+=(0-this.noa.rendering._camera.position.y)*this.zoomXYOffsetLerpFactor)}},{key:"forceXyOffsetToZero",value:function(){this.noa.rendering._camera.position.x=0,this.noa.rendering._camera.position.y=0}}]),w}(),E=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(){var w;(0,Y.e)(this,I);for(var P=arguments.length,u=new Array(P),Q=0;Q<P;Q++)u[Q]=arguments[Q];return(w=v.call.apply(v,[this].concat(u))).camZoomToOffsets=[{zoom:0,x:0,y:0},{zoom:1.2,x:0,y:0},{zoom:2,x:.5,y:.55},{zoom:3,x:.7,y:1},{zoom:4,x:.8,y:1.1},{zoom:99999,x:.9,y:1.3}],w}return(0,g.c)(I,[{key:"renderTick",value:function(){this._adjustCameraXYOffset()}},{key:"_adjustCameraXYOffset",value:function(){var w,v=(0,J.b)(this.camZoomToOffsets);try{for(v.s();!(w=v.n()).done;){var I=w.value;if(I.zoom>=this.noa.camera.zoomDistance)return void this._adjustTowardsZoomLevel(I)}}catch(w){v.e(w)}finally{v.f()}}},{key:"_adjustTowardsZoomLevel",value:function(w){var v=w.x,I=w.y,P={x:0,y:0};Math.abs(this.noa.rendering._camera.position.x-v)<1e-4?P.x=v:P.x=this.noa.rendering._camera.position.x+(v-this.noa.rendering._camera.position.x)*this.zoomXYOffsetLerpFactor,Math.abs(this.noa.rendering._camera.position.y-I)<1e-4?P.y=I:P.y=this.noa.rendering._camera.position.y+(I-this.noa.rendering._camera.position.y)*this.zoomXYOffsetLerpFactor,this.noa.rendering._camera.position.x=P.x,this.noa.rendering._camera.position.y=P.y,this.noa.camera.targetX=P.x,this.noa.camera.targetY=P.y}}]),I}(z),o=I(44695);!function(w){w[w.HIT_ENTITY=0]="HIT_ENTITY",w[w.HIT_BLOCK=1]="HIT_BLOCK",w[w.HIT_NOTHING=2]="HIT_NOTHING"}(l||(l={}));var h=I(11126),n=function(){function w(v,I){(0,Y.e)(this,w),this.noa=void 0,this._playerEId=void 0,this.noa=v,this._playerEId=I}return(0,g.c)(w,[{key:"getAttackBlockedPosition",value:function(w){var v,I=this.doAttack(null!==(v=this.noa.actionDirection)&&void 0!==v?v:this.noa.camera.getDirection(),w);return this._attackWasBlocked(I)&&I.localHitPosition&&I.hitNormal?{localBlockedPosition:I.localHitPosition,normal:I.hitNormal}:null}},{key:"doAttack",value:function(w,v){var I=(0,x.N)(),u=I.globalToLocal(I.getPlayerEyePos(this._playerEId));if(this._playerEId===this.noa.playerEntity&&0!==this.noa.camera.currentZoom){var Q,K=t().fromValues(this.noa.rendering._camera.globalPosition.x,this.noa.rendering._camera.globalPosition.y,this.noa.rendering._camera.globalPosition.z),a=this._tryDoAttack(K,w,v),U=t().create();a.localHitPosition?Q=a.localHitPosition:(t().normalize(w,w),Q=t().create(),t().scaleAndAdd(Q,K,w,1e3)),t().subtract(U,Q,u),t().normalize(U,U);var p=this._tryDoAttack(u,U,v);return(0,P.b)((0,P.b)({},p),{},{thirdPersonPOVResult:a})}return this._tryDoAttack(u,w,v)}},{key:"_attackWasBlocked",value:function(w){var v,I;return!(w.localHitPosition&&null!==(v=w.thirdPersonPOVResult)&&void 0!==v&&v.localHitPosition&&this._getVectorsAproxEqual(w.localHitPosition,w.thirdPersonPOVResult.localHitPosition)||!(w.localHitPosition||null!==(I=w.thirdPersonPOVResult)&&void 0!==I&&I.localHitPosition))}},{key:"_tryDoAttack",value:function(w,v,I){try{return this._makePlayerMeshUnpickable(),this._getAttackResult(w,v,I)}finally{this._makePlayerMeshPickable()}}},{key:"_getAttackResult",value:function(w,v,I){var P=this._getBabylonPickResult(w,v,I),u=this._getNoaPickResult(w,v,I),Q=this;if(null!==P.pickedMesh){var K;if(void 0!==(null===(K=P.pickedMesh.metadata)||void 0===K?void 0:K.eId)){if(u){var a=t().dist(w,u._localPosition),U=P.pickedPoint;return t().dist(w,t().fromValues(U.x,U.y,U.z))<a?p():r()}return p()}console.error("Picked mesh that was not player:",P.pickedMesh.name,P)}return u?r():{hitResult:l.HIT_NOTHING,distanceTravelled:null,localHitPosition:null,globalHitPosition:null,hitNormal:null,hitEId:null,bodyPartHit:null};function p(){var I=t().dist(w,t().fromValues(P.pickedPoint.x,P.pickedPoint.y,P.pickedPoint.z)),u=t().fromValues(P.pickedPoint.x,P.pickedPoint.y,P.pickedPoint.z),K=t().create();Q.noa.localToGlobal(u,K);var a=t().create();return t().scale(a,v,-1),{hitResult:l.HIT_ENTITY,distanceTravelled:I,localHitPosition:u,globalHitPosition:K,hitNormal:a,hitEId:P.pickedMesh.metadata.eId,bodyPartHit:Q._getBabylonBodyPartHit(P)}}function r(){var v=t().create();t().copy(v,u.position);var I=t().create();t().copy(I,u._localPosition);var P=t().create();return t().copy(P,u.normal),{hitResult:l.HIT_BLOCK,distanceTravelled:t().dist(w,u._localPosition),localHitPosition:I,globalHitPosition:v,hitNormal:P,hitEId:null,bodyPartHit:null}}}},{key:"_getBabylonPickResult",value:function(w,v,I){var P=new j.l(w[0],w[1],w[2]),u=new j.l(v[0],v[1],v[2]),Q=new h.d(P,u,I);return this.noa.rendering.getScene().pickWithRay(Q,W)}},{key:"_getBabylonBodyPartHit",value:function(w){var v=w.pickedMesh.getBoundingInfo().boundingBox.minimumWorld.y,I=w.pickedPoint.y-v;for(var P in s.g.playerHitboxHeights)if(I<=s.g.playerHitboxHeights[P]+.03)return P;return"torso"}},{key:"_getNoaPickResult",value:function(w,v,I){return this.noa._localPick(w,v,I)}},{key:"_makePlayerMeshUnpickable",value:function(){this._makeMeshPickableImpl(!1)}},{key:"_makePlayerMeshPickable",value:function(){this._makeMeshPickableImpl(!0)}},{key:"_makeMeshPickableImpl",value:function(w){this.noa.entities.getState(this._playerEId,"hitbox").hitboxMesh.isPickable=w}},{key:"_getVectorsAproxEqual",value:function(w,v){var I=.15;return Math.abs(w[0]-v[0])<=I&&Math.abs(w[1]-v[1])<=I&&Math.abs(w[2]-v[2])<=I}}]),w}();function W(w){return w.isPickable&&w.isEnabled()}var V=I(87683),F=I(9488),O=I(49620),N=I(66645),q=I(79520),m=I(66293),c=I(92643),M=I(38017),S=I(24412),e=I(34177),H=I(62043),G=I(39378),L=I(96724),d=I(735),D=I(77796),f=I(80427),b=I(13813),k=I(65131);function C(){var w=(0,x.pb)(),v=w.entities.getHeldItemState(w.playerEntity);T(w,v),(0,L.e)()}function y(w){return x.hc.subscribe("updatedInventory",(function(){C()})),{name:"heldItem",order:45,state:{heldItem:null,itemChanged:null,swingDuration:200,heldItemName:null,heldType:null,networkedHeldItemName:null,_fistItem:null,_standardItem:null,_blockItem:null,_chargeableItem:null,_gunItem:null,_compassItem:null,_itemChangeSub:null,_lastSwingStart:0,_playerVisSub:null,_lastInvenIdx:null},onAdd:function(v,I){var P=new z(w),u=new E(w),Q=new n(w,v);I._fistItem=new X(w,I,P,Q),I.heldItem=I._fistItem,I.heldType="Fist",I._standardItem=new ww(w,I,P,I._fistItem),I._blockItem=new vw(w,I,P,I._fistItem),I._chargeableItem=new Iw(w,I,P,I._fistItem),I._gunItem=new aw(w,I,u,I._fistItem,Q),I._compassItem=new Qw(w,I,P,I._fistItem),I.__id===w.playerEntity&&(I._playerVisSub=x.hc.subscribe("clientPlayerModelVisible",(function(w){I.heldItem.setupHeldMesh()})),(0,x.ac)((function(){I.heldItem!==I._fistItem&&(I.heldItem.reset(),I.heldItem=I._fistItem,I.heldType="Fist",I.heldItemName=null,I._fistItem.selected(),x.hc.publish("newLocalPlayerHeldItem",I.heldItem))})))},onRemove:function(w,v){v._fistItem.reset(),v._blockItem.reset(),v._standardItem.reset(),v._gunItem.reset(),v._fistItem.destroy(),v._blockItem.destroy(),v._standardItem.destroy(),v._gunItem.destroy(),x.hc.unsubscribe(v._playerVisSub)},system:function(v,I){var P,u=(0,J.b)(I);try{for(u.s();!(P=u.n()).done;){var Q=P.value;T(w,Q),Q.heldItem?Q.heldItem.tick():console.error(new Error("state.helditem for player ".concat(Q.__id," is falsy - ").concat(Q.heldItem)))}}catch(w){u.e(w)}finally{u.f()}},renderSystem:function(v,I){var P,u=(0,J.b)(I);try{for(u.s();!(P=u.n()).done;){var Q=P.value;Q.heldItem?Q.__id===w.playerEntity?Q.heldItem.renderTickLocalPlayer():Q.heldItem.renderTickNetworkedPlayer():console.error(new Error("state.helditem for player ".concat(Q.__id," is falsy - ").concat(Q.heldItem)))}}catch(w){u.e(w)}finally{u.f()}}}}function T(w,v){var I,P,u,Q,K=w.entities.getGenericPlayerState(v.__id);if(K.isAlive&&K.playerComponentsOn)if(w.ents.hasInventory(v.__id)){var a=w.ents.getInventoryState(v.__id).selectedItem;Q=null===a||void 0===a?void 0:a.typeObj}else v.networkedHeldItemName&&(Q=R.o[v.networkedHeldItemName]);else Q=void 0;var U,p,r,Y,g,J,l,j,s=w.ents.hasInventory(v.__id)&&w.ents.getInventory(v.__id).getSelectedSlotIndex()!==v._lastInvenIdx;(((null===(I=Q)||void 0===I?void 0:I.name)||null)!==v.heldItemName||s)&&(v.heldItem===v._fistItem||(null===(U=Q)||void 0===U?void 0:U.meta.rootId)===w.bloxd.getMetaInfo(v.heldItemName).rootId&&!s||v.heldItem.reset(),"CubeBlock"===(null===(p=Q)||void 0===p?void 0:p.type)||"TwoDBlock"===(null===(r=Q)||void 0===r?void 0:r.type)||"SlabBlock"===(null===(Y=Q)||void 0===Y?void 0:Y.type)?(v.heldItem=v._blockItem,v.heldType=Q.type):Z.includes(null===(g=Q)||void 0===g?void 0:g.type)?(v.heldItem=v._standardItem,v.heldType=Q.type):"Gun"===(null===(J=Q)||void 0===J?void 0:J.type)?(v.heldItem=v._gunItem,v.heldType=Q.type):"Chargeable"===(null===(l=Q)||void 0===l?void 0:l.type)?(v.heldItem=v._chargeableItem,v.heldType=Q.type):"Directional"===(null===(j=Q)||void 0===j?void 0:j.type)?(v.heldItem=v._compassItem,v.heldType=Q.type):(v.heldItem=v._fistItem,v.heldType="Fist"),v.heldItem.selected(Q),v.__id===w.playerEntity&&x.hc.publish("newLocalPlayerHeldItem",v.heldItem));w.ents.hasInventory(v.__id)&&(v._lastInvenIdx=w.ents.getInventory(v.__id).getSelectedSlotIndex()),v.heldItemName=null!==(P=null===(u=Q)||void 0===u?void 0:u.name)&&void 0!==P?P:null}var Z=["TwoDItem","TwoDTool","TwoDArmour","GrayscaleTwoDArmour"],A=function(){function w(v,I,P){(0,Y.e)(this,w),this.noa=void 0,this.bloxd=void 0,this.heldItemState=void 0,this.itemZoomer=void 0,this.typeObj=null,this.canPlaceOrBreakBlock=!0,this._doneFirstMeshSetup=!1,this._modelLoadedSub=void 0,this.noa=v,this.bloxd=v.bloxd,this.heldItemState=I,this.itemZoomer=P}return(0,g.c)(w,[{key:"selected",value:function(w){this.noa.updateBlockTargets(!0),this.typeObj=w}},{key:"setupHeldMesh",value:function(){this._setupHeldMesh()}},{key:"setupHeldMesh_Implementation",value:function(){}},{key:"downFirePrimary",value:function(){return this.noa.ents.getMoveState(this.heldItemState.__id).setArmsAreSwinging(),!1}},{key:"upFirePrimary",value:function(){return!1}},{key:"downFireSecondary",value:function(){return this._performAltAction()}},{key:"upFireSecondary",value:function(){return!1}},{key:"downFireTertiary",value:function(){var w=this.noa;if(w.serverSettings.creative&&w.serverSettings.canPickBlocks&&w.ents.hasComponent(w.playerEntity,"inventory")&&null!==w.targetedBlock){var v=this.bloxd.getMetaInfo(w.targetedBlock.blockID).rootName,I=e.c.indexOf(v);if(-1!==I){var P=w.ents.getInvenOps(w.playerEntity),u=P.playerInventory.numSlots+I,Q=this.noa.ents.getInventoryState(this.noa.playerEntity);if(!Q)return!1;for(var K=Q.inventory.getHotBar(),a=0;a<K.length;a++){var U;if((null===(U=K[a])||void 0===U?void 0:U.name)===v)return x.hc.publish("setSelectedInventorySlotI",a,!0),!0}return P.swapPosClient(P.playerInventory.getSelectedSlotIndex(),u),!0}}return!1}},{key:"touchDownSecondary",value:function(){}},{key:"touchUpSecondary",value:function(){}},{key:"touchDownTertiary",value:function(){}},{key:"touchUpTertiary",value:function(){}},{key:"touchShort",value:function(){var w=this._performAltAction();return this.noa.ents.getMoveState(this.heldItemState.__id).setArmsAreSwinging(),w}},{key:"_performAltAction",value:function(){var w=this._doAltAction();return w&&this.noa.ents.getMoveState(this.heldItemState.__id).setArmsAreSwinging(),w}},{key:"_doAltAction",value:function(){var w,v,I,P=this.noa.ents.getInventoryState(this.noa.playerEntity);if(!P||!this.noa.serverSettings.canAltAction)return!1;var u=P.inventory;if(P.opWrapper.openChest)return x.hc.publish("ToggleInventory"),!0;var Q,K=P.selectedItem;if(("CubeBlock"===(null===K||void 0===K?void 0:K.typeObj.type)||"TwoDBlock"===(null===K||void 0===K?void 0:K.typeObj.type)||"SlabBlock"===(null===K||void 0===K?void 0:K.typeObj.type))&&this.noa.entities.getMoveState(this.heldItemState.__id).crouching)return!1;if("Bucket"===(null===K||void 0===K?void 0:K.name)||"Empty Bottle"===(null===K||void 0===K?void 0:K.name)){var a,U=(0,x.pb)();U.actionOrigin&&(a=(0,r.d)(U.actionOrigin),U.localToGlobal(a,a));var p=this.noa.pickBlock(a,U.actionDirection,U.camera.zoomDistance+s.g.blockTestDistance,(function(w){return 0!==w}));if(((null===p||void 0===p?void 0:p.blockID)===M.blockMetadata.Water.id||(null===p||void 0===p?void 0:p.blockID)===M.blockMetadata["Fat Cactus"].id||(null===p||void 0===p?void 0:p.blockID)===M.blockMetadata["Fat Cactus|Growing"].id)&&("Empty Bottle"===K.name||(0,x.N)().canWaterBucketAtPos(U.playerEntity,p.position[0],p.position[1],p.position[2]))){var Y=u.getSelectedSlotIndex(),g=u.getFreeInventoryPosition(),J=K.name,l="Bucket"===J?"Water Bucket":"Water Bottle";if("Bucket"===J){var R=p.blockID===M.blockMetadata.Water.id?0:M.blockMetadata["Dry Fat Cactus"].id;(0,x.N)().setBlock(p.position[0],p.position[1],p.position[2],R),(0,x.vc)(f.e.pickupWater,{pos:p.position,toBlock:R,toSlot:g})}else(0,x.vc)(f.e.pickupWater,{pos:p.position,toBlock:p.blockID,toSlot:g});if(null!==g){var j=u.getItemAtIdx(Y).amount;1===j?u.setItemSlot(Y,l,null,{}):(u.setItemSlot(Y,J,j-1,{}),u.setItemSlot(g,l,null,{}))}return(0,q.c)().play((0,N.d)("bucketFill"),1),!0}}else if("Water Bucket"===(null===K||void 0===K?void 0:K.name)){var B,t=null===(B=this.noa.targetedBlock)||void 0===B?void 0:B.adjacent;if(t&&0===(0,x.N)().getBlock(t[0],t[1],t[2])&&(0,x.N)().canWaterBucketAtPos(this.noa.playerEntity,t[0],t[1],t[2]))return(0,x.N)().setBlock(t[0],t[1],t[2],M.blockMetadata.Water.id),(0,x.vc)(f.e.putdownBucket,{pos:t}),(0,q.c)().play((0,N.d)("bucketEmpty"),1),this.noa.serverSettings.creative||u.setItemSlot(u.getSelectedSlotIndex(),"Bucket",1,{}),!0}if("Name Tag"===(null===K||void 0===K?void 0:K.name))return x.hc.publish("EditNameTag",null!==(Q=K.attributes.customAttributes.text)&&void 0!==Q?Q:""),!0;if("Book"===(null===K||void 0===K?void 0:K.name)){var i,z,E,o=null===(i=this.noa.targetedBlock)||void 0===i?void 0:i.blockID;if(null===this.bloxd.getMetaInfo(o).books)return x.hc.publish("EditBook",{pages:null!==(z=K.attributes.customAttributes.pages)&&void 0!==z?z:["","","","","","","","","",""],title:null!==(E=K.attributes.customDisplayName)&&void 0!==E?E:"Title",isPublished:!!K.attributes.customDescription}),!0}var h=(0,c.q)(null===K||void 0===K?void 0:K.name);if(h){var n=(0,c.m)(h);return this.noa.ents.getInvenOps(this.noa.playerEntity).swapPosClient(n,u.getSelectedSlotIndex()),!0}var W=null===(w=this.noa.targetedBlock)||void 0===w?void 0:w.blockID,V=null===(v=this.noa.targetedBlock)||void 0===v?void 0:v.position;if((0,x.vc)(f.e.altAction,{targetPos:null!==V&&void 0!==V?V:null,dirFacing:null!==(I=this.noa.actionDirection)&&void 0!==I?I:this.noa.camera.getDirection(),heldId:(0,x.Bb)(x.vc)?this.bloxd.getItemId(null===K||void 0===K?void 0:K.name):this.bloxd.getItemId(null===K||void 0===K?void 0:K.name)+(0,x.N)().registry.getBiggestItemIdPlusOne(),complete:window.triggered||window.found||(0,b.checkMoveFuncs)()}),W){var F,O=this.noa.targetedBlock;if("Board"===this.bloxd.getMetaInfo(W).rootName&&(0,x.N)().playerCanChangePos((0,x.pb)().playerEntity,V[0],V[1],V[2]))return["press to lobby","press to get","press to tp"].includes(null===(F=(0,x.N)().blockDataOwner.getBlockData(V[0],V[1],V[2]))||void 0===F?void 0:F.persisted.shared.text.split("\n")[0].toLowerCase())||x.hc.publish("EditBoard",{pos:V}),!0;if("Workbench"===this.bloxd.getMetaInfo(O.blockID).rootName)return x.hc.publish("ToggleInventory","Workbench"),!0;if("Furnace"===this.bloxd.getMetaInfo(O.blockID).rootName)return x.hc.publish("ToggleInventory","Furnace"),!0;if(M.blockMetadata["Artisan Bench"].id===O.blockID)return x.hc.publish("ToggleInventory","Artisan Bench"),!0;if("Potion Table"===this.bloxd.getMetaInfo(O.blockID).rootName)return x.hc.publish("ToggleInventory","Potion Table"),!0;if("Chest"===this.bloxd.getMetaInfo(O.blockID).rootName||"Moonstone Chest"===this.bloxd.getMetaInfo(O.blockID).rootName)return!0;if(M.blockMetadata["Grass Block"].id===O.blockID&&(0,x.N)().playerCanChangePos(this.noa.playerEntity,V[0],V[1],V[2])){if("Shears"===(null===K||void 0===K?void 0:K.typeObj.name))return(0,x.N)().setBlock(V[0],V[1],V[2],M.blockMetadata["Dirt|GrassRoots"].id),(0,q.c)().play((0,N.d)("hoeTill"),1),!0;if("cuttable"===(null===K||void 0===K?void 0:K.typeObj.harvests))return(0,x.N)().setBlock(V[0],V[1],V[2],M.blockMetadata["Tilled Soil"].id),(0,q.c)().play((0,N.d)("hoeTill"),1),!0}var m=M.blockMetadata[O.blockID].name;if((0,M.isOpenable)(m))return(0,x.N)().swapDoorTypeOpenClosed(this.noa.playerEntity,O.position[0],O.position[1],O.position[2],O.blockID),!0;if((0,x.N)().getItemStat(this.noa.playerEntity,O.blockID,"altActionable"))return!0;var S=this.bloxd.getMetaInfo(m).books;if(void 0!==S&&S<6&&"Book"===(null===K||void 0===K?void 0:K.name)){var e=this.noa.ents.getInventory(this.noa.playerEntity);return e.setItemSlot(e.getSelectedSlotIndex(),"Air",null),!0}}if(null!==K&&void 0!==K&&K.name.includes("Crossbow Charged")){var H=this.noa.ents.getInventory(this.noa.playerEntity);return H.setItemSlot(H.getSelectedSlotIndex(),K.name.split(" Charged")[0],null,K.attributes),!0}return!1}},{key:"touchDownLong",value:function(){return!1}},{key:"tick",value:function(){}},{key:"renderTickLocalPlayer",value:function(){this.itemZoomer.renderTick()}},{key:"renderTickNetworkedPlayer",value:function(){}},{key:"cameraZoomChanged",value:function(w,v){v<=1.2&&w>1.2?(this.noa.camera.currentZoom=0,this.noa.camera.zoomDistance=0,this.itemZoomer.forceXyOffsetToZero(),this.setupHeldMesh()):0===v&&(this.itemZoomer.forceXyOffsetToZero(),this.setupHeldMesh()),v>.001&&w<.001&&(this.noa.camera.currentZoom=1.2,this.setupHeldMesh())}},{key:"cameraZoomSet",value:function(w,v){}},{key:"shouldChangeCameraZoom",value:function(w){return!0}},{key:"reset",value:function(){x.hc.unsubscribe(this._modelLoadedSub),this._doneFirstMeshSetup=void 0!==this.noa.entities.getMeshData(this.heldItemState.__id)}},{key:"destroy",value:function(){}},{key:"_setupHeldMesh",value:function(){var w=this;this.setupHeldMesh_Implementation(),this._doneFirstMeshSetup||(this._doneFirstMeshSetup=!0,this.noa.entities.getMeshData(this.heldItemState.__id)||(this._modelLoadedSub=x.hc.subscribe("ModelLoaded|".concat(this.heldItemState.__id),(function(){w.setupHeldMesh_Implementation()}))))}}]),w}(),X=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(w,P,u,Q){var K;return(0,Y.e)(this,I),(K=v.call(this,w,P,u)).toolType=void 0,K.toolHarvestLevel=void 0,K.toolMultiplier=void 0,K.breaking=!1,K.targetedPosition=null,K.currBreakingMesh=null,K.currBreakingStage=null,K.targetedStartTime=null,K.lastBreakingSoundTime=0,K.weaponHelper=void 0,K.breakingParticles=void 0,K.noa=w,K.toolType=null,K.toolHarvestLevel=null,K.toolMultiplier=1,K.weaponHelper=Q,K.heldItemState.__id===K.noa.playerEntity&&(K.breakingParticles=new S.b(w)),K.reset(),K}return(0,g.c)(I,[{key:"selected",value:function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,K.c)((0,a.d)(I.prototype),"selected",this).call(this,w),"TwoDTool"===(null===w||void 0===w?void 0:w.type)?(this.toolType=w.harvests,this.toolHarvestLevel=w.level,this.toolMultiplier=w.multiplier):(this.toolType=null,this.toolHarvestLevel=null,this.toolMultiplier=1)}},{key:"reset",value:function(){(0,K.c)((0,a.d)(I.prototype),"reset",this).call(this),this.heldItemState.__id===this.noa.playerEntity&&this.breakingParticles.tick(!1),this.resetTargetedBlock(),this.breaking=!1,this.targetedPosition=null,this.currBreakingMesh=null,this.currBreakingStage=null,this.targetedStartTime=null,this.lastBreakingSoundTime=0}},{key:"downFirePrimary",value:function(){return(0,K.c)((0,a.d)(I.prototype),"downFirePrimary",this).call(this),this.doAttack()||this._breakingStart(),!0}},{key:"touchShort",value:function(){return this.doAttack()?(this.noa.ents.getMoveState(this.heldItemState.__id).setArmsAreSwinging(),!0):(0,K.c)((0,a.d)(I.prototype),"touchShort",this).call(this)}},{key:"touchDownLong",value:function(){return this._breakingStart(),!0}},{key:"doAttack",value:function(){var w,v,I,P,u=this.noa,Q=null!==(w=this.noa.actionDirection)&&void 0!==w?w:this.noa.camera.getDirection(),K=this.weaponHelper.doAttack(Q,3),a=K.hitResult,U=K.hitEId;K.distanceTravelled,K.globalHitPosition,K.hitNormal,K.bodyPartHit;return!(a!==l.HIT_ENTITY||!u.otherPlayerSettings[u.playerEntity][U].canAttack)&&((0,x.vc)(f.e.hitEntity,{eId:U,dirFacing:Q,heldName:null!==(v=null===(I=u.ents.getInventoryState(u.playerEntity))||void 0===I||null===(P=I.inventory.getItemAtSelectedSlot())||void 0===P?void 0:P.name)&&void 0!==v?v:null,v:D.d}),!0)}},{key:"_breakingStart",value:function(){var w=this.noa.targetedBlock;w&&!(0,x.N)().posSatisfiesModifyConstraints(this.noa.playerEntity,w.position[0],w.position[1],w.position[2])&&(this.noa.serverSettings.canChange||this.noa.serverSettings.cantBreakError||"You cannot modify this block"!==this.noa.serverSettings.cantChangeError)&&x.hc.publish("showError",{error:this.noa.serverSettings.cantBreakError||this.noa.serverSettings.cantChangeError}),this.breaking=!0}},{key:"tick",value:function(){if(this.heldItemState.__id===this.noa.playerEntity){var w=!1;return this.breaking&&(w=this._breakBlock()),this.breakingParticles.tick(w),w}return!1}},{key:"upFirePrimary",value:function(){return this.resetTargetedBlock(),this.breaking=!1,!0}},{key:"resetTargetedBlock",value:function(){this.targetedPosition=null,this.targetedStartTime=Date.now(),this.lastBreakingSoundTime=Math.min(Date.now()-150,this.lastBreakingSoundTime),this.currBreakingStage=-1,this.currBreakingMesh&&(this.currBreakingMesh.setEnabled(!1),this.currBreakingMesh=null)}},{key:"_breakBlock",value:function(){var w=this.noa.targetedBlock;if(!w||!(0,x.N)().posSatisfiesModifyConstraints(this.noa.playerEntity,w.position[0],w.position[1],w.position[2]))return this.resetTargetedBlock(),!1;if(this.noa.ents.getMoveState(this.heldItemState.__id).setArmsAreSwinging(),JSON.stringify(this.targetedPosition)!==JSON.stringify(this.noa.targetedBlock.position))return this.resetTargetedBlock(),this.targetedPosition=this.noa.targetedBlock.position.slice(),(0,x.vc)(f.e.startBreakBlock,this.targetedPosition),!0;var v=this.noa.getBlock(this.targetedPosition),I=R.o[v].ttb;if(!this.noa.serverSettings.creative){var P=(0,x.N)().getBlockTypeIsHarvestable(this.noa.playerEntity,v);P||(I*=2.5),this.toolType===this.bloxd.getItemStat(this.noa.playerEntity,v,"harvestType")&&P&&(I*=1/this.toolMultiplier)}var u=Date.now()-this.targetedStartTime,Q=Math.floor(10*u/I);if(I-u>125&&Date.now()-this.lastBreakingSoundTime>200){this.lastBreakingSoundTime=Date.now();var K=(0,N.d)("step_".concat((0,q.d)(v,!1)));(0,q.c)().play(K,.3).rate(.5)}return this.currBreakingMesh&&Q===this.currBreakingStage||(this.currBreakingMesh&&this.currBreakingMesh.setEnabled(!1),Q<10?(this.currBreakingMesh=function(w,v,I){var P=w.rendering.getScene().getMeshByName("breakingBox".concat(I));P.setEnabled(!0);var u=v.map((function(v,I){return v+.5-w.worldOriginOffset[I]}));return P.position.x=u[0],P.position.y=u[1],P.position.z=u[2],P}(this.noa,this.targetedPosition,Q),this.currBreakingStage=Q):((0,R.g)(this.noa,this.noa.targetedBlock.position),this.resetTargetedBlock())),!0}}]),I}(A),ww=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(w,P,u,Q){var K;return(0,Y.e)(this,I),(K=v.call(this,w,P,u)).breakingItem=void 0,K.firstPersonMesh=null,K.thirdPersonMesh=null,K.firstPersonMeshScaling=new j.l(.1,.1,.1),K.firstPersonPosOffset=new j.l(0,0,0),K.firstPersonRotation=new j.l(0,0,0),K.noa=w,K.breakingItem=Q,K.heldItemState=P,K}return(0,g.c)(I,[{key:"selected",value:function(w){var v,P;(0,K.c)((0,a.d)(I.prototype),"selected",this).call(this,w),this.breakingItem.selected(w),this.typeObj=w,null===(v=this.firstPersonMesh)||void 0===v||v.dispose(),null===(P=this.thirdPersonMesh)||void 0===P||P.dispose(),this.firstPersonMesh=this.typeObj.getHeldMesh(),this.firstPersonMesh.setEnabled(!1),this.thirdPersonMesh=this.typeObj.getHeldMesh(),this.thirdPersonMesh.metadata||(this.thirdPersonMesh.metadata=new this.noa.rendering.MeshMetadataType),this.thirdPersonMesh.metadata.markAsDirtyOnRebase=!0,this.thirdPersonMesh.setEnabled(!1),this.setupHeldMesh()}},{key:"downFirePrimary",value:function(){return(0,K.c)((0,a.d)(I.prototype),"downFirePrimary",this).call(this),this._trySwingBlock(),this.breakingItem.downFirePrimary()}},{key:"touchShort",value:function(){return this._trySwingBlock(),this.breakingItem.touchShort()}},{key:"touchDownLong",value:function(){return this.breakingItem.touchDownLong()}},{key:"upFirePrimary",value:function(){return this.breakingItem.upFirePrimary()}},{key:"tick",value:function(){this.breakingItem.tick()&&this._trySwingBlock()}},{key:"renderTickLocalPlayer",value:function(){(0,K.c)((0,a.d)(I.prototype),"renderTickLocalPlayer",this).call(this),this.heldItemState.__id===this.noa.playerEntity&&this.noa.camera.zoomDistance<=1&&this._setFirstPersonMeshPosition(),this.thirdPersonMesh.position._isDirty=!0,this.thirdPersonMesh.rotationQuaternion?this.thirdPersonMesh.rotationQuaternion._isDirty=!0:this.thirdPersonMesh.rotation._isDirty=!0}},{key:"_setFirstPersonMeshPosition",value:function(){console.assert(this.heldItemState.__id===this.noa.playerEntity,"Should only be called for local player.");var w=new j.l(.2+this.firstPersonPosOffset.x,-.15+this.firstPersonPosOffset.y,.23+this.firstPersonPosOffset.z);if(this.firstPersonMesh.rotationQuaternion=null,this.firstPersonMesh.rotation=new j.l(0,-3*Math.PI/7,-Math.PI/6).add(this.firstPersonRotation),"CubeBlock"!==this.typeObj.type&&"SlabBlock"!==this.typeObj.type||(this.firstPersonMesh.rotation.x=Math.PI,this.firstPersonMesh.rotation.z=0),Date.now()-this.heldItemState._lastSwingStart<this.heldItemState.swingDuration){var v=this.heldItemState.swingDuration,I=(v/2-Math.abs(v/2-(Date.now()-this.heldItemState._lastSwingStart)))/(v/2);w.x=w.x*(1-I)+.2*I,w.y=w.y*(1-I)+-.4*I,w.z=w.z*(1-I)+.5*I;var P=3*Math.PI/4;this.firstPersonMesh.rotateAround(w,Uw,this.firstPersonMesh.rotation.x*(1-I)+P*I)}this.firstPersonMesh.position=w}},{key:"renderTickNetworkedPlayer",value:function(){this.thirdPersonMesh.position._isDirty=!0,this.thirdPersonMesh.rotationQuaternion?this.thirdPersonMesh.rotationQuaternion._isDirty=!0:this.thirdPersonMesh.rotation._isDirty=!0}},{key:"setupHeldMesh_Implementation",value:function(){if(this.heldItemState.__id===this.noa.playerEntity&&this.noa.camera.zoomDistance<=1)this.firstPersonMesh.setEnabled(!0),this.thirdPersonMesh.setEnabled(!1),this.firstPersonMesh.parent=this.noa.rendering._camera,this.firstPersonMesh.scaling=this.firstPersonMeshScaling,this._setFirstPersonMeshPosition();else if(this.noa.entities.hasComponent(this.heldItemState.__id,"playerMesh")){this.thirdPersonMesh.setEnabled(!0),this.firstPersonMesh.setEnabled(!1);var w=this.noa.entities.getPlayerMeshState(this.heldItemState.__id).namedNodes;this.thirdPersonMesh.parent=w.ArmRightMesh,"TwoDTool"===this.typeObj.type||this.typeObj.holdAsAiming?(this.thirdPersonMesh.position.copyFromFloats(0,2.6,4.5),this.typeObj.holdAsAiming&&(this.thirdPersonMesh.position.y=1.5),this.thirdPersonMesh.scaling.copyFromFloats(1.8,1.8,1.8),this.thirdPersonMesh.rotationQuaternion=null,this.thirdPersonMesh.rotation.copyFromFloats(Math.PI,Math.PI/2,.85*Math.PI)):(this.thirdPersonMesh.position.copyFromFloats(0,1.5,5.5),this.thirdPersonMesh.scaling.copyFromFloats(1.4,1.4,1.4),this.thirdPersonMesh.rotationQuaternion=null,this.thirdPersonMesh.rotation.copyFromFloats(0,Math.PI/2,0))}}},{key:"reset",value:function(){var w,v;(0,K.c)((0,a.d)(I.prototype),"reset",this).call(this),null===(w=this.firstPersonMesh)||void 0===w||w.dispose(),null===(v=this.thirdPersonMesh)||void 0===v||v.dispose()}},{key:"_trySwingBlock",value:function(){Date.now()-this.heldItemState._lastSwingStart>3*this.heldItemState.swingDuration/4&&(this.heldItemState._lastSwingStart=Date.now())}}]),I}(A),vw=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(){return(0,Y.e)(this,I),v.apply(this,arguments)}return(0,g.c)(I,[{key:"downFireSecondary",value:function(){var w=(0,K.c)((0,a.d)(I.prototype),"downFireSecondary",this).call(this);return w||(this._placeBlock(),!0)}},{key:"touchShort",value:function(){var w=(0,K.c)((0,a.d)(I.prototype),"touchShort",this).call(this);return w||(this._placeBlock(),!0)}},{key:"_placeBlock",value:function(){var w=this.noa.targetedBlock;if(this.noa.targetedBlock&&(0,x.N)().posSatisfiesModifyConstraints(this.noa.playerEntity,w.adjacent[0],w.adjacent[1],w.adjacent[2])){var v;this.noa.serverSettings&&(v=R.o[this.noa.serverSettings.defaultBlock].id);var I=this.noa.ents.hasComponent(this.noa.playerEntity,this.noa.ents.names.inventory);if(I){v=null;var P=this.noa.ents.getInventoryState(this.noa.playerEntity).selectedItem;!P||"CubeBlock"!==P.typeObj.type&&"TwoDBlock"!==P.typeObj.type&&"SlabBlock"!==P.typeObj.type||(v=P.typeObj.id)}if(v){var u=(0,Q.e)(this.noa.targetedBlock.adjacent,3),K=u[0],a=u[1],U=u[2];if(null===R.o[v].meta.rot&&null===R.o[v].meta.halfblockPlacement||(v=this._getPlaceBlockRotatedId(v,K,a,U)),(0,x.N)().playerCanPlaceItem(this.noa.playerEntity,K,a,U,v)){var p=this.noa.getBlock([K,a,U]);if((0===p||M.blockMetadata[p].fluid)&&v!==p){this.noa.ents.getMoveState(this.heldItemState.__id).setArmsAreSwinging();var r=t().copy([],this.noa.targetedBlock.adjacent);if((0,x.vc)(f.e.changeBlock,{pos:r,toBlock:v,checker:d.c},!0),(0,x.N)().setBlock(r[0],r[1],r[2],v),(0,R.q)(v,!1),I&&!this.noa.serverSettings.creative){var Y=this.noa.ents.getInventoryState(this.noa.playerEntity);Y.inventory.removeItem(Y.inventory.getSelectedSlotIndex(),1)}"Board"===this.bloxd.getMetaInfo(v).rootName&&x.hc.publish("EditBoard",{pos:r})}}}}else this.noa.targetedBlock&&!(0,x.N)().posSatisfiesModifyConstraints(this.noa.playerEntity,w.adjacent[0],w.adjacent[1],w.adjacent[2])&&(this.noa.serverSettings.canChange||this.noa.serverSettings.cantChangeError||"You cannot modify this block"!==this.noa.serverSettings.cantChangeError)&&x.hc.publish("showError",{error:this.noa.serverSettings.cantBuildError||this.noa.serverSettings.cantChangeError})}},{key:"_getPlaceBlockRotatedId",value:function(w,v,I,P){var u,Q=M.blockMetadata[w].name,K=null!==M.blockMetadata[w].meta.halfblockPlacement,a=K?"side":null;if(0===this.noa.targetedBlock.normal[1])1===this.noa.targetedBlock.normal[0]?u="rot2":1===this.noa.targetedBlock.normal[2]?u="rot1":-1===this.noa.targetedBlock.normal[0]?u="rot4":(-1===this.noa.targetedBlock.normal[2]||console.error("invalid normal",this.noa.targetedBlock.normal),u="rot3");else if(K)u="rot1",1===this.noa.targetedBlock.normal[1]?a="bot":-1===this.noa.targetedBlock.normal[1]?a="top":(console.error("Encountered invalid halfblock placement normal: ".concat(this.noa.targetedBlock.normal)),a="bot");else{var U=this.noa.camera.heading+Math.PI;u=(U=(0,k.l)(U,2*Math.PI))<Math.PI/4||U>=7*Math.PI/4?"rot1":U<3*Math.PI/4?"rot2":U<5*Math.PI/4?"rot3":"rot4"}var p=M.blockMetadata[Q].meta.metaStr.split("|");if(p[1]=u,K&&(p[2]=a),p.join("|")===M.blockMetadata[Q].meta.metaStr)return M.blockMetadata[Q].id;var Y=[Q].concat((0,r.d)(p)).join("|");return M.blockMetadata[Y].id}}]),I}(ww),Iw=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(){var w;(0,Y.e)(this,I);for(var P=arguments.length,u=new Array(P),Q=0;Q<P;Q++)u[Q]=arguments[Q];return(w=v.call.apply(v,[this].concat(u))).isCharging=!1,w.chargingStart=0,w.inInvenIdx=void 0,w.lastEatSoundTime=0,w}return(0,g.c)(I,[{key:"selected",value:function(w){(0,K.c)((0,a.d)(I.prototype),"selected",this).call(this,w),this.heldItemState.__id===this.noa.playerEntity&&(this.inInvenIdx=this.bloxd.getInventory(this.noa.playerEntity).getSelectedSlotIndex())}},{key:"downFireSecondary",value:function(){return this.downFire()}},{key:"upFireSecondary",value:function(){return(0,K.c)((0,a.d)(I.prototype),"upFireSecondary",this).call(this),this.upFire()}},{key:"touchDownSecondary",value:function(){(0,K.c)((0,a.d)(I.prototype),"touchDownSecondary",this).call(this),this.downFire()}},{key:"touchUpSecondary",value:function(){(0,K.c)((0,a.d)(I.prototype),"touchUpSecondary",this).call(this),this.upFire()}},{key:"downFire",value:function(){return(0,K.c)((0,a.d)(I.prototype),"downFireSecondary",this).call(this)||this.startCharging(),!0}},{key:"upFire",value:function(){return this.finishCharging(!0),this.lastEatSoundTime=0,!0}},{key:"tick",value:function(){if((0,K.c)((0,a.d)(I.prototype),"tick",this).call(this),this.heldItemState.__id===this.noa.playerEntity)if(this.inInvenIdx=this.bloxd.getInventory(this.noa.playerEntity).getSelectedSlotIndex(),this.isCharging){var w=this.typeObj.meta.charging,v=this.bloxd.getItemStat(this.noa.playerEntity,this.getHeldName(),"chargeStages");if(this.typeObj.requiresArrow&&!this.bloxd.hasItem(this.heldItemState.__id,"Arrow"))this.finishCharging(!1),(0,x.vc)(f.e.finishChargingHeldItem,{used:!1,duration:0});else if(w<=v){var P=this.typeObj.chargeTime/v*w;if(Date.now()-this.chargingStart>=P)if(w<v)this.updateItemToStage(w+1);else if(this.typeObj.eatable||Pw.includes(this.typeObj.meta.rootId)){(0,x.vc)(f.e.finishChargingHeldItem,{used:!0,duration:Date.now()-this.chargingStart}),this.isCharging=!1;var u=this.noa.entities.getInventoryState(this.noa.playerEntity),Q=u.inventory.getSelectedSlotIndex();if(this.typeObj.eatable)u.opWrapper.setItemSlot(Q,"Air"),(0,q.c)().play("burp",1).rate(.9+.2*Math.random());else if(Pw.includes(this.typeObj.meta.rootId)){var U=this.noa.ents.getInventory(this.noa.playerEntity);U.setItemSlot(Q,"".concat((0,c.u)(this.typeObj.meta.rootName)," Crossbow Charged"),null,U.getItemAtIdx(this.inInvenIdx).attributes)}}}this.typeObj.eatable&&Date.now()-this.lastEatSoundTime>200&&((0,q.c)().play(this.typeObj.eatSound,.55+.1*Math.random()).rate(.9+.2*Math.random()),this.lastEatSoundTime=Date.now())}else this.isCharging||this.typeObj.id===this.typeObj.meta.rootId||(this.updateItemToStage(1),this.lastEatSoundTime=0)}},{key:"renderTickLocalPlayer",value:function(){if(this.isCharging){var w=(Date.now()-this.chargingStart)/this.typeObj.chargeTime,v=Math.min(w,.25)/.25;this.firstPersonPosOffset.x=-.05*v,this.firstPersonPosOffset.y=.13*v,this.firstPersonPosOffset.z=-.05*v,w>.25&&(this.firstPersonPosOffset.y+=.0012*Math.sin(22*(w-.25)*Math.min(w,.8))*Math.min(w,.8)),uw.includes(this.typeObj.meta.rootId)&&this.noa.entities.getState(this.noa.playerEntity,"playerCameraAdjustment").fovMultiplier.setMultiplierType("chargeableZoom",1-.15*Math.min(w,1))}(0,K.c)((0,a.d)(I.prototype),"renderTickLocalPlayer",this).call(this)}},{key:"reset",value:function(){(0,K.c)((0,a.d)(I.prototype),"reset",this).call(this),this.heldItemState.__id===this.noa.playerEntity&&(this.isCharging&&(0,x.vc)(f.e.finishChargingHeldItem,{used:!1,duration:0}),this.finishCharging(!1))}},{key:"startCharging",value:function(){this.typeObj.requiresArrow&&!this.bloxd.hasItem(this.heldItemState.__id,"Arrow")||(this.isCharging=!0,this.chargingStart=Date.now(),this.noa.entities.getState(this.noa.playerEntity,"receivesInputs").canRunCombinator.setBooleanType("charging",!1),(0,x.vc)(f.e.startChargingHeldItem))}},{key:"finishCharging",value:function(w){if(this.firstPersonPosOffset.x=0,this.firstPersonPosOffset.y=0,this.firstPersonPosOffset.z=0,this.noa.entities.getState(this.noa.playerEntity,"playerCameraAdjustment").fovMultiplier.removeMultiplier("chargeableZoom"),this.updateItemToStage(1),this.noa.entities.getState(this.noa.playerEntity,"receivesInputs").canRunCombinator.removeBoolean("charging"),this.isCharging){if(w){var v=Date.now()-this.chargingStart;(0,x.vc)(f.e.finishChargingHeldItem,{used:!Pw.includes(this.typeObj.meta.rootId)&&v>this.typeObj.chargeTime/this.bloxd.getItemStat(this.noa.playerEntity,this.getHeldName(),"chargeStages"),duration:v})}this.isCharging=!1,this.chargingStart=0}}},{key:"getHeldName",value:function(){var w,v=this.bloxd.getInventory(this.noa.playerEntity);if(!v)return null;var I=null===(w=v.getItemAtIdx(this.inInvenIdx))||void 0===w?void 0:w.name;return I||null}},{key:"updateItemToStage",value:function(w){var v=this.bloxd.getInventory(this.noa.playerEntity);if(v){var I,P=1===w?this.typeObj.meta.rootName:"".concat(this.typeObj.meta.rootName,"|meta|charging").concat(w),u=null===(I=v.getItemAtIdx(this.inInvenIdx))||void 0===I?void 0:I.name;u!==P&&this.bloxd.getMetaInfo(u).rootId===this.typeObj.meta.rootId&&v.setItemSlot(this.inInvenIdx,P,null,v.getItemAtIdx(this.inInvenIdx).attributes)}}}]),I}(ww),Pw=[c.F["Wood Crossbow"].id,c.F["Stone Crossbow"].id,c.F["Iron Crossbow"].id,c.F["Gold Crossbow"].id,c.F["Diamond Crossbow"].id],uw=[c.F["Wood Bow"].id,c.F["Stone Bow"].id,c.F["Iron Bow"].id,c.F["Gold Bow"].id,c.F["Diamond Bow"].id],Qw=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(w,P,u,Q){var K;return(0,Y.e)(this,I),(K=v.call(this,w,P,u,Q)).inInvenIdx=void 0,K.inUse=void 0,K.dir=void 0,K.targetPos=void 0,K.firstPersonPosOffset=new j.l(.1,0,.15),K.firstPersonRotation=new j.l(0,-Math.PI/2,Math.PI/7),K}return(0,g.c)(I,[{key:"selected",value:function(w){(0,K.c)((0,a.d)(I.prototype),"selected",this).call(this,w),this.heldItemState.__id===this.noa.playerEntity&&(this.inInvenIdx=this.bloxd.getInventory(this.noa.playerEntity).getSelectedSlotIndex(),this.inUse=!0)}},{key:"tick",value:function(){if((0,K.c)((0,a.d)(I.prototype),"tick",this).call(this),this.heldItemState.__id===this.noa.playerEntity&&(this.inInvenIdx=this.bloxd.getInventory(this.noa.playerEntity).getSelectedSlotIndex(),this.inUse)){var w,v,P=null!==(w=this.noa.entities.getInventory(this.noa.playerEntity).getItemAtSelectedSlot().attributes.customAttributes.target)&&void 0!==w?w:this.noa.serverSettings.compassTarget;if(!Array.isArray(P)){if(!this.noa.ents.getGenericPlayerState(P))return;P=this.noa.ents.getPosition(P)}var u=this.noa.entities._localGetPosition(this.heldItemState.__id),Q=[],U=null!==(v=this.noa.actionDirection)&&void 0!==v?v:this.noa.camera.getDirection();this.noa.localToGlobal(u,Q);var p=[];t().subtract(p,P,Q),t().normalize(p,p);var r=(Math.atan2(p[0],p[2])-Math.atan2(U[0],U[2]))*(180/Math.PI)-15;r=r<0?360+r:r,this.dir=Math.abs(Math.round(r/30)+6)%12+1,this.updateItemToStage(this.dir)}}},{key:"updateItemToStage",value:function(w){var v=this.bloxd.getInventory(this.noa.playerEntity);if(v){var I,P=1===w?this.typeObj.meta.rootName:"".concat(this.typeObj.meta.rootName,"|meta|dir").concat(w),u=null===(I=v.getItemAtIdx(this.inInvenIdx))||void 0===I?void 0:I.name;u!==P&&this.bloxd.getMetaInfo(u).rootId===this.typeObj.meta.rootId&&v.setItemSlot(this.inInvenIdx,P,null,v.getItemAtIdx(this.inInvenIdx).attributes)}}}]),I}(ww),Kw=new j.l(.4,2,5),aw=function(w){(0,U.e)(I,w);var v=(0,p.d)(I);function I(w,P,u,Q,K){var a;(0,Y.e)(this,I),(a=v.call(this,w,P,u)).breakingItem=void 0,a.weaponHelper=void 0,a.firing=void 0,a._wasFiringLastTick=void 0,a._didShootLastTick=void 0,a._attemptAiming=void 0,a.aiming=void 0,a.lastRoundFired=void 0,a.firedRenderTicksAgo=void 0,a.mesh=void 0,a.muzzleFlashPlane=void 0,a.gunTypeObj=void 0,a._cachedZoomLevel=void 0,a.numBulletsReloading=void 0,a._aimChangeTime=void 0,a._reloadStartTime=void 0,a.bulletRaycastLength=void 0,a._localPlayerBulletHitBillboardTimeout=void 0,a._networkedPlayerBulletHitBillboardTimeout=void 0,a.bulletReachDistance=void 0,a.bulletBlockedBillboardMat=void 0,a.bulletBlockedBillboardPlane=void 0,a.bulletBlockedBillboardPlanePos=void 0,a.bulletBlockedBillboardLookAt=void 0,a._ticksSinceAttackBlockedBillboardUpdate=void 0,a.gunMiscSpriteTrackName="gunMisc",a._bulletCasingHitFloorTimeout=void 0,a._reloadTimeouts=void 0,a.lastGunShotTail=void 0,a.firstPersonGunMeshScaling=void 0,a.smallMuzzleFlashScale=void 0,a.reloading=void 0,a.networkedPlayerShotSub=void 0,a.inaccuracyCalculator=void 0,a.secondaryTouchHeld=!1,a.tertiaryTouchPressed=!1,a.noa=w,a.breakingItem=Q,a.heldItemState=P,a.weaponHelper=K,a.canPlaceOrBreakBlock="mouseOnly"!==o.e,a.firing=!1,a._wasFiringLastTick=!1,a._didShootLastTick=!1,a._attemptAiming=!1,a.aiming=!1,a.lastRoundFired=0,a.firedRenderTicksAgo=1e3,a.mesh=null,a.muzzleFlashPlane=null,a.gunTypeObj=null,a._cachedZoomLevel=0,a.numBulletsReloading=0,a._aimChangeTime=0,a._reloadStartTime=0,a.bulletRaycastLength=500,a._localPlayerBulletHitBillboardTimeout=8e3,a._networkedPlayerBulletHitBillboardTimeout=2e3,a.bulletReachDistance=600;var U=a.noa.rendering.getScene();return a.heldItemState.__id===a.noa.playerEntity&&(a.bulletBlockedBillboardMat=new V.b("bulletBlockedBillboardMat",U),a.bulletBlockedBillboardMat.diffuseColor=new F.b(235/255,64/255,52/255),a.bulletBlockedBillboardMat.specularColor=new F.b(0,0,0),a.bulletBlockedBillboardMat.freeze(),a.bulletBlockedBillboardPlane=O.g.CreatePlane("bulletBlockedBillboardPlane",{size:.1},U),a.bulletBlockedBillboardPlane.material=a.bulletBlockedBillboardMat,a.bulletBlockedBillboardPlanePos=new j.l(0,0,0),a.bulletBlockedBillboardLookAt=new j.l(0,0,0),a.bulletBlockedBillboardPlane.position=a.bulletBlockedBillboardPlanePos,a.bulletBlockedBillboardPlane.setEnabled(!1),w.rendering.addMeshToScene(a.bulletBlockedBillboardPlane,!1),a._ticksSinceAttackBlockedBillboardUpdate=0),a._bulletCasingHitFloorTimeout=null,a._reloadTimeouts=[],a.lastGunShotTail=null,a}return(0,g.c)(I,[{key:"selected",value:function(w){var v=this;(0,K.c)((0,a.d)(I.prototype),"selected",this).call(this,w),this.breakingItem.selected(w),this.firing=!1,this.aiming=!1,this._attemptAiming=!1,this.lastRoundFired=Date.now()-9*w.msPerRound/10,this._aimChangeTime=0,this._reloadStartTime=0,this.gunTypeObj=w,this.firstPersonGunMeshScaling=.055,this.smallMuzzleFlashScale=40,1===this.noa.camera.zoomDistance&&(0,i.i)(this.noa,0),this.reloading=!1,console.assert(!isNaN(w.weight),"Guns must have a weight"),this.heldItemState.__id===this.noa.playerEntity&&this.noa.entities.getMoveState(this.noa.playerEntity).speedMultiplier.setMultiplierType("heldGunWeight",1/w.weight),this.networkedPlayerShotSub=x.hc.subscribe("bulletShot|".concat(this.heldItemState.__id),(function(w){v._fireShotNetworkedPlayer(w.bulletDirections)})),this._cachedZoomLevel=this.noa.camera.zoomDistance,this.inaccuracyCalculator=null,this.heldItemState.__id===this.noa.playerEntity&&(this.inaccuracyCalculator=new pw(this.noa,w),this.noa.camera.setKickbackDecreaseRate(w.kickbackDecreaseRate)),this.lastGunShotTail=null,this.mesh=null===w||void 0===w?void 0:w.getHeldMesh(),this.mesh.metadata||(this.mesh.metadata=new this.noa.rendering.MeshMetadataType),this.mesh.metadata.markAsDirtyOnRebase=!0,this.setupHeldMesh(),this.muzzleFlashPlane=w.getMuzzleFlashPlane(),this.muzzleFlashPlane.parent=this.mesh,this.muzzleFlashPlane.position=(0,u.e)(j.l,(0,r.d)(w.muzzleFlashOffsetFromGun)),this.muzzleFlashPlane.position._isDirty=!0,this.noa.rendering.addMeshToScene(this.muzzleFlashPlane,!1,null),this.muzzleFlashPlane.scaling.scaleInPlace(this.smallMuzzleFlashScale),this.muzzleFlashPlane.setEnabled(!1)}},{key:"reset",value:function(){var w,v,P;(0,K.c)((0,a.d)(I.prototype),"reset",this).call(this),this.aiming&&(0,i.i)(this.noa,this._cachedZoomLevel),this.firing=!1,this.aiming=!1,this._attemptAiming=!1,this.lastRoundFired=0,this._aimChangeTime=0,this._reloadStartTime=0,null===(w=this.mesh)||void 0===w||w.dispose(),this.mesh=null,this.numBulletsReloading=0,null===(v=this.muzzleFlashPlane)||void 0===v||v.dispose(),this.heldItemState.__id===this.noa.playerEntity&&(this.noa.entities.getMoveState(this.noa.playerEntity).speedMultiplier.removeMultiplier("heldGunWeight"),this.noa.entities.getState(this.noa.playerEntity,"playerCameraAdjustment").fovMultiplier.removeMultiplier("aimingGunZoom"),this.noa.entities.getState(this.noa.playerEntity,"receivesInputs").canRunCombinator.removeBoolean("canRunBecauseNotAiming")),x.hc.unsubscribe(this.networkedPlayerShotSub),null===(P=this.bulletBlockedBillboardPlane)||void 0===P||P.setEnabled(!1);var u,Q=(0,J.b)(this._reloadTimeouts);try{for(Q.s();!(u=Q.n()).done;){var U=u.value;clearTimeout(U)}}catch(w){Q.e(w)}finally{Q.f()}}},{key:"destroy",value:function(){var w,v;null===(w=this.bulletBlockedBillboardMat)||void 0===w||w.dispose(),null===(v=this.bulletBlockedBillboardPlane)||void 0===v||v.dispose()}},{key:"downFirePrimary",value:function(){return this.firing=!0,!0}},{key:"upFirePrimary",value:function(){return this.breakingItem.upFirePrimary(),this.firing=!1,!0}},{key:"downFireSecondary",value:function(){return this._attemptAiming=!0,!0}},{key:"upFireSecondary",value:function(){return this._attemptAiming=!1,!0}},{key:"touchDownSecondary",value:function(){this.firing=!0,this.secondaryTouchHeld=!0,this.updateAttemptAimingFromTouch()}},{key:"touchUpSecondary",value:function(){this.firing=!1,this.secondaryTouchHeld=!1,this.updateAttemptAimingFromTouch()}},{key:"touchDownTertiary",value:function(){this.tertiaryTouchPressed=!this.tertiaryTouchPressed,this.updateAttemptAimingFromTouch()}},{key:"updateAttemptAimingFromTouch",value:function(){this._attemptAiming=this.secondaryTouchHeld||this.tertiaryTouchPressed}},{key:"touchDownLong",value:function(){return this.breakingItem.touchDownLong(),!0}},{key:"tick",value:function(){var w=G.d.state.touchScreen,v=!1;if(this.firing){var I=w?this.gunTypeObj.msPerRoundTouchScreen:this.gunTypeObj.msPerRound;Date.now()-this.lastRoundFired>I&&(v=this._fireBulletLocal())}!this.firing||this.gunTypeObj.autoFireWithMouse||w||(this.firing=!1),this.heldItemState.__id===this.noa.playerEntity&&(0!==this.noa.camera.currentZoom?this._updateAttackBlockedBillboard():this.bulletBlockedBillboardPlane.isEnabled()&&this.bulletBlockedBillboardPlane.setEnabled(!1)),this.heldItemState.__id===this.noa.playerEntity&&!v&&this._didShootLastTick&&this._handleBulletCasingHitFloorSound(),this.heldItemState.__id===this.noa.playerEntity&&this.inaccuracyCalculator.tick(this.aiming),this._wasFiringLastTick=this.firing,this._didShootLastTick=v}},{key:"renderTickLocalPlayer",value:function(){(0,K.c)((0,a.d)(I.prototype),"renderTickLocalPlayer",this).call(this);var w,v=this._attemptAiming&&!this.reloading;v!==this.aiming&&(v?this.setAiming():this.setNotAiming()),this.aiming=v,w=v?Math.min(1,(performance.now()-this._aimChangeTime)/this.gunTypeObj.timeToStartAim):Math.max(0,1-(performance.now()-this._aimChangeTime)/this.gunTypeObj.timeToStopAim);var P=this._getReloadingAnimFraction();this._setFirstPersonMeshPosition(w,P),this._updateAimingFov(w),this._updateMuzzleFlashFromRenderTick(),this.mesh.position._isDirty=!0,this.mesh.rotationQuaternion?this.mesh.rotationQuaternion._isDirty=!0:this.mesh.rotation._isDirty=!0}},{key:"setAiming",value:function(){this._aimChangeTime=performance.now(),this.noa.entities.getState(this.noa.playerEntity,"receivesInputs").canRunCombinator.setBooleanType("canRunBecauseNotAiming",!1),this._cachedZoomLevel=this.noa.camera.zoomDistance,(0,i.i)(this.noa,0)}},{key:"setNotAiming",value:function(){this._aimChangeTime=performance.now(),this.noa.entities.getState(this.noa.playerEntity,"receivesInputs").canRunCombinator.setBooleanType("canRunBecauseNotAiming",!0),(0,i.i)(this.noa,this._cachedZoomLevel)}},{key:"cameraZoomSet",value:function(w,v){1===v&&(0===w?(0,i.i)(this.noa,2):(0,i.i)(this.noa,0))}},{key:"shouldChangeCameraZoom",value:function(w){return!this.aiming||(this._cachedZoomLevel+=w,!1)}},{key:"renderTickNetworkedPlayer",value:function(){this._updateMuzzleFlashFromRenderTick(),this.mesh.position._isDirty=!0,this.mesh.rotationQuaternion?this.mesh.rotationQuaternion._isDirty=!0:this.mesh.rotation._isDirty=!0}},{key:"_updateMuzzleFlashFromRenderTick",value:function(){1===this.firedRenderTicksAgo&&this.muzzleFlashPlane.setEnabled(!1),this.firedRenderTicksAgo++}},{key:"setupHeldMesh_Implementation",value:function(){var w=!1;if(this.heldItemState.__id===this.noa.playerEntity&&0===this.noa.camera.zoomDistance)this.mesh.parent=this.noa.rendering._camera,this.mesh.scaling=new j.l(this.firstPersonGunMeshScaling,this.firstPersonGunMeshScaling,this.firstPersonGunMeshScaling),this.mesh.position=new j.l(0,0,0),this.mesh.rotation=new j.l(0,0,0),w=!0;else if(this.noa.entities.hasComponent(this.heldItemState.__id,"playerMesh")){var v=this.noa.entities.getPlayerMeshState(this.heldItemState.__id).namedNodes;this.mesh.parent=v.ArmRightMesh,this.mesh.scaling=new j.l(1,1,1),this.mesh.position=Kw,this.mesh.rotation=new j.l(-.18*Math.PI,-.2*Math.PI,0),w=!0}!w&&this.mesh.isEnabled()&&this.mesh.setEnabled(!1),w&&!this.mesh.isEnabled()&&this.mesh.setEnabled(!0)}},{key:"_fireBulletLocal",value:function(){var w;if(console.assert(this.heldItemState.__id===this.noa.playerEntity,"fireBulletLocal should only be called for local player."),this.reloading)return!1;if(0===this._getShotsLeftCount())return this._wasFiringLastTick||this.reload(),!1;var v=this.noa.entities.getInventory(this.noa.playerEntity).getItemAtSelectedSlot();v.attributes.customAttributes.shotsLeft--;var I=null!==(w=this.gunTypeObj.shotPelletCount)&&void 0!==w?w:1;this._spawnBulletCasing(),this._bulletsFired();for(var u,Q,K=[],a=!1,U=!1,p=0;p<I;p++){var r=this.inaccuracyCalculator.getDirectionWithInaccuracy(this.noa.camera.getDirection()),Y=this._fireBullet(r,this._localPlayerBulletHitBillboardTimeout),g=Y.hitResult,R=Y.hitEId,j=Y.globalBulletOrigin,s=Y.bulletDistTravelled,B=Y.bodyPartHit;Q=j;var t="head"===B;t&&(U=!0);var i="leg"===B,z=g===l.HIT_ENTITY&&this.noa.otherPlayerSettings[this.noa.playerEntity][R].canAttack&&!this.noa.otherPlayerSettings[this.noa.playerEntity][R]._invincible;z&&(a=!0,u=s),K.push((0,P.b)({dir:r,dist:s},z?{player:R,head:t,leg:i}:{player:null,head:null,leg:null}))}if((0,x.vc)(f.e.shot,{origin:Q,shots:K}),a){var E,o=this.noa.serverSettings,h=0,n=(0,J.b)(K);try{for(n.s();!(E=n.n()).done;){var W=E.value,V=W.player,F=W.head,O=W.leg;if(null!==V){var N=o.dealingDamageMultiplier;N*=O?o.dealingDamageLegMultiplier:F?o.dealingDamageHeadMultiplier:o.dealingDamageDefaultMultiplier,h+=this.gunTypeObj.damage*N}}}catch(w){n.e(w)}finally{n.f()}x.hc.publish("shotPlayer",{damage:h,wasCrit:U,distance:u})}return a&&(U?this._playHeadshotSound():this._playBodyshotSound()),x.hc.publish("localPlayerNewShotsLeft",v.attributes.customAttributes.shotsLeft),this.inaccuracyCalculator.shot(),this.noa.camera.addKickback(this.gunTypeObj.kickbackFromShot),!0}},{key:"_fireShotNetworkedPlayer",value:function(w){this._bulletsFired();var v,I=(0,J.b)(w);try{for(I.s();!(v=I.n()).done;){var P=v.value;this._fireBullet(P,this._networkedPlayerBulletHitBillboardTimeout)}}catch(w){I.e(w)}finally{I.f()}}},{key:"_bulletsFired",value:function(){this._makeShotSound(),this._makeMuzzleFlash()}},{key:"_fireBullet",value:function(w,v){var I=this,P=this.noa.entities._localGetPosition(this.heldItemState.__id),u=(0,Q.e)(P,3),K=u[0],a=u[1],U=u[2],p=this.noa.entities.getMoveState(this.heldItemState.__id).crouching,r=[K,a+s.g.playerHeight*(p?s.g.crouchingEyeHeightRatio:s.g.playerEyeToHeightRatio),U],Y=[];this.noa.localToGlobal(r,Y);var g=this.weaponHelper.doAttack(w,this.bulletReachDistance),J=g.hitResult,R=g.hitEId,x=g.distanceTravelled,j=g.globalHitPosition,B=g.hitNormal,t=g.bodyPartHit;x=x||this.bulletReachDistance;var i=this.gunTypeObj.getMovingBulletMesh(),z=w.map((function(w){return 2.5*w})),E=[].concat(Y);E[0]+=z[0],E[1]+=z[1],E[2]+=z[2];var o=this.noa.entities.add(E,.1,.1,i);this.noa.entities.addComponent(o,"bullet",{onEnd:function(){J===l.HIT_BLOCK&&I._makeBulletHole(j,B,v)},distanceToTravel:x,directionTravelling:w});var h=x;return this.lastRoundFired=Date.now(),{hitResult:J,hitEId:R,globalBulletOrigin:Y,bulletDistTravelled:h,bodyPartHit:t}}},{key:"reload",value:function(w){var v=this;if(!(this.reloading||this.heldItemState.__id===this.noa.playerEntity&&this._getShotsLeftCount()===this.gunTypeObj.clipSize)){this.reloading=!0,this._reloadStartTime=Date.now(),this.heldItemState.__id===this.noa.playerEntity?(this.numBulletsReloading=this.gunTypeObj.clipSize-this._getShotsLeftCount(),(0,x.vc)(f.e.reload,null)):this.numBulletsReloading=w;var I=this._getTotalReloadTime();this._reloadTimeouts.push(setTimeout((function(){v.reloading=!1,v.numBulletsReloading=0,v._reloadTimeouts=[],v.heldItemState.__id===v.noa.playerEntity&&(v._setShotsLeft(v.gunTypeObj.clipSize),x.hc.publish("localPlayerNewShotsLeft",v._getShotsLeftCount()))}),I));var P=this.heldItemState.__id===this.noa.playerEntity?q.g.firstPersonReload:q.g.thirdPersonReload,u=function(w){(0,q.c)().play((0,N.d)(w),P,v.heldItemState.__id,void 0,void 0,!0)},Q=this.gunTypeObj.soundPrefix;if(this.gunTypeObj.reloadBulletsIndividually){u("".concat(Q,"_load_bullet_"));for(var K=1;K<this.numBulletsReloading;K++)this._reloadTimeouts.push(setTimeout((function(){u("".concat(Q,"_load_bullet_"))}),this.gunTypeObj.bulletReloadTime*K));this._reloadTimeouts.push(setTimeout((function(){u("".concat(Q,"_cock_"))}),this.gunTypeObj.bulletReloadTime*this.numBulletsReloading))}else u("".concat(Q,"_magazine_unload_")),this._reloadTimeouts.push(setTimeout((function(){u("".concat(Q,"_magazine_load_"))}),this.gunTypeObj.reloadTime/2)),this._reloadTimeouts.push(setTimeout((function(){u("".concat(Q,"_cock_"))}),this.gunTypeObj.reloadTime-this.gunTypeObj.cockTime))}}},{key:"getThirdPersonArmPitchFromReloading",value:function(){return this._getReloadingAnimFraction()*(Math.PI/8)}},{key:"_getReloadingAnimFraction",value:function(){var w=Date.now()-this._reloadStartTime;if(this.reloading){var v=this._getTotalReloadTime(),I=v/15;return w<I?w/I:w>v-I?1-(w-(v-I))/I:1}return 0}},{key:"_getTotalReloadTime",value:function(){return this.gunTypeObj.reloadBulletsIndividually?this.numBulletsReloading*this.gunTypeObj.bulletReloadTime+this.gunTypeObj.cockTime:this.gunTypeObj.reloadTime}},{key:"_setShotsLeft",value:function(w){var v=this.noa.entities.getInventory(this.heldItemState.__id).getItemAtSelectedSlot().attributes.customAttributes;v.shotsLeft=w,this.noa.entities.getInventory(this.heldItemState.__id).getItemAtSelectedSlot().attributes.customAttributes=v}},{key:"_getShotsLeftCount",value:function(){var w;return null===(w=this.noa.entities.getInventory(this.heldItemState.__id).getItemAtSelectedSlot().attributes.customAttributes)||void 0===w?void 0:w.shotsLeft}},{key:"_makeMuzzleFlash",value:function(){this.firedRenderTicksAgo=0,this.muzzleFlashPlane.setEnabled(!0),this.muzzleFlashPlane.scaling=new j.l(this.smallMuzzleFlashScale,this.smallMuzzleFlashScale,this.smallMuzzleFlashScale),this.muzzleFlashPlane.rotationQuaternion=j.f.RotationAxis(new j.l(0,0,1),2*Math.random()*Math.PI)}},{key:"_spawnBulletCasing",value:function(){var w=this;console.assert(this.noa.playerEntity===this.heldItemState.__id,"bullet casings should only be used locally");var v=this.mesh.getAbsolutePosition(),I=v.x,P=v.y,u=v.z,Q=[];this.noa.localToGlobal([I,P,u],Q);var K,a=this.noa.entities.add(Q,.1,.1,this.gunTypeObj.getBulletCasingMesh(),null,!0),U=1.5+.3*Math.random(),p=.7+.3*Math.random();K=this.noa.playerEntity===this.heldItemState.__id&&this.noa.camera.zoomDistance<=1?this.noa.camera.heading:this.noa.entities.getMoveState(this.heldItemState.__id).heading,this.noa.ents.getPhysicsBody(a).applyImpulse([Math.cos(K)*p,U,-Math.sin(K)*p]),setTimeout((function(){w.noa.entities.deleteEntity(a)}),5e3)}},{key:"_makeBulletHole",value:function(w,v,I){var P=this.gunTypeObj.getBulletHitBillboard(),u=.008,Q=t().create();this.noa.globalToLocal(w,null,Q);var K=new j.l(Q[0]+v[0]*u,Q[1]+v[1]*u,Q[2]+v[2]*u),a=new j.l(Q[0]-v[0],Q[1]-v[1],Q[2]-v[2]);P.position=K,P.lookAt(a);var U=[w[0]+v[0]*u,w[1]+v[1]*u,w[2]+v[2]*u];P.isPickable=!1,this.noa.rendering.addMeshToScene(P,!1,U),setTimeout((function(){P.dispose()}),I)}},{key:"_setFirstPersonMeshPosition",value:function(w,v){if(console.assert(this.heldItemState.__id===this.noa.playerEntity,"Should only be called for local player."),this.noa.camera.zoomDistance<=1){var I=.25*(1-w),P=-.12*(1-w)-.07,u=-.35*v;this.mesh.position=new j.l(I,P+u,.3)}else 0===this.mesh.position.x&&0===this.mesh.position.y&&0===this.mesh.position.z||(this.mesh.position=Kw)}},{key:"_updateAimingFov",value:function(w){var v=1-.25*w;this.noa.entities.getState(this.noa.playerEntity,"playerCameraAdjustment").fovMultiplier.setMultiplierType("aimingGunZoom",v)}},{key:"_updateAttackBlockedBillboard",value:function(){if(!(this._ticksSinceAttackBlockedBillboardUpdate++<1)){this._ticksSinceAttackBlockedBillboardUpdate=0;var w=this.weaponHelper.getAttackBlockedPosition(this.bulletReachDistance);w?(t().scaleAndAdd(w.localBlockedPosition,w.localBlockedPosition,w.normal,.001),this.bulletBlockedBillboardPlanePos.x=w.localBlockedPosition[0],this.bulletBlockedBillboardPlanePos.y=w.localBlockedPosition[1],this.bulletBlockedBillboardPlanePos.z=w.localBlockedPosition[2],this.bulletBlockedBillboardPlane.position=this.bulletBlockedBillboardPlanePos,t().scaleAndAdd(w.localBlockedPosition,w.localBlockedPosition,w.normal,-1),this.bulletBlockedBillboardLookAt.x=w.localBlockedPosition[0],this.bulletBlockedBillboardLookAt.y=w.localBlockedPosition[1],this.bulletBlockedBillboardLookAt.z=w.localBlockedPosition[2],this.bulletBlockedBillboardPlane.lookAt(this.bulletBlockedBillboardLookAt),this.bulletBlockedBillboardPlane.setEnabled(!0)):this.bulletBlockedBillboardPlane.setEnabled(!1)}}},{key:"_makeShotSound",value:function(){if(this.lastGunShotTail){var w=this.gunTypeObj.msPerRound/3;this.lastGunShotTail.fade(this.lastGunShotTail.getVolume(),0,w)}var v=this.gunTypeObj.spriteTrackname,I=this.gunTypeObj.soundPrefix;if(Date.now()-this.lastRoundFired>3*this.gunTypeObj.msPerRound&&(0,N.i)(v,"".concat(I,"_first_shot_01")))this.lastGunShotTail=(0,q.c)().play("".concat(I,"_first_shot_01"),q.g.gunShot,this.heldItemState.__id,75,10,!0);else{var P=(0,N.d)("".concat(I,"_shot_"));this.lastGunShotTail=(0,q.c)().play(P,q.g.gunShot,this.heldItemState.__id,75,10,!0)}(0,N.i)(v,"".concat(I,"_tail_only_shot_01"))&&(this.lastGunShotTail=(0,q.c)().play("".concat(I,"_tail_only_shot_01"),q.g.gunShot,this.heldItemState.__id,75,10,!0))}},{key:"_playHeadshotSound",value:function(){(0,q.c)().play((0,N.d)("headshot_"),q.g.gunHeadshot)}},{key:"_playBodyshotSound",value:function(){}},{key:"_handleBulletCasingHitFloorSound",value:function(){clearTimeout(this._bulletCasingHitFloorTimeout),this._bulletCasingHitFloorTimeout=setTimeout((function(){(0,q.c)().play((0,N.d)("bullet_shell_bounce_general_"),q.g.bulletShellBounce)}),400)}}]),I}(A),Uw=new j.l(1,0,0),pw=function(){function w(v,I){(0,Y.e)(this,w),this.noa=void 0,this.gunTypeObj=void 0,this._currInacc=void 0,this._nonMoveSpeedInacc=void 0,this._nonMoveInacc=void 0,this._currMoveInacc=void 0,this._prevBroadcastedInacc=void 0,this._ticksSinceBroadcast=void 0,this._lastTick=void 0,this._isAiming=void 0,this.noa=v,this.gunTypeObj=I,this._currInacc=I.inaccuracyStanding,this._nonMoveSpeedInacc=0,this._nonMoveInacc=0,this._currMoveInacc=I.inaccuracyStanding,this._prevBroadcastedInacc=-200,this._ticksSinceBroadcast=100,this._lastTick=Date.now(),this._isAiming=!1}return(0,g.c)(w,[{key:"shot",value:function(){this._isAiming?this._nonMoveInacc+=this.gunTypeObj.altInaccuracyFromShot:this._nonMoveInacc+=this.gunTypeObj.inaccuracyFromShot}},{key:"jump",value:function(){this._isAiming?this._nonMoveInacc+=this.gunTypeObj.altInaccuracyFromJump:this._nonMoveInacc+=this.gunTypeObj.inaccuracyFromJump}},{key:"tick",value:function(w){var v,I=Date.now()-this._lastTick;this._isAiming=w,v=w?{inaccuracyStanding:this.gunTypeObj.altInaccuracyStanding,inaccuracyMovement:this.gunTypeObj.altInaccuracyMovement,yVelocityInaccuracy:this.gunTypeObj.altYVelocityInaccuracy}:{inaccuracyStanding:this.gunTypeObj.inaccuracyStanding,inaccuracyMovement:this.gunTypeObj.inaccuracyMovement,yVelocityInaccuracy:this.gunTypeObj.yVelocityInaccuracy};var P=this.noa.entities.getPhysicsBody(this.noa.playerEntity),u=Math.pow(Math.pow(P.velocity[0],2)+Math.pow(P.velocity[2],2),.5),Q=this.noa.serverSettings.runningSpeed*this.noa.entities.getMoveState(this.noa.playerEntity).speedMultiplier.getTotalMultipliedVal(),K=v.inaccuracyStanding+u/Q*v.inaccuracyMovement+v.yVelocityInaccuracy*Math.abs(P.velocity[1]);K>=this._currMoveInacc?this._currMoveInacc=K:this._currMoveInacc=this._decreaseInacc(this._currMoveInacc,K,I),0!==this._nonMoveInacc&&(this._nonMoveInacc=this._decreaseInacc(this._nonMoveInacc,0,I));var a=this._currMoveInacc+this._nonMoveInacc,U=Math.abs(this._prevBroadcastedInacc-a);(++this._ticksSinceBroadcast>=6&&U>.5||U>10)&&((0,m.d)(a),this._prevBroadcastedInacc=a,this._ticksSinceBroadcast=0),this._currInacc=a,this._lastTick=Date.now()}},{key:"_decreaseInacc",value:function(w,v,I){var P=w-v;return P<.05?v:Math.max(w-I*this.gunTypeObj.recoveryRate*P,v)}},{key:"getDirectionWithInaccuracy",value:function(w){var v=this._currInacc*c.z,I=(0,H.l)(w),P=I.theta,u=I.phi,Q=Math.random()*v-v/2,K=Math.random()*v-v/2;return(0,H.e)(P+Q,u+K)}}]),w}()},94899:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return Y}});var P=I(37762),u=I(47077),Q=I.n(u),K=I(41038),a=I(85774),U=0,p=Q().create(),r=Q().create();function Y(w){return{name:"hidingMeshManager",order:105,state:{addMeshComponent:null,removeMeshComponent:null,addShadow:!1,shadowSize:void 0,hideDist:55,movingHideDist:null,displayOutsideLoadedChunk:!1,immediatelyUpdate:!1,_lastPos:null,_lastEnabled:!1,_forceUpdate:!1},onAdd:function(I,P){if(!P.addMeshComponent||!P.removeMeshComponent)throw new Error("Added hidingMeshManager without addMeshComponent or removeMeshComponent ".concat(P.addMeshComponent," ").concat(P.removeMeshComponent));P._lastPos=Q().create(),Q().copy(P._lastPos,w.ents.getPosition(I)),P.immediatelyUpdate?v(P):P._forceUpdate=!0},onRemove:function(w,v){v.removeMeshComponent()},system:function(I,u){var K=!1,a=w.entities.getPosition(w.playerEntity);Q().dist(a,r)>5&&(K=!0);var p,Y=Date.now(),g=!1,J=(0,P.b)(u);try{for(J.s();!(p=J.n()).done;){var l=p.value;if((null!==l.movingHideDist||K||l._forceUpdate)&&(v(l),l._forceUpdate=!1,Date.now()-Y>5)){U++,g=!0;break}}}catch(w){J.e(w)}finally{J.f()}g||(U=0,K&&Q().copy(r,a)),U>10&&console.error("hidingMeshManagerProcessor update took too long and is skipping update for some entities")}};function v(v){var I=v.__id,P=Q().copy(p,w.ents.getPosition(I)),u=v.hideDist;if(null!==v.movingHideDist){var U=Q().dist(v._lastPos,P);Q().copy(v._lastPos,P),U>.01&&(u=v.movingHideDist)}Q().floor(P,P);var r=Q().dist(w.entities.getPosition(w.playerEntity),P)<u&&((0,a.N)().hasChunkWithBlockCoordinates(P[0],P[1],P[2])||v.displayOutsideLoadedChunk);v._lastEnabled&&r||!v._lastEnabled&&!r||(r?(w.entities.getMeshData(I)||v.addMeshComponent(),v.addShadow&&!w.entities.getState(I,"shadow")&&(w.ents.addComponent(I,"shadow",{size:v.shadowSize}),w.entities.getState(I,"shadow").enabledCombinator=new K.c)):(v.removeMeshComponent(),v.addShadow&&w.entities.getState(I,"shadow")&&w.ents.removeComponent(I,"shadow")),v._lastEnabled=r)}}},68564:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return a}});var P=I(37762),u=I(64400).BoxBuilder,Q=I(47077),K=I(52126).g;function a(w){var v=u.CreateBox("playerHitbox",{width:1,depth:.7,height:K.playerHitboxHeights.head},w.rendering.getScene());v.visibility=0,v.setEnabled(!1),w.rendering.getScene().removeMesh(v);return{name:"hitbox",order:105,state:{hitboxMesh:null},onAdd:function(I,P){var u=v.createInstance("playerHitbox".concat(I));u.metadata=new w.rendering.MeshMetadataType,u.metadata.eId=I,P.hitboxMesh=u},onRemove:function(w,v){v.hitboxMesh.dispose()},system:function(v,I){var u,a=(0,P.b)(I);try{for(a.s();!(u=a.n()).done;){var p=u.value,r=w.entities.getState(p.__id,"meshRotation").renderHeading,Y=w.entities.getPositionData(p.__id)._renderPosition;Q.set(U,Y[0],Y[1]+K.playerHitboxHeights.head/2,Y[2]+.1),Q.rotateY(U,U,Y,r),p.hitboxMesh.position.copyFromFloats(U[0],U[1],U[2]),p.hitboxMesh.rotation.y=r}}catch(w){a.e(w)}finally{a.f()}}}}var U=Q.create()},36217:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return Q}});var P=I(37762),u=I(85774);function Q(w){return{name:"inLoadedChunk",order:105,state:{checkEvery:5,inChunkChange:null,_tick:0,_wasInChunk:!1},onAdd:function(w,I){console.assert(null!==I.inChunkChange,"Should pass inChunkChange when adding inLoadedChunk component."),v(I)},system:function(w,I){var u,Q=(0,P.b)(I);try{for(Q.s();!(u=Q.n()).done;){var K=u.value;++K._tick===K.checkEvery&&(v(K),K._tick=0)}}catch(w){Q.e(w)}finally{Q.f()}}};function v(v){var I=w.entities.getPosition(v.__id),P=(0,u.N)().hasChunkWithBlockCoordinates(I[0],I[1],I[2]);v._wasInChunk&&!P&&v.inChunkChange(!1),!v._wasInChunk&&P&&v.inChunkChange(!0),v._wasInChunk=P}}},17870:function(w){w.exports=function(w){return{name:"itemState",order:105,state:{amount:1,name:null,typeObj:null,cantPickUp:!1},attributes:{},onAdd:null,onRemove:null,system:null}}},21262:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return Q}});var P=I(37762),u=I(65131);function Q(w){return{name:"meshRotation",order:100,state:{renderHeading:0,serverSetHeading:0},onAdd:function(w,v){},onRemove:null,renderSystem:function(I,u){var Q,K=(0,P.b)(u);try{for(K.s();!(Q=K.n()).done;){var a=Q.value,U=w.ents.getMoveState(a.__id),p=void 0;p=a.__id===w.playerEntity?w.camera.heading:w.entities.getGenericPlayerState(a.__id)?U.heading:a.serverSetHeading,a.renderHeading=v(a.renderHeading,p);var r=w.entities.getMeshData(a.__id);r&&(r.mesh.rotation.y=a.renderHeading+Math.PI)}}catch(w){K.e(w)}finally{K.f()}}};function v(w,v){var I=(0,u.l)(v-w+Math.PI,2*Math.PI)-Math.PI,P=Math.max(Math.abs(I)/5,Math.min(Math.abs(I),.15));return I<0?(w-P)%(2*Math.PI):(w+P)%(2*Math.PI)}}},92199:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return Q}});var P=I(37762),u=I(41038);function Q(w){return{name:"moveState",order:30,state:{heading:0,crouching:!1,speed:0,jumping:!1,cameraPitch:0,speedMultiplier:null,jumpMultiplier:null,hitInPrevTick:!1,setArmsAreSwinging:null,armSwinging:!1,_renderTickSinceSwing:!1,_armSwungLastTick:!1,_tickSinceSwing:!1},onAdd:function(v,I){I.speedMultiplier=new u.e,I.jumpMultiplier=new u.e,I.setArmsAreSwinging=function(){v===w.playerEntity&&(I.armSwinging=!0,I._armSwungLastTick=!0,I._renderTickSinceSwing=!1,I._tickSinceSwing=!1)}},onRemove:null,system:function(v,I){var u,Q=(0,P.b)(I);try{for(Q.s();!(u=Q.n()).done;){var K=u.value;K.__id===w.playerEntity&&(!K._armSwungLastTick&&K._tickSinceSwing&&K._renderTickSinceSwing&&(K.armSwinging=!1),K._tickSinceSwing=!0,K._armSwungLastTick=!1,K.hitInPrevTick=!1)}}catch(w){Q.e(w)}finally{Q.f()}},renderSystem:function(v,I){var u,Q=(0,P.b)(I);try{for(Q.s();!(u=Q.n()).done;){var K=u.value;K.__id===w.playerEntity&&(K._renderTickSinceSwing=!0)}}catch(w){Q.e(w)}finally{Q.f()}}}}},13813:function(w,v,I){"use strict";I.r(v),I.d(v,{checkMoveFuncs:function(){return R},default:function(){return x},jumpOffLadderApplyForceOverTicks:function(){return J},tickMovementPrePhysics:function(){return j}});var P,u,Q=I(15671),K=I(43144),a=I(47077),U=I.n(a),p=I(85774),r=I(90574),Y=I(38017),g={Vines:{upForceScalar:1},Ladder:{upForceScalar:1},"Pine Ladder":{upForceScalar:1},"Plum Ladder":{upForceScalar:1},"Cedar Ladder":{upForceScalar:1.2},"Aspen Ladder":{upForceScalar:1},"Elm Ladder":{upForceScalar:1.2},"Palm Ladder":{upForceScalar:1.2},"Pear Ladder":{upForceScalar:1},"Iron Ladder":{upForceScalar:1.4},"Maple Trapdoor":{upForceScalar:.7},"Pine Trapdoor":{upForceScalar:.7},"Plum Trapdoor":{upForceScalar:.7},"Cedar Trapdoor":{upForceScalar:.7},"Aspen Trapdoor":{upForceScalar:.7},"Elm Trapdoor":{upForceScalar:.7},"Palm Trapdoor":{upForceScalar:.7},"Pear Trapdoor":{upForceScalar:.7}},J=6,l=function(){function w(){(0,Q.e)(this,w),this.__id=void 0,this.maxSpeed=4,this.moveForce=80,this.responsiveness=20,this.movingFriction=0,this.standingFriction=5,this.airMoveMult=1,this.jumpForce=0,this.jumpTime=500,this._jumpCount=0,this._currjumptime=0,this._isJumping=!1,this._bhopCount=0,this._onGroundPrevTick=!0,this._hadJumpInputPrevTick=!1,this._hadCrouchInputPrevTick=!1,this.ladderMinForce=140,this.ladderMaxForce=410,this.ladderAccelTicks=105,this._ticksSinceSwappedLadderDir=0,this._lastLadderDirWasUp=!0,this.jumpOffLadderApplyForceOverTicks=J,this.jumpOffLadderMaxForce=175,this.jumpOffLadderMinForce=0,this._ticksSinceJumpOffLadder=-1,this._jumpOffLadderAxis=0,this._jumpOffLadderMoveDir=1,this._jumpBeenUnheldSinceOnLadder=!1,this._lastJumpingStart=0,this._flying=!1,this._flyMoveDirNumTicks=0,this.noa=void 0}return(0,K.c)(w,[{key:"shouldIgnoreCrouchingSpeedReduction",value:function(){return this._flying||this.isInWater()&&!this.isOnGround()}},{key:"isInWater",value:function(){return(0,r.k)(this.noa,this.noa.ents.getPositionData(this.__id))}},{key:"isOnGround",value:function(){return this.noa.ents.getPhysicsBody(this.__id).atRestY()<0}},{key:"isInCobweb",value:function(){var w=this.noa.ents.getPositionData(this.__id);return(0,r.j)((0,p.N)(),w,(0,Y.blockNameToId)("Cobweb"))||(0,r.j)((0,p.N)(),w,(0,Y.blockNameToId)("Net"))}}]),w}();function R(){var w=(0,p.pb)().ents.getMovement((0,p.pb)().playerEntity);return P&&u&&(w.isInCobweb!==P||w.isInWater!==u)}function x(w){return{name:"movement",order:30,stateConstructor:l,onAdd:function(v,I){I.noa=w,P=I.isInCobweb,u=I.isInWater},onRemove:null,system:function(w,v){}}}function j(w,v){for(var I=w.entities.getStatesList("movement"),P=w.entities,u=0;u<I.length;u++){var Q=I[u];if(P.getPhysics(Q.__id)){var K=P.getPhysicsBody(Q.__id);i(w,v,Q,P.getMoveState(Q.__id),K)}}}var s=U().create(),B=U().create(),t=U().create();function i(w,v,I,P,u){if(w.entities.getState(I.__id,"genericPlayerState").isAlive){var Q=P.jumping&&!I._hadJumpInputPrevTick;w.serverSettings.creative&&Q&&Date.now()-I._lastJumpingStart<300?I._flying=!I._flying:w.serverSettings.creative||(I._flying=!1),Q&&(I._lastJumpingStart=Date.now());var K=I.isInWater(),a=(0,r.f)(w.bloxd,I.__id,u),Y=a.onLadder,J=a.goingUpLadderOnAxis,l=I.isInCobweb(),R=I.isOnGround(),x=(R||I._jumpCount<function(w,v,I){var P=w.serverSettings.airJumpCount;if(I)return P+1;return P}(w,I.__id,K))&&!P.hitInPrevTick&&!l;if(R&&(I._isJumping=!1,I._jumpCount=0,I._flying=!1),!P.jumping||Y||I._flying)I._isJumping=!1,R&&(I._bhopCount=0,P.speedMultiplier.setMultiplierType("bhop",1));else if(I._isJumping){if(I._currjumptime>0){var j=I.jumpForce;I._currjumptime<v&&(j*=I._currjumptime/v),u.applyForce([0,j,0]),I._currjumptime-=v}}else x&&(I._isJumping=!0,u.applyImpulse([0,w.serverSettings.jumpAmount*P.jumpMultiplier.getTotalMultipliedVal(),0]),I._currjumptime=I.jumpTime,R?I._onGroundPrevTick||I._hadJumpInputPrevTick||!P.speed||p.Lc.clientEscMenuOptions.disableBunnyHopping?(I._bhopCount=0,P.speedMultiplier.setMultiplierType("bhop",1)):(I._bhopCount++,P.speedMultiplier.setMultiplierType("bhop",(0,p.N)().getBhopMultiplier(w.playerEntity,I._bhopCount))):(I._jumpCount++,u.velocity[1]<0&&(u.velocity[1]=0)));var i={flying:!1,a:0};if(i.a=2,i.a+=5,i.flying&&i.a||I._flying){u.gravityMultiplier=0;var z,E=65;P.jumping?(z=1,I._hadJumpInputPrevTick||(I._flyMoveDirNumTicks=0)):P.crouching?(z=-1,I._hadCrouchInputPrevTick||(I._flyMoveDirNumTicks=0)):(z=0,I._flyMoveDirNumTicks=0),I._flyMoveDirNumTicks++;E+=.5*Math.min(I._flyMoveDirNumTicks,200),u.applyForce([0,E*z,0]),u.velocity[1]=6*u.velocity[1]/10,Math.abs(u.velocity[1])<.5&&(u.velocity[1]=0)}if(!I._flying){if(Y){u.velocity[1]<=0?(I._lastLadderDirWasUp&&(I._ticksSinceSwappedLadderDir=0),I._lastLadderDirWasUp=!1):(I._lastLadderDirWasUp||(I._ticksSinceSwappedLadderDir=0),I._lastLadderDirWasUp=!0);var o=Math.min(I._ticksSinceSwappedLadderDir,I.ladderAccelTicks)/I.ladderAccelTicks,h=I.ladderMinForce+o*(I.ladderMaxForce-I.ladderMinForce);u.velocity[1]<=0&&P.crouching?u.gravityMultiplier=0:u.gravityMultiplier=h/20,P.speedMultiplier.setMultiplierType("ladder",.7),u.friction=.25,u.velocity[1]=0;for(var n=0,W=[0,2];n<W.length;n++){var V=W[n];if(null!==J[V]){var F=J[V];U().set(s,0,h*g[F].upForceScalar,0),u.applyForce(s),P.jumping&&I._jumpBeenUnheldSinceOnLadder&&(I._ticksSinceJumpOffLadder=0,I._jumpOffLadderAxis=V,I._jumpOffLadderMoveDir=-u.resting[V])}}P.jumping||(I._jumpBeenUnheldSinceOnLadder=!0),I._ticksSinceSwappedLadderDir++}else P.speedMultiplier.setMultiplierType("ladder",1),u.gravityMultiplier=2,u.friction=1,I._jumpBeenUnheldSinceOnLadder=!1,I._ticksSinceSwappedLadderDir=0;if(-1!==I._ticksSinceJumpOffLadder){var O=I._ticksSinceJumpOffLadder/I.jumpOffLadderApplyForceOverTicks,N=I.jumpOffLadderMaxForce+O*(I.jumpOffLadderMinForce-I.jumpOffLadderMaxForce);if(U().set(s,0,0,0),I._ticksSinceJumpOffLadder>0){s[1]=.4*N}var q=N*I._jumpOffLadderMoveDir;s[I._jumpOffLadderAxis]=q,u.applyForce(s),++I._ticksSinceJumpOffLadder>I.jumpOffLadderApplyForceOverTicks&&(I._ticksSinceJumpOffLadder=-1)}if(K){function D(w){var v=w-Math.abs(u.velocity[1]);return v<=0?0:v<1?30*v:30}if(P.speedMultiplier.setMultiplierType("water",.8),P.crouching){var m=D(5);U().set(s,0,-m,0),u.applyForce(s)}if(P.jumping){var c=D(3);U().set(s,0,c,0),u.applyForce(s)}}else P.speedMultiplier.setMultiplierType("water",1)}if(P.speedMultiplier.setMultiplierType("inCobweb",!I._flying&&l?.07:1),!l||I._flying||R||(u.velocity[1]=0,u.gravityMultiplier=.3),(0,p.N)().getIsStoodOnBlock(w.playerEntity)){var M=(0,p.N)().getStoodBlockSpeedMultiplier(w.playerEntity);P.speedMultiplier.setMultiplierType("blockSpeedMult",M)}else I._flying&&P.speedMultiplier.setMultiplierType("blockSpeedMult",1);var S=P.speed*P.speedMultiplier.getTotalMultipliedVal()*(I._flying?w.serverSettings.flySpeedMultiplier:1);I._onGroundPrevTick=R,I._hadJumpInputPrevTick=P.jumping,I._hadCrouchInputPrevTick=P.crouching;var e=s,H=B;if(P.speed){U().set(e,0,0,S),U().rotateY(e,e,t,P.heading),U().subtract(H,e,u.velocity),H[1]=0;var G=U().length(H);if(U().normalize(H,H),G>0){var L=I.moveForce;R||(L*=I.airMoveMult);var d=I.responsiveness*G;G<.3&&(d*=G),L>d&&(L=d),U().scale(H,H,L),u.applyForce(H)}u.friction=I.movingFriction}else u.friction=I.standingFriction}}},26885:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return K}});var P=I(37762),u=I(41038),Q=I(52126).g;function K(w){return{name:"playerCameraAdjustment",order:105,state:{movementBasedFov:1.2,fovMultiplier:new u.e},renderSystem:function(v,I){var u,K=(0,P.b)(I);try{for(K.s();!(u=K.n()).done;){var a=u.value,U=w.ents.getMoveState(a.__id),p=w.ents.getState(w.camera.cameraTarget,"followsEntity"),r=U.speed*U.speedMultiplier.getTotalMultipliedVal(),Y=void 0;Y=r<=4?1.2:1.2+.033*(r-4),Y*=a.fovMultiplier.getTotalMultipliedVal(),a.movementBasedFov=a.movementBasedFov+(Y-a.movementBasedFov)*(a.movementBasedFov>Y?.3:.2),Math.abs(Y-a.movementBasedFov)<5e-4&&(a.movementBasedFov=Y),w.rendering._camera.fov=a.movementBasedFov;var g=void 0;g=U.crouching?.75*Q.playerHeight:Q.playerEyeToHeightRatio*Q.playerHeight,p.offset[1]<g?p.offset[1]=Math.max(p.offset[1]-.05,g):p.offset[1]>g&&(p.offset[1]=Math.min(p.offset[1]+.05,g))}}catch(w){K.e(w)}finally{K.f()}}}}},77666:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return Q}});var P=I(16510),u=I(52126);function Q(w){return{name:"playerHowlerListenerUpdate",order:45,state:{},onAdd:null,onRemove:null,system:function(v,I){console.assert(1===I.length,"Component should only be on playerEntity");var Q=w.entities.getPosition(w.playerEntity);P.Howler.pos(Q[2],Q[1]+u.g.playerHeight*u.g.playerEyeToHeightRatio,Q[0]);var K=w.camera.getDirection(),a=w.camera.getUpDirection();P.Howler.orientation(K[2],K[1],K[0],a[2],a[1],a[0])},renderSystem:null}}},64716:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return p}});var P=I(37762),u=I(80105),Q=I(54044),K=I(85774),a=new u.l(0,1,0),U=15;function p(w){return{name:"playerMesh",order:105,state:{rootMesh:null,namedNodes:null,consumedNetworkArmSwing:!0,_ticksSinceSwing:16,_queuedSwing:!1,_walkingAngle:0,_angleMoveDir:1},onAdd:function(v,I){I.rootMesh.rotationQuaternion=null;var u=I.rootMesh.getChildTransformNodes(!1);I.namedNodes={};var Q,K=(0,P.b)(u);try{for(K.s();!(Q=K.n()).done;){var a=Q.value,U=a.name.split(" "),p=U[U.length-1];I.namedNodes[p]=a}}catch(w){K.e(w)}finally{K.f()}w.rendering.addMeshToScene(I.rootMesh);var r,Y=(0,P.b)(I.rootMesh.getChildMeshes(!1));try{for(Y.s();!(r=Y.n()).done;){var g=r.value;w.rendering.addMeshToScene(g),g.alwaysSelectAsActiveMesh=!0,g.doNotSyncBoundingInfo=!0}}catch(w){Y.e(w)}finally{Y.f()}},onRemove:function(w,v){v.rootMesh.dispose(!1)},renderSystem:function(J,l){var R,x=(0,P.b)(l);try{for(x.s();!(R=x.n()).done;){var j,s,B=R.value,t=w.ents.getMoveState(B.__id),i=null===(j=w.ents.getHeldItemState(B.__id))||void 0===j?void 0:j.heldItem,z=(null===i||void 0===i?void 0:i.gunTypeObj)||(null===i||void 0===i||null===(s=i.typeObj)||void 0===s?void 0:s.holdAsAiming),E=0;t.crouching?(E=Math.PI/8,I(B.namedNodes.TorsoNode,E,0,0)):I(B.namedNodes.TorsoNode,0,0,0);var o=B.__id===w.playerEntity?w.camera.pitch:t.cameraPitch;o-=E,I(B.namedNodes.HeadMesh,p(o),0,0);var h=!0;if(z){var n,W,V,F=o;F=u(F+=null!==(n=null===(W=(V=w.entities.getHeldItem(B.__id)).getThirdPersonArmPitchFromReloading)||void 0===W?void 0:W.call(V))&&void 0!==n?n:0),I(B.namedNodes.ArmRightMesh,Math.min(.3*-Math.PI+F,0),0,0),B.namedNodes.ArmRightMesh.rotate(a,.18*Math.PI,Q.j.WORLD),I(B.namedNodes.ArmLeftMesh,Math.min(.4*-Math.PI+F,.1*-Math.PI),0,0),B.namedNodes.ArmLeftMesh.rotate(a,.15*-Math.PI,Q.j.WORLD),h=!1}else if(t.armSwinging||!B.consumedNetworkArmSwing?(B.consumedNetworkArmSwing=!0,B._ticksSinceSwing>U?(B._ticksSinceSwing=1,B._queuedSwing=!1):B._ticksSinceSwing>=9.75&&!B._queuedSwing&&(B._queuedSwing=!0)):B._queuedSwing&&B._ticksSinceSwing>U&&(B._ticksSinceSwing=1,B._queuedSwing=!1),B._ticksSinceSwing<=U){var O=B._ticksSinceSwing/U,N=r[1].amt;r[1].amt-=E;var q=(0,K.hb)(r,O,B.namedNodes.ArmRightMesh.rotation.x,U);r[1].amt=N;var m=(0,K.hb)(Y,O,B.namedNodes.ArmRightMesh.rotation.y,U),c=(0,K.hb)(g,O,B.namedNodes.ArmRightMesh.rotation.z,U);I(B.namedNodes.ArmRightMesh,q,m,c);var M=B.namedNodes.ArmLeftMesh;I(M,(0,K.Lb)(M.rotation.x,0,.1),0,0),B._ticksSinceSwing++,h=!1}v(B,h)}}catch(w){x.e(w)}finally{x.f()}}};function v(v,P){var u,Q,a=w.ents.getMoveState(v.__id);if(a.crouching)u=.5;else{var U=.16*(a.speed-4)+.9;u=(0,K.m)(U,.9,1.4)}if(a.speed){var p=Math.abs(Math.sin(v._walkingAngle/u*.8*Math.PI/2+Math.PI/2));p=Math.max(p,Math.abs(Math.sin(.8*Math.PI/2+Math.PI/2))),Q=.03*p*a.speed*u*v._angleMoveDir,v._walkingAngle=v._walkingAngle+Q,v._walkingAngle>u?v._angleMoveDir=-1:v._walkingAngle<-u&&(v._angleMoveDir=1)}else Q=.07,v._walkingAngle>0?v._walkingAngle=Math.max(0,v._walkingAngle-Q):v._walkingAngle=Math.min(0,v._walkingAngle+Q);if(I(v.namedNodes.LegRightMesh,-v._walkingAngle,0,0),I(v.namedNodes.LegLeftMesh,v._walkingAngle,0,0),P){var r=function(w,v){Math.abs(w.rotation.x-v)>Math.abs(.8*Q)+.01?I(w,(0,K.Lb)(w.rotation.x,v,.05),0,0):I(w,v,0,0)};r(v.namedNodes.ArmRightMesh,.8*v._walkingAngle),r(v.namedNodes.ArmLeftMesh,.8*-v._walkingAngle)}}function I(w,v,I,P){w.rotationQuaternion=null,w.rotation.copyFromFloats(v,I,P),w.rotation._isDirty=!0}function u(w){return.95*w}function p(w){return 1*w}}var r=[{atFrac:0,amt:0},{atFrac:.5,amt:.5*-Math.PI},{atFrac:1,amt:0}],Y=[{atFrac:0,amt:0},{atFrac:.25,amt:-Math.PI/9},{atFrac:.7,amt:Math.PI/9},{atFrac:1,amt:0}],g=[{atFrac:0,amt:0},{atFrac:.5,amt:Math.PI/6},{atFrac:.5,amt:Math.PI/6},{atFrac:1,amt:0}]},53477:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return U}});var P=I(9488),u=I(52644),Q=I(49620),K=I(87683),a=I(90673);function U(w){return{name:"playerName",order:105,state:{name:null,nameYOffset:2.2,planeEId:null},onAdd:function(v,I){var U,p=null!==(U=I.name)&&void 0!==U?U:w.playerNames[v],r=Q.g.CreatePlane("".concat(I.__id,"NameTag"),{height:.2,width:.1*p.length},w.rendering.getScene());I.planeEId=w.entities.add([0,0,0],1,1,r,[0,I.nameYOffset,0]),r.billboardMode=u.b.BILLBOARDMODE_ALL,r.alwaysSelectAsActiveMesh=!0,r.doNotSyncBoundingInfo=!0,w.ents.addComponent(I.planeEId,"followsEntity",{entity:I.__id});var Y=new a.d("".concat(I.__id,"NameTagTex"),{width:30*p.length,height:64},w.rendering.getScene()),g=new K.b("".concat(I.__id,"NameTagMat"),w.rendering.getScene());g.specularColor=new P.b(0,0,0),g.diffuseTexture=Y,r.material=g;if(Y.drawText(p,null,null,"bolder 47px 'Jetbrains Mono'","black","white",!0,!0),g.freeze(),w.ents.getGenericPlayerState(I.__id)){var J=w.ents.getGenericPlayerState(I.__id).meshEnabledCombinator.getTotalBooleanVal();w.ents.getMeshData(I.planeEId).mesh.setEnabled(J)}},onRemove:function(v,I){w.ents.deleteEntity(I.planeEId)},system:null,renderSystem:null}}},30258:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return u},tickReceivesInputsPrePhysics:function(){return Q}});var P=I(37762);function u(w){return{name:"receivesInputs",order:20,state:{joystickHeading:null,isTouchscreen:!1,canRunCombinator:null,_moving:!1,_running:!1},onAdd:function(w,v){},onRemove:null,system:function(w,v){}}}function Q(w,v){var I,u=w.entities.getStatesList("receivesInputs"),Q=w.entities,a=w.inputs.state,U=w.camera.heading,p=(0,P.b)(u);try{for(p.s();!(I=p.n()).done;){var r=I.value,Y=Q.getMoveState(r.__id);if(r.isTouchscreen)Y.heading=(w.camera.heading+2*Math.PI-(r.joystickHeading+3*Math.PI/2))%(2*Math.PI);else{var g=w.entities.getMovement(r.__id);K(w.serverSettings,Y,g,a,r,U)}}}catch(w){p.e(w)}finally{p.f()}}function K(w,v,I,P,u,Q){v.jumping=!!P.jump;var K=P.forward?P.backward?0:1:P.backward?-1:0,a=P.right?P.left?0:1:P.left?-1:0;if(P.crouch?v.crouching=!0:v.crouching=!1,0===(K|a))u._moving=!1,u._running=!1,v.speed=0;else{u._moving=!0,P.sprint&&(u._running=!0),v.crouching&&!I.shouldIgnoreCrouchingSpeedReduction()||!u.canRunCombinator.getTotalBooleanVal()?v.speed=w.crouchingSpeed:u._running?v.speed=w.runningSpeed:v.speed=w.walkingSpeed,v.speedMultiplier.setMultiplierType("serverSettingsSpeedMultiplier",w.speedMultiplier);var U=Q;K?(-1===K&&(U+=Math.PI),a&&(U+=Math.PI/4*K*a)):U+=a*Math.PI/2,v.heading=U}}},81239:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return K}});var P=I(37762),u=I(47077),Q=I.n(u);function K(w){return{name:"smoothToServerPos",order:90,state:{serverPosition:null},onAdd:function(w,v){v.serverPosition||(v.serverPosition=[0,0,0])},onRemove:null,renderSystem:function(v,I){var u,K=(0,P.b)(I);try{for(K.s();!(u=K.n()).done;){var a=u.value,U=a.serverPosition,p=w.ents.getPosition(a.__id);Q().lerp(p,p,U,.3);for(var r=w.ents.getPositionData(a.__id)._extents,Y=w.worldOriginOffset[0],g=w.worldOriginOffset[2],J=[r[3]+Y,r[2]+g],l=[r[0]+Y,r[2]+g],R=[r[3]+Y,r[5]+g],x=[r[0]+Y,r[5]+g],j=p[1],s=0,B=[J,l,R,x];s<B.length;s++){var t=B[s];if(w.world.getBlockID(t[0],j,t[1])){Q().copy(p,U);break}}Q().distance(p,U)>10&&Q().copy(p,U),w.ents.setPosition(a.__id,p)}}catch(w){K.e(w)}finally{K.f()}}}}},41074:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return r}});var P=I(85774),u=I(47077),Q=I.n(u),K=I(66645),a=I(79520),U=I(38017),p={distSinceLastSound:0,lastPos:null};function r(w){return{name:"stepSoundOnWalk",order:1e3,state:p,onAdd:function(w,v){v.lastPos=[0,0,0]},onRemove:null,system:function(v,I){var u=(0,P.N)();I.forEach((function(v){if(w.entities.getGenericPlayerState(v.__id).isAlive){var I=w.ents.getPosition(v.__id),P=u.getBlock(Math.floor(I[0]),I[1]-1,Math.floor(I[2])),p=Q().dist(v.lastPos,I);if(v.distSinceLastSound+=p,Q().copy(v.lastPos,I),Number.isInteger(I[1])&&0!==P&&v.distSinceLastSound>2&&!U.default[P].fluid){var r=(0,K.d)("step_".concat((0,a.d)(P,!1)));(0,a.c)().play(r,.15),v.distSinceLastSound=0}}}))}}}},48544:function(w,v,I){"use strict";function P(w){return{name:"templateComp",order:105,state:{},onAdd:function(w,v){},onRemove:function(w,v){},system:function(w,v){}}}I.r(v),I.d(v,{default:function(){return P}})},51012:function(w,v,I){"use strict";I.r(v),I.d(v,{default:function(){return a}});var P=I(85774),u=I(47077),Q=I.n(u),K=I(80427);function a(w){return{name:"updateServerOfMovement",order:1e3,state:{},onAdd:null,onRemove:null,system:function(v,I){console.assert(1===I.length,"There should only be one entity with updateServerOfMovement."),w.entities.getGenericPlayerState(w.playerEntity).isAlive&&I.forEach((function(v){var I,u=w.ents.getPosition(w.playerEntity);[].push(1);var a=w.ents.getMoveState(v.__id),U={x:u[0],y:u[1],z:u[2],heading:w.camera.heading,speed:a.speed,jumping:a.jumping,crouching:a.crouching,pitch:w.camera.pitch,armSwinging:w.ents.getMoveState(v.__id).armSwinging,useDir:Q().copy([],null!==(I=w.actionDirection)&&void 0!==I?I:w.camera.getDirection())};isNaN(U.speed)&&(console.error("speed was NaN! Setting to 0"),U.speed=0);var p={speed:a.speed,pitch:0,x:0,y:0,z:0},r={x:u[0],y:u[1],z:u[2],speed:0};p.pitch=w.camera.pitch,r.speed=a.speed,0===p.pitch&&(r.speed*=1.3),(0,P.vc)(K.e.move,U)}))}}}},38172:function(w,v,I){"use strict";I.d(v,{e:function(){return Nw},h:function(){return qw},j:function(){return mw}});var P,u,Q,K,a,U,p,r,Y,g,J,l,R,x,j,s,B,t,i,z,E,o,h,n,W,V,F,O,N,q,m,c,M,S,e,H,G=I(4942),L=I(37762),d=I(29439),D=I(15861),f=I(64687),b=I.n(f),k=I(85774),C=I(45031),y=I(44695),T=I(89117),Z=I(75943),A=I.n(Z),X=I(93239),ww=I(47077),vw=I.n(ww),Iw=I(52126),Pw=I(20306),uw=I(77796),Qw=I(24412),Kw=I(62043),aw=I(30701),Uw=I(66645),pw=I(79520),rw=I(15671),Yw=I(43144),gw=I(72508),Jw=function(){function w(v,I){(0,rw.e)(this,w),this.bloxd=void 0,this.noa=void 0,this.eId=void 0,this.bloxd=v,this.noa=v.noa,this.eId=I}return(0,Yw.c)(w,[{key:"initClient",value:function(w){this.noa.playerNames[this.eId]||(this.noa.playerNames[this.eId]="Player"),this.noa.ents.add([w.x,w.y,w.z],Iw.g.playerWidth,Iw.g.playerHeight,null,null,!1,!0,this.eId),this.noa.ents.addComponent(this.eId,this.noa.ents.names.smoothToServerPos),console.log("Added player",this.eId),(0,C.k)(this.noa,this.eId)}},{key:"onChangeClient",value:function(w,v){if("name"===w)this.changedName(v);else if("heldItemName"===w){var I=this.noa.entities.getHeldItemState(this.eId);I.networkedHeldItemName=v,(0,gw.updateHeldItemState)(this.noa,I)}else void 0!==this.noa.ents.getMoveState(this.eId)[w]&&(this.noa.ents.getMoveState(this.eId)[w]=v)}},{key:"disposeClient",value:function(){var w;this.noa.ents.deleteEntity(this.eId),delete this.noa.playerNames[this.eId],delete this.noa.otherPlayerSettings[this.noa.playerEntity][this.eId],null===(w=this.noa.otherPlayerSettings[this.noa.serverPlayerEntity])||void 0===w||delete w[this.eId],k.hc.publish("playerLeave",this.eId),k.hc.publish("playerLeave|".concat(this.eId)),k.hc.publish("playerLeaveClientifiedEId|".concat((0,k.P)(this.eId))),k.hc.publish("playerNamesUpdated")}},{key:"changedName",value:function(w){console.log("Changed name of ".concat(this.eId," to ").concat(w)),this.noa.playerNames[this.eId]=w,this.noa.playerNames[(0,k.P)(this.eId)]=w,this.noa.ents.removeComponent(this.eId,this.noa.ents.names.playerName),this.noa.ents.addComponent(this.eId,this.noa.ents.names.playerName),k.hc.publish("playerNamesUpdated")}}]),w}(),lw=I(85728),Rw=I(93433),xw=function(){function w(v,I,P){(0,rw.e)(this,w),this.bloxd=void 0,this.noa=void 0,this.eId=void 0,this.canSeeSub=void 0,this.canAttackSub=void 0,this.colyseusEntity=void 0,this.bloxd=v,this.noa=v.noa,this.eId=I}return(0,Yw.c)(w,[{key:"initClient",value:function(w){var v=this;this.colyseusEntity=w,this.noa.ents.add([w.x,w.y,w.z],1,1,null,null,!1,!1,this.eId),this.noa.ents.addComponent(this.eId,"smoothToServerPos"),this.noa.ents.addComponent(this.eId,"meshRotation"),this.addHidingMeshMgr(),this.canSeeSub=k.hc.subscribe("otherPlayerSettings|".concat(this.eId,"|canSee"),(function(w){v.addHidingMeshMgr()})),this.canAttackSub=k.hc.subscribe("otherPlayerSettings|".concat(this.eId,"|canAttack"),(function(w){var I,P=null===(I=v.noa.entities.getMeshData(v.eId))||void 0===I?void 0:I.mesh;if(P)for(var u=0,Q=[P].concat((0,Rw.d)(P.getChildMeshes(!1)));u<Q.length;u++){var K=Q[u];void 0!==K.isPickable&&(K.isPickable=w)}}))}},{key:"onChangeClient",value:function(w,v){"heading"===w?this.noa.ents.getState(this.eId,"meshRotation").serverSetHeading=v:("name"===w&&""!==v||"type"===w)&&this.addHidingMeshMgr()}},{key:"disposeClient",value:function(){var w;this.noa.ents.deleteEntity(this.eId),delete this.noa.otherPlayerSettings[this.noa.playerEntity][this.eId],null===(w=this.noa.otherPlayerSettings[this.noa.serverPlayerEntity])||void 0===w||delete w[this.eId],k.hc.unsubscribe(this.canSeeSub),k.hc.unsubscribe(this.canAttackSub)}},{key:"addHidingMeshMgr",value:function(){var w,v,I,P=this;if(this.noa.entities.removeComponent(this.eId,"hidingMeshManager"),null!==(w=this.noa.otherPlayerSettings[this.noa.playerEntity][this.eId])&&void 0!==w&&w.canSee){var u=this.colyseusEntity.type.split("|"),Q=(0,d.e)(u,3),K=(Q[0],Q[1]),a=Q[2],U=JSON.parse(a);this.noa.ents.addComponent(this.eId,"hidingMeshManager",{addMeshComponent:function(){var w=P.bloxd.rendering.getEntityMesh(K,U,(function(w){for(var v=0,I=[w].concat((0,Rw.d)(w.getChildMeshes(!1)));v<I.length;v++){var u=I[v];void 0!==u.isPickable&&(u.isPickable=P.noa.otherPlayerSettings[P.noa.playerEntity][P.eId].canAttack,u.metadata=new P.noa.rendering.MeshMetadataType,u.metadata.eId=P.eId)}})),v=w.mesh,I=w.meshOffset,u=w.nameYOffset;P.noa.entities.addComponent(P.eId,"mesh",{mesh:v,shouldAddMeshToScene:!1,offset:I}),""!==P.colyseusEntity.name&&(P.noa.entities.removeComponent(P.eId,"playerName"),P.noa.entities.addComponent(P.eId,"playerName",{name:P.colyseusEntity.name,nameYOffset:u}))},removeMeshComponent:function(){P.noa.entities.removeComponent(P.eId,"mesh"),P.noa.entities.removeComponent(P.eId,"playerName")},hideDist:null!==(v=U.hideDist)&&void 0!==v?v:80,movingHideDist:null!==(I=U.hideDist)&&void 0!==I?I:120,displayOutsideLoadedChunk:U.hideDist>100,immediatelyUpdate:!0})}}}]),w}(),jw=I(43269),sw=I(97326),Bw=I(60136),tw=I(43668),iw=I(53229),zw=I(50061),Ew=(P=(0,zw.type)("number"),u=(0,zw.type)("number"),Q=(0,zw.type)("number"),K=(0,zw.type)("number"),a=(0,zw.type)("number"),U=(0,zw.type)("string"),p=function(w){(0,Bw.e)(I,w);var v=(0,tw.d)(I);function I(){var w;(0,rw.e)(this,I);for(var P=arguments.length,u=new Array(P),Q=0;Q<P;Q++)u[Q]=arguments[Q];return w=v.call.apply(v,[this].concat(u)),(0,jw.d)(w,"id",r,(0,sw.d)(w)),(0,jw.d)(w,"amount",Y,(0,sw.d)(w)),(0,jw.d)(w,"x",g,(0,sw.d)(w)),(0,jw.d)(w,"y",J,(0,sw.d)(w)),(0,jw.d)(w,"z",l,(0,sw.d)(w)),(0,jw.d)(w,"attributes",R,(0,sw.d)(w)),w}return(0,Yw.c)(I)}(zw.Schema),r=(0,iw.c)(p.prototype,"id",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=(0,iw.c)(p.prototype,"amount",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=(0,iw.c)(p.prototype,"x",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=(0,iw.c)(p.prototype,"y",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=(0,iw.c)(p.prototype,"z",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=(0,iw.c)(p.prototype,"attributes",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{}"}}),p),ow=(x=(0,zw.type)("string"),j=(0,zw.type)("string"),s=(0,zw.type)("number"),B=(0,zw.type)("number"),t=(0,zw.type)("number"),i=(0,zw.type)("float32"),z=(0,zw.type)("float32"),E=(0,zw.type)("boolean"),o=(0,zw.type)("boolean"),h=(0,zw.type)("float32"),n=(0,zw.type)("string"),W=function(w){(0,Bw.e)(I,w);var v=(0,tw.d)(I);function I(){var w;(0,rw.e)(this,I);for(var P=arguments.length,u=new Array(P),Q=0;Q<P;Q++)u[Q]=arguments[Q];return w=v.call.apply(v,[this].concat(u)),(0,jw.d)(w,"type",V,(0,sw.d)(w)),(0,jw.d)(w,"name",F,(0,sw.d)(w)),(0,jw.d)(w,"x",O,(0,sw.d)(w)),(0,jw.d)(w,"y",N,(0,sw.d)(w)),(0,jw.d)(w,"z",q,(0,sw.d)(w)),(0,jw.d)(w,"heading",m,(0,sw.d)(w)),(0,jw.d)(w,"speed",c,(0,sw.d)(w)),(0,jw.d)(w,"jumping",M,(0,sw.d)(w)),(0,jw.d)(w,"crouching",S,(0,sw.d)(w)),(0,jw.d)(w,"cameraPitch",e,(0,sw.d)(w)),(0,jw.d)(w,"heldItemName",H,(0,sw.d)(w)),w}return(0,Yw.c)(I)}(zw.Schema),V=(0,iw.c)(W.prototype,"type",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,iw.c)(W.prototype,"name",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=(0,iw.c)(W.prototype,"x",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=(0,iw.c)(W.prototype,"y",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=(0,iw.c)(W.prototype,"z",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=(0,iw.c)(W.prototype,"heading",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=(0,iw.c)(W.prototype,"speed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=(0,iw.c)(W.prototype,"jumping",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=(0,iw.c)(W.prototype,"crouching",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e=(0,iw.c)(W.prototype,"cameraPitch",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=(0,iw.c)(W.prototype,"heldItemName",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W),hw=I(43617),nw=I(23886),Ww=I(80427),Vw=I(40918),Fw=I(25391),Ow=function(){function w(v){(0,rw.e)(this,w),this.colyRoom=void 0,this.sessionId=void 0,this.colyRoom=v,this.sessionId=v.sessionId}return(0,Yw.c)(w,[{key:"onMessage",value:function(w,v){(0,Fw.d)()&&(0,k.Ec)(),this.colyRoom.onMessage(w,(function(I){try{Ww.i[w]&&(I=Ww.i[w].fromBuffer(Vw.Buffer.from(I))),v(I)}catch(v){(0,k.pb)().logErrorMessage("Error in onMessage ".concat(w),v)}}))}},{key:"send",value:function(w,v){(0,Fw.d)()&&(0,k.Ec)(),(0,k.xb)(v)?this.colyRoom.sendBytes(w,v):this.colyRoom.send(w,v)}},{key:"removeAllListeners",value:function(){this.colyRoom.removeAllListeners()}},{key:"leave",value:function(){this.colyRoom.leave()}}]),w}(),Nw=!1;function qw(){Nw=!0}function mw(w,v,I,P){return cw.apply(this,arguments)}function cw(){return cw=(0,D.e)(b().mark((function w(v,I,P,u){var Q,K,a,U,p,r,Y,g;return b().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return g=function(w,v){if(w===Iw.c.outdatedVersion.code)return console.error("Outdated client with version ",uw.d,", refreshing page"),void window.location.reload();for(var I in Iw.c){var P=Iw.c[I],u=P.code,Q=P.text;if(u===w){console.log("matched known error",w,"leaving game");var K=""===Q?v:Q;return void k.hc.publish("unwantedLeftGame",{reason:"You have disconnected from the server.\n".concat(K)})}}console.log("Didn't match known error, leaving game"),k.hc.publish("unwantedLeftGame",{reason:"You disconnected from the server.\n\t\t\t\tEither your internet isn't working or this is a bug.\n\t\t\t\tCode: ".concat(w)})},v.serverSettings={},v.otherPlayerSettings=(0,G.c)({},v.playerEntity,{}),v.playerNames=(0,G.c)({},v.playerEntity,k.Lc.playerName),v.colyRoom=void 0,v.serverPlayerEntity=void 0,Q={},K={x:0,y:1,z:2},a=!1,(0,k.Yb)((function(){a=!0})),A().get("id")&&"undefined"!==A().get("id")?U=A().get("id"):k.Lc.id?U=k.Lc.id:console.error("No id!!!!!!",A().get("id"),k.Lc.id),p=[u],k.Lc.isLoggedIn&&p.push(k.Lc.firebase.auth.currentUser.getIdToken().then((function(w){k.Lc.jwToken=w}))),k.Lc.id=U,k.Lc.firebase&&k.Lc.id&&k.Lc.firebase.setUserProperties({user_id:k.Lc.id}),k.Lc.connectedLobbyName=String(I),console.log("Waiting for promises to resolve"),w.next=19,Promise.all(p);case 19:r={cookies:(0,k.F)(P),deviceType:y.e,generalCookies:{joinDiscord:!!k.l.getItem("DiscordPressed"),id:U,newGo:nw.c},isLoggedIn:k.Lc.isLoggedIn,idToken:k.Lc.jwToken,lobbyName:I,languages:(0,k.eb)(),version:uw.d},console.log("joining server with game",P,"lobbyName",I),Y=v.colyClient.joinOrCreate(P,r),k.hc.publish("loadingScreenState","Joining Lobby"),Y.then((function(w){if(a)return w.removeAllListeners(),void w.leave();var I=new Ow(w);v.colyRoom=I;var u=I.send,U=I.onMessage;k.hc.publish("loadingScreenState","Loading Player Info"),ew(P,I,v);var p=setInterval((function(){u===I.send&&U===I.onMessage||qw()}),1e4);(0,k.Yb)((function(){clearInterval(p)}));var r={Player:Jw,Pebble:lw.c,Snowball:lw.c,"Reinforced Pebble":lw.c,"Reinforced Ball":lw.c,Ball:lw.c,"Moonstone Orb":lw.c,Arrow:lw.c,Fireball:lw.c,Iceball:lw.c,Coconut:lw.c,"Splash Speed Potion":lw.c,"Splash Defense Potion":lw.c,"Splash Strength Potion":lw.c,"Splash Invisibility Potion":lw.c,"Splash Jump Potion":lw.c,"Splash Knockback Potion":lw.c,"Splash Poison Potion":lw.c,"Splash Speed Potion II":lw.c,"Splash Defense Potion II":lw.c,"Splash Strength Potion II":lw.c,"Splash Invisibility Potion II":lw.c,"Splash Jump Potion II":lw.c,"Splash Knockback Potion II":lw.c,"Splash Poison Potion II":lw.c,"Splash Slowness Potion":lw.c,"Splash Slowness Potion II":lw.c,"Splash Weakness Potion":lw.c,"Splash Weakness Potion II":lw.c,"Splash Milk Potion":lw.c,"Splash Instant Damage Potion":lw.c,"Splash Instant Damage Potion II":lw.c,"Splash Instant Healing Potion":lw.c,"Splash Instant Healing Potion II":lw.c,"Splash Regeneration Potion":lw.c,"Splash Regeneration Potion II":lw.c,Mesh:xw};w.state.entities.onAdd((function(w,I){if(v.serverPlayerEntity)u();else{var P=k.hc.subscribeOnce("initInfoReceived",(function(){u()}));(0,k.Yb)((function(){k.hc.unsubscribe(P)}))}function u(){if(I!==v.serverPlayerEntity){var P=r[w.type.split("|")[0]];Q[I]={colyseusEntity:w,entity:new P((0,k.N)(),I,w.type)},Q[I].entity.initClient(w);var u=function(w,P){w in K?v.ents.getState(I,"smoothToServerPos").serverPosition[K[w]]=P:Q[I].entity.onChangeClient(w,P)},a=new ow,U=function(v){if(a.hasOwnProperty(v)){u(v,w[v]);var I=w.listen(v,(function(w,I){u(v,w)}));(0,k.Yb)((function(){I()}))}};for(var p in a)U(p)}}})),w.state.entities.onRemove((function(w,v){console.log("Removed entity",v),Q[v].entity.disposeClient(),delete Q[v]}));var Y={};w.state.items.onAdd((function(w,I){Y[I]=w,(0,T.j)(v,I,[w.x,w.y,w.z],w.id,w.amount);var P=function(w,P){w in K?v.ents.hasComponent(I,"itemState")&&(v.ents.getState(I,"smoothToServerPos").serverPosition[K[w]]=P):v.ents.hasComponent(I,"itemState")&&(v.ents.getState(I,v.ents.names.itemState)[w]="attributes"===w?JSON.parse(P):P)},u=new Ew,Q=function(v){if(u.hasOwnProperty(v)){P(v,w[v]);var I=w.listen(v,(function(w,I){P(v,w)}));(0,k.Yb)((function(){I()}))}};for(var a in u)Q(a)})),I.onMessage(Ww.b.itemStillThere,(function(w){var I=w.eId,P=w.id,u=w.amount,Q=w.x,K=w.y,a=w.z,U=w.cantPickUp;(0,T.j)(v,I,[Q,K,a],P,u,U)})),I.onMessage(Ww.b.cantPickUpItem,(function(w){v.ents.hasComponent(w,"itemState")&&(v.ents.getState(w,"itemState").cantPickUp=!0)})),w.state.items.onRemove((function(w,I){delete Y[I],v.ents.hasComponent(I,v.ents.names.itemState)&&v.ents.deleteEntity(I)})),(0,k.Yb)((function(){for(var w in Y)v.ents.deleteEntity(w)})),w.onLeave((function(w){w!==Iw.c.gameOrPluginKick.code&&(console.log("Left room with code ".concat(w)),g(w))}))})).catch((function(w){console.error("Failed to connect to bloxd room. Check your internet connection. lobbyName: ".concat(I,", gamemode: ").concat(P," code: ").concat(w.code,".")),console.error(w),v.logErrorMessage("Failed to connect to bloxd room, lobbyName: ".concat(I,", gamemode: ").concat(P," code: ").concat(w.code,"\n"),w);var u=w.code;g(u,w.message)})),(0,k.Yb)((function(){for(var w in Q){var I=parseInt(w);I!==v.playerEntity&&Q[I].entity.disposeClient()}}));case 25:case"end":return w.stop()}}),w)}))),cw.apply(this,arguments)}function Mw(w,v){for(var I in v)w.serverSettings[I]=v[I];for(var P in v)k.hc.publish("serverOption|".concat(P),v[P]);k.hc.publish("newAllServerOptions",w.serverSettings)}function Sw(w,v){var I=v.taskId,P=v.progress;w.serverSettings._tasks[I].progress=P,Mw(w,{_tasks:w.serverSettings._tasks})}function ew(w,v,I){function P(){return I.ents.getInventory(I.playerEntity)}v.onMessage(Ww.b.newClientOptions,(function(w){Mw(I,w)})),v.onMessage(Ww.b.newOtherPlayerSettings,(function(w){var v=w.EId,P=w.settings;I.otherPlayerSettings[I.playerEntity][v]||(I.otherPlayerSettings[I.playerEntity][v]={},I.otherPlayerSettings[I.playerEntity][(0,k.P)(v)]={},I.otherPlayerSettings[I.serverPlayerEntity][v]={},I.otherPlayerSettings[I.serverPlayerEntity][(0,k.P)(v)]={});for(var u=0,Q=Object.entries(P);u<Q.length;u++){var K=(0,d.e)(Q[u],2),a=K[0],U=K[1];I.otherPlayerSettings[I.playerEntity][v][a]=U,I.otherPlayerSettings[I.playerEntity][(0,k.P)(v)][a]=U,I.otherPlayerSettings[I.serverPlayerEntity][v][a]=U,I.otherPlayerSettings[I.serverPlayerEntity][(0,k.P)(v)][a]=U,k.hc.publish("otherPlayerSettings|".concat(a),{EId:v,value:U}),k.hc.publish("otherPlayerSettings|".concat(v,"|").concat(a),U),k.hc.publish("otherPlayerSettingsClientifiedEId|".concat((0,k.P)(v),"|").concat(a),U)}})),v.onMessage(Ww.b.teleported,(function(w){var v=w.id,P=w.x,u=w.y,Q=w.z;(0,k.vc)(Ww.e.confirmTeleport,{id:v,type:hw.d}),I.ents.setPosition(I.playerEntity,[P,u,Q])})),v.onMessage(Ww.b.chat,(function(w){k.hc.publish("chat",w,!0)})),v.onMessage(Ww.b.setCookie,(function(v){var I=v.key,P=v.value;(0,k.Ac)(w,I,P)})),v.onMessage(Ww.b.initialInfo,(function(w){var P=w.EId,u=w.pass;console.log("Local client is EId",P),k.hc.publish("loadingScreenState","Loading World"),(0,k.wc)(u),I.serverPlayerEntity=P,I.ents.hasComponent(I.playerEntity,I.ents.names.playerName)&&I.ents.removeComponent(I.playerEntity,I.ents.names.playerName),I.playerNames[I.serverPlayerEntity]=I.playerNames[I.playerEntity],I.otherPlayerSettings[I.serverPlayerEntity]={},I.ents.addComponent(I.playerEntity,I.ents.names.playerName),k.hc.publish("initInfoReceived",v)})),v.onMessage(Ww.b.TopRightHelper,(function(w){k.hc.publish("TopRightHelper",w,!0)})),v.onMessage(Ww.b.ProgressionEvent,(function(w){var v=w.type,P=w.location1,u=w.location2,Q=w.location3,K=w.score;I.GA.addProgressionEvent(v,P,u,Q,K)})),v.onMessage(Ww.b.ResourceEvent,(function(w){var v=w.type,P=w.resourceType,u=w.amount,Q=w.category,K=w.itemName;I.GA.addResourceEvent(v,P,u,Q,K)})),v.onMessage(Ww.b.canChangePos,(function(w){I.world.canChangeBlockCoord.add(w),I.world.cantChangeBlockCoord.delete(w)})),v.onMessage(Ww.b.cantChangePos,(function(w){I.world.cantChangeBlockCoord.add(w),I.world.canChangeBlockCoord.delete(w)})),v.onMessage(Ww.b.canChangeType,(function(w){I.world.canChangeBlockType.add(w),I.world.cantChangeBlockType.delete(w)})),v.onMessage(Ww.b.cantChangeType,(function(w){I.world.cantChangeBlockType.add(w),I.world.canChangeBlockType.delete(w)})),v.onMessage(Ww.b.resetChangeType,(function(w){I.world.cantChangeBlockType.delete(w),I.world.canChangeBlockType.delete(w)})),v.onMessage(Ww.b.canChangeRect,(function(w){(0,k.ic)(w,I.world.cantChangeBlockRect),(0,k.ic)(w,I.world.canChangeBlockRect),I.world.canChangeBlockRect.push(w)})),v.onMessage(Ww.b.cantChangeRect,(function(w){(0,k.ic)(w,I.world.canChangeBlockRect),(0,k.ic)(w,I.world.cantChangeBlockRect),I.world.cantChangeBlockRect.push(w)})),v.onMessage(Ww.b.resetChangeRect,(function(w){(0,k.ic)(w,I.world.canChangeBlockRect),(0,k.ic)(w,I.world.cantChangeBlockRect)})),v.onMessage(Ww.b.walkThroughType,(function(w){var v=w.id;w.disable?I.world.walkThroughType.delete(v):I.world.walkThroughType.add(v)})),v.onMessage(Ww.b.walkThroughRect,(function(w){var v=w.rect;w.disable?(0,k.ic)(v,I.world.walkThroughRect):((0,k.ic)(v,I.world.walkThroughRect),I.world.walkThroughRect.push(v))})),(0,k.Yb)((function(){I.world.canChangeBlockCoord=new Set,I.world.cantChangeBlockCoord=new Set,I.world.canChangeBlockType=new Set,I.world.cantChangeBlockType=new Set,I.world.canChangeBlockRect=[],I.world.cantChangeBlockRect=[],I.world.walkThroughType=new Set,I.world.walkThroughRect=[]})),v.onMessage(Ww.b.taskProgress,(function(w){Sw(I,w)})),v.onMessage(Ww.b.changeBlockFail,(function(w){var v,I=(0,L.b)(w);try{for(I.s();!(v=I.n()).done;){var P=v.value,Q=P.pos,K=P.actualId,a=Pw.e[K];if(a){var U=a.compX,p=a.compY,r=a.compZ,Y=a.mainMultiblock;(0,k.N)().setBlock(Q[0]-U,Q[1]-p,Q[2]-r,Y)}}}catch(w){I.e(w)}finally{I.f()}var g,J=(0,L.b)(w);try{for(J.s();!(g=J.n()).done;){var l=g.value,R=l.pos,x=l.actualId,j=l.data;(0,k.N)().setBlockNoMulti(R[0],R[1],R[2],x);var s=JSON.parse(j);void 0!==s&&u.blockDataOwner.setBlockData(R[0],R[1],R[2],s),u.blockAdded(R[0],R[1],R[2],x)}}catch(w){J.e(w)}finally{J.f()}k.hc.publish("EditBoard",{pos:null})})),v.onMessage(Ww.b.pickUpItems,(function(w){var v,I=(0,L.b)(w);try{for(I.s();!(v=I.n()).done;){var u=v.value,Q=u.name,K=u.amount,a=u.attributes;P().pickUpItem({name:Q,amount:K,typeObj:T.o[Q],attributes:a})}}catch(w){I.e(w)}finally{I.f()}})),v.onMessage(Ww.b.setItemSlot,(function(w){var v=w.index,I=w.name,u=w.amount,Q=w.attributes;P().setItemSlot(v,I,u,Q)})),v.onMessage(Ww.b.syncInven,(function(w){var v=w.iOpsData,P=w.isErr;I.ents.getInventoryState(I.playerEntity)?(P&&console.error("Had to sync inven"),I.ents.getInvenOps(I.playerEntity).loadFromString(v),k.hc.publish("syncedInvenFromServer")):console.log("Got resync inven but don't have inven component")})),v.onMessage(Ww.b.clearInventory,(function(){P().clearInventory()})),v.onMessage(Ww.b.leaveValues,(function(w){var v=w.leaveEventType,I=w.category,P=w.subCategory,u=w.value;k.hc.publish("leaveValues",{leaveEventType:v,category:I,subCategory:P,value:u})})),v.onMessage(Ww.b.customAnalyticsEvent,(function(w){var v=w.cat1,P=w.cat2,u=w.cat3,Q=w.value,K=v;P&&(K+=":"+P),u&&(K+=":"+u),I.GA.addDesignEvent(K,Q||0)}));var u=(0,k.N)();v.onMessage(Ww.b.compressedBlocksChanged,(function(w){var v,I=(0,L.b)(w);try{for(I.s();!(v=I.n()).done;){var P=v.value;if(4===P.length){var Q=(0,d.e)(P,4),K=Q[0],a=Q[1],U=Q[2],p=Q[3];u.setBlock(K,a,U,p)}else for(var r=(0,d.e)(P,7),Y=r[0],g=r[1],J=r[2],l=r[3],R=r[4],x=r[5],j=r[6],s=Y;s<g+1;s++)for(var B=J;B<l+1;B++)for(var t=R;t<x+1;t++)u.setBlock(s,B,t,j)}}catch(w){I.e(w)}finally{I.f()}})),v.onMessage(Ww.b.setSelectedInventorySlotI,(function(w){k.hc.publish("setSelectedInventorySlotI",w,!0)})),v.onMessage(Ww.b.leaderboardResponse,(function(w){var v=w.category,I=w.timeframe,P=w.data;k.hc.publish("leaderboardResponse",{category:v,timeframe:I,data:P})})),v.onMessage(Ww.b.bullet,(function(w){var v=w.whoShot,I=w.dirs;k.hc.publish("bulletShot|".concat(v),{bulletDirections:I})})),v.onMessage(Ww.b.gunHit,(function(w){var v,P=w.gunId,u=w.whoShotEId,Q=w.direction,K=T.o[P],a=I.entities.getMoveState(I.playerEntity).speedMultiplier,U=a.getMultiplierType("taggedSlowdown");U?v=U-(U-U*K.tagSpeedMult)*K.subsequentTagSpeedReductionScalar:v=K.tagSpeedMult;a.setMultiplierType("taggedSlowdown",v),I.entities.getGenericPlayerState(I.playerEntity).lastSlowdownUpdate=Date.now(),k.hc.publish("damagedByOtherPlayer",{whoShotEId:u,direction:Q},!0)})),v.onMessage(Ww.b.playerKilled,(function(w){k.hc.publish("playerKilled",w,!0)})),v.onMessage(Ww.b.reloading,(function(w){var v,P,u=w.EId,Q=w.numBullets;null===(v=I.entities.getHeldItem(u))||void 0===v||null===(P=v.reload)||void 0===P||P.call(v,Q)})),v.onMessage(Ww.b.showShopTutorial,(function(){k.hc.publish("showShopTutorial",null,!0)})),v.onMessage(Ww.b.progressBarUpdate,(function(w){k.hc.publish("progressBarUpdate",w,!0)})),v.onMessage(Ww.b.doorTypeSwap,(function(w){var v=w.initiatorEId,I=w.rootPos;if(u.hasChunkWithBlockCoordinates(I[0],I[1],I[2])){var P=(0,k.N)().getBlock(I[0],I[1],I[2]);(0,k.N)().swapDoorTypeOpenClosed(v,I[0],I[1],I[2],P)}})),v.onMessage(Ww.b.updateBookshelf,(function(w){var v=w.pos,I=w.bookCount;if(u.hasChunkWithBlockCoordinates(v[0],v[1],v[2])){var P=(0,k.N)().getBlock(v[0],v[1],v[2]);(0,k.N)().updateBookshelfContents(v[0],v[1],v[2],P,I)}})),v.onMessage(Ww.b.chestState,(function(w){var v=w.open,P=w.contents;v?I.ents.getInvenOps(I.playerEntity).chestOpened(P):I.ents.getInvenOps(I.playerEntity).chestClosed(),k.hc.publish("chestToggleFromServer",v,!0)})),v.onMessage(Ww.b.editItemCraftingRecipes,(function(w){var v=w.itemName,P=w.recipesForItem;u.craftingManager.editRecipesForPlayer(I.playerEntity,v,P),k.hc.publish("craftingRecipesEdited",{itemName:v,recipesForItem:P})})),v.onMessage(Ww.b.playerSwingArmChange,(function(w){var v=w.newVal,P=w.eId;if(I.ents.getMoveState(P)){I.ents.getMoveState(P).armSwinging=v;var u=I.ents.getPlayerMeshState(P);u&&v&&(u.consumedNetworkArmSwing=!1)}})),v.onMessage(Ww.b.charCustUpdate,(function(w){var v,I=(0,L.b)(w);try{for(I.s();!(v=I.n()).done;){var P=v.value;(0,C.q)(P)}}catch(w){I.e(w)}finally{I.f()}k.hc.publish("charCustomisationUpdated",w,!0)})),v.onMessage(Ww.b.entityHurt,(function(w){var v=w.eId,P=(w.yourAttack,w.kbPs),u=void 0!==P&&P,Q=w.cPs,K=void 0!==Q&&Q;if(v=(0,k.P)(v),I.entities.getState(v,"genericAliveEntity").lastHurtTime=Date.now(),u){var a=I.entities.getPosition(v);(0,Qw.h)(I,Qw.r,[a[0],a[1]+1,a[2]],10)}if(K){var U=I.entities.getPosition(v);(0,Qw.h)(I,Qw.i,[U[0],U[1]+1,U[2]],10)}}));var Q=vw().create();v.onMessage(Ww.b.attacked,(function(w){var v=w.dir,P=w.sprinted,u=w.scalar,K=w.redVert,a=I.entities.getPhysicsBody(I.playerEntity);a.velocity[0]=0,a.velocity[2]=0,K&&(a.velocity[1]>0&&(a.velocity[1]=0),a._impulses[1]>0&&(a._impulses[1]=0),I.ents.getMoveState(I.playerEntity).hitInPrevTick=!0);var U=vw().copy(Q,v),p=.4;U[1]>0&&(p+=.1*U[1]),U[1]=0,0===v[0]&&0===v[2]&&(v[0]=.01),vw().normalize(U,U),U[1]=p;var r=I.ents.getMovement(I.playerEntity).isInCobweb(),Y=13*(P?1.3:1)*(.9+.2*Math.random())*u*(r?.1:1);U[0]*=Y,U[2]*=Y;var g=15*(P?1.2:1)*(.9+.2*Math.random())*u*(r?.5:1);U[1]*=g,a.applyImpulse(U)})),v.onMessage(Ww.b.charArmourUpdate,(function(w){var v,I=(0,L.b)(w);try{for(I.s();!(v=I.n()).done;){var P=v.value;(0,C.o)(P)}}catch(w){I.e(w)}finally{I.f()}})),v.onMessage(Ww.b.kick,(function(w){k.hc.publish("unwantedLeftGame",{reason:"Kicked: ".concat(w)})})),v.onMessage(Ww.b.removeItemName,(function(w){var v=w.name,P=w.amt;I.ents.getInventory(I.playerEntity).removeItemName(v,P)})),v.onMessage(Ww.b.setCamDir,(function(w){var v=(0,Kw.l)([-w[0],-w[1],-w[2]]),P=v.theta,u=v.phi;I.camera.heading=P,I.camera.pitch=u})),v.onMessage(Ww.b.matchmake,(function(w){var v=w.toGame,I=w.lobbyName;(0,aw.u)((function(){console.log("Received matchmaking order from game server to game",v),(0,X.j)(null!==v&&void 0!==v?v:k.Lc.connectedPlayingMode,null!==I&&void 0!==I?I:null)}))})),v.onMessage(Ww.b.newUiRequest,(function(w){k.hc.publish("newUiRequest",w,!0)})),v.onMessage(Ww.b.removeUiRequest,(function(w){k.hc.publish("removeUiRequest",w,!0)})),v.onMessage(Ww.b.uiRequestPopup,(function(w){var v=w.text,I=w.id;k.hc.publish("uiRequestPopup",{text:v,callback:function(w){(0,k.vc)(Ww.e.UiRequestResp,{id:I,response:w})}},!0)})),v.onMessage(Ww.b.EffectUpdate,(function(w){k.hc.publish("EffectUpdate",w,!0)})),v.onMessage(Ww.b.RemoveEffect,(function(w){k.hc.publish("RemoveEffect",w,!0)})),v.onMessage(Ww.b.JumpEffectAmount,(function(w){I.ents.getMoveState(I.playerEntity).jumpMultiplier.setMultiplierType("jumpEffectAmount",w)})),v.onMessage(Ww.b.SpeedEffectAmount,(function(w){I.ents.getMoveState(I.playerEntity).speedMultiplier.setMultiplierType("speedEffectAmount",w)})),v.onMessage(Ww.b.SlownessEffectAmount,(function(w){I.ents.getMoveState(I.playerEntity).speedMultiplier.setMultiplierType("slownessEffectAmount",w)})),(0,k.Yb)((function(){I.ents.getMoveState(I.playerEntity).speedMultiplier.setMultiplierType("speedEffectAmount",1),I.ents.getMoveState(I.playerEntity).jumpMultiplier.setMultiplierType("jumpEffectAmount",1),I.ents.getMoveState(I.playerEntity).speedMultiplier.setMultiplierType("slownessEffectAmount",1)})),v.onMessage(Ww.b.newParticleEffect,(function(w){u.rendering.newParticleSystem(w)})),v.onMessage(Ww.b.playSound,(function(w){var v,I,P=w.namePrefix,u=w.volume,Q=w.rate,K=w.posSettings,a=null!==K&&void 0!==K?K:{},U=a.playerIdOrPos,p=a.maxHearDist,r=a.refDistance;p=null!==(v=p)&&void 0!==v?v:void 0,r=null!==(I=r)&&void 0!==I?I:void 0,U&&(0,k.P)(U)!==(0,k.pb)().playerEntity||(0,pw.c)().play((0,Uw.d)(P),u,U,p,r).rate(Q)})),v.onMessage(Ww.b.setBlockData,(function(w){var v=w.pos,I=w.data;u.blockDataOwner.setBlockData(v[0],v[1],v[2],I),u.blockAdded(v[0],v[1],v[2],u.getBlock(v[0],v[1],v[2]))})),v.onMessage(Ww.b.overShopInfo,(function(w){var v=w.info;k.hc.publish("overShopInfo",v,!0)})),v.onMessage(Ww.b.forceShowShop,(function(w){k.hc.publish("forceShowShop",w,!0)})),v.onMessage(Ww.b.applyForce,(function(w){I.entities.getPhysicsBody(I.playerEntity).applyForce(w)})),v.onMessage(Ww.b.setVelocity,(function(w){vw().copy(I.entities.getPhysicsBody(I.playerEntity).velocity,w),I.entities.getPhysicsBody(I.playerEntity)._markActive()})),v.onMessage(Ww.b.logErrorToConsole,(function(w){console.error("[logErrorToConsole]: ".concat(w))}))}k.hc.subscribe("clientTaskProgress",(function(w){Sw((0,k.pb)(),w)})),window.addEventListener("beforeunload",(function(){}))},45031:function(w,v,I){"use strict";I.d(v,{b:function(){return F},f:function(){return W},g:function(){return u},j:function(){return h},k:function(){return N},o:function(){return M},q:function(){return m}});var P,u,Q=I(4942),K=I(1413),a=I(37762),U=I(15861),p=I(64687),r=I.n(p),Y=(I(4892),I(47984),I(36470),I(35941),I(67269)),g=I(85774),J=I(41038),l=I(41494),R=I(87683),x=I(70937),j=I(9488),s=I(30258),B=I(13813),t=I(37928),i=I(43971),z=I(14848),E=I(92643),o=I(25391);function h(w){return n.apply(this,arguments)}function n(){return(n=(0,U.e)(r().mark((function w(v){var I,Q,K;return r().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,W(v.rendering.getScene());case 2:I=w.sent,Q=I.container,K=I.customisationMgr,P=Q,u=K,O(v),(0,o.e)(v);case 9:case"end":return w.stop()}}),w)})))).apply(this,arguments)}function W(w){return V.apply(this,arguments)}function V(){return(V=(0,U.e)(r().mark((function w(v){var I,P,u,Q,K,U,p,J,l,s,B,E;return r().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return I=new R.b("playerSpriteSheet",v),new t.e(I),I.diffuseTexture=new x.e(i.i,v,null,null,x.e.NEAREST_SAMPLINGMODE),I.specularColor=new j.b(0,0,0),I.freeze(),P=new R.b("armourMat",v),new t.b(P,"".concat(z.d.toString(),".0")),P.diffuseTexture=new x.e(z.f,v,null,null,x.e.NEAREST_SAMPLINGMODE),P.specularColor=new j.b(0,0,0),P.diffuseTexture.hasAlpha=!0,P.backFaceCulling=!1,P.freeze(),w.next=14,Y.e.LoadAssetContainerAsync((0,g.T)("64x64UVPlayerArmour2"),null,v);case 14:u=w.sent,Q=new t.d((0,g.N)(),u),K=u.meshes,U=K[1].material,p=(0,a.b)(K);try{for(p.s();!(J=p.n()).done;)(l=J.value).material&&("Armour"===l.name.split("|")[1]?l.material=P:l.material=I)}catch(w){p.e(w)}finally{p.f()}U.dispose(),s=(0,a.b)(K);try{for(s.s();!(B=s.n()).done;)(E=B.value).alwaysSelectAsActiveMesh=!0,E.doNotSyncBoundingInfo=!0,E.setEnabled(!1),E.isPickable=!1}catch(w){s.e(w)}finally{s.f()}return w.abrupt("return",{container:u,customisationMgr:Q});case 24:case"end":return w.stop()}}),w)})))).apply(this,arguments)}function F(w,v){var I,P=w.instantiateModelsToScene((function(w){return w}),!1,{doNotInstantiate:!1}).rootNodes[0],u=(0,a.b)(P.getChildMeshes(!1));try{for(u.s();!(I=u.n()).done;){var Q=I.value;"Armour"===Q.name.split("|")[1]&&Q.setEnabled(!1)}}catch(w){u.e(w)}finally{u.f()}return P}function O(w){var v=w.playerEntity;N(w,v);var I=w.ents;I.addComponent(w.playerEntity,I.names.receivesInputs),I.addComponent(w.playerEntity,I.names.movement),I.addComponent(v,I.names.updateServerOfMovement),I.addComponent(v,I.names.playerCameraAdjustment),I.addComponent(v,I.names.crouchingHandler),I.addComponent(v,"stepSoundOnWalk"),w.entities.addComponent(v,"playerHowlerListenerUpdate"),w.entities.getPhysicsBody(v).alwaysApplyHorizFriction=!0,w.entities.getPhysicsBody(v).airDrag=0,w.on("beforePhysicsTick",(function(v){(0,s.tickReceivesInputsPrePhysics)(w,v),(0,B.tickMovementPrePhysics)(w,v)}));var P=new J.c;P.setBooleanType("standardCanRun",!0),w.entities.getState(w.playerEntity,"receivesInputs").canRunCombinator=P,function(w){var v=w.playerEntity;g.hc.subscribe("serverOption|useInventory",(function(I){!0!==I||w.ents.hasInventory(v)||(w.ents.addComponent(v,w.ents.names.inventory),w.ents.getInvenOps(w.playerEntity).inCreative=w.serverSettings.creative),!1===I&&w.ents.hasInventory(v)&&w.ents.removeComponent(v,w.ents.names.inventory)})),g.hc.subscribe("serverOption|creative",(function(I){w.ents.hasComponent(v,"inventory")&&(w.ents.getInvenOps(w.playerEntity).inCreative=I)})),g.hc.subscribe("leaveGame",(function(){w.ents.hasInventory(v)&&w.ents.removeComponent(v,w.ents.names.inventory)}))}(w),(0,l.g)(w)}function N(w,v){var I,u,Q;w.entities.addComponent(v,w.ents.names.moveState),w.entities.addComponent(v,"genericPlayerState"),w.entities.addComponent(v,"genericAliveEntity"),w.entities.addComponent(v,"heldItem"),w.entities.addComponent(v,"meshRotation"),w.entities.addComponent(v,"hitbox"),function(w,v){var I=w.entities.getGenericPlayerState(v);I.meshEnabledCombinator.setBooleanType("notDead",!0),w.entities.getState(v,"shadow").enabledCombinator.setBooleanType("notDead",!0),I.meshEnabledCombinator.setBooleanType("canSeeSetting",!0),w.entities.getState(v,"shadow").enabledCombinator.setBooleanType("canSeeSetting",!0),I.meshEnabledCombinator.setBooleanType("invisibleEffect",!0),w.entities.getState(v,"shadow").enabledCombinator.setBooleanType("invisibleEffect",!0);var P=function(P,u){I.meshEnabledCombinator.setBooleanType(P,u),w.entities.getState(v,"shadow").enabledCombinator.setBooleanType(P,u)};w.otherPlayerSettings[w.playerEntity][v]&&(P("notDead",w.otherPlayerSettings[w.playerEntity][v]._isAlive),P("canSeeSetting",w.otherPlayerSettings[w.playerEntity][v].canSee));var u,Q=g.hc.subscribe("otherPlayerSettingsClientifiedEId|".concat(v,"|_isAlive"),(function(w){P("notDead",w)})),K=g.hc.subscribe("otherPlayerSettingsClientifiedEId|".concat(v,"|canSee"),(function(w){P("canSeeSetting",w)})),a=g.hc.subscribe("otherPlayerSettingsClientifiedEId|".concat(v,"|_invisibleEffect"),(function(w){P("invisibleEffect",!w)}));if(v===w.playerEntity){var U={gravityMultiplier:null};u=g.hc.subscribe("otherPlayerSettingsClientifiedEId|".concat(w.playerEntity,"|_isAlive"),(function(v){var I=w.entities.getPhysicsBody(w.playerEntity);if(v){if(null===U.gravityMultiplier)return;for(var P in U)I[P]=U[P]}else U.gravityMultiplier=I.gravityMultiplier,I.gravityMultiplier=0,I.velocity[0]=0,I.velocity[1]=0,I.velocity[2]=0,I._forces[0]=0,I._forces[1]=0,I._forces[2]=0,I._impulses[0]=0,I._impulses[1]=0,I._impulses[2]=0}))}var p=g.hc.subscribe("playerLeaveClientifiedEId|".concat(v),(function(){g.hc.unsubscribe(Q),g.hc.unsubscribe(K),g.hc.unsubscribe(a),g.hc.unsubscribe(u),g.hc.unsubscribe(p)}))}(w,v),function(w,v){var I=w.entities.getGenericPlayerState(v),P=I.meshEnabledCombinator,u=w.serverSettings.showPlayersInUnloadedChunks||!1;P.setBooleanType("inLoadedChunk",u);var Q=!1,K=u;w.entities.addComponent(v,"inLoadedChunk",{inChunkChange:function(u){Q=u,K||(P.setBooleanType("inLoadedChunk",u),v!==w.playerEntity&&(I.playerComponentsOn=u))}});var a=g.hc.subscribe("serverOption|showPlayersInUnloadedChunks",(function(u){(K=u)?(P.setBooleanType("inLoadedChunk",!0),I.playerComponentsOn=!0):(P.setBooleanType("inLoadedChunk",Q),v!==w.playerEntity&&(I.playerComponentsOn=Q))})),U=g.hc.subscribe("playerLeaveClientifiedEId|".concat(v),(function(){g.hc.unsubscribe(a),g.hc.unsubscribe(U)}))}(w,v);var K=F(P);K.scaling.scaleInPlace(.12);w.ents.addComponent(v,w.ents.names.playerMesh,{rootMesh:K}),w.entities.addComponent(v,w.ents.names.mesh,{mesh:K,offset:[0,0,0],isPickable:!1});var U=w.entities.getGenericPlayerState(v).meshEnabledCombinator.getTotalBooleanVal();K.setEnabled(U),q[v]&&(m({eId:v,part:"head",selected:q[v].head}),m({eId:v,part:"body",selected:q[v].body}),m({eId:v,part:"legs",selected:q[v].legs})),c[v]&&(M({eId:v,part:"Helmet",selected:c[v].Helmet}),M({eId:v,part:"Chestplate",selected:c[v].Chestplate}),M({eId:v,part:"Gauntlets",selected:c[v].Gauntlets}),M({eId:v,part:"Leggings",selected:c[v].Leggings}),M({eId:v,part:"Boots",selected:c[v].Boots})),w.ents.getState(v,w.ents.names.shadow).size=.6;var p=v;v===w.playerEntity&&(p=w.serverPlayerEntity,g.hc.subscribe("initInfoReceived",(function(){p=w.serverPlayerEntity})));var r=K.getChildMeshes(!1),Y=g.hc.subscribe("otherPlayerSettings|opacity",(function(w){var v=w.EId,I=w.value;if(v===p){var P,u=(0,a.b)(r);try{for(u.s();!(P=u.n()).done;){var Q=P.value;void 0===t.f[Q.name]&&Q.setEnabled(0!==I)}}catch(w){u.e(w)}finally{u.f()}}})),J=g.hc.subscribe("otherPlayerSettingsClientifiedEId|".concat(v,"|_invincible"),(function(w){l(w)}));function l(I){!I&&w.entities.hasComponent(v,"flashingMeshOverlay")&&w.entities.removeComponent(v,"flashingMeshOverlay"),I&&!w.entities.hasComponent(v,"flashingMeshOverlay")&&w.entities.addComponent(v,"flashingMeshOverlay")}l(null===(I=w.otherPlayerSettings[w.playerEntity][v])||void 0===I?void 0:I._invincible);var R=g.hc.subscribe("playerLeaveClientifiedEId|".concat(v),(function(){g.hc.unsubscribe(Y),g.hc.unsubscribe(R),g.hc.unsubscribe(J)}));if(null!==(u=w.otherPlayerSettings)&&void 0!==u&&null!==(Q=u[w.playerEntity])&&void 0!==Q&&Q[p]){var x,j=(0,a.b)(r);try{for(j.s();!(x=j.n()).done;){var s=x.value;void 0===t.f[s.name]&&s.setEnabled(0!==w.otherPlayerSettings[w.playerEntity][p].opacity)}}catch(w){j.e(w)}finally{j.f()}}g.hc.publish("ModelLoaded|".concat(v))}var q={};function m(w){var v=w.eId,I=w.part,P=w.selected;q[v]=(0,K.b)((0,K.b)({},q[v]),{},(0,Q.c)({},I,P));var a=(0,g.P)(v),U=(0,g.pb)().entities.getPlayerMeshState(a);U&&u.updateInstanceCustomisation(U.rootMesh,I,P)}(0,g.ac)((function(){q={}}));var c={};function M(w){var v=w.eId,I=w.part,P=w.selected;c[v]=(0,K.b)((0,K.b)({},c[v]),{},(0,Q.c)({},I,P));var a=(0,g.P)(v);if((0,g.pb)().entities.getPlayerMeshState(a)){var U=P?(0,E.l)(P):null,p=P?(0,E.h)(P):null;u.updateInstanceArmour(a,I,U,p)}}(0,g.ac)((function(){M({eId:(0,g.pb)().serverPlayerEntity,part:"Helmet",selected:null}),M({eId:(0,g.pb)().serverPlayerEntity,part:"Chestplate",selected:null}),M({eId:(0,g.pb)().serverPlayerEntity,part:"Gauntlets",selected:null}),M({eId:(0,g.pb)().serverPlayerEntity,part:"Leggings",selected:null}),M({eId:(0,g.pb)().serverPlayerEntity,part:"Boots",selected:null}),c={}}))},85728:function(w,v,I){"use strict";I.d(v,{c:function(){return l}});var P=I(37762),u=I(29439),Q=I(15671),K=I(43144),a=I(47077),U=I.n(a),p=I(52126),r=I(39269),Y=I(65131),g=.1,J={Speed:[{timeFraction:0,minColor:[255,167,0,1],maxColor:[255,103,0,1]},{timeFraction:.2,minColor:[161,193,195,1],maxColor:[70,184,190,1]},{timeFraction:1,minColor:[161,193,195,0],maxColor:[70,184,190,0]}],"Damage Reduction":[{timeFraction:0,minColor:[190,188,147,1],maxColor:[185,178,42,1]},{timeFraction:.2,minColor:[190,188,147,1],maxColor:[185,178,42,1]},{timeFraction:1,minColor:[190,188,147,0],maxColor:[185,178,42,0]}],Damage:[{timeFraction:0,minColor:[165,135,167,1],maxColor:[158,83,162,1]},{timeFraction:.2,minColor:[165,135,167,1],maxColor:[158,83,162,1]},{timeFraction:1,minColor:[165,135,167,0],maxColor:[158,83,162,0]}],Invisible:[{timeFraction:0,minColor:[144,140,141,1],maxColor:[107,107,107,1]},{timeFraction:.2,minColor:[144,140,141,1],maxColor:[107,107,107,1]},{timeFraction:1,minColor:[144,140,141,0],maxColor:[107,107,107,0]}],"Jump Boost":[{timeFraction:0,minColor:[147,195,159,1],maxColor:[104,195,128,1]},{timeFraction:.2,minColor:[147,195,159,1],maxColor:[104,195,128,1]},{timeFraction:1,minColor:[147,195,159,0],maxColor:[104,195,128,0]}],Knockback:[{timeFraction:0,minColor:[168,90,34,1],maxColor:[168,76,10,1]},{timeFraction:.2,minColor:[168,90,34,1],maxColor:[168,76,10,1]},{timeFraction:1,minColor:[168,90,34,0],maxColor:[168,76,10,0]}],Poisoned:[{timeFraction:0,minColor:[9,105,59,1],maxColor:[8,94,53,1]},{timeFraction:.2,minColor:[9,105,59,1],maxColor:[8,94,53,1]},{timeFraction:1,minColor:[9,105,59,0],maxColor:[8,94,53,0]}],Slowness:[{timeFraction:0,minColor:[89,72,94,1],maxColor:[70,56,74,1]},{timeFraction:.2,minColor:[89,72,94,1],maxColor:[70,56,74,1]},{timeFraction:1,minColor:[89,72,94,0],maxColor:[70,56,74,0]}],Weakness:[{timeFraction:0,minColor:[122,33,33,1],maxColor:[107,28,28,1]},{timeFraction:.2,minColor:[122,33,33,1],maxColor:[107,28,28,1]},{timeFraction:1,minColor:[122,33,33,0],maxColor:[107,28,28,0]}],Cleansed:[{timeFraction:0,minColor:[219,210,180,1],maxColor:[207,198,169,1]},{timeFraction:.2,minColor:[219,210,180,1],maxColor:[207,198,169,1]},{timeFraction:1,minColor:[219,210,180,0],maxColor:[207,198,169,0]}],"Instant Damage":[{timeFraction:0,minColor:[69,22,27,1],maxColor:[51,16,19,1]},{timeFraction:.2,minColor:[69,22,27,1],maxColor:[51,16,19,1]},{timeFraction:1,minColor:[69,22,27,0],maxColor:[51,16,19,0]}],"Health Regen":[{gradient:0,minColor:[245,113,113,1],maxColor:[246,78,178,1]},{gradient:.2,minColor:[245,113,113,1],maxColor:[246,78,178,1]},{gradient:1,minColor:[245,113,113,0],maxColor:[246,78,178,0]}],"Instant Health":[{gradient:0,minColor:[222,115,163,1],maxColor:[223,84,144,1]},{gradient:.2,minColor:[222,115,163,1],maxColor:[223,84,144,1]},{gradient:1,minColor:[222,115,163,0],maxColor:[223,84,144,0]}]},l=function(){function w(v,I,P){(0,Q.e)(this,w),this.bloxd=void 0,this.noa=void 0,this.eId=void 0,this.type=void 0,this.bloxd=v,this.noa=v.noa,this.eId=I,this.type=P}return(0,K.c)(w,[{key:"initClient",value:function(w){var v=this;this.noa.ents.add([w.x,w.y,w.z],g,g,null,null,!1,!1,this.eId),this.noa.ents.addComponent(this.eId,this.noa.ents.names.smoothToServerPos),this.noa.ents.addComponent(this.eId,"doOnFirstTick",{cb:function(){v.noa.ents.addComponent(v.eId,"hidingMeshManager",{addMeshComponent:function(){console.log("Adding throwable",v.eId),v.noa.entities.addComponent(v.eId,"mesh",{mesh:v.bloxd.rendering.getThrowableMesh(v.type),shouldAddMeshToScene:!1})},removeMeshComponent:function(){v.noa.entities.removeComponent(v.eId,"mesh")},hideDist:30,movingHideDist:130})}})}},{key:"onChangeClient",value:function(w,v){}},{key:"disposeClient",value:function(){this.noa.ents.deleteEntity(this.eId)}},{key:"initServer",value:function(w){var v,I,Q=this,K=w.pos,a=w.throwerEId,l=w.thrownDir,x=w.dispose,j=w.extraVelocityMult,s=w.extraDamageMult,B=this.bloxd.room.api,t=function(w,v,I){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4?arguments[4]:void 0;return{velocityMult:8,removeOnHitTerrain:!0,onHitTerrain:function(){var K=B.getPosition(w);Q.bloxd.room.doPotionSplash(K[0],K[1],K[2],I,J[I],P,v,u)},onHitPlayer:function(){var w=B.getPosition(Q.eId);Q.bloxd.room.doPotionSplash(w[0],w[1],w[2],I,J[I],P,v,u)}}},i={Snowball:{velocityMult:15,removeOnHitTerrain:!1,friction:300,restitution:.2,canPickUpAfterBounceCount:1,autoRemoveAfterTime:2e4},Pebble:{velocityMult:20,removeOnHitTerrain:!0},"Reinforced Pebble":{velocityMult:30,removeOnHitTerrain:!0},Ball:{velocityMult:10,removeOnHitTerrain:!1,friction:1,restitution:.8,canPickUpAfterBounceCount:0,autoRemoveAfterTime:6e4},"Reinforced Ball":{velocityMult:15,removeOnHitTerrain:!1,friction:.5,restitution:.2,canPickUpAfterBounceCount:0,autoRemoveAfterTime:6e4},Fireball:{velocityMult:20,removeOnHitTerrain:!0,gravityMult:0,onHitTerrain:function(){var w=B.getPosition(Q.eId);(0,Y.k)(Q.bloxd.room.api,Y.d.Boom,a,w[0],w[1],w[2],1.7,"Fireball Block")},onHitPlayer:function(){var w=B.getPosition(Q.eId);(0,Y.k)(Q.bloxd.room.api,Y.d.Boom,a,w[0],w[1],w[2],1.7,"Fireball Block")}},Iceball:{velocityMult:20,removeOnHitTerrain:!0,gravityMult:0,onHitTerrain:function(){var w=B.getPosition(Q.eId);(0,Y.k)(Q.bloxd.room.api,Y.d.Freeze,a,w[0],w[1],w[2],2,"Iceball Block")},onHitPlayer:function(){var w=B.getPosition(Q.eId);(0,Y.k)(Q.bloxd.room.api,Y.d.Freeze,a,w[0],w[1],w[2],2,"Iceball Block")}},"Moonstone Orb":{velocityMult:25,removeOnHitTerrain:!0,onHitTerrain:function(){if(B.checkValid(a)){var w=B.getPosition(Q.eId),v=[Math.floor(w[0]),Math.floor(w[1]),Math.floor(w[2])];"Air"!==B.getBlock(v[0],v[1]+1,v[2])&&"Air"===B.getBlock(v[0],v[1]-1,v[2])&&(v[1]-=1),v[0]+=.5,v[2]+=.5,B.setPosition(a,v)}else z()}},Arrow:{velocityMult:45,removeOnHitTerrain:!1,friction:1e5,restitution:0,canPickUpAfterBounceCount:1,autoRemoveAfterTime:2e4,onHitTerrain:function(){Q.noa.ents.getPhysicsBody(Q.eId).gravityMultiplier=0,U().copy(Q.noa.ents.getPhysicsBody(Q.eId).velocity,R)}},Coconut:{velocityMult:8,removeOnHitTerrain:!0,onHitTerrain:function(){var w=B.getPosition(Q.eId),v=(0,u.e)(w,3),I=v[0],P=v[1],K=v[2];B.createItemDrop(I,P,K,"Cracked Coconut",1)},onHitPlayer:function(w){B.applyEffect(w,"Speed",B.getClientOption(w,"effectSpeedDuration"),{inbuiltLevel:1,initiatorId:a})}},"Splash Speed Potion":t(this.eId,a,"Speed",1),"Splash Speed Potion II":t(this.eId,a,"Speed",2),"Splash Defense Potion":t(this.eId,a,"Damage Reduction",1),"Splash Defense Potion II":t(this.eId,a,"Damage Reduction",2),"Splash Strength Potion":t(this.eId,a,"Damage",1),"Splash Strength Potion II":t(this.eId,a,"Damage",2),"Splash Invisibility Potion":t(this.eId,a,"Invisible",1),"Splash Jump Potion":t(this.eId,a,"Jump Boost",1),"Splash Jump Potion II":t(this.eId,a,"Jump Boost",2),"Splash Knockback Potion":t(this.eId,a,"Knockback",1),"Splash Knockback Potion II":t(this.eId,a,"Knockback",2),"Splash Poison Potion":t(this.eId,a,"Poisoned",1),"Splash Poison Potion II":t(this.eId,a,"Poisoned",2),"Splash Slowness Potion":t(this.eId,a,"Slowness",1),"Splash Slowness Potion II":t(this.eId,a,"Slowness",2),"Splash Weakness Potion":t(this.eId,a,"Weakness",1),"Splash Weakness Potion II":t(this.eId,a,"Weakness",2),"Splash Milk Potion":t(this.eId,a,"Cleansed",1,3e3),"Splash Instant Damage Potion":t(this.eId,a,"Instant Damage",1),"Splash Instant Damage Potion II":t(this.eId,a,"Instant Damage",2),"Splash Regeneration Potion":t(this.eId,a,"Health Regen",1),"Splash Regeneration Potion II":t(this.eId,a,"Health Regen",2),"Splash Instant Healing Potion":t(this.eId,a,"Instant Health",1),"Splash Instant Healing Potion II":t(this.eId,a,"Instant Health",2)},z=function(){x(),B.clearInterval(E),B.clearTimeout(o)};this.noa.ents.add(K,g,g,null,null,!0,!1,this.eId),this.noa.ents.addComponent(this.eId,"syncablePosition");var E=B.setInterval((function(){var w,v=B.getPosition(Q.eId),I=1e5,u=(0,P.b)(B.getPlayerIds());try{for(u.s();!(w=u.n()).done;){var K=w.value;I=Math.min(I,U().dist(v,B.getPosition(K)))}}catch(w){u.e(w)}finally{u.f()}I>100&&z()}),3e3,this.eId),o=B.setTimeout((function(){z()}),null!==(v=i[this.type].autoRemoveAfterTime)&&void 0!==v?v:6e4,this.eId),h=0;this.noa.ents.addComponent(this.eId,"collideTerrain",{callback:function(){var w,v,I=Q.noa.ents.getPhysicsBody(Q.eId);U().length(I.velocity)>.1&&i[Q.type].removeOnHitTerrain&&((0,r.doSingleEntityProjectileCollisionFromPhysics)(Q.noa,Q.eId),!Q.noa.ents.hasComponent(Q.eId,"collideTerrain"))||(null===(w=(v=i[Q.type]).onHitTerrain)||void 0===w||w.call(v),h++,i[Q.type].removeOnHitTerrain&&z())}}),this.noa.ents.addComponent(this.eId,"collideEntitiesProjectile",{callback:function(w){if("Player"===B.getEntityType(w)){var v,I=null!==(v=i[Q.type].canPickUpAfterBounceCount)&&void 0!==v?v:1e5;w===a&&(I=Math.max(1,I));var P,u,K=h>=I;if(Q.bloxd.getItemStat(a,Q.type,"secondaryDamage")&&w!==a&&!K&&Q.bloxd.canAttack(a,w))Q.bloxd.playerAttemptDamageOtherPlayer(a,w,Q.bloxd.getItemStat(a,Q.type,"secondaryDamage")*s,Q.type,U().normalize([0,0,0],l),!1,!0,!0,!0,"Arrow"===Q.type?{sound:"successfulBowHit",volume:1,pitch:.9+.2*Math.random()}:void 0),null===(P=(u=i[Q.type]).onHitPlayer)||void 0===P||P.call(u,w),z();else K&&Q.bloxd.getPlayerClientOption(w,"canPickUpItems")&&(B.giveItem(w,Q.type,1),B.playSound(w,"pickUp",p.g.pickupSoundVol,1+Math.random()*p.g.pickupSoundRateVariation),z())}}}),U().normalize(l,l),U().scale(l,l,i[this.type].velocityMult*j);var n=this.noa.ents.getPhysicsBody(this.eId);U().copy(n.velocity,l),n.gravityMultiplier=null!==(I=i[this.type].gravityMult)&&void 0!==I?I:1,n.mass=.02,n.airDrag=.1*n.mass,n.fluidDrag=.2,n.slideOnCollision=!1,i[this.type].restitution&&(n.restitution=i[this.type].restitution),void 0!==i[this.type].friction&&(n.friction=i[this.type].friction)}}]),w}(),R=U().create()},62043:function(w,v,I){"use strict";I.d(v,{e:function(){return u.g},i:function(){return P.g},l:function(){return u.i}});var P=I(85630),u=(I(30877),I(82936),I(56434))},90574:function(w,v,I){"use strict";I.d(v,{e:function(){return i},f:function(){return r},h:function(){return U},j:function(){return Y},k:function(){return a}});var P=I(29439),u=I(37762),Q=I(52126),K=I(38017);function a(w,v){var I,P=g(w,v),Q=(0,u.b)(P);try{for(Q.s();!(I=Q.n()).done;){if(B(w,I.value))return!0}}catch(w){Q.e(w)}finally{Q.f()}return!1}function U(w,v){var I,Q=J(w,v),K=(0,u.b)(Q);try{for(K.s();!(I=K.n()).done;){var a=(0,P.e)(I.value,3),U=a[0],p=a[1],r=a[2];if(!w.hasChunkWithBlockCoordinates(U,p,r))return!0}}catch(w){K.e(w)}finally{K.f()}return!1}var p=[K.blockMetadata.Ladder.id,K.blockMetadata["Pine Ladder"].id,K.blockMetadata["Plum Ladder"].id,K.blockMetadata["Cedar Ladder"].id,K.blockMetadata["Aspen Ladder"].id,K.blockMetadata["Elm Ladder"].id,K.blockMetadata["Palm Ladder"].id,K.blockMetadata["Pear Ladder"].id,K.blockMetadata.Vines.id,K.blockMetadata["Iron Ladder"].id,K.blockMetadata["Maple Trapdoor"].id,K.blockMetadata["Pine Trapdoor"].id,K.blockMetadata["Plum Trapdoor"].id,K.blockMetadata["Cedar Trapdoor"].id,K.blockMetadata["Aspen Trapdoor"].id,K.blockMetadata["Elm Trapdoor"].id,K.blockMetadata["Palm Trapdoor"].id,K.blockMetadata["Pear Trapdoor"].id];function r(w,v,I){var P,a=J(w,I,.2),U=w.noa.ents.getPosition(v),r={onLadder:!1,goingUpLadderOnAxis:[null,null,null]},Y=(0,u.b)(a);try{for(Y.s();!(P=Y.n()).done;){var g=P.value,l=w.getBlock(g[0],g[1],g[2]),R=(0,K.blockIdToName)(l),x=w.getMetaInfo(R);if(p.includes(l)||p.includes(x.rootId)){var j=void 0,s=void 0,B=void 0,t=void 0;1===x.rot||3===x.rot?(j=2,t=g[B=0]+.5,s=1===x.rot?g[j]:g[j]+1):(j=0,t=g[B=2]+.5,s=2===x.rot?g[j]:g[j]+1),Math.abs(U[j]-s)<Q.g.playerWidth/2+.2&&Math.abs(U[B]-t)-.499<Q.g.playerWidth/2&&(r.onLadder=!0,0!==I.resting[j]&&(r.goingUpLadderOnAxis[j]=x.rootName))}}}catch(w){Y.e(w)}finally{Y.f()}return r}function Y(w,v,I){return g(w.noa,v).map((function(v){return w.getBlock(v[0],v[1],v[2])})).includes(I)}function g(w,v){return s(w,v._extents)}function J(w,v){var I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;console.assert(P<.1,"heightIncrease must be less than 0.1 or else assumptions made in getUnitCoordinatesPlayerExtentsWithin are broken"),console.assert(I<.25,"heightIncrease must be less than 0.1 or else assumptions made in getUnitCoordinatesPlayerExtentsWithin are broken");var u=v.aabb.base,Q=v.aabb.max,K=[u[0]-I,u[1]-P,u[2]-I,Q[0]+I,Q[1]+P,Q[2]+I];return s(w.noa,K)}var l=[null,null,null,null].map((function(){return[0,0,0]})),R=[null,null,null,null].map((function(){return[0,0,0]})),x=[null,null,null,null].map((function(){return[0,0,0]}));var j=[];function s(w,v){for(var I=w.worldOriginOffset,u=0,Q=n(v),K=0;K<4;K++){var a=(0,P.e)(Q[K],2),U=a[0],p=a[1],r=l[K],Y=R[K],g=x[K];r[0]=Math.floor(U+I[0]),r[1]=Math.floor(v[1]+I[1]),r[2]=Math.floor(p+I[2]),Y[0]=Math.floor(U+I[0]),Y[1]=Math.floor(v[1]+(v[4]-v[1])/2+I[1]),Y[2]=Math.floor(p+I[2]),g[0]=Math.floor(U+I[0]),g[1]=Math.floor(v[4]+I[1]),g[2]=Math.floor(p+I[2]),j[u++]=r,j[u++]=g,Y[1]!==r[1]&&Y[1]!==g[1]&&(j[u++]=Y)}return j.length=u,j}function B(w,v){var I,P=w.getBlock(v);return!(null===(I=K.blockMetadata[P])||void 0===I||!I.fluid)}var t=[];function i(w,v,I){for(var Q=function(w,v,I){var Q=w.ents.getPositionData(v);if(!Number.isInteger(Q.position[1]))return[];for(var K=Q._extents,a=w.worldOriginOffset,U=I?[]:E,p=0,r=n(K),Y=0;Y<4;Y++){var g=I?[]:z[Y],J=(0,P.e)(r[Y],2),l=J[0],R=J[1];g[0]=Math.floor(l+a[0]),g[1]=Q.position[1]-1,g[2]=Math.floor(R+a[2]),w.registry.getBlockSolidity(w.getBlock(g))&&(U[p++]=g)}U.length=p;var x=I?[]:o;x.length=0;var j,s=0,B=(0,u.b)(U);try{for(B.s();!(j=B.n()).done;){var t,i=j.value,h=!0,W=(0,u.b)(x);try{for(W.s();!(t=W.n()).done;){var V=t.value;i[0]===V[0]&&i[2]===V[2]&&(h=!1)}}catch(w){W.e(w)}finally{W.f()}h&&(x[s++]=i)}}catch(w){B.e(w)}finally{B.f()}return x.length=s,x}(w,v,!1),K=I?[]:t,a=0;a<Q.length;a++)K[a]=w.getBlock(Q[a]);return K.length=Q.length,K}var z=[null,null,null,null].map((function(){return[0,0,0]})),E=[],o=[];var h=[[0,0],[0,0],[0,0],[0,0]];function n(w){return h[0][0]=w[3],h[0][1]=w[2],h[1][0]=w[0],h[1][1]=w[2],h[2][0]=w[3],h[2][1]=w[5],h[3][0]=w[0],h[3][1]=w[5],h}},55250:function(w,v,I){"use strict";var P;I.d(v,{e:function(){return P}}),function(w){w[w.TouchDownLong=0]="TouchDownLong",w[w.TouchShort=1]="TouchShort",w[w.DownFirePrimary=2]="DownFirePrimary",w[w.DownFireSecondary=3]="DownFireSecondary"}(P||(P={}))},77796:function(w,v,I){"use strict";I.d(v,{d:function(){return P}});var P=182},71173:function(w,v,I){var P={"./autoRemoveMesh.js":42845,"./autoRotate.js":17309,"./bullet.js":48912,"./collideEntitiesProjectile.ts":39269,"./crouchingHandler.ts":36764,"./doOnFirstTick.ts":95933,"./flashingMeshOverlay.js":32052,"./genericAliveEntity.ts":40060,"./genericPlayerState.ts":67389,"./heldItem.ts":72508,"./hidingMeshManager.ts":94899,"./hitbox.ts":68564,"./inLoadedChunk.ts":36217,"./inventory.ts":44815,"./itemState.js":17870,"./meshRotation.ts":21262,"./moveState.ts":92199,"./movement.ts":13813,"./playerCameraAdjustment.js":26885,"./playerHowlerListenerUpdate.ts":77666,"./playerMesh.ts":64716,"./playerName.ts":53477,"./receivesInputs.ts":30258,"./smoothToServerPos.ts":81239,"./stepSoundOnWalk.ts":41074,"./templateComponent.ts":48544,"./updateServerOfMovement.ts":51012};function u(w){var v=Q(w);return I(v)}function Q(w){if(!I.o(P,w)){var v=new Error("Cannot find module '"+w+"'");throw v.code="MODULE_NOT_FOUND",v}return P[w]}u.keys=function(){return Object.keys(P)},u.resolve=Q,w.exports=u,u.id=71173},26927:function(w,v,I){var P={"./destroy_stage_0.png":2966,"./destroy_stage_1.png":7799,"./destroy_stage_2.png":49794,"./destroy_stage_3.png":63328,"./destroy_stage_4.png":52897,"./destroy_stage_5.png":31593,"./destroy_stage_6.png":5789,"./destroy_stage_7.png":6666,"./destroy_stage_8.png":22192,"./destroy_stage_9.png":30503};function u(w){var v=Q(w);return I(v)}function Q(w){if(!I.o(P,w)){var v=new Error("Cannot find module '"+w+"'");throw v.code="MODULE_NOT_FOUND",v}return P[w]}u.keys=function(){return Object.keys(P)},u.resolve=Q,w.exports=u,u.id=26927},86940:function(w,v,I){var P={"./bob_body_preview.png":27667,"./bob_head_preview.png":51681,"./bob_legs_preview.png":31795,"./componentAtlas.png":95359,"./emma_body_preview.png":72319,"./emma_head_preview.png":85908,"./emma_legs_preview.png":33430,"./green_top_with_rolled_up_sleeves_preview.png":7932,"./isabel_head_preview.png":47712,"./khakis_body_preview.png":13063,"./khakis_legs_preview.png":85874,"./leo_head_preview.png":52118,"./light_blue_crop_top_preview.png":77237,"./light_blue_polo_preview.png":918,"./navy_blue_denim_shorts_preview.png":28880,"./navy_blue_jeans_preview.png":46633,"./sanjay_head_preview.png":72173,"./sara_head_preview.png":51899,"./tan_shorts_preview.png":61212};function u(w){var v=Q(w);return I(v)}function Q(w){if(!I.o(P,w)){var v=new Error("Cannot find module '"+w+"'");throw v.code="MODULE_NOT_FOUND",v}return P[w]}u.keys=function(){return Object.keys(P)},u.resolve=Q,w.exports=u,u.id=86940},4841:function(w,v,I){var P={"./critical_hit.png":9567,"./generic_2.png":80521};function u(w){var v=Q(w);return I(v)}function Q(w){if(!I.o(P,w)){var v=new Error("Cannot find module '"+w+"'");throw v.code="MODULE_NOT_FOUND",v}return P[w]}u.keys=function(){return Object.keys(P)},u.resolve=Q,w.exports=u,u.id=4841},88996:function(w,v,I){"use strict";w.exports=I.p+"static/media/JetBrainsMono-VariableFont.d08f929cab66fc19b568.ttf"},74304:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAAgCAYAAABkS8DlAAAABmJLR0QA/wD/AP+gvaeTAAAHTklEQVR4nO2dMW/bOhDHzw8evLiAOwZIgACJEHfs4jEJkKJB0ClBOvQD+EPpA3SI4U6B0aIB0oxeMtaBU6BAC2SsgXrxpje80E86iaQokSYp3m+jRFEneziS979jCyTEcZyI7g+Hw5ZsDMJfxtcT4f9/8e6M/v8Gs7zaE/7/3fc/6P9vMPujO+H//3h5SP+/x7TLdIqiKNPu9XoAADCdTvVbRDhHv3+Qae/ubAMAwOTLVxvmEBumc9zNXng5AgCA1fjUgjXEptk66WTaH1+8AgCAo0/3NswhNPJPlYcWi4VuOwiP+Pnrt20TCJv8ubRtAWGRD3+/2zaB0ESlCQAATQJChyYBgUOTgKChSUAzqDwBIAiCIAjCX0pNAFjMnwgTFvMnAuU55k+ECYv5E82j9A4ATQLChiYBgUOTgKChSUAzKZUFQGr/sCG1f9iQ2j9sSO3fXFqyPH/TUB0Bu8jy/E1DdQTsIsvzNw3VEbCLLM/fNFRHwC5tAHme/2AwAIC88n8+n4OO5wm7yPL8z96+AYC88n82e9DyPGEXWZ5/5+Lzf9eR8n91u9TyPGEXWZ7/t/PXAJBX/j/drLQ8T9ijUAOAHfV0Os2EAebzudB5F6UIUtqgP2BHPfnyNRMGmM0ehM67KEWQ0gY9Ajvq8WkmDLC6XYqdd1GKIKUNegN21Eef7jNhgKebldB5F6UIUtqgm3A1AGmHzbbpWbgAt2XPk/P3j7TDZtv0LFyA27Lnyfl7SMphs216Fi7Abdnz5Pz9I+2w19v0z+EC1haFD9LPk/N3lzaAeCteFKMfDoetOI4T2sr3G9FqXhSjv3h31hpfTxLayvcb0WpeFKPvvv/RWl7tJbSV7zei1bwoRv94edjaH90ltJXvL8YFGGyXAOsE2KSBRIDNhu0SYJ0AmzSQCLDZsF0CrBNgkwYSATYbtkuAdQJs0kAiQLts7MfH4QJy/GGBwwXk+MMChwvI8YcFDheQ4ycIgiAIgrCEdBbm2spdVregrn2ufa9tXFu5y+oW1LXPte+1jWsrd1ndgrr2ufa9tnFt5S6rW1DXPte+1zSlSgFHUZSL4dtkMBhk7NFtn2vfa5t+/yAXw7fJ2ds3GXt02+fa99qmc9zN5/pbpHPxOWOPbvtc+17bbJ10cjF8m3w7f52xR7d9rn2vSbw9DZDOJggbOpsgcOhsgqChswn0UOosANfS/PDZBLrtc+17beNamh8+m0C3fa59r21cS/PDZxPots+177WNa2l++GwC3fa59r0mqR3f4MXkcexcNXav64wCWQy/7ntII1Ack8exc9XYva4zCmQx/LrvIY1AcUwex85VY/e6ziiQxfDrvoc0AsUxeRw7V43d6zqjQBbDr/se3zUCpXYAZLBa/2xlHkURxHGcpCsGRlG0Xlnz+qfHFPVXbavar3v8psNq/bOVeb9/AOPrSZKuGNjvH6xX1rz+6TFF/VXbqvbrHr/psFr/69r/x11YXu0l6YqBnePu/2cHcPpnxhT1V2wr2695/KbDav2zlfnWSQdgdJekKwZunXTWK2te//SYov6qbVX7dY/vMlomAADZcr+9Xg8GgwG3CNBiscjF8NN98D3cHzteWbuM7UXvLHufyJb73d3Zht2dbW4RoJ+/fudi+CLRXVF/XGpYdL+M7SbHD4J0ud+XI+hcACyvTguLAMGfy1wMXyi6K+ifKzUsui/D9PgBkC73+/HFK4BzgCNOEaAPf7/nYvjpPuvDhOC+sD92vLJ2GduxPbiUsei+z2iZAPCcoUhJr+pAcX/dW/uyswvobAM+PGcoc+pV3yE7bKiKczY9fqPhOEOpU6/6DtlhQ1Wcs+nxGwzPGYqU9KoOFPfXvbUvO7ugqWcbaNsBSFPXQdKxwX6j20FiUZ5qm9gwmh0kFuWptonNUtdB0rHBm8PIBEAnVUV2oYvzmkLoIrvQCV1kFzpVRXa+i/M2RVuX2p7wE11qe8JPdKntCT/RpbYn/KQN4LYK3vU0PdMTqE3sZLisgnc9Tc/0BGoTOyAuq+BdT9MzPYHaxA6Iyyp419P0TE+gTNvfBqivgleN0av2Nz1BwfaotpnYkV3niR/x/bL9TVNXBa8ac1ftb3qCUldjwMSO7DpP/Ijvl+1vnJoqeNWYu2p/0xOUuhoDJnZcpy1yxI/4ftn+pqmrgleN0av2Nz1BwfaotpnYkV3niR/x/bL9TbLWAFRVwRetUFnef5r5fM5dzYqKCcVxnJhM09N9eJCvVFXBF61QWd5/mtnsgbuaFRUTGl9PEpNperoPD/KWiir4ohUqy/tPs7pdclezomJCy6u9xGSanu7Dg3ylqgq+cIX6nPef5ulmxV/NCooJ7Y/uEpNperoPD/INIyJA5rjxNVF/2ZiUpucPzHHja6L+sjEpTc8f1o4bXRP1lw5KaXre8Hh52MJOXeRoyzjhUNP0TJNz1Kq4HmN33T4Zpu1veozddftkmLa/6TF21+2TYdr+psfYXbdPhmn7/wVy6N2HB1UGFwAAAABJRU5ErkJggg=="},27667:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAABmJLR0QA/wD/AP+gvaeTAAAAeUlEQVQokWN8EOHxnwELePLlK4MMDzcDAwMDw/2PnxkU+XmxKWNgwipKAhjEBixl+ANnr2L+h9MARlyBSLELiAUs2ATvf/yMVTG2qKTcBU++fEURgCUeXABdPSO6gkwfS3igRvWtZGBgYGBYVhQOl5++5TiKHoq9AADxcB4x4rtOogAAAABJRU5ErkJggg=="},51681:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAAZklEQVQYlWN00Zf9z4AHMOGTJEoBCwMDA0OVryNWybbN+xmYqnwdGazq5zIsvJ4Dl1h4PYfBqn4uQ5WvIwOTnKIEAwMDA8Pxy3EMcooSDHKKEgzHL8cxMDAwMMgpSjAw3plbRpkvAJ12FV7SojEeAAAAAElFTkSuQmCC"},31795:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAYAAACwXJejAAAABmJLR0QA/wD/AP+gvaeTAAAANElEQVQYlWNMO3PmPwMSmGViwoguxsRABBhVxMDy8fFjDEF0MUYLS2uU0D1x/CiGGFHWAQA/jBIvEGia0gAAAABJRU5ErkJggg=="},95359:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAACAAAAABACAYAAACOEJc7AAAABmJLR0QA/wD/AP+gvaeTAAAMiUlEQVR4nO3df2yU530A8Of4oaLWHjISlUhL5EYrWTcxJGzJAlVFdFeJUEBU3TTDH6BJgYg1XcdQV4IyoaioS6tkWVEFaqF/gDrwuk5BjDqoOTXK0gZcnZGcikBpljp1BBpIIASR0gbv9gez5zP3w/Z75+fuvc9HinK+5+59v1+/73s+8f0+z5sJFWRXLC1UGg8hhNzQSKbaa5rZ66eerfg7WL15b6rz37RsbsX8T18ZTXX+1a6BtJ//Pd0rKuY/kB9Kdf7ZnpWVj//AhVTnDwAAAAAAQHOZEzsAAAAAAAAAACA5DQAAAAAAAAAAkAIaAAAAAAAAAAAgBTQAAAAAAAAAAEAKaAAAAAAAAAAAgBTQAAAAAAAAAAAAKaABAAAAAAAAAABSIJNdsbQQM4Dc0Egm5v5fP/Vs1PxXb94bNf9Ny+ZGzf/0ldGo+bf6+d/TvSJq/gP5objHv2dl3OM/cCFq/gAAAAAAAKSLFQAAAAAAAAAAIAU0AEzT4rb2sLitPXYYRLJv49qwb+Pa2GEQyZrlS8Ka5UtihwEAAAAAAAAlzZvKi8oVPL/xH6/UNJhGN7Hwv7itPdy4eydiNHEcPHQghBDC3/z105EjmX0Tr4N9G9e2zPnf2zUv9A3eC71dxR8XfYP3IkUUx8TC/5rlS8Krv7wWMRoAAAAAAAB4UNUVAPZtXBtW7/9+OHbpyfHnjl16Mqze//1Uz4QeK/YvbmsPKz+/J/z9xdz42F8NvBiWrtkZVm/em2mV1QA6lp8bL/7vP/xn4YcX3x//Oa3GZvufyb8dPvaH/z7+/MTzP83XQAj3i/+7vnM+fPGRPxh/7oNbHw67vnP+gYaAtDrzs4HQ9uG54z8P/tf18NXDpyJGBAAAAAAAAKVlsiuWFiY/uW/j2vDZA8czYz+//8EHhT/9k+XhypXLmRBCWLbsjwpvXPxlWDB//vhrfvr0tsJMZkTnhkYy1V9VP6+fevaB/Be3tYdPZr80rfxLbWcqVm/eGzX/Tcvmlo374KEDoTP7VGYq+Q/n/rEwk1UBTl8ZjZp/qfM/hOLzcir5l9tONbHP/57uFQ/E3ds1L+z+7uC08n/hia7CTFYEGMgPxT3+PSurHrczPxsIpfLf8OmexPvPDVyImj8AAAAAAADpUrQCwL6Na0NuaCQzsfgfQggL5s/PjBW/QgjhypXLmYnFvxBC+OyB45nc0EgmDTOiJxb/Q5ha/mlYCeDgoQPh9JXRzNh/ndmnMiFMLf/O7FOZ01dGM2lYFWDyOTyV/NNw3vd2zQsD+aHMxOJ/CFPLf/d3BzMD+aFMGlcFmEr+AAAAAAAA0AjmTZztnxs6nniDE5sHfvr0tkIIoey90u83HCTfZy3NtJB/4+6dGkcyO8Zm+YcQwunsU4m3N7atEO6vChBCCOVWBjh46EBN9llrM1nJYibvaQQTZ/sP5JNvb2LzwAtPdBVCCKHcygD3Gw6S7xMAAAAAAAC4zyzWGqt0K4DYy/1Tf9VuBRB7yX/qq9otBdK+5P9w77pCZ9/ZkjkO964rfPPu7YrvP3zmXMXfz3DvuqLfb7l9xXJkS39hx8n1JWM6sqW/cOHO1yu+v1r+R7b0F+Vfbl+xHMvfLGzvXlQypmP5m4WDT3yu4vsHBwcr5nMsf7Mo/3L7iuWh3NGK1//o7cqNgv/9xd0V85m8/avZxxsq/xN9+wtbe58pGdOJvv2F137wk4rvr3b+n+jbX5R/uX3F8uq131U8/muWfKih4p1sZz5fFP8bX/5K0fj5cz9v6PiT2rVhVVH+r7x1q2j88uXLqc6/+7FtRfkXrl8sGq/2+dzsBvufL8r/6KEfFY1X+3xqdpM/Xw9+O1c0nvbr/9Ge4u+X58+eLBrv6OhIdf4AAACkU/rW6wYAiKBcUb5acwDpUK7IX605AAAAAACgljQA1MnitvbwyeyXzBZoUZNn+ldbGWAmsiuWFqwo0LjGZvtXWxUAAAAAAAAAamVO7ADS6sbdykv9km4TC/71KP4DAAAAAAAATGb2cEKvn3q2bHF39ea9U/79ltvOdLbB7KtU3B+bnZ+kAaDSDH8rAMRXaXZ/LVYAGNtGoxruXVcyt3fvvhc+3vaREEIIv7l9J3xiYfusxjWms+9sXX9/R7b0P5D/jpPrS+6z1GvrrVwstXIsf7Ohm5u2dy+qa/6llvVvpFsAlIulVibfM7rRbO19pq75l1rWv5a3ACi3rVrZmc8nOn7f6+5u6L9P1ezasCpR/s1+T/jux7Ylyj//0vGmzn+w//lE+Xet39PU+Sf9/K7352u9PdpT+vvrVP1qoL7fLwEAAKAW3AIgobEC/eQC/uK26RW8ym2HxpYbGsmUKvBPLMxXeo3VAZpbbuBCZqYF/kYv7jMzR7b0FyYX3mMU/4njodzRwuTCe4ziP3G8eu13hcmF+5kU/wEAAAAAktAAUCOTC/gzvQWAGf/Np9RM/0qz8yc3B9Q/QuppujP9Ff7TT8H/vt8Ovz3++OHORyJGMrsU/O+79Obw+ONP/XFntDhmm4I/AAAAABCbBoAaW715b8Ys/tY0cUb/5ML+2FgtC/6aBxrXxCJ/klUCoNk93PlIUSMAUzd6e2aNhGmRfXhh7BAASKH2RR+NHQIAAADUnQaAOtAE0NqmMvOf9JlKob9VZv//S7gXvvZ/j38493/GHzM9k28l0IwU/2funU1PJnr/grC7RpHMTCvN+geaS9f6PU3/95WZy7903PEHAAAg9TQA1Iml/FuTIj+E8LW2hSUf01qSLvt//d3yzQPv30u0aQAAAAAASC0NAABAw/nq5u6WbqhaMH9+S+cPAAAAAMDMaAAAoGZ+U+a+5Z9Y2D7LkQAAAAAAALQeDQAANZIbuJDJ9qwslBub7XgAqI81Sz7kM72J/eLa72OHAAAAAAB1owEAgIb07t33YocARHLp11djh5Bqt0dGYodARHduXo8dQlS7Nqwq2aw5VYfPnGvqBqBLbw7HDiGqW7duJTr+HR0dTX38AQAAaA0aAABqqNRM/7TO/v/m3dsPPjn3/v+2/tO/hhBCOPF3f3n/iVKvraLR/4H9wp2vlx174cX/DCGEsPsLn5mtcGbdwSc+V3bsn0++GEII4W+3fGG2wpl1o2Vud9EqXvvBT8qOfePffhxCCGHfX3x+xttv9Ou/UgGxFtd/vfN/51vP1XPzNLi2ezdih0BEL7/8VuwQAAAAgDqbEzsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgfjKxAwCAEEIY7l1XmPhzZ9/ZlvobdWRLf1H+O06ub6n8j+VvFuW/vXtRS+X/UO5oUf5Xs4+3VP4n+vYX5b+195mWyr/Z7czni47fG1/+StH4+XM/T/Xx3LVhVVH+r7x1q2j88uXLqc6/+7FtRfkXrl8sGh8cHEx1/oP9zxflf/TQj4rGD585l+r8J39+H/x2rmg87df/oz3F31/Pnz1ZNN7R0ZHq/AEAAGhMc2IHAAAAAAAAAAAkpwEAGkh2xdJC9VcBAAAAAAAAPEgDAAAAAAAAAACkgPvRQQPJrlhayA2NuC5pCcO96xKteNHZd7apr5UjW/oT5b/j5Pqmzv9Y/mai/Ld3L2rq/B/KHU2U/9Xs402d/+R7Rk/X1t5nmjr/Zrczn090/L7X3d3Ux2/XhlWJ8m/2e8J3P7YtUf75l443df6D/c8nyr9r/Z6mzr/VP78f7Un2/fVXA839/RUAAIDmYAUAAAAAAAAAAEgBDQAAAAAAAAAAkALzYgcA/D/L/wO0htHbd2KHEFX24YWxQwCAaWtf9NHYIQAAAEBVGgAAIIIdJ9dr+Glh72x6MtH7F4TdNYoEgOnoWr/H3+8Wln/puOMPAABAw9MAAADMut8Ovx07BAAAAAAASB0NAADArPuHP+9u6Rl0C+bPb+n8AQAAAACojzmxAwAAAAAAAAAAkrMCAAAAwBT94trvY4cAAAAAAGVpAAAginfvvhc7BCCSS7++GjsEErg9MhI7BCK6c/N67BCi2rVhVSHJ+w+fOdfUt4C59OZw7BCiunXrVqLj39HR0dTHHwAAgOagAQCAKD595jX/AAotas3251z/Teydbz0XOwQiart3I3YIRPTyy2/FDgEAAACoYk7sAAAAAAAAAACA5P4XQpzs9noAFO8AAAAASUVORK5CYII="},72319:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAABmJLR0QA/wD/AP+gvaeTAAAAU0lEQVQokWOcHbntPwMaSF3uxYguxsDAwIBNLROxCrGJMTAwMDDikiAWYHUBKQDDr4RchB4+FLtg1AAGBhZ0gXOfm+Hs/vWHGBgYGBgKA+1o5wIAhRMYAC54iVwAAAAASUVORK5CYII="},85908:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAAXklEQVQYlWM8tqHjPwMewIRPEqsCUR5eBlEeXuwKkCVgbCZRHl4GI+9ihrKre+CSiSfXM8japzFoamgyMInIyDAwMDAwvFr4hEFERoZBREaG4dXCJ3DFjO9vbKTMFwAY2xM3oMZViQAAAABJRU5ErkJggg=="},33430:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAYAAACwXJejAAAABmJLR0QA/wD/AP+gvaeTAAAAKElEQVQYlWPM9LH8z4AEpm85zoguxsRABBjeilhOPf+FIYguRmc3AQDdaAtdkGFLoQAAAABJRU5ErkJggg=="},7932:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAABmJLR0QA/wD/AP+gvaeTAAAAZ0lEQVQokWOU2jPnPwMaeOaSwoguxsDAwIBNLROxCrGJMTAwMDDikiAWsPz9+BlFgJmfF68GdPWMP37/RnGB0sGFeA24Zx+PwscaBqQAJg5WVkZkTEgDunrKXTDgBrCgC6BHE81dAADuvh4lpHA/yAAAAABJRU5ErkJggg=="},47712:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAAZUlEQVQYlWN00Zf9z4AHMOGTxKqgyteRocrXEbsCZAkYm6nK15Fhy5l7DNIqa+GSC6/nMFjVz2Wo8nVkYJJTlGBgYGBgOH45jkFOUYJBTlGC4fjlOAYGBgYGOUUJBsY7c8so8wUAlMEWjDgPss0AAAAASUVORK5CYII="},13063:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAABmJLR0QA/wD/AP+gvaeTAAAAaUlEQVQokWNctqL+PwMFgIkSzQwMDAwshBRcv/YAztbUUsA0wEWOH0Vgz6OPeA1EV0/QBdhsRQYUh8EwMIDl+u1nqCLs3Hg1oKtnRFeQ6WMJT5ltq7cyMDAwMFSFesPlp285jqKHYi8AAHNlFhGWFkdWAAAAAElFTkSuQmCC"},85874:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAYAAACwXJejAAAABmJLR0QA/wD/AP+gvaeTAAAAMElEQVQYlWNctqL+PwMSiIpoZEQXY2IgAowqYmC5fu0BhiC6GMvu3XcwFKGLEWUdAJ5zEKbopMRpAAAAAElFTkSuQmCC"},52118:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAAZUlEQVQYlWP0U2P+z4AHMOGTJE/BpGktDJOmtcD5LDCGoO5xhsbMvQwMDAwM9dOdGVZdLWF4cbCHgeH/g43/f/z+/V9NTeP//wcb//9/sPG/mprG/x+/f////2Djf8b/DzZS5gsA3GIpletnM6oAAAAASUVORK5CYII="},77237:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAABmJLR0QA/wD/AP+gvaeTAAAARklEQVQokWNgQAMHn//8jy6GT46JWIW4DGYhxTZsAKsLSAGjBgwGwIgukOljCY///vWHGBgYGBgKA+3g8tO3HEfRQ3EYAAAZ8hk0ZXMJlQAAAABJRU5ErkJggg=="},918:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAABmJLR0QA/wD/AP+gvaeTAAAAYklEQVQokWNceObdfwYKABMlmhkYGBhYCCl49OAenC2noESeC7BpJMkAZFegA5ZXTxCSP/5g2obORzeMEd1EQrESbyKEoofiWBh4AzDSwaR0Vzh7wvL1DAwMDAwFkYG0cwEAOtYZtcKzKcgAAAAASUVORK5CYII="},28880:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAYAAACwXJejAAAABmJLR0QA/wD/AP+gvaeTAAAANUlEQVQYlWNUN/f4z4AEbp7cwYguxsRABCBKEQuvkBiGIDaxIQkY379/jxJwgoKCGGLUC0wACIMN6sJ3AA0AAAAASUVORK5CYII="},46633:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAYAAACwXJejAAAABmJLR0QA/wD/AP+gvaeTAAAAMElEQVQYlWM08Yz7z4AEzmxfxIguxsRABBhVxMDy+d0rDEF0MRaeP68xFKGLEWUdAACfD3JhNCu8AAAAAElFTkSuQmCC"},72173:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAAb0lEQVQYlWM0N9H/z4AHMOGTJEoBCwMDA0OEMQvDirN/GCKMWVAkV5z9w8AUYczCkDnlBEOwEh9c4vd7LobMKScYIoxZGJjUFEQZGBgYGOZceM2gpiDKoKYgyjDnwmsGBgYGBjUFUQbGre0elPkCAOh7F2aOwoumAAAAAElFTkSuQmCC"},51899:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAAXElEQVQYlWN0MTf6z4AHMOGTxKrAXleSwV5XErsCZAkYm4mBgYFhy5GTDDxczHDJs3dfMZRO34BqwrWnnxk4eQQYOHkEGK49/QxXzOhibvTfw1ITqwN3HL9O2BcAwlIUyxiVJ0IAAAAASUVORK5CYII="},61212:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAYAAACwXJejAAAABmJLR0QA/wD/AP+gvaeTAAAALUlEQVQYlWM8u633PwMSMPYqZkQXY2IgAlBP0ZAFjJk+ligBN33LcQwx6oUTACiWDQn4dpdQAAAAAElFTkSuQmCC"},9567:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAACVJREFUGJVj+P///38GKMDFhnPQaeLAfyggJEbYFJxuIMoX+AAAfZM/wcpTlRQAAAAASUVORK5CYII="},80521:function(w){"use strict";w.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABGdBTUEAALGOfPtRkwAAACxJREFUGJVjYKA6+P///39kPiMWCUYGBgYGRkZGBqzgPxTA+CxYjMehlVwAAAJKE/fy//W5AAAAAElFTkSuQmCC"},11442:function(w){"use strict";w.exports=JSON.parse('{"Dirt":[133,92,73],"Messy Dirt":[115,75,59],"Grass Block":[104,163,77],"Sand":[223,211,167],"Clay":[164,174,183],"Gravel":[125,125,127],"Snow":[230,235,235],"Maple Log":[128,94,57],"Pine Log":[66,43,23],"Plum Log":[92,84,76],"Cedar Log":[57,43,24],"Aspen Log":[187,184,159],"Elm Log":[97,77,23],"Maple Wood Planks":[170,137,82],"Aspen Wood Planks":[192,172,122],"Plum Wood Planks":[167,91,46],"Elm Wood Planks":[159,117,82],"Pine Wood Planks":[115,84,48],"Cedar Wood Planks":[75,48,23],"Barkless Maple Log":[167,134,80],"Barkless Aspen Log":[189,168,120],"Barkless Plum Log":[163,88,44],"Barkless Elm Log":[157,113,79],"Barkless Pine Log":[114,83,48],"Barkless Cedar Log":[73,46,22],"free_placeholder2":[133,129,129],"Stone":[150,146,146],"Messy Stone":[133,129,129],"free_placeholder":[133,129,129],"Smooth Stone":[148,145,145],"Diorite":[210,206,201],"Smooth Diorite":[199,194,190],"Andesite":[130,134,139],"Smooth Andesite":[126,129,134],"Granite":[156,106,88],"Smooth Granite":[153,102,83],"Sandstone":[220,206,162],"Yellowstone":[234,234,168],"Coal Ore":[114,112,112],"Iron Ore":[159,151,144],"Gold Ore":[165,151,110],"Lapis Lazuli Ore":[115,118,134],"Emerald Ore":[117,159,128],"Diamond Ore":[118,160,150],"Block of Coal":[19,19,19],"Block of Iron":[235,232,227],"Block of Gold":[248,209,63],"Block of Lapis Lazuli":[48,111,186],"Block of Emerald":[45,216,105],"White Wool":[238,239,240],"Orange Wool":[245,122,24],"Magenta Wool":[194,69,181],"Light Blue Wool":[56,183,222],"Yellow Wool":[251,202,49],"Lime Wool":[121,191,26],"Pink Wool":[247,145,177],"Gray Wool":[66,72,76],"Light Gray Wool":[146,146,140],"Cyan Wool":[22,143,148],"Purple Wool":[126,41,175],"Blue Wool":[54,60,159],"Brown Wool":[117,74,41],"Green Wool":[88,112,29],"Red Wool":[165,39,34],"Black Wool":[23,24,29],"Baked Clay":[150,93,67],"White Baked Clay":[210,177,161],"Orange Baked Clay":[162,83,38],"Magenta Baked Clay":[149,87,108],"Light Blue Baked Clay":[112,108,138],"Yellow Baked Clay":[186,133,36],"Lime Baked Clay":[103,117,53],"Pink Baked Clay":[162,78,79],"Gray Baked Clay":[58,42,36],"Light Gray Baked Clay":[135,107,98],"Cyan Baked Clay":[85,90,90],"Purple Baked Clay":[118,70,86],"Blue Baked Clay":[73,59,91],"Brown Baked Clay":[77,50,35],"Green Baked Clay":[75,82,40],"Red Baked Clay":[142,61,47],"Black Baked Clay":[36,21,15],"Gray Concrete":[55,58,62],"Light Gray Concrete":[125,125,115],"Black Concrete":[9,11,16],"Blue Concrete":[45,47,144],"Brown Concrete":[97,60,32],"Cyan Concrete":[21,119,135],"Light Blue Concrete":[37,138,200],"Lime Concrete":[95,170,25],"Magenta Concrete":[169,48,159],"Orange Concrete":[225,97,0],"Pink Concrete":[214,101,143],"Purple Concrete":[101,32,157],"Red Concrete":[143,33,33],"White Concrete":[208,214,215],"Green Concrete":[73,91,36],"Yellow Concrete":[242,176,21],"Pine Leaves":[25,47,14],"Aspen Leaves":[51,122,24],"Maple Leaves":[49,92,29],"Elm Leaves":[40,135,11],"Pumpkin_placeholder":[198,134,45],"Watermelon":[126,156,30],"Glass":[184,222,221],"Black Glass":[27,29,31],"Blue Glass":[97,133,213],"Brown Glass":[153,119,93],"Cyan Glass":[41,140,156],"Gray Glass":[90,95,98],"Light Gray Glass":[172,176,182],"Green Glass":[106,124,66],"Light Blue Glass":[126,183,243],"Lime Glass":[181,225,138],"Magenta Glass":[185,73,176],"Orange Glass":[244,148,74],"Pink Glass":[242,149,183],"Purple Glass":[122,61,172],"Red Glass":[168,58,58],"White Glass":[240,242,242],"Yellow Glass":[249,211,122],"UNUSED BLOCK TYPE":[156,156,156],"Dim Lamp On":[126,85,45],"Dim Lamp Off":[75,39,11],"Invisible Solid":[0,0,0],"Bricks":[149,98,83],"Stone Bricks":[135,131,131],"Dark Red Brick":[68,34,39],"Dark Red Stone":[100,45,42],"Block of Quartz":[251,248,239],"Chiseled Block of Quartz":[241,235,223],"Engraved Stone":[125,121,121],"Mossy Stone Bricks":[128,129,117],"Cracked Stone Bricks":[132,128,128],"Smooth Sandstone":[230,222,177],"Engraved Sandstone":[221,207,163],"Ice":[139,208,253],"Obsidian":[28,17,44],"Hay Bale":[180,130,32],"Sponge":[185,174,55],"Beacon":[209,242,250],"Golden Decoration":[179,138,92],"Moonstone Explosive":[191,197,217],"Bedrock":[33,33,34],"Smooth Double Stone Slab":[148,145,145],"Cactus":[93,154,47],"Tall Grass":[122,173,71],"Dandelion":[195,196,60],"Poppy":[135,93,37],"Red Tulip":[118,117,40],"Pink Tulip":[118,163,104],"White Tulip":[121,178,103],"Orange Tulip":[120,150,38],"Daisy":[192,205,137],"Bluebell":[48,171,195],"Forget-me-not":[70,115,160],"Allium":[140,123,170],"Azure Bluet":[198,217,192],"Lily of the Valley":[121,176,103],"Wither Rose":[51,51,30],"Furnace":[88,85,85],"Workbench":[131,97,61],"Block of Diamond":[70,211,202],"Maple Door":[164,143,94],"_Maple Door Top":[164,143,94],"Maple Trapdoor":[150,116,71],"Aspen Sapling":[149,176,95],"Maple Sapling":[84,107,43],"Elm Sapling":[48,87,19],"Plum Sapling":[122,131,27],"Pine Sapling":[64,76,47],"Cedar Sapling":[58,105,40],"Maple Log|TreeBase":[128,94,57],"Chest":[109,81,42],"Pine Leaves|TreeCanopy":[25,47,14],"Aspen Leaves|TreeCanopy":[51,122,24],"Maple Leaves|TreeCanopy":[49,92,29],"Elm Leaves|TreeCanopy":[40,135,11],"Protector":[128,135,133],"Fat Cactus":[104,165,46],"Dry Fat Cactus":[140,96,40],"Ladder":[151,115,71],"Vines":[70,103,42],"Dirt|GrassRoots":[133,92,73],"Iron Ladder":[165,172,174],"White Planks":[246,237,222],"Orange Planks":[205,121,63],"Magenta Planks":[152,75,122],"Light Blue Planks":[81,148,165],"Yellow Planks":[213,178,78],"Lime Planks":[149,168,82],"Pink Planks":[192,119,145],"Gray Planks":[78,74,68],"Light Gray Planks":[147,142,133],"Cyan Planks":[100,167,167],"Purple Planks":[144,107,167],"Blue Planks":[82,89,168],"Brown Planks":[126,90,62],"Green Planks":[98,113,56],"Red Planks":[167,69,66],"Black Planks":[35,32,28],"Artisan Bench":[117,91,74],"White Ceramic":[185,216,202],"Orange Ceramic":[157,153,97],"Magenta Ceramic":[215,115,195],"Light Blue Ceramic":[113,168,208],"Yellow Ceramic":[233,192,88],"Lime Ceramic":[161,202,66],"Pink Ceramic":[234,159,184],"Gray Ceramic":[85,92,95],"Light Gray Ceramic":[124,156,159],"Cyan Ceramic":[52,103,111],"Purple Ceramic":[105,47,144],"Blue Ceramic":[35,70,133],"Brown Ceramic":[133,113,92],"Green Ceramic":[115,139,67],"Red Ceramic":[181,59,53],"Black Ceramic":[77,28,30],"Wheat Seeds":[7,156,18],"Wheat_stage1":[6,152,18],"Wheat_stage2":[6,152,18],"Wheat_stage3":[42,148,15],"Wheat_stage4":[73,144,12],"Wheat_stage5":[109,140,9],"Wheat":[209,173,92],"Wheat|FreshlyGrown":[209,173,92],"Tilled Soil":[159,107,71],"Bread Block":[181,125,33],"ReservedBread BlockRotation1":[181,125,33],"ReservedBread BlockRotation2":[181,125,33],"ReservedBread BlockRotation3":[181,125,33],"Mossy Messy Stone":[120,123,108],"Dandelion|Roots":[195,196,60],"Poppy|Roots":[135,93,37],"Red Tulip|Roots":[118,117,40],"Pink Tulip|Roots":[118,163,104],"White Tulip|Roots":[121,178,103],"Orange Tulip|Roots":[120,150,38],"Daisy|Roots":[192,205,137],"Bluebell|Roots":[48,171,195],"Forget-me-not|Roots":[70,115,160],"Allium|Roots":[140,123,170],"Azure Bluet|Roots":[198,217,192],"Lily of the Valley|Roots":[121,176,103],"Wither Rose|Roots":[51,51,30],"White Bed":[164,143,94],"_White Bed Head":[164,143,94],"Orange Bed":[164,143,94],"_Orange Bed Head":[164,143,94],"Magenta Bed":[164,143,94],"_Magenta Bed Head":[164,143,94],"Light Blue Bed":[164,143,94],"_Light Blue Bed Head":[164,143,94],"Yellow Bed":[164,143,94],"_Yellow Bed Head":[164,143,94],"Lime Bed":[164,143,94],"_Lime Bed Head":[164,143,94],"Pink Bed":[164,143,94],"_Pink Bed Head":[164,143,94],"Gray Bed":[164,143,94],"_Gray Bed Head":[164,143,94],"Light Gray Bed":[164,143,94],"_Light Gray Bed Head":[164,143,94],"Cyan Bed":[164,143,94],"_Cyan Bed Head":[164,143,94],"Purple Bed":[164,143,94],"_Purple Bed Head":[164,143,94],"Blue Bed":[164,143,94],"_Blue Bed Head":[164,143,94],"Brown Bed":[164,143,94],"_Brown Bed Head":[164,143,94],"Green Bed":[164,143,94],"_Green Bed Head":[164,143,94],"Red Bed":[164,143,94],"_Red Bed Head":[164,143,94],"Black Bed":[164,143,94],"_Black Bed Head":[164,143,94],"Apple Block":[189,34,37],"Moonstone Ore":[159,156,164],"Moonstone Chest":[139,137,147],"Block of Moonstone":[196,205,238],"Magma":[150,66,32],"Useless Soil":[100,66,24],"Marked Sandstone":[225,213,169],"Red Sandstone":[194,96,31],"Smooth Red Sandstone":[203,110,36],"Engraved Red Sandstone":[195,100,32],"Marked Red Sandstone":[198,104,34],"Green Stone":[107,166,147],"Green Bricks":[83,159,143],"Dark Green Bricks":[53,118,96],"Sandstone Bricks":[223,211,167],"Engraved Diorite":[232,230,225],"Diorite Bricks":[231,229,224],"Engraved Andesite":[112,116,121],"Andesite Bricks":[120,124,129],"Engraved Granite":[145,95,77],"Granite Bricks":[148,98,80],"Ice Bricks":[166,216,247],"Placeholder Packed Ice":[166,216,247],"Placeholder Blue Ice":[166,216,247],"Plum Leaves":[51,102,44],"Cedar Leaves":[33,60,17],"Palm Leaves":[79,164,54],"Plum Leaves|TreeCanopy":[51,102,44],"Cedar Leaves|TreeCanopy":[33,60,17],"Palm Leaves|TreeCanopy":[79,164,54],"Pine Log|TreeBase":[66,43,23],"Plum Log|TreeBase":[92,84,76],"Cedar Log|TreeBase":[57,43,24],"Aspen Log|TreeBase":[187,184,159],"Elm Log|TreeBase":[97,77,23],"Palm Log":[94,88,45],"Palm Log|TreeBase":[94,88,45],"Palm Wood Planks":[209,149,71],"Palm Sapling":[55,127,20],"Pine Door":[164,143,94],"_Pine Door Top":[164,143,94],"Plum Door":[164,143,94],"_Plum Door Top":[164,143,94],"Cedar Door":[164,143,94],"_Cedar Door Top":[164,143,94],"Aspen Door":[164,143,94],"_Aspen Door Top":[164,143,94],"Elm Door":[164,143,94],"_Elm Door Top":[164,143,94],"Palm Door":[164,143,94],"_Palm Door Top":[164,143,94],"Pine Trapdoor":[97,74,49],"Plum Trapdoor":[171,94,48],"Cedar Trapdoor":[62,37,18],"Aspen Trapdoor":[226,215,181],"Elm Trapdoor":[140,99,71],"Palm Trapdoor":[194,138,66],"Red Sand":[197,100,32],"Red Sandstone Bricks":[197,103,33],"Rocky Dirt":[131,95,78],"Autumn Maple Leaves":[191,113,31],"Autumn Maple Leaves|TreeCanopy":[191,113,31],"Fallen Maple Leaves":[191,114,31],"Maple Slab":[170,137,82],"Pine Slab":[115,84,48],"Plum Slab":[167,91,46],"Cedar Slab":[75,48,23],"Aspen Slab":[192,172,122],"Elm Slab":[159,117,82],"Palm Slab":[209,149,71],"Dirt Slab":[133,92,73],"Grass Slab":[104,163,77],"Messy Stone Slab":[131,127,127],"Stone Slab":[150,146,146],"Smooth Stone Slab":[148,145,145],"Engraved Stone Slab":[125,121,121],"Stone Bricks Slab":[134,130,130],"Mossy Stone Slab":[120,122,110],"Mossy Stone Bricks Slab":[125,127,113],"Andesite Slab":[130,134,139],"Smooth Andesite Slab":[119,122,128],"Engraved Andesite Slab":[112,116,121],"Andesite Bricks Slab":[119,123,129],"Diorite Slab":[209,205,200],"Smooth Diorite Slab":[190,185,181],"Engraved Diorite Slab":[232,229,224],"Diorite Bricks Slab":[230,228,223],"Granite Slab":[156,106,88],"Smooth Granite Slab":[145,95,77],"Engraved Granite Slab":[145,95,77],"Granite Bricks Slab":[148,97,79],"Sandstone Slab":[219,204,160],"Smooth Sandstone Slab":[230,222,177],"Engraved Sandstone Slab":[222,209,165],"Marked Sandstone Slab":[225,213,169],"Sandstone Bricks Slab":[223,210,166],"Red Sandstone Slab":[193,95,30],"Smooth Red Sandstone Slab":[203,110,36],"Engraved Red Sandstone Slab":[196,102,33],"Marked Red Sandstone Slab":[198,104,34],"Red Sandstone Bricks Slab":[197,102,33],"Bricks Slab":[149,98,84],"Ice Bricks Slab":[167,216,247],"Cactus|Growing":[93,154,47],"Fat Cactus|Growing":[104,165,46],"Plum Block":[161,26,161],"Coconut Block":[132,98,44],"Pear Log":[100,100,100],"Pear Wood Planks":[132,101,90],"Pear Leaves":[231,241,218],"Pear Door":[164,143,94],"_Pear Door Top":[164,143,94],"Pear Trapdoor":[138,107,96],"Pear Sapling":[195,199,190],"Pear Log|TreeBase":[100,100,100],"Pear Leaves|TreeCanopy":[231,241,218],"Pear Slab":[132,101,90],"Pear Block":[251,235,78],"Compressed Messy Stone":[100,100,100],"Extra Compressed Messy Stone":[93,93,93],"Super Compressed Messy Stone":[70,70,70],"Hyper Compressed Messy Stone":[65,65,65],"Ultra Compressed Messy Stone":[56,56,56],"Mega Compressed Messy Stone":[48,48,48],"Board":[175,143,85],"Net":[170,104,63],"Cobweb":[236,233,218],"Brown Mushroom Block":[193,151,119],"Red Mushroom Block":[227,82,67],"Mushroom Stem":[203,196,185],"Fireball Block":[245,102,27],"Iceball Block":[27,162,244],"Watermelon Seeds":[67,93,3],"Watermelon Seeds|Growing":[67,93,3],"Attached Watermelon Stem":[66,91,3],"Pumpkin Seeds":[67,93,3],"Pumpkin Seeds|Growing":[67,93,3],"Attached Pumpkin Stem":[66,91,3],"Pumpkin":[183,98,15],"Carved Pumpkin":[157,79,11],"Jack o\'Lantern":[198,134,45],"Melon Seeds":[67,93,3],"Melon Seeds|Growing":[67,93,3],"Attached Melon Stem":[66,91,3],"Melon":[243,233,84],"Iron Watermelon":[232,229,223],"Patterned Black Glass":[29,39,46],"Patterned Blue Glass":[85,125,212],"Patterned Brown Glass":[122,81,51],"Patterned Cyan Glass":[84,168,182],"Patterned Gray Glass":[82,86,90],"Patterned Light Gray Glass":[173,177,184],"Patterned Green Glass":[119,127,50],"Patterned Light Blue Glass":[143,192,244],"Patterned Lime Glass":[157,215,101],"Patterned Magenta Glass":[168,71,160],"Patterned Orange Glass":[230,124,43],"Patterned Pink Glass":[244,173,199],"Patterned Purple Glass":[110,49,160],"Patterned Red Glass":[178,58,58],"Patterned White Glass":[246,247,247],"Patterned Yellow Glass":[249,207,111],"Potion Table":[47,41,34],"Pine Ladder":[105,74,42],"Plum Ladder":[169,93,47],"Cedar Ladder":[72,45,22],"Aspen Ladder":[194,174,124],"Elm Ladder":[161,119,83],"Palm Ladder":[208,148,70],"Pear Ladder":[137,106,95],"Black Carpet":[11,12,14],"Blue Carpet":[26,29,76],"Brown Carpet":[57,36,20],"Cyan Carpet":[11,69,71],"Gray Carpet":[32,34,36],"Light Gray Carpet":[70,70,67],"Green Carpet":[42,54,14],"Light Blue Carpet":[27,88,106],"Lime Carpet":[59,92,12],"Magenta Carpet":[93,33,87],"Orange Carpet":[117,59,12],"Pink Carpet":[118,70,85],"Purple Carpet":[61,20,84],"Red Carpet":[79,19,16],"White Carpet":[114,115,115],"Yellow Carpet":[119,97,25],"Bookshelf":[124,118,82],"Empty Bookshelf":[115,80,50]}')}}]);